var Hk=Object.defineProperty;var qk=(t,e,n)=>e in t?Hk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var n0=(t,e,n)=>qk(t,typeof e!="symbol"?e+"":e,n);function $k(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r0={exports:{}},Bh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function Gk(){if(Pw)return Bh;Pw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:o}}return Bh.Fragment=e,Bh.jsx=n,Bh.jsxs=n,Bh}var Mw;function Wk(){return Mw||(Mw=1,r0.exports=Gk()),r0.exports}var j=Wk(),jg={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.14.0
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/var Kk=jg.exports,kw;function Yk(){return kw||(kw=1,function(t,e){(function(n,r){t.exports=r()})(Kk,()=>{var n={},r={exports:n},i=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,C=(u,f,m)=>f in u?i(u,f,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[f]=m,O=(u,f)=>{for(var m in f||(f={}))b.call(f,m)&&C(u,m,f[m]);if(g)for(var m of g(f))E.call(f,m)&&C(u,m,f[m]);return u},x=(u,f)=>o(u,d(f)),N=(u,f)=>{var m={};for(var _ in u)b.call(u,_)&&f.indexOf(_)<0&&(m[_]=u[_]);if(u!=null&&g)for(var _ of g(u))f.indexOf(_)<0&&E.call(u,_)&&(m[_]=u[_]);return m},k=(u,f)=>{for(var m in f)i(u,m,{get:f[m],enumerable:!0})},V=(u,f,m,_)=>{if(f&&typeof f=="object"||typeof f=="function")for(let w of p(f))!b.call(u,w)&&w!==m&&i(u,w,{get:()=>f[w],enumerable:!(_=c(f,w))||_.enumerable});return u},X=u=>V(i({},"__esModule",{value:!0}),u),q={};k(q,{ErrorInfo:()=>ne,Realtime:()=>xs,Rest:()=>gu,default:()=>Mp,makeProtocolMessageFromDeserialized:()=>Yf,msgpack:()=>Qa}),r.exports=X(q);var H=class{},W=typeof yl<"u"?yl:typeof window<"u"?window:self;function $(u,f){return`${u}`.padStart(f?3:2,"0")}function F(u){return H.Config.logTimestamps?function(f){const m=new Date;u($(m.getHours())+":"+$(m.getMinutes())+":"+$(m.getSeconds())+"."+$(m.getMilliseconds(),1)+" "+f)}:function(f){u(f)}}var D=()=>{var u;let f,m;return typeof((u=W==null?void 0:W.console)==null?void 0:u.log)=="function"?(f=function(..._){console.log.apply(console,_)},m=console.warn?function(..._){console.warn.apply(console,_)}:f):f=m=function(){},[f,m].map(F)},L=class Yh{constructor(){this.deprecated=(f,m)=>{this.deprecationWarning(`${f} is deprecated and will be removed in a future version. ${m}`)},this.shouldLog=f=>f<=this.logLevel,this.setLog=(f,m)=>{f!==void 0&&(this.logLevel=f),m!==void 0&&(this.logHandler=this.logErrorHandler=m)},this.logLevel=Yh.defaultLogLevel,this.logHandler=Yh.defaultLogHandler,this.logErrorHandler=Yh.defaultLogErrorHandler}static initLogHandlers(){const[f,m]=D();this.defaultLogHandler=f,this.defaultLogErrorHandler=m,this.defaultLogger=new Yh}static logActionNoStrip(f,m,_,w){f.logAction(m,_,w)}logAction(f,m,_){this.shouldLog(f)&&(f===1?this.logErrorHandler:this.logHandler)("Ably: "+m+": "+_,f)}renamedClientOption(f,m){this.deprecationWarning(`The \`${f}\` client option has been renamed to \`${m}\`. Please update your code to use \`${m}\` instead. \`${f}\` will be removed in a future version.`)}renamedMethod(f,m,_){this.deprecationWarning(`\`${f}\`’s \`${m}\` method has been renamed to \`${_}\`. Please update your code to use \`${_}\` instead. \`${m}\` will be removed in a future version.`)}deprecationWarning(f){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${f}`,1)}};L.defaultLogLevel=1,L.LOG_NONE=0,L.LOG_ERROR=1,L.LOG_MAJOR=2,L.LOG_MINOR=3,L.LOG_MICRO=4,L.logAction=(u,f,m,_)=>{L.logActionNoStrip(u,f,m,_)};var G=L,T=G,te={};k(te,{Format:()=>ms,allSame:()=>Ur,allToLowerCase:()=>Ws,allToUpperCase:()=>ti,arrChooseN:()=>jt,arrDeleteValue:()=>Gt,arrEquals:()=>Qi,arrIntersect:()=>gt,arrIntersectOb:()=>An,arrPopRandomElement:()=>Ln,arrWithoutValue:()=>_n,cheapRandStr:()=>Ai,containsValue:()=>Le,copy:()=>Ae,createMissingPluginError:()=>Xi,dataSizeBytes:()=>ei,decodeBody:()=>Qt,encodeBody:()=>Ht,ensureArray:()=>Ue,forInOwnNonNullProperties:()=>Sn,getBackoffCoefficient:()=>Ri,getGlobalObject:()=>wr,getJitterCoefficient:()=>Oi,getRetryTime:()=>ui,inherits:()=>qe,inspectBody:()=>hr,inspectError:()=>Tt,intersect:()=>Ot,isEmpty:()=>ge,isErrorInfoOrPartialErrorInfo:()=>un,isNil:()=>ye,isObject:()=>Q,keysArray:()=>Rn,matchDerivedChannel:()=>ni,mixin:()=>oe,parseQueryString:()=>er,prototypicalClone:()=>ke,randomString:()=>ys,shallowClone:()=>ve,shallowEquals:()=>Yi,throwMissingPluginError:()=>rn,toBase64:()=>Ii,toQueryString:()=>Er,valuesArray:()=>Lr,whenPromiseSettles:()=>nt,withTimeoutAsync:()=>fi});function K(u){let f="["+u.constructor.name;return u.message&&(f+=": "+u.message),u.statusCode&&(f+="; statusCode="+u.statusCode),u.code&&(f+="; code="+u.code),u.cause&&(f+="; cause="+Tt(u.cause)),u.href&&!(u.message&&u.message.indexOf("help.ably.io")>-1)&&(f+="; see "+u.href+" "),f+="]",f}var ne=class rb extends Error{constructor(f,m,_,w){super(f),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,rb.prototype),this.code=m,this.statusCode=_,this.cause=w}toString(){return K(this)}static fromValues(f){const{message:m,code:_,statusCode:w}=f;if(typeof m!="string"||typeof _!="number"||typeof w!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+H.Config.inspect(f));const R=Object.assign(new rb(m,_,w),f);return R.code&&!R.href&&(R.href="https://help.ably.io/error/"+R.code),R}},Pe=class ib extends Error{constructor(f,m,_,w){super(f),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,ib.prototype),this.code=m,this.statusCode=_,this.cause=w}toString(){return K(this)}static fromValues(f){const{message:m,code:_,statusCode:w}=f;if(typeof m!="string"||!ye(_)&&typeof _!="number"||!ye(w)&&typeof w!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+H.Config.inspect(f));const R=Object.assign(new ib(m,_,w),f);return R.code&&!R.href&&(R.href="https://help.ably.io/error/"+R.code),R}};function J(u){return Math.floor(Math.random()*u.length)}function oe(u,...f){for(let m=0;m<f.length;m++){const _=f[m];if(!_)break;for(const w in _)Object.prototype.hasOwnProperty.call(_,w)&&(u[w]=_[w])}return u}function Ae(u){return oe({},u)}function Ue(u){return ye(u)?[]:Array.isArray(u)?u:[u]}function Q(u){return Object.prototype.toString.call(u)=="[object Object]"}function ge(u){for(const f in u)return!1;return!0}function ye(u){return u==null}function ve(u){const f=new Object;for(const m in u)f[m]=u[m];return f}function ke(u,f){class m{}m.prototype=u;const _=new m;return f&&oe(_,f),_}var qe=function(u,f){if(H.Config.inherits){H.Config.inherits(u,f);return}u.super_=f,u.prototype=ke(f.prototype,{constructor:u})};function Le(u,f){for(const m in u)if(u[m]==f)return!0;return!1}function Ot(u,f){return Array.isArray(f)?gt(u,f):An(u,f)}function gt(u,f){const m=[];for(let _=0;_<u.length;_++){const w=u[_];f.indexOf(w)!=-1&&m.push(w)}return m}function An(u,f){const m=[];for(let _=0;_<u.length;_++){const w=u[_];w in f&&m.push(w)}return m}function Gt(u,f){const m=u.indexOf(f),_=m!=-1;return _&&u.splice(m,1),_}function _n(u,f){const m=u.slice();return Gt(m,f),m}function Rn(u,f){const m=[];for(const _ in u)f&&!Object.prototype.hasOwnProperty.call(u,_)||m.push(_);return m}function Lr(u,f){const m=[];for(const _ in u)f&&!Object.prototype.hasOwnProperty.call(u,_)||m.push(u[_]);return m}function Sn(u,f){for(const m in u)Object.prototype.hasOwnProperty.call(u,m)&&u[m]&&f(m)}function Ur(u,f){if(u.length===0)return!0;const m=u[0][f];return u.every(function(_){return _[f]===m})}var ms=(u=>(u.msgpack="msgpack",u.json="json",u))(ms||{});function Ln(u){return u.splice(J(u),1)[0]}function Er(u){const f=[];if(u)for(const m in u)f.push(encodeURIComponent(m)+"="+encodeURIComponent(u[m]));return f.length?"?"+f.join("&"):""}function er(u){let f;const m=/([^?&=]+)=?([^&]*)/g,_={};for(;f=m.exec(u);)_[decodeURIComponent(f[1])]=decodeURIComponent(f[2]);return _}function un(u){return typeof u=="object"&&u!==null&&(u instanceof ne||u instanceof Pe)}function Tt(u){var f,m;return u instanceof Error||((f=u==null?void 0:u.constructor)==null?void 0:f.name)==="ErrorInfo"||((m=u==null?void 0:u.constructor)==null?void 0:m.name)==="PartialErrorInfo"?u.toString():H.Config.inspect(u)}function hr(u){return H.BufferUtils.isBuffer(u)?u.toString():typeof u=="string"?u:H.Config.inspect(u)}function ei(u){if(H.BufferUtils.isBuffer(u))return H.BufferUtils.byteLength(u);if(typeof u=="string")return H.Config.stringByteSize(u);if(typeof u=="number")return 8;if(typeof u=="boolean")return 1;throw new Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof u}`)}function Ai(){return String(Math.random()).substr(2)}var ys=async u=>{const f=await H.Config.getRandomArrayBuffer(u);return H.BufferUtils.base64Encode(f)};function jt(u,f){const m=Math.min(f,u.length),_=u.slice(),w=[];for(let R=0;R<m;R++)w.push(Ln(_));return w}function nt(u,f){u.then(m=>{f==null||f(null,m)}).catch(m=>{f==null||f(m)})}function Qt(u,f,m){return m=="msgpack"?(f||rn("MsgPack"),f.decode(u)):JSON.parse(String(u))}function Ht(u,f,m){return m=="msgpack"?(f||rn("MsgPack"),f.encode(u,!0)):JSON.stringify(u)}function Ws(u){return u.map(function(f){return f&&f.toLowerCase()})}function ti(u){return u.map(function(f){return f&&f.toUpperCase()})}function Ri(u){return Math.min((u+2)/3,2)}function Oi(){return 1-Math.random()*.2}function ui(u,f){return u*Ri(f)*Oi()}function wr(){return typeof yl<"u"?yl:typeof window<"u"?window:self}function Yi(u,f){return Object.keys(u).every(m=>u[m]===f[m])&&Object.keys(f).every(m=>f[m]===u[m])}function ni(u){const f=/^(\[([^?]*)(?:(.*))\])?(.+)$/,m=u.match(f);if(!m||!m.length||m.length<5)throw new ne("regex match failed",400,40010);if(m[2])throw new ne(`cannot use a derived option with a ${m[2]} channel`,400,40010);return{qualifierParam:m[3]||"",channelName:m[4]}}function Ii(u){const f=H.BufferUtils,m=f.utf8Encode(u);return f.base64Encode(m)}function Qi(u,f){return u.length===f.length&&u.every(function(m,_){return m===f[_]})}function Xi(u){return new ne(`${u} plugin not provided`,40019,400)}function rn(u){throw Xi(u)}async function fi(u,f=5e3,m="Timeout expired"){const _=new ne(m,5e4,500);return Promise.race([u,new Promise((w,R)=>setTimeout(()=>R(_),f))])}var vs="2.14.0",Tr="ably-js/"+vs,On={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:vs,protocolVersion:4,agent:Tr,getPort:Ji,getHttpScheme:Ks,getPrimaryDomainFromEndpoint:ae,getEndpointFallbackHosts:ce,getFallbackHosts:Ie,getHosts:Fe,checkHost:Je,objectifyOptions:Ye,normaliseOptions:We,defaultGetHeaders:Ft,defaultPostHeaders:It};function Ji(u,f){return f||u.tls?u.tlsPort:u.port}function Ks(u){return u.tls?"https://":"http://"}function ee(u){return u.includes(".")||u.includes("::")||u==="localhost"}function ae(u){return ee(u)?u:u.startsWith("nonprod:")?`${u.replace("nonprod:","")}.realtime.ably-nonprod.net`:`${u}.realtime.ably.net`}function ce(u){if(ee(u))return[];if(u.startsWith("nonprod:")){const f=u.replace("nonprod:","");return Te(f,"ably-realtime-nonprod.com")}return Te(u,"ably-realtime.com")}function Te(u,f){return["a","b","c","d","e"].map(m=>`${u}.${m}.fallback.${f}`)}function Ie(u){const f=u.fallbackHosts,m=typeof u.httpMaxRetryCount<"u"?u.httpMaxRetryCount:On.httpMaxRetryCount;return f?jt(f,m):[]}function Fe(u){return[u.primaryDomain].concat(Ie(u))}function Je(u){if(typeof u!="string")throw new ne("host must be a string; was a "+typeof u,4e4,400);if(!u.length)throw new ne("host must not be zero-length",4e4,400)}function Be(u){const f={};for(const m in On.TIMEOUTS)f[m]=u[m]||On.TIMEOUTS[m];return f}function $e(u){let f=On.agent;if(u.agents)for(var m in u.agents)f+=" "+m+"/"+u.agents[m];return f}function Ye(u,f,m,_,w){if(u===void 0){const z=f?`${m} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${m} must be initialized with a client options object`;throw T.logAction(_,T.LOG_ERROR,`${m}()`,z),new Error(z)}let R;if(typeof u=="string")if(u.indexOf(":")==-1){if(!f){const z=`${m} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw T.logAction(_,T.LOG_ERROR,`${m}()`,z),new Error(z)}R={token:u}}else{if(!f){const z=`${m} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw T.logAction(_,T.LOG_ERROR,`${m}()`,z),new Error(z)}R={key:u}}else R=u;return w&&(R=x(O({},R),{plugins:O(O({},w),R.plugins)})),R}function it(u){if(u.endpoint&&(u.environment||u.restHost||u.realtimeHost))throw new ne("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(u.environment&&(u.restHost||u.realtimeHost))throw new ne("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}function We(u,f,m){const _=m??T.defaultLogger;u.environment&&_.deprecated("The `environment` client option","Use the `endpoint` client option instead."),u.restHost&&_.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),u.realtimeHost&&_.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),it(u),typeof u.recover=="function"&&u.closeOnUnload===!0&&(T.logAction(_,T.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),u.recover=void 0),"closeOnUnload"in u||(u.closeOnUnload=!u.recover),"queueMessages"in u||(u.queueMessages=!0);const w=u.endpoint||On.ENDPOINT;!u.fallbackHosts&&!u.restHost&&!u.realtimeHost&&!u.port&&!u.tlsPort&&(u.fallbackHosts=ce(u.environment||w));const R=u.environment&&`${u.environment}.realtime.ably.net`,Y=u.restHost||u.realtimeHost||R||ae(w);(u.fallbackHosts||[]).concat(Y).forEach(Je),u.port=u.port||On.PORT,u.tlsPort=u.tlsPort||On.TLS_PORT,"tls"in u||(u.tls=!0);const fe=Be(u);f?"useBinaryProtocol"in u?u.useBinaryProtocol=H.Config.supportsBinary&&u.useBinaryProtocol:u.useBinaryProtocol=H.Config.preferBinary:u.useBinaryProtocol=!1;const ie={};u.clientId&&(ie["X-Ably-ClientId"]=H.BufferUtils.base64Encode(H.BufferUtils.utf8Encode(u.clientId))),"idempotentRestPublishing"in u||(u.idempotentRestPublishing=!0);let _e=null,Se=u.connectivityCheckUrl;if(u.connectivityCheckUrl){let[Ee,Ve]=u.connectivityCheckUrl.split("?");_e=Ve?er(Ve):{},Ee.indexOf("://")===-1&&(Ee="https://"+Ee),Se=Ee}let Me=u.wsConnectivityCheckUrl;return Me&&Me.indexOf("://")===-1&&(Me="wss://"+Me),x(O({},u),{primaryDomain:Y,maxMessageSize:u.maxMessageSize||On.maxMessageSize,timeouts:fe,connectivityCheckParams:_e,connectivityCheckUrl:Se,wsConnectivityCheckUrl:Me,headers:ie})}function et(u,f,m){const _=m||{};if(_.cipher){u||rn("Crypto");const w=u.getCipher(_.cipher,f);_.cipher=w.cipherParams,_.channelCipher=w.cipher}else"cipher"in _&&(_.cipher=void 0,_.channelCipher=null);return _}var wt={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},Ut={format:"json",protocolVersion:On.protocolVersion};function Ft(u,{format:f=Ut.format,protocolVersion:m=Ut.protocolVersion}={}){return{accept:wt[f],"X-Ably-Version":m.toString(),"Ably-Agent":$e(u)}}function It(u,{format:f=Ut.format,protocolVersion:m=Ut.protocolVersion}={}){let _;return{accept:_=wt[f],"content-type":_,"X-Ably-Version":m.toString(),"Ably-Agent":$e(u)}}var Ne=On;function hi(u){return Object.assign(On,u)}var Un=class tO{constructor(f,m){this.logger=f,this.members=m||[]}call(f,m){for(const _ of this.members)if(_)try{_(f,m)}catch(w){T.logAction(this.logger,T.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+w+"; stack = "+w.stack)}}push(...f){this.members.push(...f)}createPromise(){return new Promise((f,m)=>{this.push((_,w)=>{_?m(_):f(w)})})}resolveAll(f){this.call(null,f)}rejectAll(f){this.call(f)}static create(f,m){const _=new tO(f,m);return Object.assign((w,R)=>_.call(w,R),{push:w=>_.push(w),createPromise:()=>_.createPromise(),resolveAll:w=>_.resolveAll(w),rejectAll:w=>_.rejectAll(w)})}},tr=Un,Hn=(u=>(u.Get="get",u.Delete="delete",u.Post="post",u.Put="put",u.Patch="patch",u))(Hn||{}),qt=Hn,Vr=(u=>(u[u.Success=200]="Success",u[u.NoContent=204]="NoContent",u[u.BadRequest=400]="BadRequest",u[u.Unauthorized=401]="Unauthorized",u[u.Forbidden=403]="Forbidden",u[u.RequestTimeout=408]="RequestTimeout",u[u.InternalServerError=500]="InternalServerError",u))(Vr||{});function Ys(u){return u>=200&&u<400}var Vn=Vr,nr=Math.pow(2,17);function ht(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function In(u){return!!u.connection}function jr(u){return un(u)?(u.code||(u.statusCode===403?u.code=40300:(u.code=40170,u.statusCode=401)),u):new ne(Tt(u),u.code||40170,u.statusCode||401)}var Fr=(u,f)=>{const m=H.BufferUtils,_=m.utf8Encode(u),w=m.utf8Encode(f),R=m.hmacSha256(_,w);return m.base64Encode(R)};function xi(u){if(!u)return"";typeof u=="string"&&(u=JSON.parse(u));const f=Object.create(null),m=Rn(u,!0);if(!m)return"";m.sort();for(let _=0;_<m.length;_++)f[m[_]]=u[m[_]].sort();return JSON.stringify(f)}function Xt(u,f){if(u.authCallback)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with authCallback");else if(u.authUrl)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with authUrl");else if(u.key)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(u.tokenDetails)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const m="authOptions must include valid authentication parameters";throw T.logAction(f,T.LOG_ERROR,"Auth()",m),new Error(m)}}function di(u){return"useTokenAuth"in u&&!u.useTokenAuth}function Zi(u){return u.useTokenAuth||!di(u)&&(u.authCallback||u.authUrl||u.token||u.tokenDetails)}function rr(u){return!u.key&&!u.authCallback&&!u.authUrl}var Xl=0;function qf(){return Xl++}var Ao=class{constructor(u,f){if(this.authOptions={},this.client=u,this.tokenParams=f.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Zi(f))rr(f)&&T.logAction(this.logger,T.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(f.defaultTokenParams,f),Xt(this.authOptions,this.logger);else{if(!f.key){const m="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw T.logAction(this.logger,T.LOG_ERROR,"Auth()",m),new ne(m,40160,401)}T.logAction(this.logger,T.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(f)}}get logger(){return this.client.logger}async authorize(u,f){if(f&&f.key&&this.authOptions.key!==f.key)throw new ne("Unable to update auth options with incompatible key",40102,401);try{let m=await this._forceNewToken(u??null,f??null);return In(this.client)?new Promise((_,w)=>{this.client.connection.connectionManager.onAuthUpdated(m,(R,z)=>R?w(R):_(z))}):m}catch(m){throw this.client.connection&&m.statusCode===Vn.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(m),m}}async _forceNewToken(u,f){this.tokenDetails=null,this._saveTokenOptions(u,f),Xt(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(u,f){const m=f||this.authOptions,_=u||Ae(this.tokenParams);let w,R=this.client;if(m.authCallback)T.logAction(this.logger,T.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),w=m.authCallback;else if(m.authUrl)T.logAction(this.logger,T.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),w=(Y,fe)=>{const ie=oe({accept:"application/json, text/plain"},m.authHeaders),_e=m.authMethod&&m.authMethod.toLowerCase()==="post";let Se;const Me=m.authUrl.indexOf("?");Me>-1&&(Se=er(m.authUrl.slice(Me)),m.authUrl=m.authUrl.slice(0,Me),_e||(m.authParams=oe(Se,m.authParams)));const Ee=oe({},m.authParams||{},Y),Ve=je=>{var st,Vt;let Wt=(st=je.body)!=null?st:null,en=null;if(je.error)T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Tt(je.error));else{const or=(Vt=je.headers["content-type"])!=null?Vt:null;Array.isArray(or)?en=or.join(", "):en=or,T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+en+"; body: "+hr(Wt))}if(je.error){fe(je.error,null);return}if(je.unpacked){fe(null,Wt);return}if(H.BufferUtils.isBuffer(Wt)&&(Wt=Wt.toString()),!en){fe(new ne("authUrl response is missing a content-type header",40170,401),null);return}const dt=en.indexOf("application/json")>-1,li=en.indexOf("text/plain")>-1||en.indexOf("application/jwt")>-1;if(!dt&&!li){fe(new ne("authUrl responded with unacceptable content-type "+en+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(dt){if(Wt.length>nr){fe(new ne("authUrl response exceeded max permitted length",40170,401),null);return}try{Wt=JSON.parse(Wt)}catch(or){fe(new ne("Unexpected error processing authURL response; err = "+or.message,40170,401),null);return}}fe(null,Wt,en)};if(T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+m.authUrl+"; Params: "+JSON.stringify(Ee)+"; method: "+(_e?"POST":"GET")),_e){const je=ie||{};je["content-type"]="application/x-www-form-urlencoded";const st=Er(Ee).slice(1);nt(this.client.http.doUri(qt.Post,m.authUrl,je,st,Se),(Vt,Wt)=>Ve(Vt||Wt))}else nt(this.client.http.doUri(qt.Get,m.authUrl,ie||{},null,Ee),(je,st)=>Ve(je||st))};else if(m.key)T.logAction(this.logger,T.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),w=(Y,fe)=>{nt(this.createTokenRequest(Y,m),(ie,_e)=>fe(ie,_e??null))};else{const Y="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw T.logAction(this.logger,T.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new ne(Y,40171,403)}"capability"in _&&(_.capability=xi(_.capability));const z=(Y,fe)=>{const ie=Y.keyName,_e="/keys/"+ie+"/requestToken",Se=function(Ee){return R.baseUri(Ee)+_e},Me=Ne.defaultPostHeaders(this.client.options);m.requestHeaders&&oe(Me,m.requestHeaders),T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+_e+"; Token params: "+JSON.stringify(Y)),nt(this.client.http.do(qt.Post,Se,Me,JSON.stringify(Y),null),(Ee,Ve)=>Ee?fe(Ee):fe(Ve.error,Ve.body,Ve.unpacked))};return new Promise((Y,fe)=>{let ie=!1,_e=this.client.options.timeouts.realtimeRequestTimeout,Se=setTimeout(()=>{ie=!0;const Me="Token request callback timed out after "+_e/1e3+" seconds";T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()",Me),fe(new ne(Me,40170,401))},_e);w(_,(Me,Ee,Ve)=>{if(ie)return;if(clearTimeout(Se),Me){T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Tt(Me)),fe(jr(Me));return}if(typeof Ee=="string"){Ee.length===0?fe(new ne("Token string is empty",40170,401)):Ee.length>nr?fe(new ne("Token string exceeded max permitted length (was "+Ee.length+" bytes)",40170,401)):Ee==="undefined"||Ee==="null"?fe(new ne("Token string was literal null/undefined",40170,401)):Ee[0]==="{"&&!(Ve&&Ve.indexOf("application/jwt")>-1)?fe(new ne("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):Y({token:Ee});return}if(typeof Ee!="object"||Ee===null){const st="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof Ee;T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()",st),fe(new ne(st,40170,401));return}const je=JSON.stringify(Ee).length;if(je>nr&&!m.suppressMaxLengthCheck){fe(new ne("Token request/details object exceeded max permitted stringified size (was "+je+" bytes)",40170,401));return}if("issued"in Ee){Y(Ee);return}if(!("keyName"in Ee)){const st="Expected token request callback to call back with a token string, token request object, or token details object";T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()",st),fe(new ne(st,40170,401));return}z(Ee,(st,Vt,Wt)=>{if(st){T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Tt(st)),fe(jr(st));return}Wt||(Vt=JSON.parse(Vt)),T.logAction(this.logger,T.LOG_MINOR,"Auth.getToken()","token received"),Y(Vt)})})})}async createTokenRequest(u,f){f=f||this.authOptions,u=u||Ae(this.tokenParams);const m=f.key;if(!m)throw new ne("No key specified",40101,403);const _=m.split(":"),w=_[0],R=_[1];if(!R)throw new ne("Invalid key specified",40101,403);if(u.clientId==="")throw new ne("clientId can’t be an empty string",40012,400);"capability"in u&&(u.capability=xi(u.capability));const z=oe({keyName:w},u),Y=u.clientId||"",fe=u.ttl||"",ie=u.capability||"";z.timestamp||(z.timestamp=await this._getTimestamp(f&&f.queryTime));const _e=z.nonce||(z.nonce=ht()),Se=z.timestamp,Me=z.keyName+`
`+fe+`
`+ie+`
`+Y+`
`+Se+`
`+_e+`
`;return z.mac=z.mac||Fr(Me,R),T.logAction(this.logger,T.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),z}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let u=await this._ensureValidAuthCredentials(!1);if(!u)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:u.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const u=await this._ensureValidAuthCredentials(!1);if(!u)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+Ii(u.token)}}}_saveBasicOptions(u){this.method="basic",this.key=u.key,this.basicKey=Ii(u.key),this.authOptions=u||{},"clientId"in u&&this._userSetClientId(u.clientId)}_saveTokenOptions(u,f){this.method="token",u&&(this.tokenParams=u),f&&(f.token&&(f.tokenDetails=typeof f.token=="string"?{token:f.token}:f.token),f.tokenDetails&&(this.tokenDetails=f.tokenDetails),"clientId"in f&&this._userSetClientId(f.clientId),this.authOptions=f)}async _ensureValidAuthCredentials(u){const f=this.tokenDetails;if(f){if(this._tokenClientIdMismatch(f.clientId))throw new ne("Mismatch between clientId in token ("+f.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!f.expires||f.expires>=this.client.getTimestampUsingOffset())return T.logAction(this.logger,T.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+f.expires),f;T.logAction(this.logger,T.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const m=(this.waitingForTokenRequest||(this.waitingForTokenRequest=tr.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!u)return m;const _=this.currentTokenRequestId=qf();let w,R=null;try{w=await this.requestToken(this.tokenParams,this.authOptions)}catch(Y){R=Y}if(this.currentTokenRequestId>_)return T.logAction(this.logger,T.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),m;this.currentTokenRequestId=null;const z=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,R?(z==null||z.rejectAll(R),m):(z==null||z.resolveAll(this.tokenDetails=w),m)}_userSetClientId(u){if(typeof u=="string"||u===null){if(u==="*")throw new ne('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const f=this._uncheckedSetClientId(u);if(f)throw f}}else throw new ne("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(u){if(this._tokenClientIdMismatch(u)){const f="Unexpected clientId mismatch: client has "+this.clientId+", requested "+u,m=new ne(f,40102,401);return T.logAction(this.logger,T.LOG_ERROR,"Auth._uncheckedSetClientId()",f),m}else return this.clientId=this.tokenParams.clientId=u,null}_tokenClientIdMismatch(u){return!!(this.clientId&&this.clientId!=="*"&&u&&u!=="*"&&this.clientId!==u)}static isTokenErr(u){return u.code&&u.code>=40140&&u.code<40150}revokeTokens(u,f){return this.client.rest.revokeTokens(u,f)}async _getTimestamp(u){return this.client.getTimestamp(u||!!this.authOptions.queryTime)}},ri=Ao;function bs(u){const f=[];if(u)for(const m in u)f.push(m+"="+u[m]);return f.join("&")}function Qs(u,f){return u+(f?"?":"")+bs(f)}function xn(u,f,m,_,w){u.error?T.logActionNoStrip(w,T.LOG_MICRO,"Http."+f+"()","Received Error; "+Qs(m,_)+"; Error: "+Tt(u.error)):T.logActionNoStrip(w,T.LOG_MICRO,"Http."+f+"()","Received; "+Qs(m,_)+"; Headers: "+bs(u.headers)+"; StatusCode: "+u.statusCode+"; Body"+(H.BufferUtils.isBuffer(u.body)?" (Base64): "+H.BufferUtils.base64Encode(u.body):": "+u.body))}function ii(u,f,m,_,w){w.shouldLog(T.LOG_MICRO)&&T.logActionNoStrip(w,T.LOG_MICRO,"Http."+u+"()","Sending; "+Qs(f,_)+"; Body"+(H.BufferUtils.isBuffer(m)?" (Base64): "+H.BufferUtils.base64Encode(m):": "+m))}var _s=class{constructor(u){this.client=u,this.platformHttp=new H.Http(u),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var u,f;return(f=(u=this.client)==null?void 0:u.logger)!=null?f:T.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(u){const f=u.connection,m=f&&f.connectionManager.host;return m?[m].concat(Ne.getFallbackHosts(u.options)):Ne.getHosts(u.options)}async do(u,f,m,_,w){try{const R=this.client;if(!R)return{error:new ne("http.do called without client",5e4,500)};const z=typeof f=="function"?f:function(Se){return R.baseUri(Se)+f},Y=R._currentFallback;if(Y)if(Y.validUntil>Date.now()){const Se=await this.doUri(u,z(Y.host),m,_,w);return Se.error&&this.platformHttp.shouldFallback(Se.error)?(R._currentFallback=null,this.do(u,f,m,_,w)):Se}else R._currentFallback=null;const fe=this._getHosts(R);if(fe.length===1)return this.doUri(u,z(fe[0]),m,_,w);let ie=null;const _e=async(Se,Me)=>{const Ee=Se.shift();ie=ie??new Date;const Ve=await this.doUri(u,z(Ee),m,_,w);return Ve.error&&this.platformHttp.shouldFallback(Ve.error)&&Se.length?Date.now()-ie.getTime()>R.options.timeouts.httpMaxRetryDuration?{error:new ne(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${R.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:_e(Se,!0):(Me&&(R._currentFallback={host:Ee,validUntil:Date.now()+R.options.timeouts.fallbackRetryTimeout}),Ve)};return _e(fe)}catch(R){return{error:new ne(`Unexpected error in Http.do: ${Tt(R)}`,500,5e4)}}}async doUri(u,f,m,_,w){try{ii(u,f,_,w,this.logger);const R=await this.platformHttp.doUri(u,f,m,_,w);return this.logger.shouldLog(T.LOG_MICRO)&&xn(R,u,f,w,this.logger),R}catch(R){return{error:new ne(`Unexpected error in Http.doUri: ${Tt(R)}`,500,5e4)}}}};function Xs(u,f,m,_){try{m.apply(f,_)}catch(w){T.logAction(u,T.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+w+"; stack = "+(w&&w.stack))}}function Pi(u,f,m){let _,w,R;for(let z=0;z<u.length;z++)if(_=u[z],m&&(_=_[m]),Array.isArray(_)){for(;(w=_.indexOf(f))!==-1;)_.splice(w,1);m&&_.length===0&&delete u[z][m]}else if(Q(_))for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&Array.isArray(_[R])&&Pi([_],f,R)}var Jt=class{constructor(u){this.logger=u,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...u){if(u.length===1){const f=u[0];if(typeof f=="function")this.any.push(f);else throw new Error("EventListener.on(): Invalid arguments: "+H.Config.inspect(u))}if(u.length===2){const[f,m]=u;if(typeof m!="function")throw new Error("EventListener.on(): Invalid arguments: "+H.Config.inspect(u));if(ye(f))this.any.push(m);else if(Array.isArray(f))f.forEach(_=>{this.on(_,m)});else{if(typeof f!="string")throw new Error("EventListener.on(): Invalid arguments: "+H.Config.inspect(u));(this.events[f]||(this.events[f]=[])).push(m)}}}off(...u){if(u.length==0||ye(u[0])&&ye(u[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[f,m]=u;let _=null,w=null;if(u.length===1||!m)typeof f=="function"?_=f:w=f;else{if(typeof m!="function")throw new Error("EventEmitter.off(): invalid arguments:"+H.Config.inspect(u));[w,_]=[f,m]}if(_&&ye(w)){Pi([this.any,this.events,this.anyOnce,this.eventsOnce],_);return}if(Array.isArray(w)){w.forEach(R=>{this.off(R,_)});return}if(typeof w!="string")throw new Error("EventEmitter.off(): invalid arguments:"+H.Config.inspect(u));_?Pi([this.events,this.eventsOnce],_,w):(delete this.events[w],delete this.eventsOnce[w])}listeners(u){if(u){const f=this.events[u]||[];return this.eventsOnce[u]&&Array.prototype.push.apply(f,this.eventsOnce[u]),f.length?f:null}return this.any.length?this.any:null}emit(u,...f){const m={event:u},_=[];this.anyOnce.length&&(Array.prototype.push.apply(_,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(_,this.any);const w=this.eventsOnce[u];w&&(Array.prototype.push.apply(_,w),delete this.eventsOnce[u]);const R=this.events[u];R&&Array.prototype.push.apply(_,R),_.forEach(z=>{Xs(this.logger,m,z,f)})}once(...u){const f=u.length;if(f===0||f===1&&typeof u[0]!="function"){const w=u[0];return new Promise(R=>{this.once(w,R)})}const[m,_]=u;if(u.length===1&&typeof m=="function")this.anyOnce.push(m);else if(ye(m)){if(typeof _!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+H.Config.inspect(u));this.anyOnce.push(_)}else if(Array.isArray(m)){const w=this,R=function(){const z=Array.prototype.slice.call(arguments);if(m.forEach(function(Y){w.off(Y,R)}),typeof _!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+H.Config.inspect(u));_.apply(this,z)};m.forEach(function(z){w.on(z,R)})}else{if(typeof m!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+H.Config.inspect(u));const w=this.eventsOnce[m]||(this.eventsOnce[m]=[]);if(_){if(typeof _!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+H.Config.inspect(u));w.push(_)}}}async whenState(u,f){if(typeof u!="string"||typeof f!="string")throw new Error("whenState requires a valid state String argument");return u===f?null:this.once(u)}},fn=Jt,Ge={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},Js=[];Object.keys(Ge).forEach(function(u){Js[Ge[u]]=u});var ir={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},Jl=Object.keys(ir);ir.MODE_ALL=ir.PRESENCE|ir.PUBLISH|ir.SUBSCRIBE|ir.PRESENCE_SUBSCRIBE|ir.ANNOTATION_PUBLISH|ir.ANNOTATION_SUBSCRIBE|ir.OBJECT_SUBSCRIBE|ir.OBJECT_PUBLISH;var Ro=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function $f(u){return!u||!u.channelOptions?{channelOptions:u,plugins:{},baseEncodedPreviousPayload:void 0}:u}function ru(u,f,m){if(m&&m.cipher){u||rn("Crypto");const _=u.getCipher(m.cipher,f);return{cipher:_.cipherParams,channelCipher:_.cipher}}return m??{}}async function Oo(u,f){const{data:m,encoding:_}=await es(u.data,u.encoding,f);return u.data=m,u.encoding=_,u}async function es(u,f,m){let _=m.channelCipher,w=u,R=f?f+"/":"";H.BufferUtils.isBuffer(w)||(w=H.BufferUtils.utf8Encode(String(w)),R=R+"utf-8/");const z=await _.encrypt(w);return R=R+"cipher+"+_.algorithm,{data:z,encoding:R}}async function Br(u,f){const{data:m,encoding:_}=ts(u.data,u.encoding);return u.data=m,u.encoding=_,f!=null&&f.cipher?Oo(u,f):u}function ts(u,f){if(typeof u=="string"||H.BufferUtils.isBuffer(u)||u===null||u===void 0)return{data:u,encoding:f};if(Q(u)||Array.isArray(u))return{data:JSON.stringify(u),encoding:f?f+"/json":"json"};throw new ne("Data type is unsupported",40013,400)}async function Mi(u,f){const{data:m,encoding:_,error:w}=await Io(u.data,u.encoding,f);if(u.data=m,u.encoding=_,w)throw w}async function Io(u,f,m){const _=$f(m);let w=u,R=u,z=f,Y;if(f){const fe=f.split("/");let ie,_e=fe.length,Se="";try{for(;(ie=_e)>0;){const Me=fe[--_e].match(/([-\w]+)(\+([\w-]+))?/);if(!Me)break;switch(Se=Me[1],Se){case"base64":R=H.BufferUtils.base64Decode(String(R)),ie==fe.length&&(w=R);continue;case"utf-8":R=H.BufferUtils.utf8Decode(R);continue;case"json":R=JSON.parse(R);continue;case"cipher":if(_.channelOptions!=null&&_.channelOptions.cipher&&_.channelOptions.channelCipher){const Ee=Me[3],Ve=_.channelOptions.channelCipher;if(Ee!=Ve.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");R=await Ve.decrypt(R);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!_.plugins||!_.plugins.vcdiff)throw new ne("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new ne("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let Ee=_.baseEncodedPreviousPayload;typeof Ee=="string"&&(Ee=H.BufferUtils.utf8Encode(Ee));const Ve=H.BufferUtils.toBuffer(Ee);R=H.BufferUtils.toBuffer(R),R=H.BufferUtils.arrayBufferViewToBuffer(_.plugins.vcdiff.decode(R,Ve)),w=R}catch(Ee){throw new ne("Vcdiff delta decode failed with "+Ee,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(Me){const Ee=Me;Y=new ne(`Error processing the ${Se} encoding, decoder returned ‘${Ee.message}’`,Ee.code||40013,400)}finally{z=ie<=0?null:fe.slice(0,ie).join("/")}}return Y?{error:Y,data:R,encoding:z}:(_.baseEncodedPreviousPayload=w,{data:R,encoding:z})}function pi(...u){const f=u.length>0?"json":"msgpack",{data:m,encoding:_}=Zl(this.data,this.encoding,f);return Object.assign({},this,{encoding:_,data:m})}function Zl(u,f,m){return!u||!H.BufferUtils.isBuffer(u)?{data:u,encoding:f}:m==="msgpack"?{data:H.BufferUtils.toBuffer(u),encoding:f}:{data:H.BufferUtils.base64Encode(u),encoding:f?f+"/base64":"base64"}}var ns={encryptData:es,encodeData:ts,encodeDataForWire:Zl,decodeData:Io};function zr(u){const{id:f,connectionId:m,timestamp:_}=u;let w;switch(u.action){case Ge.MESSAGE:{w=u.messages;break}case Ge.PRESENCE:case Ge.SYNC:w=u.presence;break;case Ge.ANNOTATION:w=u.annotations;break;case Ge.OBJECT:case Ge.OBJECT_SYNC:w=u.state;break;default:throw new ne("Unexpected action "+u.action,4e4,400)}for(let R=0;R<w.length;R++){const z=w[R];z.connectionId||(z.connectionId=m),z.timestamp||(z.timestamp=_),f&&!z.id&&(z.id=f+":"+R)}}function sr(u,f){let m="["+f;for(const _ in u)_==="data"?typeof u.data=="string"?m+="; data="+u.data:H.BufferUtils.isBuffer(u.data)?m+="; data (buffer)="+H.BufferUtils.base64Encode(u.data):typeof u.data<"u"&&(m+="; data (json)="+JSON.stringify(u.data)):_&&(_==="extras"||_==="operation")?m+="; "+_+"="+JSON.stringify(u[_]):_==="version"?m+="; version="+JSON.stringify(u[_]):_==="annotations"?m+="; annotations="+JSON.stringify(u[_]):u[_]!==void 0&&(m+="; "+_+"="+u[_]);return m+="]",m}var gi=class{},ki=class{constructor(u){this.Platform=H,this.ErrorInfo=ne,this.Logger=T,this.Defaults=Ne,this.Utils=te,this.EventEmitter=fn,this.MessageEncoding=ns;var f,m,_,w,R,z,Y,fe,ie,_e;this._additionalHTTPRequestImplementations=(f=u.plugins)!=null?f:null,this.logger=new T,this.logger.setLog(u.logLevel,u.logHandler),T.logAction(this.logger,T.LOG_MICRO,"BaseClient()","initialized with clientOptions "+H.Config.inspect(u)),this._MsgPack=(_=(m=u.plugins)==null?void 0:m.MsgPack)!=null?_:null;const Se=this.options=Ne.normaliseOptions(u,this._MsgPack,this.logger);if(Se.key){const Me=Se.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!Me){const Ee="invalid key parameter";throw T.logAction(this.logger,T.LOG_ERROR,"BaseClient()",Ee),new ne(Ee,40400,404)}Se.keyName=Me[1],Se.keySecret=Me[2]}if("clientId"in Se)if(typeof Se.clientId=="string"||Se.clientId===null){if(Se.clientId==="*")throw new ne('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new ne("clientId must be either a string or null",40012,400);T.logAction(this.logger,T.LOG_MINOR,"BaseClient()","started; version = "+Ne.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new _s(this),this.auth=new ri(this,Se),this._rest=(w=u.plugins)!=null&&w.Rest?new u.plugins.Rest(this):null,this._Crypto=(z=(R=u.plugins)==null?void 0:R.Crypto)!=null?z:null,this.__FilteredSubscriptions=(fe=(Y=u.plugins)==null?void 0:Y.MessageInteractions)!=null?fe:null,this._Annotations=(_e=(ie=u.plugins)==null?void 0:ie.Annotations)!=null?_e:null}get rest(){return this._rest||rn("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||rn("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var u;return(!((u=this.options.plugins)!=null&&u.Push)||!this.push.LocalDevice)&&rn("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(u){return Ne.getHttpScheme(this.options)+u+":"+Ne.getPort(this.options,!1)}async stats(u){return this.rest.stats(u)}async time(u){return this.rest.time(u)}async request(u,f,m,_,w,R){return this.rest.request(u,f,m,_,w,R)}batchPublish(u){return this.rest.batchPublish(u)}batchPresence(u){return this.rest.batchPresence(u)}setLog(u){this.logger.setLog(u.level,u.handler)}async getTimestamp(u){return!this.isTimeOffsetSet()&&u?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return this.serverTimeOffset!==null}};ki.Platform=H;var Ss=ki,Es=class Yu{toJSON(){var f,m,_;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(f=this.push)==null?void 0:f.recipient,state:(m=this.push)==null?void 0:m.state,error:(_=this.push)==null?void 0:_.error}}}toString(){var f,m,_,w;let R="[DeviceDetails";return this.id&&(R+="; id="+this.id),this.platform&&(R+="; platform="+this.platform),this.formFactor&&(R+="; formFactor="+this.formFactor),this.clientId&&(R+="; clientId="+this.clientId),this.metadata&&(R+="; metadata="+this.metadata),this.deviceIdentityToken&&(R+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(f=this.push)!=null&&f.recipient&&(R+="; push.recipient="+JSON.stringify(this.push.recipient)),(m=this.push)!=null&&m.state&&(R+="; push.state="+this.push.state),(_=this.push)!=null&&_.error&&(R+="; push.error="+JSON.stringify(this.push.error)),(w=this.push)!=null&&w.metadata&&(R+="; push.metadata="+this.push.metadata),R+="]",R}static toRequestBody(f,m,_){return Ht(f,m,_)}static fromResponseBody(f,m,_){return _&&(f=Qt(f,m,_)),Array.isArray(f)?Yu.fromValuesArray(f):Yu.fromValues(f)}static fromValues(f){return f.error=f.error&&ne.fromValues(f.error),Object.assign(new Yu,f)}static fromLocalDevice(f){return Object.assign(new Yu,f)}static fromValuesArray(f){const m=f.length,_=new Array(m);for(let w=0;w<m;w++)_[w]=Yu.fromValues(f[w]);return _}},rs=Es;async function Di(u,f,m,_){if(u.http.supportsAuthHeaders){const w=await u.auth.getAuthHeaders();return _(oe(w,f),m)}else{const w=await u.auth.getAuthParams();return _(f,oe(w,m))}}function is(u,f,m){if(u.err&&!u.body)return{err:u.err};if(u.statusCode===Vn.NoContent)return x(O({},u),{body:[],unpacked:!0});let _=u.body;if(!u.unpacked)try{_=Qt(_,f,m)}catch(Y){return un(Y)?{err:Y}:{err:new Pe(Tt(Y),null)}}if(!_)return{err:new Pe("unenvelope(): Response body is missing",null)};const{statusCode:w,response:R,headers:z}=_;if(w===void 0)return x(O({},u),{body:_,unpacked:!0});if(w<200||w>=300){let Y=R&&R.error||u.err;return Y||(Y=new Error("Error in unenveloping "+_),Y.statusCode=w),{err:Y,body:R,headers:z,unpacked:!0,statusCode:w}}return{err:u.err,body:R,headers:z,unpacked:!0,statusCode:w}}function ec(u,f,m,_,w){u.err?T.logAction(w,T.LOG_MICRO,"Resource."+f+"()","Received Error; "+Qs(m,_)+"; Error: "+Tt(u.err)):T.logAction(w,T.LOG_MICRO,"Resource."+f+"()","Received; "+Qs(m,_)+"; Headers: "+bs(u.headers)+"; StatusCode: "+u.statusCode+"; Body: "+(H.BufferUtils.isBuffer(u.body)?" (Base64): "+H.BufferUtils.base64Encode(u.body):": "+H.Config.inspect(u.body)))}var qn=class Qu{static async get(f,m,_,w,R,z){return Qu.do(qt.Get,f,m,null,_,w,R,z??!1)}static async delete(f,m,_,w,R,z){return Qu.do(qt.Delete,f,m,null,_,w,R,z)}static async post(f,m,_,w,R,z,Y){return Qu.do(qt.Post,f,m,_,w,R,z,Y)}static async patch(f,m,_,w,R,z,Y){return Qu.do(qt.Patch,f,m,_,w,R,z,Y)}static async put(f,m,_,w,R,z,Y){return Qu.do(qt.Put,f,m,_,w,R,z,Y)}static async do(f,m,_,w,R,z,Y,fe){Y&&((z=z||{}).envelope=Y);const ie=m.logger;async function _e(Me,Ee){var Ve;if(ie.shouldLog(T.LOG_MICRO)){let st=w;if(((Ve=Me["content-type"])==null?void 0:Ve.indexOf("msgpack"))>0)try{m._MsgPack||rn("MsgPack"),st=m._MsgPack.decode(w)}catch(Vt){T.logAction(ie,T.LOG_MICRO,"Resource."+f+"()","Sending MsgPack Decoding Error: "+Tt(Vt))}T.logAction(ie,T.LOG_MICRO,"Resource."+f+"()","Sending; "+Qs(_,Ee)+"; Body: "+st)}const je=await m.http.do(f,_,Me,w,Ee);return je.error&&ri.isTokenErr(je.error)?(await m.auth.authorize(null,null),Di(m,Me,Ee,_e)):{err:je.error,body:je.body,headers:je.headers,unpacked:je.unpacked,statusCode:je.statusCode}}let Se=await Di(m,R,z,_e);if(Y&&(Se=is(Se,m._MsgPack,Y)),ie.shouldLog(T.LOG_MICRO)&&ec(Se,f,_,z,ie),fe){if(Se.err)throw Se.err;{const Me=O({},Se);return delete Me.err,Me}}return Se}},at=qn;function xo(u){const f=u.match(/^\.\/(\w+)\?(.*)$/);return f&&f[2]&&er(f[2])}function ka(u){typeof u=="string"&&(u=u.split(","));const f={};for(let m=0;m<u.length;m++){const _=u[m].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(_){const w=xo(_[1]);w&&(f[_[2]]=w)}}return f}function iu(u,f,m){return!(m&&(f||typeof u.code=="number"))}var Po=class{constructor(u,f,m,_,w,R){this.client=u,this.path=f,this.headers=m,this.envelope=_??null,this.bodyHandler=w,this.useHttpPaginatedResponse=R||!1}get logger(){return this.client.logger}async get(u){const f=await at.get(this.client,this.path,this.headers,u,this.envelope,!1);return this.handlePage(f)}async delete(u){const f=await at.delete(this.client,this.path,this.headers,u,this.envelope,!1);return this.handlePage(f)}async post(u,f){const m=await at.post(this.client,this.path,f,this.headers,u,this.envelope,!1);return this.handlePage(m)}async put(u,f){const m=await at.put(this.client,this.path,f,this.headers,u,this.envelope,!1);return this.handlePage(m)}async patch(u,f){const m=await at.patch(this.client,this.path,f,this.headers,u,this.envelope,!1);return this.handlePage(m)}async handlePage(u){if(u.err&&iu(u.err,u.body,this.useHttpPaginatedResponse))throw T.logAction(this.logger,T.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Tt(u.err)),u.err;let f,m,_;try{f=u.statusCode==Vn.NoContent?[]:await this.bodyHandler(u.body,u.headers||{},u.unpacked)}catch(w){throw u.err||w}return u.headers&&(m=u.headers.Link||u.headers.link)&&(_=ka(m)),this.useHttpPaginatedResponse?new ss(this,f,u.headers||{},u.statusCode,_,u.err):new Da(this,f,_)}},Da=class{constructor(u,f,m){this.resource=u,this.items=f,this._relParams=m}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new ne("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new ne("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return this._relParams!=null&&"first"in this._relParams}hasCurrent(){return this._relParams!=null&&"current"in this._relParams}hasNext(){return this._relParams!=null&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(u){const f=this.resource,m=await at.get(f.client,f.path,f.headers,u,f.envelope,!1);return f.handlePage(m)}},ss=class extends Da{constructor(u,f,m,_,w,R){super(u,f,w),this.statusCode=_,this.success=_<300&&_>=200,this.headers=m,this.errorCode=R&&R.code,this.errorMessage=R&&R.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},dr=Po,si=class Qh{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let f="[PushChannelSubscription";return this.channel&&(f+="; channel="+this.channel),this.deviceId&&(f+="; deviceId="+this.deviceId),this.clientId&&(f+="; clientId="+this.clientId),f+="]",f}static fromResponseBody(f,m,_){return _&&(f=Qt(f,m,_)),Array.isArray(f)?Qh.fromValuesArray(f):Qh.fromValues(f)}static fromValues(f){return Object.assign(new Qh,f)}static fromValuesArray(f){const m=f.length,_=new Array(m);for(let w=0;w<m;w++)_[w]=Qh.fromValues(f[w]);return _}};si.toRequestBody=Ht;var su=si,Mo=su,Na=class{constructor(u){var f;this.client=u,this.admin=new ko(u),H.Config.push&&((f=u.options.plugins)!=null&&f.Push)&&(this.stateMachine=new u.options.plugins.Push.ActivationStateMachine(u),this.LocalDevice=u.options.plugins.Push.localDeviceFactory(rs))}async activate(u,f){await new Promise((m,_)=>{var w;if(!((w=this.client.options.plugins)!=null&&w.Push)){_(Xi("Push"));return}if(!this.stateMachine){_(new ne("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){_(new ne("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=R=>{if(R){_(R);return}m()},this.stateMachine.updateFailedCallback=f,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,u))})}async deactivate(u){await new Promise((f,m)=>{var _;if(!((_=this.client.options.plugins)!=null&&_.Push)){m(Xi("Push"));return}if(!this.stateMachine){m(new ne("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){m(new ne("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=w=>{if(w){m(w);return}f()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,u))})}},ko=class{constructor(u){this.client=u,this.deviceRegistrations=new tc(u),this.channelSubscriptions=new Do(u)}async publish(u,f){const m=this.client,_=m.options.useBinaryProtocol?"msgpack":"json",w=Ne.defaultPostHeaders(m.options,{format:_}),R={},z=oe({recipient:u},f);oe(w,m.options.headers),m.options.pushFullWait&&oe(R,{fullWait:"true"});const Y=Ht(z,m._MsgPack,_);await at.post(m,"/push/publish",Y,w,R,null,!0)}},tc=class{constructor(u){this.client=u}async save(u){const f=this.client,m=rs.fromValues(u),_=f.options.useBinaryProtocol?"msgpack":"json",w=Ne.defaultPostHeaders(f.options,{format:_}),R={};oe(w,f.options.headers),f.options.pushFullWait&&oe(R,{fullWait:"true"});const z=Ht(m,f._MsgPack,_),Y=await at.put(f,"/push/deviceRegistrations/"+encodeURIComponent(u.id),z,w,R,null,!0);return rs.fromResponseBody(Y.body,f._MsgPack,Y.unpacked?void 0:_)}async get(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",_=Ne.defaultGetHeaders(f.options,{format:m}),w=u.id||u;if(typeof w!="string"||!w.length)throw new ne("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);oe(_,f.options.headers);const R=await at.get(f,"/push/deviceRegistrations/"+encodeURIComponent(w),_,{},null,!0);return rs.fromResponseBody(R.body,f._MsgPack,R.unpacked?void 0:m)}async list(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",_=this.client.http.supportsLinkHeaders?void 0:m,w=Ne.defaultGetHeaders(f.options,{format:m});return oe(w,f.options.headers),new dr(f,"/push/deviceRegistrations",w,_,async function(R,z,Y){return rs.fromResponseBody(R,f._MsgPack,Y?void 0:m)}).get(u)}async remove(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",_=Ne.defaultGetHeaders(f.options,{format:m}),w={},R=u.id||u;if(typeof R!="string"||!R.length)throw new ne("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);oe(_,f.options.headers),f.options.pushFullWait&&oe(w,{fullWait:"true"}),await at.delete(f,"/push/deviceRegistrations/"+encodeURIComponent(R),_,w,null,!0)}async removeWhere(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",_=Ne.defaultGetHeaders(f.options,{format:m});oe(_,f.options.headers),f.options.pushFullWait&&oe(u,{fullWait:"true"}),await at.delete(f,"/push/deviceRegistrations",_,u,null,!0)}},Do=class nO{constructor(f){this.remove=nO.prototype.removeWhere,this.client=f}async save(f){const m=this.client,_=Mo.fromValues(f),w=m.options.useBinaryProtocol?"msgpack":"json",R=Ne.defaultPostHeaders(m.options,{format:w}),z={};oe(R,m.options.headers),m.options.pushFullWait&&oe(z,{fullWait:"true"});const Y=Ht(_,m._MsgPack,w),fe=await at.post(m,"/push/channelSubscriptions",Y,R,z,null,!0);return Mo.fromResponseBody(fe.body,m._MsgPack,fe.unpacked?void 0:w)}async list(f){const m=this.client,_=m.options.useBinaryProtocol?"msgpack":"json",w=this.client.http.supportsLinkHeaders?void 0:_,R=Ne.defaultGetHeaders(m.options,{format:_});return oe(R,m.options.headers),new dr(m,"/push/channelSubscriptions",R,w,async function(z,Y,fe){return Mo.fromResponseBody(z,m._MsgPack,fe?void 0:_)}).get(f)}async removeWhere(f){const m=this.client,_=m.options.useBinaryProtocol?"msgpack":"json",w=Ne.defaultGetHeaders(m.options,{format:_});oe(w,m.options.headers),m.options.pushFullWait&&oe(f,{fullWait:"true"}),await at.delete(m,"/push/channelSubscriptions",w,f,null,!0)}async listChannels(f){const m=this.client,_=m.options.useBinaryProtocol?"msgpack":"json",w=this.client.http.supportsLinkHeaders?void 0:_,R=Ne.defaultGetHeaders(m.options,{format:_});return oe(R,m.options.headers),m.options.pushFullWait&&oe(f,{fullWait:"true"}),new dr(m,"/push/channels",R,w,async function(z,Y,fe){const ie=!fe&&_?Qt(z,m._MsgPack,_):z;for(let _e=0;_e<ie.length;_e++)ie[_e]=String(ie[_e]);return ie}).get(f)}},au=Na,La=["absent","present","enter","leave","update"];async function ou(u,f,m,_){const w=ru(f,u,_??null);return ws.fromValues(m).decode(w,u)}async function nc(u,f,m,_){return Promise.all(m.map(function(w){return ou(u,f,w,_)}))}async function Ua(u,f){return ws.fromValues(u).decode(f.channelOptions,f.logger)}async function rc(u,f){return Promise.all(u.map(function(m){return Ua(m,f)}))}var ic=class Xh extends gi{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const f=this.id.split(":");return{connectionId:f[0],msgSerial:parseInt(f[1],10),index:parseInt(f[2],10)}}async encode(f){const m=Object.assign(new ws,this,{action:La.indexOf(this.action||"present")});return Br(m,f)}static fromValues(f){return Object.assign(new Xh,f)}static fromValuesArray(f){return f.map(m=>Xh.fromValues(m))}static fromData(f){return f instanceof Xh?f:Xh.fromValues({data:f})}toString(){return sr(this,"PresenceMessage")}},ws=class sb extends gi{toJSON(...f){return pi.call(this,...f)}static fromValues(f){return Object.assign(new sb,f)}static fromValuesArray(f){return f.map(m=>sb.fromValues(m))}async decode(f,m){const _=Object.assign(new ic,x(O({},this),{action:La[this.action]}));try{await Mi(_,f)}catch(w){T.logAction(m,T.LOG_ERROR,"WirePresenceMessage.decode()",Tt(w))}return _}toString(){return sr(this,"WirePresenceMessage")}},Hr=ic,lu=class{constructor(u){this.channel=u}get logger(){return this.channel.logger}async get(u){T.logAction(this.logger,T.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const f=this.channel.client,m=f.options.useBinaryProtocol?"msgpack":"json",_=this.channel.client.http.supportsLinkHeaders?void 0:m,w=Ne.defaultGetHeaders(f.options,{format:m});return oe(w,f.options.headers),new dr(f,this.channel.client.rest.presenceMixin.basePath(this),w,_,async(R,z,Y)=>{const fe=Y?R:Qt(R,f._MsgPack,m);return rc(fe,this.channel)}).get(u)}async history(u){return T.logAction(this.logger,T.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,u)}},No=lu,sc=["message.create","message.update","message.delete","meta","message.summary"];function ac(u){return sc[u||0]||"unknown"}function Ts(u){let f=0;return u.name&&(f+=u.name.length),u.clientId&&(f+=u.clientId.length),u.extras&&(f+=JSON.stringify(u.extras).length),u.data&&(f+=ei(u.data)),f}async function oc(u,f,m,_){const w=ru(f,u,_??null);return qr.fromValues(m).decode(w,u)}async function cu(u,f,m,_){return Promise.all(m.map(function(w){return oc(u,f,w,_)}))}async function uu(u,f){return qr.fromValues(u).decode(f.channelOptions,f.logger)}async function fu(u,f){return Promise.all(u.map(function(m){return uu(m,f)}))}async function Va(u,f){return Promise.all(u.map(m=>m.encode(f)))}var Cr=Ht;function Lo(u){let f,m=0;for(let _=0;_<u.length;_++)f=u[_],m+=f.size||(f.size=Ts(f));return m}var lc=class ab extends gi{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(const[f,m]of Object.entries(this.annotations.summary))if(f.endsWith(":distinct.v1")||f.endsWith(":unique.v1")||f.endsWith(":multiple.v1"))for(const[,_]of Object.entries(m))_.clipped||(_.clipped=!1);else f.endsWith(":flag.v1")&&(m.clipped||(m.clipped=!1))}async encode(f){const m=Object.assign(new qr,this,{action:sc.indexOf(this.action||"message.create")});return Br(m,f)}static fromValues(f){return Object.assign(new ab,f)}static fromValuesArray(f){return f.map(m=>ab.fromValues(m))}toString(){return sr(this,"Message")}},qr=class ob extends gi{toJSON(...f){return pi.call(this,...f)}static fromValues(f){return Object.assign(new ob,f)}static fromValuesArray(f){return f.map(m=>ob.fromValues(m))}async decodeWithErr(f,m){const _=Object.assign(new lc,x(O({},this),{action:ac(this.action)}));let w;try{await Mi(_,f)}catch(R){T.logAction(m,T.LOG_ERROR,"WireMessage.decode()",Tt(R)),w=R}return _.expandFields(),{decoded:_,err:w}}async decode(f,m){const{decoded:_}=await this.decodeWithErr(f,m);return _}toString(){return sr(this,"WireMessage")}},y=lc,A=9;function I(u){return u.every(function(f){return!f.id})}var B=class{constructor(u,f,m){this._annotations=null;var _,w;T.logAction(u.logger,T.LOG_MINOR,"RestChannel()","started; name = "+f),this.name=f,this.client=u,this.presence=new No(this),this.channelOptions=et((_=u._Crypto)!=null?_:null,this.logger,m),(w=u.options.plugins)!=null&&w.Push&&(this._push=new u.options.plugins.Push.PushChannel(this)),u._Annotations&&(this._annotations=new u._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||rn("Annotations"),this._annotations}get push(){return this._push||rn("Push"),this._push}get logger(){return this.client.logger}setOptions(u){var f;this.channelOptions=et((f=this.client._Crypto)!=null?f:null,this.logger,u)}async history(u){return T.logAction(this.logger,T.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,u)}async publish(...u){const f=u[0],m=u[1];let _,w;if(typeof f=="string"||f===null)_=[y.fromValues({name:f,data:m})],w=u[2];else if(Q(f))_=[y.fromValues(f)],w=u[1];else if(Array.isArray(f))_=y.fromValuesArray(f),w=u[1];else throw new ne("The single-argument form of publish() expects a message object or an array of message objects",40013,400);w||(w={});const R=this.client,z=R.options,Y=z.useBinaryProtocol?"msgpack":"json",fe=R.options.idempotentRestPublishing,ie=Ne.defaultPostHeaders(R.options,{format:Y});if(oe(ie,z.headers),fe&&I(_)){const Ee=await ys(A);_.forEach(function(Ve,je){Ve.id=Ee+":"+je.toString()})}const _e=await Va(_,this.channelOptions),Se=Lo(_e),Me=z.maxMessageSize;if(Se>Me)throw new ne(`Maximum size of messages that can be published at once exceeded (was ${Se} bytes; limit is ${Me} bytes)`,40009,400);await this._publish(Cr(_e,R._MsgPack,Y),ie,w)}async _publish(u,f,m){await at.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",u,f,m,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},le=B,me=class rO{constructor(f){this.entries=f&&f.entries||void 0,this.schema=f&&f.schema||void 0,this.appId=f&&f.appId||void 0,this.inProgress=f&&f.inProgress||void 0,this.unit=f&&f.unit||void 0,this.intervalId=f&&f.intervalId||void 0}static fromValues(f){return new rO(f)}},De=me,xt=class{static basePath(u){return"/channels/"+encodeURIComponent(u.name)}static history(u,f){const m=u.client,_=m.options.useBinaryProtocol?"msgpack":"json",w=u.client.http.supportsLinkHeaders?void 0:_,R=Ne.defaultGetHeaders(m.options,{format:_});return oe(R,m.options.headers),new dr(m,this.basePath(u)+"/messages",R,w,async function(z,Y,fe){const ie=fe?z:Qt(z,m._MsgPack,_);return fu(ie,u)}).get(f)}static async status(u){const f=u.client.options.useBinaryProtocol?"msgpack":"json",m=Ne.defaultPostHeaders(u.client.options,{format:f});return(await at.get(u.client,this.basePath(u),m,{},f,!0)).body}},jn=class{static basePath(u){return xt.basePath(u.channel)+"/presence"}static async history(u,f){const m=u.channel.client,_=m.options.useBinaryProtocol?"msgpack":"json",w=u.channel.client.http.supportsLinkHeaders?void 0:_,R=Ne.defaultGetHeaders(m.options,{format:_});return oe(R,m.options.headers),new dr(m,this.basePath(u)+"/history",R,w,async(z,Y,fe)=>{const ie=fe?z:Qt(z,m._MsgPack,_);return rc(ie,u.channel)}).get(f)}},Pt=class{constructor(u){this.channelMixin=xt,this.presenceMixin=jn,this.Resource=at,this.PaginatedResource=dr,this.DeviceDetails=rs,this.PushChannelSubscription=Mo,this.client=u,this.channels=new $n(this.client),this.push=new au(this.client)}async stats(u){const f=Ne.defaultGetHeaders(this.client.options),m=this.client.options.useBinaryProtocol?"msgpack":"json",_=this.client.http.supportsLinkHeaders?void 0:m;return oe(f,this.client.options.headers),new dr(this.client,"/stats",f,_,function(w,R,z){const Y=z?w:JSON.parse(w);for(let fe=0;fe<Y.length;fe++)Y[fe]=De.fromValues(Y[fe]);return Y}).get(u)}async time(u){const f=Ne.defaultGetHeaders(this.client.options);this.client.options.headers&&oe(f,this.client.options.headers);const m=Y=>this.client.baseUri(Y)+"/time";let{error:_,body:w,unpacked:R}=await this.client.http.do(qt.Get,m,f,null,u);if(_)throw _;R||(w=JSON.parse(w));const z=w[0];if(!z)throw new ne("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=z-Date.now(),z}async request(u,f,m,_,w,R){var z;const[Y,fe,ie]=this.client.options.useBinaryProtocol?(this.client._MsgPack||rn("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],_e=this.client.http.supportsLinkHeaders?void 0:ie;_=_||{};const Se=u.toLowerCase(),Me=Se=="get"?Ne.defaultGetHeaders(this.client.options,{format:ie,protocolVersion:m}):Ne.defaultPostHeaders(this.client.options,{format:ie,protocolVersion:m});typeof w!="string"&&(w=(z=Y(w))!=null?z:null),oe(Me,this.client.options.headers),R&&oe(Me,R);const Ee=new dr(this.client,f,Me,_e,async function(Ve,je,st){return Ue(st?Ve:fe(Ve))},!0);if(!H.Http.methods.includes(Se))throw new ne("Unsupported method "+Se,40500,405);return H.Http.methodsWithBody.includes(Se)?Ee[Se](_,w):Ee[Se](_)}async batchPublish(u){let f,m;Array.isArray(u)?(f=u,m=!1):(f=[u],m=!0);const _=this.client.options.useBinaryProtocol?"msgpack":"json",w=Ne.defaultPostHeaders(this.client.options,{format:_});this.client.options.headers&&oe(w,this.client.options.headers);const R=Ht(f,this.client._MsgPack,_),z=await at.post(this.client,"/messages",R,w,{},null,!0),Y=z.unpacked?z.body:Qt(z.body,this.client._MsgPack,_);return m?Y[0]:Y}async batchPresence(u){const f=this.client.options.useBinaryProtocol?"msgpack":"json",m=Ne.defaultPostHeaders(this.client.options,{format:f});this.client.options.headers&&oe(m,this.client.options.headers);const _=u.join(","),w=await at.get(this.client,"/presence",m,{channels:_},null,!0);return w.unpacked?w.body:Qt(w.body,this.client._MsgPack,f)}async revokeTokens(u,f){if(Zi(this.client.options))throw new ne("Cannot revoke tokens when using token auth",40162,401);const m=this.client.options.keyName;let _=f??{};const w=O({targets:u.map(ie=>`${ie.type}:${ie.value}`)},_),R=this.client.options.useBinaryProtocol?"msgpack":"json",z=Ne.defaultPostHeaders(this.client.options,{format:R});this.client.options.headers&&oe(z,this.client.options.headers);const Y=Ht(w,this.client._MsgPack,R),fe=await at.post(this.client,`/keys/${m}/revokeTokens`,Y,z,{},null,!0);return fe.unpacked?fe.body:Qt(fe.body,this.client._MsgPack,R)}},$n=class{constructor(u){this.client=u,this.all=Object.create(null)}get(u,f){u=String(u);let m=this.all[u];return m?f&&m.setOptions(f):this.all[u]=m=new le(this.client,u,f),m}release(u){delete this.all[String(u)]}},Fn=class extends Ss{constructor(u){super(Ne.objectifyOptions(u,!1,"BaseRest",T.defaultLogger,{Rest:Pt}))}},as={Rest:Pt},Gn=class extends y{static async fromEncoded(u,f){return oc(T.defaultLogger,H.Crypto,u,f)}static async fromEncodedArray(u,f){return cu(T.defaultLogger,H.Crypto,u,f)}static fromValues(u){return y.fromValues(u)}},Ni=class extends Hr{static async fromEncoded(u,f){return ou(T.defaultLogger,H.Crypto,u,f)}static async fromEncodedArray(u,f){return nc(T.defaultLogger,H.Crypto,u,f)}static fromValues(u){return Hr.fromValues(u)}},Uo=["annotation.create","annotation.delete"];async function cc(u,f,m){return ja.fromValues(f).decode(m||{},u)}async function ap(u,f,m){return Promise.all(f.map(function(_){return cc(u,_,m)}))}async function op(u,f){return ja.fromValues(u).decode(f.channelOptions,f.logger)}async function Gf(u,f){return Promise.all(u.map(function(m){return op(m,f)}))}var hu=class lb extends gi{async encode(){const f=Object.assign(new ja,this,{action:Uo.indexOf(this.action||"annotation.create")});return Br(f,{})}static fromValues(f){return Object.assign(new lb,f)}static fromValuesArray(f){return f.map(m=>lb.fromValues(m))}toString(){return sr(this,"Annotation")}},ja=class cb extends gi{toJSON(...f){return pi.call(this,...f)}static fromValues(f){return Object.assign(new cb,f)}static fromValuesArray(f){return f.map(m=>cb.fromValues(m))}async decode(f,m){const _=Object.assign(new hu,x(O({},this),{action:Uo[this.action]}));try{await Mi(_,f)}catch(w){T.logAction(m,T.LOG_ERROR,"WireAnnotation.decode()",Tt(w))}return _}toString(){return sr(this,"WireAnnotation")}},Vo=hu,Wf=class extends Vo{static async fromEncoded(u,f){return cc(T.defaultLogger,u,f)}static async fromEncodedArray(u,f){return ap(T.defaultLogger,u,f)}static fromValues(u){return Vo.fromValues(u)}};function lp(u){let f;switch(typeof u){case"string":f=u;break;case"object":f=u.serial;break}if(!f||typeof f!="string")throw new ne("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return f}function cp(u,f){const m=lp(u);if(!f||typeof f!="object")throw new ne("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const _=Vo.fromValues(f);return _.messageSerial=m,_.action||(_.action="annotation.create"),_}function up(u,f){return u.client.rest.channelMixin.basePath(u)+"/messages/"+encodeURIComponent(f)+"/annotations"}var $y=class{constructor(u){this.channel=u}async publish(u,f){const m=cp(u,f),_=await m.encode(),w=this.channel.client,R=w.options,z=R.useBinaryProtocol?"msgpack":"json",Y=Ne.defaultPostHeaders(w.options,{format:z}),fe={};oe(Y,w.options.headers);const ie=Ht([_],w._MsgPack,z);await at.post(w,up(this.channel,m.messageSerial),ie,Y,fe,null,!0)}async delete(u,f){return f.action="annotation.delete",this.publish(u,f)}async get(u,f){const m=this.channel.client,_=lp(u),w=m.options.useBinaryProtocol?"msgpack":"json",R=m.http.supportsLinkHeaders?void 0:w,z=Ne.defaultGetHeaders(m.options,{format:w});return oe(z,m.options.headers),new dr(m,up(this.channel,_),z,R,async(Y,fe,ie)=>{const _e=ie?Y:Qt(Y,m._MsgPack,w);return Gf(_e,this.channel)}).get(f)}},Kf=$y,ai=Ht;function Zs(u){const f=[];if(u)for(let m=0;m<u.length;m++)f.push(u[m].toString());return"[ "+f.join(", ")+" ]"}function fp(u,f,m,_,w,R){const z=Qt(u,f,R);return du(z,m,_,w)}function du(u,f,m,_){let w;u.error&&(w=ne.fromValues(u.error));let R;u.messages&&(R=qr.fromValuesArray(u.messages));let z;f&&u.presence&&(z=f.WirePresenceMessage.fromValuesArray(u.presence));let Y;m&&u.annotations&&(Y=m.WireAnnotation.fromValuesArray(u.annotations));let fe;return _&&u.state&&(fe=_.WireObjectMessage.fromValuesArray(u.state,te,ns)),Object.assign(new Qf,x(O({},u),{presence:z,messages:R,annotations:Y,state:fe,error:w}))}function Yf(u){return f=>{var m;return du(f,{WirePresenceMessage:ws},{WireAnnotation:ja},(m=u==null?void 0:u.ObjectsPlugin)!=null?m:null)}}function $r(u){return Object.assign(new Qf,u)}function uc(u,f,m,_){let w="[ProtocolMessage";u.action!==void 0&&(w+="; action="+Js[u.action]||u.action);const R=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let z;for(let Y=0;Y<R.length;Y++)z=R[Y],u[z]!==void 0&&(w+="; "+z+"="+u[z]);if(u.messages&&(w+="; messages="+Zs(qr.fromValuesArray(u.messages))),u.presence&&f&&(w+="; presence="+Zs(f.WirePresenceMessage.fromValuesArray(u.presence))),u.annotations&&m&&(w+="; annotations="+Zs(m.WireAnnotation.fromValuesArray(u.annotations))),u.state&&_&&(w+="; state="+Zs(_.WireObjectMessage.fromValuesArray(u.state,te,ns))),u.error&&(w+="; error="+ne.fromValues(u.error).toString()),u.auth&&u.auth.accessToken&&(w+="; token="+u.auth.accessToken),u.flags&&(w+="; flags="+Jl.filter(u.hasFlag).join(",")),u.params){let Y="";Sn(u.params,function(fe){Y.length>0&&(Y+="; "),Y+=fe+"="+u.params[fe]}),Y.length>0&&(w+="; params=["+Y+"]")}return w+="]",w}var Qf=class{constructor(){this.hasFlag=u=>(this.flags&ir[u])>0}setFlag(u){return this.flags=this.flags|ir[u]}getMode(){return(this.flags||0)&ir.MODE_ALL}encodeModesToFlags(u){u.forEach(f=>this.setFlag(f))}decodeModesFromFlags(){const u=[];return Ro.forEach(f=>{this.hasFlag(f)&&u.push(f)}),u.length>0?u:void 0}},jo=Qf,Xf=class{constructor(u,f,m,_,w){this.previous=u,this.current=f,f==="attached"&&(this.resumed=m,this.hasBacklog=_),w&&(this.reason=w)}},Fa=Xf,pu=function(){};function hp(u){if(u&&"params"in u&&!Q(u.params))return new ne("options.params must be an object",4e4,400);if(u&&"modes"in u){if(!Array.isArray(u.modes))return new ne("options.modes must be an array",4e4,400);for(let f=0;f<u.modes.length;f++){const m=u.modes[f];if(!m||typeof m!="string"||!Ro.includes(String.prototype.toUpperCase.call(m)))return new ne("Invalid channel mode: "+m,4e4,400)}}}var Ba=class ub extends fn{constructor(f,m,_){var w,R,z;super(f.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(Y){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const fe=this.client.rest.channelMixin;if(Y&&Y.untilAttach){if(this.state!=="attached")throw new ne("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new ne("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete Y.untilAttach,Y.from_serial=this.properties.attachSerial}return fe.history(this,Y)},this.whenState=Y=>fn.prototype.whenState.call(this,Y,this.state),T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel()","started; name = "+m),this.name=m,this.channelOptions=et((w=f._Crypto)!=null?w:null,this.logger,_),this.client=f,this._presence=f._RealtimePresence?new f._RealtimePresence.RealtimePresence(this):null,f._Annotations&&(this._annotations=new f._Annotations.RealtimeAnnotations(this)),this.connectionManager=f.connection.connectionManager,this.state="initialized",this.subscriptions=new fn(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(_),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:f.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new fn(this.logger),(R=f.options.plugins)!=null&&R.Push&&(this._push=new f.options.plugins.Push.PushChannel(this)),(z=f.options.plugins)!=null&&z.Objects&&(this._objects=new f.options.plugins.Objects.Objects(this))}get presence(){return this._presence||rn("RealtimePresence"),this._presence}get annotations(){return this._annotations||rn("Annotations"),this._annotations}get push(){return this._push||rn("Push"),this._push}get objects(){return this._objects||rn("Objects"),this._objects}invalidStateError(){return new ne("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(f){return f=Array.prototype.slice.call(f),typeof f[0]=="function"&&f.unshift(null),f}async setOptions(f){var m;const _=this.channelOptions,w=hp(f);if(w)throw w;if(this.channelOptions=et((m=this.client._Crypto)!=null?m:null,this.logger,f),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(f,_))return this.attachImpl(),new Promise((R,z)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(Y){switch(this.event){case"update":case"attached":R();break;default:z(Y.reason)}})})}_shouldReattachToSetOptions(f,m){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(f!=null&&f.params){const _=za(f.params),w=za(m.params);if(Object.keys(_).length!==Object.keys(w).length||!Yi(w,_))return!0}return!!(f!=null&&f.modes&&(!m.modes||!Qi(f.modes,m.modes)))}async publish(...f){let m;if(f.length==1)if(Q(f[0]))m=[y.fromValues(f[0])];else if(Array.isArray(f[0]))m=y.fromValuesArray(f[0]);else throw new ne("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else m=[y.fromValues({name:f[0],data:f[1]})];const w=this.client.options.maxMessageSize,R=await Va(m,this.channelOptions),z=Lo(R);if(z>w)throw new ne(`Maximum size of messages that can be published at once exceeded (was ${z} bytes; limit is ${w} bytes)`,40009,400);this.throwIfUnpublishableState(),T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+R.length);const Y=$r({action:Ge.MESSAGE,channel:this.name,messages:R});return this.sendMessage(Y)}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(this.state==="failed"||this.state==="suspended")throw this.invalidStateError()}onEvent(f){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const m=this.subscriptions;for(let _=0;_<f.length;_++){const w=f[_];m.emit(w.name,w)}}async attach(){return this.state==="attached"?null:new Promise((f,m)=>{this._attach(!1,null,(_,w)=>_?m(_):f(w))})}_attach(f,m,_){_||(_=R=>{R&&T.logAction(this.logger,T.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+R.toString())});const w=this.connectionManager;if(!w.activeState()){_(w.getError());return}(this.state!=="attaching"||f)&&this.requestState("attaching",m),this.once(function(R){switch(this.event){case"attached":_==null||_(null,R);break;case"detached":case"suspended":case"failed":_==null||_(R.reason||w.getError()||new ne("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":_==null||_(new ne("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const f=$r({action:Ge.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&f.encodeModesToFlags(ti(this.channelOptions.modes)),this._attachResume&&f.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(f.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(f).catch(pu)}async detach(){const f=this.connectionManager;if(!f.activeState())throw f.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new ne("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((m,_)=>{this.once(function(w){switch(this.event){case"detached":m();break;case"attached":case"suspended":case"failed":_(w.reason||f.getError()||new ne("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":_(new ne("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const f=$r({action:Ge.DETACH,channel:this.name});this.sendMessage(f).catch(pu)}async subscribe(...f){const[m,_]=ub.processListenerArgs(f);if(this.state==="failed")throw ne.fromValues(this.invalidStateError());return m&&typeof m=="object"&&!Array.isArray(m)?this.client._FilteredSubscriptions.subscribeFilter(this,m,_):this.subscriptions.on(m,_),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...f){var m;const[_,w]=ub.processListenerArgs(f);if(typeof _=="object"&&!w||(m=this.filteredSubscriptions)!=null&&m.has(w)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,_,w).forEach(R=>this.subscriptions.off(R));return}this.subscriptions.off(_,w)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new Pe("Unable to sync to channel; not attached",4e4)}const f=this.connectionManager;if(!f.activeState())throw f.getError();const m=$r({action:Ge.SYNC,channel:this.name});this.syncChannelSerial&&(m.channelSerial=this.syncChannelSerial),f.send(m)}async sendMessage(f){return new Promise((m,_)=>{this.connectionManager.send(f,this.client.options.queueMessages,w=>{w?_(w):m()})})}async sendPresence(f){const m=$r({action:Ge.PRESENCE,channel:this.name,presence:f});return this.sendMessage(m)}sendState(f){const m=$r({action:Ge.OBJECT,channel:this.name,state:f});return this.sendMessage(m)}async processMessage(f){(f.action===Ge.ATTACHED||f.action===Ge.MESSAGE||f.action===Ge.PRESENCE||f.action===Ge.OBJECT||f.action===Ge.ANNOTATION)&&this.setChannelSerial(f.channelSerial);let m,_=!1;switch(f.action){case Ge.ATTACHED:{this.properties.attachSerial=f.channelSerial,this._mode=f.getMode(),this.params=f.params||{};const w=f.decodeModesFromFlags();this.modes=w&&Ws(w)||void 0;const R=f.hasFlag("RESUMED"),z=f.hasFlag("HAS_PRESENCE"),Y=f.hasFlag("HAS_BACKLOG"),fe=f.hasFlag("HAS_OBJECTS");if(this.state==="attached"){R||(this._presence&&this._presence.onAttached(z),this._objects&&this._objects.onAttached(fe));const ie=new Fa(this.state,this.state,R,Y,f.error);this._allChannelChanges.emit("update",ie),(!R||this.channelOptions.updateOnAttached)&&this.emit("update",ie)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",f.error,R,z,Y,fe);break}case Ge.DETACHED:{const w=f.error?ne.fromValues(f.error):new ne("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",w):this.state==="attaching"?this.notifyState("suspended",w):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",w);break}case Ge.SYNC:if(_=!0,m=this.syncChannelSerial=f.channelSerial,!f.presence)break;case Ge.PRESENCE:{if(!f.presence)break;zr(f);const w=this.channelOptions;if(this._presence){const R=await Promise.all(f.presence.map(z=>z.decode(w,this.logger)));this._presence.setPresence(R,_,m)}break}case Ge.OBJECT:case Ge.OBJECT_SYNC:{if(!this._objects||!f.state)return;zr(f);const w=this.client.connection.connectionManager.getActiveTransportFormat(),R=f.state.map(z=>z.decode(this.client,w));f.action===Ge.OBJECT?this._objects.handleObjectMessages(R):this._objects.handleObjectSyncMessages(R,f.channelSerial);break}case Ge.MESSAGE:{if(this.state!=="attached"){T.logAction(this.logger,T.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+f.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}zr(f);const w=f.messages,R=w[0],z=w[w.length-1];if(R.extras&&R.extras.delta&&R.extras.delta.from!==this._lastPayload.messageId){const fe='Delta message decode failure - previous message not available for message "'+f.id+'" on this channel "'+this.name+'".';T.logAction(this.logger,T.LOG_ERROR,"RealtimeChannel.processMessage()",fe),this._startDecodeFailureRecovery(new ne(fe,40018,400));break}let Y=[];for(let fe=0;fe<w.length;fe++){const{decoded:ie,err:_e}=await w[fe].decodeWithErr(this._decodingContext,this.logger);if(Y[fe]=ie,_e)switch(_e.code){case 40018:this._startDecodeFailureRecovery(_e);return;case 40019:case 40021:this.notifyState("failed",_e);return}}this._lastPayload.messageId=z.id,this._lastPayload.protocolMessageChannelSerial=f.channelSerial,this.onEvent(Y);break}case Ge.ANNOTATION:{zr(f);const w=this.channelOptions;if(this._annotations){const R=await Promise.all((f.annotations||[]).map(z=>z.decode(w,this.logger)));this._annotations._processIncoming(R)}break}case Ge.ERROR:{const w=f.error;w&&w.code==80016?this.checkPendingState():this.notifyState("failed",ne.fromValues(w));break}default:T.logAction(this.logger,T.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+f.action+")")}}_startDecodeFailureRecovery(f){this._lastPayload.decodeFailureRecoveryInProgress||(T.logAction(this.logger,T.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,f,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(f,m,_,w,R,z){if(T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+f),this.clearStateTimer(),["detached","suspended","failed"].includes(f)&&(this.properties.channelSerial=null),f===this.state)return;this._presence&&this._presence.actOnChannelState(f,w,m),this._objects&&this._objects.actOnChannelState(f,z),f==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),m&&(this.errorReason=m);const Y=new Fa(this.state,f,_,R,m),fe='Channel state for channel "'+this.name+'"',ie=f+(m?"; reason: "+m:"");f==="failed"?T.logAction(this.logger,T.LOG_ERROR,fe,ie):T.logAction(this.logger,T.LOG_MAJOR,fe,ie),f!=="attaching"&&f!=="suspended"&&(this.retryCount=0),f==="attached"&&this.onAttached(),f==="attached"?this._attachResume=!0:(f==="detaching"||f==="failed")&&(this._attachResume=!1),this.state=f,this._allChannelChanges.emit(f,Y),this.emit(f,Y)}requestState(f,m){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+f),this.notifyState(f,m),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const f=new ne("Channel attach timed out",90007,408);this.notifyState("suspended",f);break}case"detaching":{const f=new ne("Channel detach timed out",90007,408);this.notifyState("attached",f);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const f=this.stateTimer;f&&(clearTimeout(f),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const f=ui(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},f)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const f=this.state;return f==="initialized"||f==="detached"||f==="failed"?null:new ne("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+f,90001,400)}setChannelSerial(f){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+f+"; previous = "+this.properties.channelSerial),f&&(this.properties.channelSerial=f)}async status(){return this.client.rest.channelMixin.status(this)}};function za(u){const f=u||{},{agent:m}=f;return N(f,["agent"])}var Ha=Ba,dp=class{constructor(u){this.channel=u,this.logger=u.logger,this.subscriptions=new fn(this.logger)}async publish(u,f){const m=this.channel.name,_=cp(u,f),w=await _.encode();this.channel.throwIfUnpublishableState(),T.logAction(this.logger,T.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+m+", sending annotation with messageSerial = "+_.messageSerial+", type = "+_.type);const R=$r({action:Ge.ANNOTATION,channel:m,annotations:[w]});return this.channel.sendMessage(R)}async delete(u,f){return f.action="annotation.delete",this.publish(u,f)}async subscribe(...u){const f=Ha.processListenerArgs(u),m=f[0],_=f[1],w=this.channel;if(w.state==="failed")throw ne.fromValues(w.invalidStateError());if(this.subscriptions.on(m,_),this.channel.channelOptions.attachOnSubscribe!==!1&&await w.attach(),(this.channel.state==="attached"&&this.channel._mode&ir.ANNOTATION_SUBSCRIBE)===0)throw new ne("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...u){const f=Ha.processListenerArgs(u),m=f[0],_=f[1];this.subscriptions.off(m,_)}_processIncoming(u){for(const f of u)this.subscriptions.emit(f.type||"",f)}async get(u,f){return Kf.prototype.get.call(this,u,f)}},ea=dp,ta=class Fg extends Fn{constructor(f){var m,_;if(!Fg._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Ne.objectifyOptions(f,!0,"Rest",T.defaultLogger,x(O({},as),{Crypto:(m=Fg.Crypto)!=null?m:void 0,MsgPack:(_=Fg._MsgPack)!=null?_:void 0,Annotations:{Annotation:Vo,WireAnnotation:ja,RealtimeAnnotations:ea,RestAnnotations:Kf}})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(f){this._Crypto=f}};ta._Crypto=null,ta.Message=Gn,ta.PresenceMessage=Ni,ta.Annotation=Wf,ta._MsgPack=null,ta._Http=_s;var gu=ta,pp=class extends fn{constructor(u){super(u),this.messages=[]}count(){return this.messages.length}push(u){this.messages.push(u)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(u){this.messages.push.apply(this.messages,u)}prepend(u){this.messages.unshift.apply(this.messages,u)}completeMessages(u,f,m){T.logAction(this.logger,T.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+u+"; count = "+f),m=m||null;const _=this.messages;if(_.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const w=_[0];if(w){const R=w.message.msgSerial,z=u+f;if(z>R){const Y=_.splice(0,z-R);for(const fe of Y)fe.callback(m)}_.length==0&&this.emit("idle")}}completeAllMessages(u){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,u)}resetSendAttempted(){for(let u of this.messages)u.sendAttempted=!1}clear(){T.logAction(this.logger,T.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},gp=pp,mp=class{constructor(u,f){this.message=u,this.callback=f,this.merged=!1;const m=u.action;this.sendAttempted=!1,this.ackRequired=typeof m=="number"&&[Ge.MESSAGE,Ge.PRESENCE,Ge.ANNOTATION,Ge.OBJECT].includes(m)}},Gy=class extends fn{constructor(u){super(u.logger),this.transport=u,this.messageQueue=new gp(this.logger),u.on("ack",(f,m)=>{this.onAck(f,m)}),u.on("nack",(f,m,_)=>{this.onNack(f,m,_)})}onAck(u,f){T.logAction(this.logger,T.LOG_MICRO,"Protocol.onAck()","serial = "+u+"; count = "+f),this.messageQueue.completeMessages(u,f)}onNack(u,f,m){T.logAction(this.logger,T.LOG_ERROR,"Protocol.onNack()","serial = "+u+"; count = "+f+"; err = "+Tt(m)),m||(m=new ne("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(u,f,m)}onceIdle(u){const f=this.messageQueue;if(f.count()===0){u();return}f.once("idle",u)}send(u){u.ackRequired&&this.messageQueue.push(u),this.logger.shouldLog(T.LOG_MICRO)&&T.logActionNoStrip(this.logger,T.LOG_MICRO,"Protocol.send()","sending msg; "+uc(u.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._objectsPlugin)),u.sendAttempted=!0,this.transport.send(u.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const u=this.transport;this.onceIdle(function(){u.disconnect()})}},yp=Gy,vp=class{constructor(u,f,m,_){this.previous=u,this.current=f,m&&(this.retryIn=m),_&&(this.reason=_)}},Fo=vp,Wn={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},bp={disconnected:()=>ne.fromValues({statusCode:400,code:Wn.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>ne.fromValues({statusCode:400,code:Wn.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>ne.fromValues({statusCode:400,code:Wn.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>ne.fromValues({statusCode:400,code:Wn.CLOSING,message:"Connection closing"}),closed:()=>ne.fromValues({statusCode:400,code:Wn.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>ne.fromValues({statusCode:500,code:Wn.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>ne.fromValues({statusCode:500,code:Wn.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function mi(u){return!u.statusCode||!u.code||u.statusCode>=500?!0:Object.values(Wn).includes(u.code)}var Kn=bp,Bo=$r({action:Ge.CLOSE}),Jf=$r({action:Ge.DISCONNECT}),mu=class extends fn{constructor(u,f,m,_){super(u.logger),_&&(m.format=void 0,m.heartbeats=!0),this.connectionManager=u,this.auth=f,this.params=m,this.timeouts=m.options.timeouts,this.format=m.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Kn.closed())}disconnect(u){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",u||Kn.disconnected())}fail(u){this.isConnected&&this.requestDisconnect(),this.finish("failed",u||Kn.failed())}finish(u,f){var m;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((m=this.idleTimer)!=null?m:void 0),this.idleTimer=null,this.emit(u,f),this.dispose())}onProtocolMessage(u){switch(this.logger.shouldLog(T.LOG_MICRO)&&T.logActionNoStrip(this.logger,T.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+uc(u,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),u.action){case Ge.HEARTBEAT:T.logActionNoStrip(this.logger,T.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",u.id);break;case Ge.CONNECTED:this.onConnect(u),this.emit("connected",u.error,u.connectionId,u.connectionDetails,u);break;case Ge.CLOSED:this.onClose(u);break;case Ge.DISCONNECTED:this.onDisconnect(u);break;case Ge.ACK:this.emit("ack",u.msgSerial,u.count);break;case Ge.NACK:this.emit("nack",u.msgSerial,u.count,u.error);break;case Ge.SYNC:this.connectionManager.onChannelMessage(u,this);break;case Ge.ACTIVATE:break;case Ge.AUTH:nt(this.auth.authorize(),f=>{f&&T.logAction(this.logger,T.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Tt(f))});break;case Ge.ERROR:if(T.logAction(this.logger,T.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+H.Config.inspect(u.error)+(u.channel?", channel: "+u.channel:"")),u.channel===void 0){this.onFatalError(u);break}this.connectionManager.onChannelMessage(u,this);break;default:this.connectionManager.onChannelMessage(u,this)}}onConnect(u){if(this.isConnected=!0,!u.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const f=u.connectionDetails.maxIdleInterval;f&&(this.maxIdleInterval=f+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(u){const f=u&&u.error;T.logAction(this.logger,T.LOG_MINOR,"Transport.onDisconnect()","err = "+Tt(f)),this.finish("disconnected",f)}onFatalError(u){const f=u&&u.error;T.logAction(this.logger,T.LOG_MINOR,"Transport.onFatalError()","err = "+Tt(f)),this.finish("failed",f)}onClose(u){const f=u&&u.error;T.logAction(this.logger,T.LOG_MINOR,"Transport.onClose()","err = "+Tt(f)),this.finish("closed",f)}requestClose(){T.logAction(this.logger,T.LOG_MINOR,"Transport.requestClose()",""),this.send(Bo)}requestDisconnect(){T.logAction(this.logger,T.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Jf)}ping(u){const f={action:Ge.HEARTBEAT};u&&(f.id=u),this.send($r(f))}dispose(){T.logAction(this.logger,T.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(u){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},u))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const u=Date.now()-this.lastActivity,f=this.maxIdleInterval-u;if(f<=0){const m="No activity seen from realtime in "+u+"ms; assuming connection has dropped";T.logAction(this.logger,T.LOG_ERROR,"Transport.onIdleTimerExpire()",m),this.disconnect(new ne(m,80003,408))}else this.setIdleTimer(f+100)}static tryConnect(u,f,m,_,w){const R=new u(f,m,_);let z;const Y=function(ie){clearTimeout(z),w({event:this.event,error:ie})},fe=f.options.timeouts.realtimeRequestTimeout;return z=setTimeout(()=>{R.off(["preconnect","disconnected","failed"]),R.dispose(),Y.call({event:"disconnected"},new ne("Timeout waiting for transport to indicate itself viable",5e4,500))},fe),R.on(["failed","disconnected"],Y),R.on("preconnect",function(){T.logAction(f.logger,T.LOG_MINOR,"Transport.tryConnect()","viable transport "+R),clearTimeout(z),R.off(["failed","disconnected"],Y),w(null,R)}),R.connect(),R}static isAvailable(){throw new ne("isAvailable not implemented for transport",5e4,500)}},Cs=mu,pr;(u=>{u.WebSocket="web_socket",u.Comet="comet",u.XhrPolling="xhr_polling"})(pr||(pr={}));var zo=typeof yl<"u"?yl:typeof window<"u"?window:self,yu=()=>{var u;return typeof H.WebStorage<"u"&&((u=H.WebStorage)==null?void 0:u.localSupported)},na=()=>{var u;return typeof H.WebStorage<"u"&&((u=H.WebStorage)==null?void 0:u.sessionSupported)},qa=function(){},Zf="ably-transport-preference";function oi(u,f,m){let _;if(u.channel!==f.channel||(_=u.action)!==Ge.PRESENCE&&_!==Ge.MESSAGE||_!==f.action)return!1;const w=_===Ge.PRESENCE?"presence":"messages",R=u[w].concat(f[w]);return Lo(R)>m||!Ur(R,"clientId")||!R.every(function(Y){return!Y.id})?!1:(u[w]=R,!0)}function fc(u){try{return JSON.parse(u)}catch{return null}}var As=class{constructor(u,f,m,_){this.options=u,this.host=f,this.mode=m,this.connectionKey=_,this.format=u.useBinaryProtocol?"msgpack":"json"}getConnectParams(u){const f=u?Ae(u):{},m=this.options;switch(this.mode){case"resume":f.resume=this.connectionKey;break;case"recover":{const _=fc(m.recover);_&&(f.recover=_.connectionKey);break}}return m.clientId!==void 0&&(f.clientId=m.clientId),m.echoMessages===!1&&(f.echo="false"),this.format!==void 0&&(f.format=this.format),this.stream!==void 0&&(f.stream=this.stream),this.heartbeats!==void 0&&(f.heartbeats=this.heartbeats),f.v=Ne.protocolVersion,f.agent=$e(this.options),m.transportParams!==void 0&&oe(f,m.transportParams),f}toString(){let u="[mode="+this.mode;return this.host&&(u+=",host="+this.host),this.connectionKey&&(u+=",connectionKey="+this.connectionKey),this.format&&(u+=",format="+this.format),u+="]",u}},_p=class iO extends fn{constructor(f,m){super(f.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=f,this.initTransports(),this.options=m;const _=m.timeouts,w=_.webSocketConnectTimeout+_.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:w,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:_.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:_.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:_.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new gp(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=_.connectionStateTtl,this.maxIdleInterval=null,this.transports=Ot(m.transports||Ne.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(pr.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(pr.XhrPolling)?this.baseTransport=pr.XhrPolling:this.transports.includes(pr.Comet)&&(this.baseTransport=pr.Comet),this.domains=Ne.getHosts(m),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,T.logAction(this.logger,T.LOG_MINOR,"Realtime.ConnectionManager()","started"),T.logAction(this.logger,T.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(m.transports||Ne.defaultTransports)+"]"),T.logAction(this.logger,T.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),T.logAction(this.logger,T.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const z="no requested transports available";throw T.logAction(this.logger,T.LOG_ERROR,"realtime.ConnectionManager()",z),new Error(z)}const R=H.Config.addEventListener;R&&(na()&&typeof m.recover=="function"&&R("beforeunload",this.persistConnection.bind(this)),m.closeOnUnload===!0&&R("beforeunload",()=>{T.logAction(this.logger,T.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),R("online",()=>{var z;this.state==this.states.disconnected||this.state==this.states.suspended?(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((z=this.pendingTransport)==null||z.off(),this.disconnectAllTransports(),this.startConnect())}),R("offline",()=>{this.state==this.states.connected&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(f){const m={supportedTransports:{}};return this.initTransports(f,m),m.supportedTransports}static initTransports(f,m){const _=O(O({},H.Transports.bundledImplementations),f);[pr.WebSocket,...H.Transports.order].forEach(w=>{const R=_[w];R&&R.isAvailable()&&(m.supportedTransports[w]=R)})}initTransports(){iO.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(f,m){return new As(this.options,f,m,this.connectionKey)}getTransportParams(f){(_=>{if(this.connectionKey){_("resume");return}if(typeof this.options.recover=="string"){_("recover");return}const w=this.options.recover,R=this.getSessionRecoverData(),z=this.sessionRecoveryName();if(R&&typeof w=="function"){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+z+")"),w(R,Y=>{Y?(this.options.recover=R.recoveryKey,_("recover")):_("clean")});return}_("clean")})(_=>{const w=this.createTransportParams(null,_);if(_==="recover"){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const R=fc(this.options.recover);R&&(this.msgSerial=R.msgSerial)}else T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+w.toString());f(w)})}tryATransport(f,m,_){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+m),this.proposedTransport=Cs.tryConnect(this.supportedTransports[m],this,this.realtime.auth,f,(w,R)=>{const z=this.state;if(z==this.states.closing||z==this.states.closed||z==this.states.failed){R&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+z.state+" while we were attempting the transport; closing "+R),R.close()),_(!0);return}if(w){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+m+" "+w.event+", err: "+w.error.toString()),ri.isTokenErr(w.error)&&!(this.errorReason&&ri.isTokenErr(this.errorReason))?(this.errorReason=w.error,nt(this.realtime.auth._forceNewToken(null,null),Y=>{if(Y){this.actOnErrorFromAuthorize(Y);return}this.tryATransport(f,m,_)})):w.event==="failed"?(this.notifyState({state:"failed",error:w.error}),_(!0)):w.event==="disconnected"&&(mi(w.error)?_(!1):(this.notifyState({state:this.states.connecting.failState,error:w.error}),_(!0)));return}T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+m+"; setting pending"),this.setTransportPending(R,f),_(null,R)})}setTransportPending(f,m){const _=m.mode;T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+f+"; mode = "+_),this.pendingTransport=f,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),f.once("connected",(R,z,Y)=>{this.activateTransport(R,f,z,Y),_==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const w=this;f.on(["disconnected","closed","failed"],function(R){w.deactivateTransport(f,this.event,R)}),this.emit("transport.pending",f)}activateTransport(f,m,_,w){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+m),f&&T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+f),_&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+_),w&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(w)),this.persistTransportPreference(m);const R=this.state,z=this.states.connected.state;if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+R.state),R.state==this.states.closing.state||R.state==this.states.closed.state||R.state==this.states.failed.state)return T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),m.disconnect(),!1;if(delete this.pendingTransport,!m.isConnected)return T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+m+" since it appears to no longer be connected"),!1;const Y=this.activeProtocol;this.activeProtocol=new yp(m),this.host=m.params.host;const fe=w.connectionKey;if(fe&&this.connectionKey!=fe&&this.setConnection(_,w,!!f),this.onConnectionDetailsUpdate(w,m),H.Config.nextTick(()=>{m.on("connected",(ie,_e,Se)=>{this.onConnectionDetailsUpdate(Se,m),this.emit("update",new Fo(z,z,null,ie))})}),R.state===this.states.connected.state?f&&(this.errorReason=this.realtime.connection.errorReason=f,this.emit("update",new Fo(z,z,null,f))):(this.notifyState({state:"connected",error:f}),this.errorReason=this.realtime.connection.errorReason=f||null),this.emit("transport.active",m),Y)if(Y.messageQueue.count()>0&&T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+Y.transport.shortName+", new one is "+m.shortName+") finishing with "+Y.messageQueue.count()+" messages still pending"),Y.transport===m){const ie="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+m.shortName+"; stack = "+new Error().stack;T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.activateTransport()",ie)}else Y.finish();return!0}deactivateTransport(f,m,_){const w=this.activeProtocol,R=w&&w.getTransport()===f,z=f===this.pendingTransport,Y=this.noTransportsScheduledForActivation();if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+f),T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+m+(R?"; was active":z?"; was pending":"")+(Y?"":"; another transport is scheduled for activation")),_&&_.message&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+_.message),R&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(w.getPendingMessages()),w.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",f),R&&Y||R&&m==="failed"||m==="closed"||w===null&&z){if(m==="disconnected"&&_&&_.statusCode>500&&this.domains.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:m,error:_,retryImmediately:!0});return}const fe=m==="failed"&&ri.isTokenErr(_)?"disconnected":m;this.notifyState({state:fe,error:_});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(f,m,_){const w=this.connectionId;(w&&w!==f||!w&&_)&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==f&&T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=f,this.realtime.connection.key=this.connectionKey=m.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const f=Date.now()-this.lastActivity;f>this.connectionStateTtl+this.maxIdleInterval&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+f+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(na()){const f=this.createRecoveryKey();f&&this.setSessionRecoverData({recoveryKey:f,disconnectedAt:Date.now(),location:zo.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var f;return(f=this.activeProtocol)==null?void 0:f.getTransport().format}getError(){if(this.errorReason){const f=Pe.fromValues(this.errorReason);return f.cause=this.errorReason,f}return this.getStateError()}getStateError(){var f,m;return(m=(f=Kn)[this.state.state])==null?void 0:m.call(f)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(f){const m="Connection state",_=f.current+(f.reason?"; reason: "+f.reason:"");f.current==="failed"?T.logAction(this.logger,T.LOG_ERROR,m,_):T.logAction(this.logger,T.LOG_MAJOR,m,_),T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+f.current+"; reason = "+(f.reason&&f.reason.message));const w=this.state=this.states[f.current];f.reason&&(this.errorReason=f.reason,this.realtime.connection.errorReason=f.reason),(w.terminal||w.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",f)}startTransitionTimer(f){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+f.state),this.transitionTimer&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager "+f.state+" timer expired","requesting new state: "+f.failState),this.notifyState({state:f.failState}))},f.retryDelay)}cancelTransitionTimer(){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(f){f!=="disconnected"&&f!=="suspended"&&f!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(f){this.retryTimer=setTimeout(()=>{T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},f)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{T.logAction(this.logger,T.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&nt(this.realtime.http.checkConnectivity(),(f,m)=>{f||!m?(T.logAction(this.logger,T.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new ne("Unable to connect (network unreachable)",80003,404)})):T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(f){this.webSocketGiveUpTimer=setTimeout(()=>{var m,_;this.wsCheckResult||(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(m=this.proposedTransport)==null||m.dispose(),(_=this.pendingTransport)==null||_.dispose(),this.connectBase(f,++this.connectCounter)):T.logAction(this.logger,T.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(f){var m,_;const w=f.state,R=w==="disconnected"&&(this.state===this.states.connected||f.retryImmediately||this.state===this.states.connecting&&f.error&&ri.isTokenErr(f.error)&&!(this.errorReason&&ri.isTokenErr(this.errorReason)));if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+w+(R?"; will retry connection immediately":"")),w==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(f.state),(w==="suspended"||w==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const z=this.states[f.state];let Y=z.retryDelay;z.state==="disconnected"&&(this.disconnectedRetryCount++,Y=ui(z.retryDelay,this.disconnectedRetryCount));const fe=new Fo(this.state.state,z.state,Y,f.error||((_=(m=Kn)[z.state])==null?void 0:_.call(m)));if(R){const ie=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},_e=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;_e&&_e<1e3?(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+_e+"ms ago, waiting another "+(1e3-_e)+"ms before trying again"),setTimeout(ie,1e3-_e)):H.Config.nextTick(ie)}else(w==="disconnected"||w==="suspended")&&this.startRetryTimer(Y);(w==="disconnected"&&!R||w==="suspended"||z.terminal)&&H.Config.nextTick(()=>{this.disconnectAllTransports()}),w=="connected"&&!this.activeProtocol&&T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(fe),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(w,fe.reason),this.failQueuedMessages(fe.reason))}requestState(f){var m,_;const w=f.state;if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+w+"; current state: "+this.state.state),w==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(w),w=="connecting"&&this.state.state=="connected")||w=="closing"&&this.state.state=="closed")return;const R=this.states[w],z=new Fo(this.state.state,R.state,null,f.error||((_=(m=Kn)[R.state])==null?void 0:_.call(m)));this.enactStateChange(z),w=="connecting"&&H.Config.nextTick(()=>{this.startConnect()}),w=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const f=this.realtime.auth,m=++this.connectCounter,_=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(w=>{if(w.mode==="recover"&&w.options.recover){const R=fc(w.options.recover);R&&this.realtime.channels.recoverChannels(R.channelSerials)}m===this.connectCounter&&this.connectImpl(w,m)})};if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),f.method==="basic")_();else{const w=R=>{m===this.connectCounter&&(R?this.actOnErrorFromAuthorize(R):_())};this.errorReason&&ri.isTokenErr(this.errorReason)?nt(f._forceNewToken(null,null),w):nt(f._ensureValidAuthCredentials(!1),w)}}connectImpl(f,m){const _=this.state.state;if(_!==this.states.connecting.state){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+_);return}const w=this.getTransportPreference();w&&w===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(f,++this.connectCounter))}).catch(qa),w&&w===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(f,m):this.connectWs(f,m)}connectWs(f,m){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(f),this.tryTransportWithFallbacks("web_socket",f,!0,m,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(f,m){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,f,!1,m,()=>!0):this.notifyState({state:"disconnected",error:new ne("No transports left to try",8e4,404)})}tryTransportWithFallbacks(f,m,_,w,R){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",f);const z=Se=>{this.notifyState({state:this.states.connecting.failState,error:Se})},Y=this.domains.slice(),fe=(Se,Me)=>{if(w===this.connectCounter){if(!R()){Me&&Me.dispose();return}!Me&&!Se&&_e()}},ie=Y.shift();if(!ie){z(new ne("Unable to connect (no available host)",80003,404));return}m.host=ie;const _e=()=>{if(!Y.length){z(new ne("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){z(new Pe("Internal error: Http.checkConnectivity not set",null,500));return}nt(this.realtime.http.checkConnectivity(),(Se,Me)=>{if(w===this.connectCounter&&R()){if(Se){z(Se);return}if(!Me){z(new ne("Unable to connect (network unreachable)",80003,404));return}m.host=Ln(Y),this.tryATransport(m,f,fe)}})};if(this.forceFallbackHost&&Y.length){this.forceFallbackHost=!1,_e();return}this.tryATransport(m,f,fe)}closeImpl(){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(f,m){var _;switch(this.state.state){case"connected":{T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const w=(_=this.activeProtocol)==null?void 0:_.getTransport();w&&w.onAuthUpdated&&w.onAuthUpdated(f);const R=$r({action:Ge.AUTH,auth:{accessToken:f.token}});this.send(R);const z=()=>{this.off(Y),m(null,f)},Y=fe=>{fe.current==="failed"&&(this.off(z),this.off(Y),m(fe.reason||this.getStateError()))};this.once("connectiondetails",z),this.on("connectionstate",Y);break}case"connecting":T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const w=R=>{switch(R.current){case"connected":this.off(w),m(null,f);break;case"failed":case"closed":case"suspended":this.off(w),m(R.reason||this.getStateError());break}};this.on("connectionstate",w),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(f,m,_){_=_||qa;const w=this.state;if(w.sendEvents){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new mp(f,_));return}if(!(m&&w.queueEvents)){const z="rejecting event, queueEvent was "+m+", state was "+w.state;T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.send()",z),_(this.errorReason||new ne(z,9e4,400));return}this.logger.shouldLog(T.LOG_MICRO)&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+uc(f,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._objectsPlugin)),this.queue(f,_)}sendImpl(f){const m=f.message;f.ackRequired&&!f.sendAttempted&&(m.msgSerial=this.msgSerial++);try{this.activeProtocol.send(f)}catch(_){T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+_.stack)}}queue(f,m){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.queue()","queueing event");const _=this.queuedMessages.last(),w=this.options.maxMessageSize;_&&!_.sendAttempted&&oi(_.message,f,w)?(_.merged||(_.callback=tr.create(this.logger,[_.callback]),_.merged=!0),_.callback.push(m)):this.queuedMessages.push(new mp(f,m))}sendQueuedMessages(){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let f;for(;f=this.queuedMessages.shift();)this.sendImpl(f)}queuePendingMessages(f){f&&f.length&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+f.length+" pending messages"),this.queuedMessages.prepend(f))}failQueuedMessages(f){const m=this.queuedMessages.count();m>0&&(T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+m+" queued messages, err = "+Tt(f)),this.queuedMessages.completeAllMessages(f))}onChannelMessage(f,m){this.pendingChannelMessagesState.queue.push({message:f,transport:m}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const f=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(f.message).catch(m=>{T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",m)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(f){await this.realtime.channels.processChannelMessage(f)}async ping(){var f;if(this.state.state!=="connected")throw new ne("Unable to ping service; not connected",4e4,400);const m=(f=this.activeProtocol)==null?void 0:f.getTransport();if(!m)throw this.getStateError();T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.ping()","transport = "+m);const _=Date.now(),w=Ai();return fi(new Promise(R=>{const z=Y=>{Y===w&&(m.off("heartbeat",z),R(Date.now()-_))};m.on("heartbeat",z),m.ping(w)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(f){this.activeProtocol.getTransport().fail(f)}getTransportPreference(){var f,m;return this.transportPreference||yu()&&((m=(f=H.WebStorage)==null?void 0:f.get)==null?void 0:m.call(f,Zf))}persistTransportPreference(f){var m,_;this.transportPreference=f.shortName,yu()&&((_=(m=H.WebStorage)==null?void 0:m.set)==null||_.call(m,Zf,f.shortName))}unpersistTransportPreference(){var f,m;this.transportPreference=null,yu()&&((m=(f=H.WebStorage)==null?void 0:f.remove)==null||m.call(f,Zf))}actOnErrorFromAuthorize(f){if(f.code===40171)this.notifyState({state:"failed",error:f});else if(f.code===40102)this.notifyState({state:"failed",error:f});else if(f.statusCode===Vn.Forbidden){const m="Client configured authentication provider returned 403; failing the connection";T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",m),this.notifyState({state:"failed",error:new ne(m,80019,403,f)})}else{const m="Client configured authentication provider request failed";T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",m),this.notifyState({state:this.state.failState,error:new ne(m,80019,401,f)})}}onConnectionDetailsUpdate(f,m){if(!f)return;this.connectionDetails=f,f.maxMessageSize&&(this.options.maxMessageSize=f.maxMessageSize);const _=f.clientId;if(_){const R=this.realtime.auth._uncheckedSetClientId(_);if(R){T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",R.message),m.fail(R);return}}const w=f.connectionStateTtl;w&&(this.connectionStateTtl=w),this.maxIdleInterval=f.maxIdleInterval,this.emit("connectiondetails",f)}checkWsConnectivity(){const f=this.options.wsConnectivityCheckUrl||Ne.wsConnectivityCheckUrl,m=new H.Config.WebSocket(f);return new Promise((_,w)=>{let R=!1;m.onopen=()=>{R||(R=!0,_(),m.close())},m.onclose=m.onerror=()=>{R||(R=!0,w())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var f,m;return na()&&((m=(f=H.WebStorage)==null?void 0:f.getSession)==null?void 0:m.call(f,this.sessionRecoveryName()))}setSessionRecoverData(f){var m,_;return na()&&((_=(m=H.WebStorage)==null?void 0:m.setSession)==null?void 0:_.call(m,this.sessionRecoveryName(),f))}clearSessionRecoverData(){var f,m;return na()&&((m=(f=H.WebStorage)==null?void 0:f.removeSession)==null?void 0:m.call(f,this.sessionRecoveryName()))}},hc=_p,$a=class extends fn{constructor(u,f){super(u.logger),this.whenState=m=>fn.prototype.whenState.call(this,m,this.state),this.ably=u,this.connectionManager=new hc(u,f),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",m=>{const _=this.state=m.current;H.Config.nextTick(()=>{this.emit(_,m)})}),this.connectionManager.on("update",m=>{H.Config.nextTick(()=>{this.emit("update",m)})})}connect(){T.logAction(this.logger,T.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return T.logAction(this.logger,T.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){T.logAction(this.logger,T.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},eh=$a,vu=class sO extends Ss{constructor(f){var m,_,w,R;if(super(Ne.objectifyOptions(f,!1,"BaseRealtime",T.defaultLogger)),T.logAction(this.logger,T.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new ne(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=sO.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(_=(m=this.options.plugins)==null?void 0:m.RealtimePresence)!=null?_:null,this._objectsPlugin=(R=(w=this.options.plugins)==null?void 0:w.Objects)!=null?R:null,this.connection=new eh(this,this.options),this._channels=new qo(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(f){const m={};return f!=null&&f.WebSocketTransport&&(m[pr.WebSocket]=f.WebSocketTransport),f!=null&&f.XHRPolling&&(m[pr.XhrPolling]=f.XHRPolling),m}get channels(){return this._channels}connect(){T.logAction(this.logger,T.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){T.logAction(this.logger,T.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};vu.EventEmitter=fn;var Ho=vu,qo=class extends fn{constructor(u){super(u.logger),this.realtime=u,this.all=Object.create(null),u.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let u={};for(const f of Rn(this.all,!0)){const m=this.all[f];m.properties.channelSerial&&(u[f]=m.properties.channelSerial)}return u}recoverChannels(u){for(const f of Rn(u,!0)){const m=this.get(f);m.properties.channelSerial=u[f]}}async processChannelMessage(u){const f=u.channel;if(f===void 0){T.logAction(this.logger,T.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+u.action);return}const m=this.all[f];if(!m){T.logAction(this.logger,T.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+f);return}await m.processMessage(u)}onTransportActive(){for(const u in this.all){const f=this.all[u];f.state==="attaching"||f.state==="detaching"?f.checkPendingState():f.state==="suspended"?f._attach(!1,null):f.state==="attached"&&f.requestState("attaching")}}propogateConnectionInterruption(u,f){const m={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},_=["attaching","attached","detaching","suspended"],w=m[u];for(const R in this.all){const z=this.all[R];_.includes(z.state)&&z.notifyState(w,f)}}get(u,f){u=String(u);let m=this.all[u];if(!m)m=this.all[u]=new Ha(this.realtime,u,f);else if(f){if(m._shouldReattachToSetOptions(f,m.channelOptions))throw new ne("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);m.setOptions(f)}return m}getDerived(u,f,m){if(f.filter){const _=Ii(f.filter),w=ni(u);u=`[filter=${_}${w.qualifierParam}]${w.channelName}`}return this.get(u,m)}release(u){u=String(u);const f=this.all[u];if(!f)return;const m=f.getReleaseErr();if(m)throw m;delete this.all[u]}},bu=Ho;function _u(u,f){if(u.isSynthesized()||f.isSynthesized())return u.timestamp>=f.timestamp;const m=u.parseId(),_=f.parseId();return m.msgSerial===_.msgSerial?m.index>_.index:m.msgSerial>_.msgSerial}var Gr=class extends fn{constructor(u,f,m=_u){super(u.logger),this.presence=u,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=f,this.newerThan=m}get(u){return this.map[u]}getClient(u){const f=this.map,m=[];for(const _ in f){const w=f[_];w.clientId==u&&w.action!="absent"&&m.push(w)}return m}list(u){const f=this.map,m=u&&u.clientId,_=u&&u.connectionId,w=[];for(const R in f){const z=f[R];z.action!=="absent"&&(m&&m!=z.clientId||_&&_!=z.connectionId||w.push(z))}return w}put(u){(u.action==="enter"||u.action==="update")&&(u=Hr.fromValues(u),u.action="present");const f=this.map,m=this.memberKey(u);this.residualMembers&&delete this.residualMembers[m];const _=f[m];return _&&!this.newerThan(u,_)?!1:(f[m]=u,!0)}values(){const u=this.map,f=[];for(const m in u){const _=u[m];_.action!="absent"&&f.push(_)}return f}remove(u){const f=this.map,m=this.memberKey(u),_=f[m];return _&&!this.newerThan(u,_)?!1:(this.syncInProgress?(u=Hr.fromValues(u),u.action="absent",f[m]=u):delete f[m],!!_)}startSync(){const u=this.map,f=this.syncInProgress;T.logAction(this.logger,T.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),this.syncInProgress||(this.residualMembers=Ae(u),this.setInProgress(!0))}endSync(){const u=this.map,f=this.syncInProgress;if(T.logAction(this.logger,T.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),f){for(const m in u)u[m].action==="absent"&&delete u[m];this.presence._synthesizeLeaves(Lr(this.residualMembers));for(const m in this.residualMembers)delete u[m];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(u){const f=this.syncInProgress;if(T.logAction(this.logger,T.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),!f){u();return}this.once("sync",u)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(u){T.logAction(this.logger,T.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+u),this.syncInProgress=u,this.presence.syncComplete=!u}};function yi(u){return u.channel.client.auth.clientId}function Rs(u){const f=u.channel.client,m=f.auth.clientId;return(!m||m==="*")&&f.connection.state==="connected"}function Os(u,f,m){switch(u.state){case"attached":case"suspended":m();break;case"initialized":case"detached":case"detaching":case"attaching":nt(u.attach(),function(_){_?f(_):m()});break;default:f(ne.fromValues(u.invalidStateError()))}}var Is=class extends fn{constructor(u){super(u.logger),this.channel=u,this.syncComplete=!1,this.members=new Gr(this,f=>f.clientId+":"+f.connectionId),this._myMembers=new Gr(this,f=>f.clientId),this.subscriptions=new fn(this.logger),this.pendingPresence=[]}async enter(u){if(Rs(this))throw new ne("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,u,"enter")}async update(u){if(Rs(this))throw new ne("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,u,"update")}async enterClient(u,f){return this._enterOrUpdateClient(void 0,u,f,"enter")}async updateClient(u,f){return this._enterOrUpdateClient(void 0,u,f,"update")}async _enterOrUpdateClient(u,f,m,_){const w=this.channel;if(!w.connectionManager.activeState())throw w.connectionManager.getError();T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence."+_+"Client()","channel = "+w.name+", id = "+u+", client = "+(f||"(implicit) "+yi(this)));const R=Hr.fromData(m);R.action=_,u&&(R.id=u),f&&(R.clientId=f);const z=await R.encode(w.channelOptions);switch(w.state){case"attached":return w.sendPresence([z]);case"initialized":case"detached":w.attach();case"attaching":return new Promise((Y,fe)=>{this.pendingPresence.push({presence:z,callback:ie=>ie?fe(ie):Y()})});default:{const Y=new Pe("Unable to "+_+" presence channel while in "+w.state+" state",90001);throw Y.code=90001,Y}}}async leave(u){if(Rs(this))throw new ne("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,u)}async leaveClient(u,f){const m=this.channel;if(!m.connectionManager.activeState())throw m.connectionManager.getError();T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+u);const _=Hr.fromData(f);_.action="leave",u&&(_.clientId=u);const w=await _.encode(m.channelOptions);switch(m.state){case"attached":return m.sendPresence([w]);case"attaching":return new Promise((R,z)=>{this.pendingPresence.push({presence:w,callback:Y=>Y?z(Y):R()})});case"initialized":case"failed":throw new Pe("Unable to leave presence channel (incompatible state)",90001);default:throw m.invalidStateError()}}async get(u){const f=!u||("waitForSync"in u?u.waitForSync:!0);return new Promise((m,_)=>{function w(R){m(u?R.list(u):R.values())}if(this.channel.state==="suspended"){f?_(ne.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):w(this.members);return}Os(this.channel,R=>_(R),()=>{const R=this.members;f?R.waitSync(function(){w(R)}):w(R)})})}async history(u){T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const f=this.channel.client.rest.presenceMixin;if(u&&u.untilAttach)if(this.channel.state==="attached")delete u.untilAttach,u.from_serial=this.channel.properties.attachSerial;else throw new ne("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return f.history(this,u)}setPresence(u,f,m){T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+u.length+" participants; syncChannelSerial = "+m);let _,w;const R=this.members,z=this._myMembers,Y=[],fe=this.channel.connectionManager.connectionId;f&&(this.members.startSync(),m&&(w=m.match(/^[\w-]+:(.*)$/))&&(_=w[1]));for(let ie of u)switch(ie.action){case"leave":R.remove(ie)&&Y.push(ie),ie.connectionId===fe&&!ie.isSynthesized()&&z.remove(ie);break;case"enter":case"present":case"update":R.put(ie)&&Y.push(ie),ie.connectionId===fe&&z.put(ie);break}f&&!_&&(R.endSync(),this.channel.syncChannelSerial=null);for(let ie=0;ie<Y.length;ie++){const _e=Y[ie];this.subscriptions.emit(_e.action,_e)}}onAttached(u){T.logAction(this.logger,T.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+u),u?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const f=this.pendingPresence,m=f.length;if(m){this.pendingPresence=[];const _=[],w=tr.create(this.logger);T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.onAttached","sending "+m+" queued presence messages");for(let R=0;R<m;R++){const z=f[R];_.push(z.presence),w.push(z.callback)}this.channel.sendPresence(_).then(()=>w()).catch(R=>w(R))}}actOnChannelState(u,f,m){switch(u){case"attached":this.onAttached(f);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(m);break}}failPendingPresence(u){if(this.pendingPresence.length){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Tt(u));for(let f=0;f<this.pendingPresence.length;f++)try{this.pendingPresence[f].callback(u)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const u=this._myMembers,f=this.channel.connectionManager.connectionId;for(const m in u.map){const _=u.map[m];T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+_.clientId+'" into the presence set');const w=_.connectionId===f?_.id:void 0;this._enterOrUpdateClient(w,_.clientId,_.data,"enter").catch(R=>{const z=new ne("Presence auto re-enter failed",91004,400,R);T.logAction(this.logger,T.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Tt(R));const Y=new Fa(this.channel.state,this.channel.state,!0,!1,z);this.channel.emit("update",Y)})}}_synthesizeLeaves(u){const f=this.subscriptions;u.forEach(function(m){const _=Hr.fromValues({action:"leave",connectionId:m.connectionId,clientId:m.clientId,data:m.data,encoding:m.encoding,timestamp:Date.now()});f.emit("leave",_)})}async subscribe(...u){const f=Ha.processListenerArgs(u),m=f[0],_=f[1],w=this.channel;if(w.state==="failed")throw ne.fromValues(w.invalidStateError());this.subscriptions.on(m,_),w.channelOptions.attachOnSubscribe!==!1&&await w.attach()}unsubscribe(...u){const f=Ha.processListenerArgs(u),m=f[0],_=f[1];this.subscriptions.off(m,_)}},Ga=Is,Sp=pr.WebSocket;function th(u){return!!u.on}var nh=class extends Cs{constructor(u,f,m){super(u,f,m),this.shortName=Sp,m.heartbeats=H.Config.useProtocolHeartbeats,this.wsHost=m.host}static isAvailable(){return!!H.Config.WebSocket}createWebSocket(u,f){return this.uri=u+Er(f),new H.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.connect()","starting"),Cs.prototype.connect.call(this);const u=this,f=this.params,m=f.options,w=(m.tls?"wss://":"ws://")+this.wsHost+":"+Ne.getPort(m)+"/";T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.connect()","uri: "+w),nt(this.auth.getAuthParams(),function(R,z){if(u.isDisposed)return;let Y="";for(const ie in z)Y+=" "+ie+": "+z[ie]+";";if(T.logAction(u.logger,T.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+Y+" err: "+R),R){u.disconnect(R);return}const fe=f.getConnectParams(z);try{const ie=u.wsConnection=u.createWebSocket(w,fe);ie.binaryType=H.Config.binaryType,ie.onopen=function(){u.onWsOpen()},ie.onclose=function(_e){u.onWsClose(_e)},ie.onmessage=function(_e){u.onWsData(_e.data)},ie.onerror=function(_e){u.onWsError(_e)},th(ie)&&ie.on("ping",function(){u.onActivity()})}catch(ie){T.logAction(u.logger,T.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(ie.stack||ie.message)),u.disconnect(ie)}})}send(u){const f=this.wsConnection;if(!f){T.logAction(this.logger,T.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{f.send(ai(u,this.connectionManager.realtime._MsgPack,this.params.format))}catch(m){const _="Exception from ws connection when trying to send: "+Tt(m);T.logAction(this.logger,T.LOG_ERROR,"WebSocketTransport.send()",_),this.finish("disconnected",new ne(_,5e4,500))}}onWsData(u){T.logAction(this.logger,T.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+u.length+"; type = "+typeof u);try{this.onProtocolMessage(fp(u,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin,this.format))}catch(f){T.logAction(this.logger,T.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+f.stack)}}onWsOpen(){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(u){let f,m;if(typeof u=="object"?(m=u.code,f=u.wasClean||m===1e3):(m=u,f=m==1e3),delete this.wsConnection,f){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const _=new ne("Websocket closed",80003,400);this.finish("disconnected",_)}else{const _="Unclean disconnection of WebSocket ; code = "+m,w=new ne(_,80003,400);T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onWsClose()",_),this.finish("disconnected",w)}this.emit("disposed")}onWsError(u){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+u.message),H.Config.nextTick(()=>{this.disconnect(Error(u.message))})}dispose(){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const u=this.wsConnection;u&&(u.onmessage=function(){},delete this.wsConnection,H.Config.nextTick(()=>{if(T.logAction(this.logger,T.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!u)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");u.close()}))}},gr=nh,yn=class{static subscribeFilter(u,f,m){const _=w=>{var R,z,Y,fe,ie,_e;const Se={name:w.name,refTimeserial:(z=(R=w.extras)==null?void 0:R.ref)==null?void 0:z.timeserial,refType:(fe=(Y=w.extras)==null?void 0:Y.ref)==null?void 0:fe.type,isRef:!!((_e=(ie=w.extras)==null?void 0:ie.ref)!=null&&_e.timeserial),clientId:w.clientId};Object.entries(f).find(([Me,Ee])=>Ee!==void 0?Se[Me]!==Ee:!1)||m(w)};this.addFilteredSubscription(u,f,m,_),u.subscriptions.on(_)}static addFilteredSubscription(u,f,m,_){var w;if(u.filteredSubscriptions||(u.filteredSubscriptions=new Map),u.filteredSubscriptions.has(m)){const R=u.filteredSubscriptions.get(m);R.set(f,((w=R==null?void 0:R.get(f))==null?void 0:w.concat(_))||[_])}else u.filteredSubscriptions.set(m,new Map([[f,[_]]]))}static getAndDeleteFilteredSubscriptions(u,f,m){if(!u.filteredSubscriptions)return[];if(!m&&f)return Array.from(u.filteredSubscriptions.entries()).map(([R,z])=>{var Y;let fe=z.get(f);return z.delete(f),z.size===0&&((Y=u.filteredSubscriptions)==null||Y.delete(R)),fe}).reduce((R,z)=>z?R.concat(...z):R,[]);if(!m||!u.filteredSubscriptions.has(m))return[];const _=u.filteredSubscriptions.get(m);if(!f){const R=Array.from(_.values()).reduce((z,Y)=>z.concat(...Y),[]);return u.filteredSubscriptions.delete(m),R}let w=_.get(f);return _.delete(f),w||[]}},bt=class fb extends bu{constructor(f){var m;const _=fb._MsgPack;if(!_)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Ne.objectifyOptions(f,!0,"Realtime",T.defaultLogger,x(O({},as),{Crypto:(m=fb.Crypto)!=null?m:void 0,MsgPack:_,RealtimePresence:{RealtimePresence:Ga,PresenceMessage:Hr,WirePresenceMessage:ws},Annotations:{Annotation:Vo,WireAnnotation:ja,RealtimeAnnotations:ea,RestAnnotations:Kf},WebSocketTransport:gr,MessageInteractions:yn})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(f){this._Crypto=f}};bt.Utils=te,bt.ConnectionManager=hc,bt.ProtocolMessage=jo,bt._Crypto=null,bt.Message=Gn,bt.PresenceMessage=Ni,bt.Annotation=Wf,bt._MsgPack=null,bt._Http=_s,bt._PresenceMap=Gr,bt._MessageEncoding=ns;var xs=bt,vi=Uint8Array,Wa=Uint32Array,Ps=Math.pow,rh=new Wa(8),ih=[],Ms=new Wa(64);function $o(u){return(u-(u|0))*Ps(2,32)|0}for(var Go=2,ks=0;ks<64;){for(dc=!0,os=2;os<=Go/2;os++)Go%os===0&&(dc=!1);dc&&(ks<8&&(rh[ks]=$o(Ps(Go,1/2))),ih[ks]=$o(Ps(Go,1/3)),ks++),Go++}var dc,os,Ds=!!new vi(new Wa([1]).buffer)[0];function ls(u){return Ds?u>>>24|(u>>>16&255)<<8|(u&65280)<<8|u<<24:u}function Yn(u,f){return u>>>f|u<<32-f}function Wo(u){var f=rh.slice(),m=u.length,_=m*8,w=512-(_+64)%512-1+_+65,R=new vi(w/8),z=new Wa(R.buffer);R.set(u,0),R[m]=128,z[z.length-1]=ls(_);for(var Y,fe=0;fe<w/32;fe+=16){var ie=f.slice();for(Y=0;Y<64;Y++){var _e;if(Y<16)_e=ls(z[fe+Y]);else{var Se=Ms[Y-15],Me=Ms[Y-2];_e=Ms[Y-7]+Ms[Y-16]+(Yn(Se,7)^Yn(Se,18)^Se>>>3)+(Yn(Me,17)^Yn(Me,19)^Me>>>10)}Ms[Y]=_e|=0;for(var Ee=(Yn(ie[4],6)^Yn(ie[4],11)^Yn(ie[4],25))+(ie[4]&ie[5]^~ie[4]&ie[6])+ie[7]+_e+ih[Y],Ve=(Yn(ie[0],2)^Yn(ie[0],13)^Yn(ie[0],22))+(ie[0]&ie[1]^ie[2]&(ie[0]^ie[1])),je=7;je>0;je--)ie[je]=ie[je-1];ie[0]=Ee+Ve|0,ie[4]=ie[4]+Ee|0}for(Y=0;Y<8;Y++)f[Y]=f[Y]+ie[Y]|0}return new vi(new Wa(f.map(function(st){return ls(st)})).buffer)}function sh(u,f){if(u.length>64&&(u=Wo(u)),u.length<64){const Y=new Uint8Array(64);Y.set(u,0),u=Y}for(var m=new Uint8Array(64),_=new Uint8Array(64),w=0;w<64;w++)m[w]=54^u[w],_[w]=92^u[w];var R=new Uint8Array(f.length+64);R.set(m,0),R.set(f,64);var z=new Uint8Array(96);return z.set(_,0),z.set(Wo(R),64),Wo(z)}var pc=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(u){let f="";const m=this.base64CharSet,_=u.byteLength,w=_%3,R=_-w;let z,Y,fe,ie,_e;for(let Se=0;Se<R;Se=Se+3)_e=u[Se]<<16|u[Se+1]<<8|u[Se+2],z=(_e&16515072)>>18,Y=(_e&258048)>>12,fe=(_e&4032)>>6,ie=_e&63,f+=m[z]+m[Y]+m[fe]+m[ie];return w==1?(_e=u[R],z=(_e&252)>>2,Y=(_e&3)<<4,f+=m[z]+m[Y]+"=="):w==2&&(_e=u[R]<<8|u[R+1],z=(_e&64512)>>10,Y=(_e&1008)>>4,fe=(_e&15)<<2,f+=m[z]+m[Y]+m[fe]+"="),f}base64ToArrayBuffer(u){const f=atob==null?void 0:atob(u),m=f.length,_=new Uint8Array(m);for(let w=0;w<m;w++){const R=f.charCodeAt(w);_[w]=R}return this.toArrayBuffer(_)}isBuffer(u){return u instanceof ArrayBuffer||ArrayBuffer.isView(u)}toBuffer(u){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(u instanceof ArrayBuffer)return new Uint8Array(u);if(ArrayBuffer.isView(u))return new Uint8Array(this.toArrayBuffer(u));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(u){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(u instanceof ArrayBuffer)return u;if(ArrayBuffer.isView(u))return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(u){return this.uint8ViewToBase64(this.toBuffer(u))}base64UrlEncode(u){return this.base64Encode(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(u){if(ArrayBuffer&&H.Config.atob)return this.base64ToArrayBuffer(u);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(u){return this.toBuffer(u).reduce((m,_)=>m+_.toString(16).padStart(2,"0"),"")}hexDecode(u){if(u.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const f=new Uint8Array(u.length/2);for(let m=0;m<f.length;m++)f[m]=parseInt(u.slice(2*m,2*(m+1)),16);return this.toArrayBuffer(f)}utf8Encode(u){if(H.Config.TextEncoder){const f=new H.Config.TextEncoder().encode(u);return this.toArrayBuffer(f)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(u){if(!this.isBuffer(u))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(u);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(u,f){if(!u||!f)return!1;const m=this.toArrayBuffer(u),_=this.toArrayBuffer(f);if(m.byteLength!=_.byteLength)return!1;const w=new Uint8Array(m),R=new Uint8Array(_);for(var z=0;z<w.length;z++)if(w[z]!=R[z])return!1;return!0}byteLength(u){return u instanceof ArrayBuffer||ArrayBuffer.isView(u)?u.byteLength:-1}arrayBufferViewToBuffer(u){return this.toArrayBuffer(u)}concat(u){const f=u.reduce((w,R)=>w+R.byteLength,0),m=new Uint8Array(f);let _=0;for(const w of u){const R=this.toBuffer(w);m.set(R,_),_+=R.byteLength}return m.buffer}sha256(u){const f=Wo(this.toBuffer(u));return this.toArrayBuffer(f)}hmacSha256(u,f){const m=sh(this.toBuffer(f),this.toBuffer(u));return this.toArrayBuffer(m)}},gc=new pc,Ka=function(u,f){var m="aes",_=256,w="cbc",R=16;function z(Me){if(Me.algorithm==="aes"&&Me.mode==="cbc"){if(Me.keyLength===128||Me.keyLength===256)return;throw new Error("Unsupported key length "+Me.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function Y(Me){return Me.replace("_","/").replace("-","+")}function fe(Me){return Me instanceof ie}class ie{constructor(Ee,Ve,je,st){this.algorithm=Ee,this.keyLength=Ve,this.mode=je,this.key=st}}class _e{static getDefaultParams(Ee){var Ve;if(!Ee.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof Ee.key=="string"?Ve=f.toArrayBuffer(f.base64Decode(Y(Ee.key))):Ee.key instanceof ArrayBuffer?Ve=Ee.key:Ve=f.toArrayBuffer(Ee.key);var je=Ee.algorithm||m,st=Ve.byteLength*8,Vt=Ee.mode||w,Wt=new ie(je,st,Vt,Ve);if(Ee.keyLength&&Ee.keyLength!==Wt.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+Ee.keyLength+" was specified, but the key actually has length "+Wt.keyLength);return z(Wt),Wt}static async generateRandomKey(Ee){try{return u.getRandomArrayBuffer((Ee||_)/8)}catch(Ve){throw new ne("Failed to generate random key: "+Ve.message,400,5e4,Ve)}}static getCipher(Ee,Ve){var je,st=fe(Ee)?Ee:this.getDefaultParams(Ee);return{cipherParams:st,cipher:new Se(st,(je=Ee.iv)!=null?je:null,Ve)}}}_e.CipherParams=ie;class Se{constructor(Ee,Ve,je){if(this.logger=je,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=Ee.algorithm+"-"+String(Ee.keyLength)+"-"+Ee.mode,this.webCryptoAlgorithm=Ee.algorithm+"-"+Ee.mode,this.key=f.toArrayBuffer(Ee.key),this.iv=Ve?f.toArrayBuffer(Ve):null}concat(Ee,Ve){const je=new ArrayBuffer(Ee.byteLength+Ve.byteLength),st=new DataView(je),Vt=new DataView(f.toArrayBuffer(Ee));for(let en=0;en<Vt.byteLength;en++)st.setInt8(en,Vt.getInt8(en));const Wt=new DataView(f.toArrayBuffer(Ve));for(let en=0;en<Wt.byteLength;en++)st.setInt8(Vt.byteLength+en,Wt.getInt8(en));return je}async encrypt(Ee){T.logAction(this.logger,T.LOG_MICRO,"CBCCipher.encrypt()","");const Ve=await this.getIv(),je=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),st=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:Ve},je,Ee);return this.concat(Ve,st)}async decrypt(Ee){T.logAction(this.logger,T.LOG_MICRO,"CBCCipher.decrypt()","");const Ve=f.toArrayBuffer(Ee),je=Ve.slice(0,R),st=Ve.slice(R),Vt=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:je},Vt,st)}async getIv(){if(this.iv){var Ee=this.iv;return this.iv=null,Ee}const Ve=await u.getRandomArrayBuffer(R);return f.toArrayBuffer(Ve)}}return _e},ar=(u=>(u[u.REQ_SEND=0]="REQ_SEND",u[u.REQ_RECV=1]="REQ_RECV",u[u.REQ_RECV_POLL=2]="REQ_RECV_POLL",u[u.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",u))(ar||{}),bi=ar;function ah(){return new ne("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var mc,Ep=(mc=class{constructor(u){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var f;this.client=u??null;const m=(u==null?void 0:u.options.connectivityCheckUrl)||Ne.connectivityCheckUrl,_=(f=u==null?void 0:u.options.connectivityCheckParams)!=null?f:null,w=!(u!=null&&u.options.connectivityCheckUrl),R=O(O({},Ep.bundledRequestImplementations),u==null?void 0:u._additionalHTTPRequestImplementations),z=R.XHRRequest,Y=R.FetchRequest,fe=!!(z||Y);if(!fe)throw ah();H.Config.xhrSupported&&z?(this.supportsAuthHeaders=!0,this.Request=async function(ie,_e,Se,Me,Ee){return new Promise(Ve=>{var je;const st=z.createRequest(_e,Se,Me,Ee,bi.REQ_SEND,(je=u&&u.options.timeouts)!=null?je:null,this.logger,ie);st.once("complete",(Vt,Wt,en,dt,li)=>Ve({error:Vt,body:Wt,headers:en,unpacked:dt,statusCode:li})),st.exec()})},u!=null&&u.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var ie;T.logAction(this.logger,T.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+m);const _e=await this.doUri(qt.Get,m,null,null,_);let Se=!1;return w?Se=!_e.error&&((ie=_e.body)==null?void 0:ie.replace(/\n/,""))=="yes":Se=!_e.error&&Ys(_e.statusCode),T.logAction(this.logger,T.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+Se),Se}):H.Config.fetchSupported&&Y?(this.supportsAuthHeaders=!0,this.Request=async(ie,_e,Se,Me,Ee)=>Y(ie,u??null,_e,Se,Me,Ee),u!=null&&u.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var ie;T.logAction(this.logger,T.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+m);const _e=await this.doUri(qt.Get,m,null,null,null),Se=!_e.error&&((ie=_e.body)==null?void 0:ie.replace(/\n/,""))=="yes";return T.logAction(this.logger,T.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+Se),Se}):this.Request=async()=>({error:fe?new Pe("no supported HTTP transports available",null,400):ah()})}get logger(){var u,f;return(f=(u=this.client)==null?void 0:u.logger)!=null?f:T.defaultLogger}async doUri(u,f,m,_,w){return this.Request?this.Request(u,f,m,w,_):{error:new Pe("Request invoked before assigned to",null,500)}}shouldFallback(u){const f=u.statusCode;return f===408&&!u.code||f===400&&!u.code||f>=500&&f<=504}},mc.methods=[qt.Get,qt.Delete,qt.Post,qt.Put,qt.Patch],mc.methodsWithoutBody=[qt.Get,qt.Delete],mc.methodsWithBody=[qt.Post,qt.Put,qt.Patch],mc),wp=Ep,hn="ablyjs-storage-test",ra=typeof yl<"u"?yl:typeof window<"u"?window:self,yc=class{constructor(){try{ra.sessionStorage.setItem(hn,hn),ra.sessionStorage.removeItem(hn),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{ra.localStorage.setItem(hn,hn),ra.localStorage.removeItem(hn),this.localSupported=!0}catch{this.localSupported=!1}}get(u){return this._get(u,!1)}getSession(u){return this._get(u,!0)}remove(u){return this._remove(u,!1)}removeSession(u){return this._remove(u,!0)}set(u,f,m){return this._set(u,f,m,!1)}setSession(u,f,m){return this._set(u,f,m,!0)}_set(u,f,m,_){const w={value:f};return m&&(w.expires=Date.now()+m),this.storageInterface(_).setItem(u,JSON.stringify(w))}_get(u,f){if(f&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!f&&!this.localSupported)throw new Error("Local Storage not supported");const m=this.storageInterface(f).getItem(u);if(!m)return null;const _=JSON.parse(m);return _.expires&&_.expires<Date.now()?(this.storageInterface(f).removeItem(u),null):_.value}_remove(u,f){return this.storageInterface(f).removeItem(u)}storageInterface(u){return u?ra.sessionStorage:ra.localStorage}},Ko=new yc,vn=wr(),Yo=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!Yo&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function Qo(){const u=vn.location;return!vn.WebSocket||!u||!u.origin||u.origin.indexOf("http")>-1}function Wy(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var Tp=vn.navigator&&vn.navigator.userAgent.toString(),Ky=vn.location&&vn.location.href,Cp={agent:"browser",logTimestamps:!0,userAgent:Tp,currentUrl:Ky,binaryType:"arraybuffer",WebSocket:vn.WebSocket,fetchSupported:!!vn.fetch,xhrSupported:vn.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:Qo(),useProtocolHeartbeats:!0,supportsBinary:!!vn.TextDecoder,preferBinary:!1,ArrayBuffer:vn.ArrayBuffer,atob:vn.atob,nextTick:typeof vn.queueMicrotask=="function"?u=>vn.queueMicrotask(u):u=>Promise.resolve().then(u),addEventListener:vn.addEventListener,inspect:JSON.stringify,stringByteSize:function(u){return vn.TextDecoder&&new vn.TextEncoder().encode(u).length||u.length},TextEncoder:vn.TextEncoder,TextDecoder:vn.TextDecoder,getRandomArrayBuffer:async function(u){const f=new Uint8Array(u);return vn.crypto.getRandomValues(f),f.buffer},isWebworker:Wy(),push:{platform:"browser",formFactor:"desktop",storage:Ko}},ia=Cp;function oh(u){const f=[80015,80017,80030];return u.code?ri.isTokenErr(u)?!1:f.includes(u.code)?!0:u.code>=4e4&&u.code<5e4:!1}function Xo(u){return oh(u)?[$r({action:Ge.ERROR,error:u})]:[$r({action:Ge.DISCONNECTED,error:u})]}var Ap=class extends Cs{constructor(u,f,m){super(u,f,m,!0),this.onAuthUpdated=_=>{this.authParams={access_token:_.token}},this.stream="stream"in m?m.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.connect()","starting"),Cs.prototype.connect.call(this);const u=this.params,f=u.options,m=u.host||f.primaryDomain,_=Ne.getPort(f),w=f.tls?"https://":"http://";this.baseUri=w+m+":"+_+"/comet/";const R=this.baseUri+"connect";T.logAction(this.logger,T.LOG_MINOR,"CometTransport.connect()","uri: "+R),nt(this.auth.getAuthParams(),(z,Y)=>{if(z){this.disconnect(z);return}if(this.isDisposed)return;this.authParams=Y;const fe=this.params.getConnectParams(Y);"stream"in fe&&(this.stream=fe.stream),T.logAction(this.logger,T.LOG_MINOR,"CometTransport.connect()","connectParams:"+Er(fe));let ie=!1;const _e=this.recvRequest=this.createRequest(R,null,fe,null,this.stream?bi.REQ_RECV_STREAM:bi.REQ_RECV);_e.on("data",Se=>{this.recvRequest&&(ie||(ie=!0,this.emit("preconnect")),this.onData(Se))}),_e.on("complete",Se=>{if(this.recvRequest||(Se=Se||new ne("Request cancelled",80003,400)),this.recvRequest=null,!ie&&!Se&&(ie=!0,this.emit("preconnect")),this.onActivity(),Se){Se.code?this.onData(Xo(Se)):this.disconnect(Se);return}H.Config.nextTick(()=>{this.recv()})}),_e.exec()})}requestClose(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(u){const f=u?this.closeUri:this.disconnectUri;if(f){const m=this.createRequest(f,null,this.authParams,null,bi.REQ_SEND);m.on("complete",_=>{_&&(T.logAction(this.logger,T.LOG_ERROR,"CometTransport.request"+(u?"Close()":"Disconnect()"),"request returned err = "+Tt(_)),this.finish("disconnected",_))}),m.exec()}}dispose(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(T.logAction(this.logger,T.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Kn.disconnected()),H.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(u){var f;if(this.isDisposed)return;const m=(f=u.connectionDetails)==null?void 0:f.connectionKey;Cs.prototype.onConnect.call(this,u);const _=this.baseUri+m;T.logAction(this.logger,T.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+_),this.sendUri=_+"/send",this.recvUri=_+"/recv",this.closeUri=_+"/close",this.disconnectUri=_+"/disconnect"}send(u){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(u);return}const f=this.pendingItems||[];f.push(u),this.pendingItems=null,this.sendItems(f)}sendAnyPending(){const u=this.pendingItems;u&&(this.pendingItems=null,this.sendItems(u))}sendItems(u){const f=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(u),bi.REQ_SEND);f.on("complete",(m,_)=>{if(m&&T.logAction(this.logger,T.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Tt(m)),this.sendRequest=null,m){m.code?this.onData(Xo(m)):this.disconnect(m);return}_&&this.onData(_),this.pendingItems&&H.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),f.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const u=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?bi.REQ_RECV_STREAM:bi.REQ_RECV_POLL);u.on("data",f=>{this.onData(f)}),u.on("complete",f=>{if(this.recvRequest=null,this.onActivity(),f){f.code?this.onData(Xo(f)):this.disconnect(f);return}H.Config.nextTick(()=>{this.recv()})}),u.exec()}onData(u){try{const f=this.decodeResponse(u);if(f&&f.length)for(let m=0;m<f.length;m++)this.onProtocolMessage(du(f[m],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin))}catch(f){T.logAction(this.logger,T.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+f.stack)}}encodeRequest(u){return JSON.stringify(u)}decodeResponse(u){return typeof u=="string"?JSON.parse(u):u}},vc=Ap;function Rp(u,f){return Ws(Rn(f)).includes("x-ably-errorcode")}function Su(u,f){if(Rp(u,f))return u.error&&ne.fromValues(u.error)}var lh=function(){},Op=0,bc={};function Ip(u,f){return u.getResponseHeader&&u.getResponseHeader(f)}function _c(u){return u.getResponseHeader&&(u.getResponseHeader("transfer-encoding")||!u.getResponseHeader("content-length"))}function xp(u){const f=u.getAllResponseHeaders().trim().split(`\r
`),m={};for(let _=0;_<f.length;_++){const w=f[_].split(":").map(R=>R.trim());m[w[0].toLowerCase()]=w[1]}return m}var Pp=class aO extends fn{constructor(f,m,_,w,R,z,Y,fe){super(Y),_=_||{},_.rnd=Ai(),this.uri=f+Er(_),this.headers=m||{},this.body=w,this.method=fe?fe.toUpperCase():ye(w)?"GET":"POST",this.requestMode=R,this.timeouts=z,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Op),bc[this.id]=this}static createRequest(f,m,_,w,R,z,Y,fe){const ie=z||Ne.TIMEOUTS;return new aO(f,m,Ae(_),w,R,ie,Y,fe)}complete(f,m,_,w,R){this.requestComplete||(this.requestComplete=!0,!f&&m&&this.emit("data",m),this.emit("complete",f,m,_,w,R),this.dispose())}abort(){this.dispose()}exec(){let f=this.headers;const m=this.requestMode==bi.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,_=this.timer=setTimeout(()=>{this.timedOut=!0,R.abort()},m),w=this.method,R=this.xhr=new XMLHttpRequest,z=f.accept;let Y=this.body,fe="text";z?z.indexOf("application/x-msgpack")===0&&(fe="arraybuffer"):f.accept="application/json",Y&&(f["content-type"]||(f["content-type"]="application/json")).indexOf("application/json")>-1&&typeof Y!="string"&&(Y=JSON.stringify(Y)),R.open(w,this.uri,!0),R.responseType=fe,"authorization"in f&&(R.withCredentials=!0);for(const dt in f)R.setRequestHeader(dt,f[dt]);const ie=(dt,li,or,el)=>{var Xa;let Tc=li+" (event type: "+dt.type+")";(Xa=this==null?void 0:this.xhr)!=null&&Xa.statusText&&(Tc+=", current statusText is "+this.xhr.statusText),T.logAction(this.logger,T.LOG_ERROR,"Request.on"+dt.type+"()",Tc),this.complete(new Pe(Tc,or,el))};R.onerror=dt=>{ie(dt,"XHR error occurred",null,400)},R.onabort=dt=>{this.timedOut?ie(dt,"Request aborted due to request timeout expiring",null,408):ie(dt,"Request cancelled",null,400)},R.ontimeout=dt=>{ie(dt,"Request timed out",null,408)};let _e,Se,Me,Ee=0,Ve=!1;const je=()=>{if(clearTimeout(_),Me=Se<400,Se==204){this.complete(null,null,null,null,Se);return}_e=this.requestMode==bi.REQ_RECV_STREAM&&Me&&_c(R)},st=()=>{let dt;try{const or=Ip(R,"content-type");if(or?or.indexOf("application/json")>=0:R.responseType=="text"){const Xa=R.responseType==="arraybuffer"?H.BufferUtils.utf8Decode(R.response):String(R.responseText);Xa.length?dt=JSON.parse(Xa):dt=Xa,Ve=!0}else dt=R.response;dt.response!==void 0?(Se=dt.statusCode,Me=Se<400,f=dt.headers,dt=dt.response):f=xp(R)}catch(or){this.complete(new Pe("Malformed response body from server: "+or.message,null,400));return}if(Me||Array.isArray(dt)){this.complete(null,dt,f,Ve,Se);return}let li=Su(dt,f);li||(li=new Pe("Error response received from server: "+Se+" body was: "+H.Config.inspect(dt),null,Se)),this.complete(li,dt,f,Ve,Se)};function Vt(){const dt=R.responseText,li=dt.length-1;let or,el;for(;Ee<li&&(or=dt.indexOf(`
`,Ee))>-1;)el=dt.slice(Ee,or),Ee=or+1,Wt(el)}const Wt=dt=>{try{dt=JSON.parse(dt)}catch(li){this.complete(new Pe("Malformed response body from server: "+li.message,null,400));return}this.emit("data",dt)},en=()=>{Vt(),this.streamComplete=!0,H.Config.nextTick(()=>{this.complete()})};R.onreadystatechange=()=>{const dt=R.readyState;dt<3||R.status!==0&&(Se===void 0&&(Se=R.status,je()),dt==3&&_e?Vt():dt==4&&(_e?en():st()))},R.send(Y)}dispose(){const f=this.xhr;if(f){f.onreadystatechange=f.onerror=f.onabort=f.ontimeout=lh,this.xhr=null;const m=this.timer;m&&(clearTimeout(m),this.timer=null),this.requestComplete||f.abort()}delete bc[this.id]}},Ns=Pp,Eu=pr.XhrPolling,ch=class extends vc{constructor(u,f,m){super(u,f,m),this.shortName=Eu,m.stream=!1,this.shortName=Eu}static isAvailable(){return!!(H.Config.xhrSupported&&H.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(u,f,m,_,w){return Ns.createRequest(u,f,m,_,w,this.timeouts,this.logger)}},sa=ch,aa=["xhr_polling"],Sc={order:aa,bundledImplementations:{web_socket:gr,xhr_polling:sa}},uh=Sc,fh={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[pr.XhrPolling,pr.WebSocket]},Ec=fh;function wc(u){if(u===void 0)return"undefined";let f,m;if(u instanceof ArrayBuffer?(m="ArrayBuffer",f=new DataView(u)):u instanceof DataView&&(m="DataView",f=u),!f)return JSON.stringify(u);const _=[];for(let w=0;w<u.byteLength;w++){if(w>20){_.push("...");break}let R=f.getUint8(w).toString(16);R.length===1&&(R="0"+R),_.push(R)}return"<"+m+" "+_.join(" ")+">"}function Jo(u,f,m){for(let _=0,w=m.length;_<w;_++){const R=m.charCodeAt(_);if(R<128){u.setUint8(f++,R>>>0&127|0);continue}if(R<2048){u.setUint8(f++,R>>>6&31|192),u.setUint8(f++,R>>>0&63|128);continue}if(R<65536){u.setUint8(f++,R>>>12&15|224),u.setUint8(f++,R>>>6&63|128),u.setUint8(f++,R>>>0&63|128);continue}if(R<1114112){u.setUint8(f++,R>>>18&7|240),u.setUint8(f++,R>>>12&63|128),u.setUint8(f++,R>>>6&63|128),u.setUint8(f++,R>>>0&63|128);continue}throw new Error("bad codepoint "+R)}}function hh(u,f,m){let _="";for(let w=f,R=f+m;w<R;w++){const z=u.getUint8(w);if((z&128)===0){_+=String.fromCharCode(z);continue}if((z&224)===192){_+=String.fromCharCode((z&15)<<6|u.getUint8(++w)&63);continue}if((z&240)===224){_+=String.fromCharCode((z&15)<<12|(u.getUint8(++w)&63)<<6|(u.getUint8(++w)&63)<<0);continue}if((z&248)===240){_+=String.fromCharCode((z&7)<<18|(u.getUint8(++w)&63)<<12|(u.getUint8(++w)&63)<<6|(u.getUint8(++w)&63)<<0);continue}throw new Error("Invalid byte "+z.toString(16))}return _}function oa(u){let f=0;for(let m=0,_=u.length;m<_;m++){const w=u.charCodeAt(m);if(w<128){f+=1;continue}if(w<2048){f+=2;continue}if(w<65536){f+=3;continue}if(w<1114112){f+=4;continue}throw new Error("bad codepoint "+w)}return f}function wu(u,f){const m=ca(u,f);if(m===0)return;const _=new ArrayBuffer(m),w=new DataView(_);return Li(u,w,0,f),_}var Tu=65536*65536,Cu=1/Tu;function dh(u,f){return f=f||0,u.getInt32(f)*Tu+u.getUint32(f+4)}function la(u,f){return f=f||0,u.getUint32(f)*Tu+u.getUint32(f+4)}function St(u,f,m){m<9223372036854776e3?(u.setInt32(f,Math.floor(m*Cu)),u.setInt32(f+4,m&-1)):(u.setUint32(f,2147483647),u.setUint32(f+4,2147483647))}function Zt(u,f,m){m<18446744073709552e3?(u.setUint32(f,Math.floor(m*Cu)),u.setInt32(f+4,m&-1)):(u.setUint32(f,4294967295),u.setUint32(f+4,4294967295))}var Pn=class{constructor(u,f){this.map=m=>{const _={};for(let w=0;w<m;w++){const R=this.parse();_[R]=this.parse()}return _},this.bin=m=>{const _=new ArrayBuffer(m);return new Uint8Array(_).set(new Uint8Array(this.view.buffer,this.offset,m),0),this.offset+=m,_},this.buf=this.bin,this.str=m=>{const _=hh(this.view,this.offset,m);return this.offset+=m,_},this.array=m=>{const _=new Array(m);for(let w=0;w<m;w++)_[w]=this.parse();return _},this.ext=m=>(this.offset+=m,{type:this.view.getInt8(this.offset),data:this.buf(m)}),this.parse=()=>{const m=this.view.getUint8(this.offset);let _,w;if((m&128)===0)return this.offset++,m;if((m&240)===128)return w=m&15,this.offset++,this.map(w);if((m&240)===144)return w=m&15,this.offset++,this.array(w);if((m&224)===160)return w=m&31,this.offset++,this.str(w);if((m&224)===224)return _=this.view.getInt8(this.offset),this.offset++,_;switch(m){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return w=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(w);case 197:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(w);case 198:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(w);case 199:return w=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(w);case 200:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(w);case 201:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(w);case 202:return _=this.view.getFloat32(this.offset+1),this.offset+=5,_;case 203:return _=this.view.getFloat64(this.offset+1),this.offset+=9,_;case 204:return _=this.view.getUint8(this.offset+1),this.offset+=2,_;case 205:return _=this.view.getUint16(this.offset+1),this.offset+=3,_;case 206:return _=this.view.getUint32(this.offset+1),this.offset+=5,_;case 207:return _=la(this.view,this.offset+1),this.offset+=9,_;case 208:return _=this.view.getInt8(this.offset+1),this.offset+=2,_;case 209:return _=this.view.getInt16(this.offset+1),this.offset+=3,_;case 210:return _=this.view.getInt32(this.offset+1),this.offset+=5,_;case 211:return _=dh(this.view,this.offset+1),this.offset+=9,_;case 212:return w=1,this.offset++,this.ext(w);case 213:return w=2,this.offset++,this.ext(w);case 214:return w=4,this.offset++,this.ext(w);case 215:return w=8,this.offset++,this.ext(w);case 216:return w=16,this.offset++,this.ext(w);case 217:return w=this.view.getUint8(this.offset+1),this.offset+=2,this.str(w);case 218:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.str(w);case 219:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.str(w);case 220:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.array(w);case 221:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.array(w);case 222:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.map(w);case 223:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.map(w)}throw new Error("Unknown type 0x"+m.toString(16))},this.offset=f||0,this.view=u}};function Au(u){const f=new DataView(u),m=new Pn(f),_=m.parse();if(m.offset!==u.byteLength)throw new Error(u.byteLength-m.offset+" trailing bytes");return _}function Ya(u,f){return Object.keys(u).filter(function(m){const _=u[m],w=typeof _;return(!f||_!=null)&&(w!=="function"||!!_.toJSON)})}function Li(u,f,m,_){const w=typeof u;if(typeof u=="string"){const R=oa(u);if(R<32)return f.setUint8(m,R|160),Jo(f,m+1,u),1+R;if(R<256)return f.setUint8(m,217),f.setUint8(m+1,R),Jo(f,m+2,u),2+R;if(R<65536)return f.setUint8(m,218),f.setUint16(m+1,R),Jo(f,m+3,u),3+R;if(R<4294967296)return f.setUint8(m,219),f.setUint32(m+1,R),Jo(f,m+5,u),5+R}if(ArrayBuffer.isView&&ArrayBuffer.isView(u)&&(u=u.buffer),u instanceof ArrayBuffer){const R=u.byteLength;if(R<256)return f.setUint8(m,196),f.setUint8(m+1,R),new Uint8Array(f.buffer).set(new Uint8Array(u),m+2),2+R;if(R<65536)return f.setUint8(m,197),f.setUint16(m+1,R),new Uint8Array(f.buffer).set(new Uint8Array(u),m+3),3+R;if(R<4294967296)return f.setUint8(m,198),f.setUint32(m+1,R),new Uint8Array(f.buffer).set(new Uint8Array(u),m+5),5+R}if(typeof u=="number"){if(Math.floor(u)!==u)return f.setUint8(m,203),f.setFloat64(m+1,u),9;if(u>=0){if(u<128)return f.setUint8(m,u),1;if(u<256)return f.setUint8(m,204),f.setUint8(m+1,u),2;if(u<65536)return f.setUint8(m,205),f.setUint16(m+1,u),3;if(u<4294967296)return f.setUint8(m,206),f.setUint32(m+1,u),5;if(u<18446744073709552e3)return f.setUint8(m,207),Zt(f,m+1,u),9;throw new Error("Number too big 0x"+u.toString(16))}if(u>=-32)return f.setInt8(m,u),1;if(u>=-128)return f.setUint8(m,208),f.setInt8(m+1,u),2;if(u>=-32768)return f.setUint8(m,209),f.setInt16(m+1,u),3;if(u>=-2147483648)return f.setUint8(m,210),f.setInt32(m+1,u),5;if(u>=-9223372036854776e3)return f.setUint8(m,211),St(f,m+1,u),9;throw new Error("Number too small -0x"+(-u).toString(16).substr(1))}if(w==="undefined")return _?0:(f.setUint8(m,212),f.setUint8(m+1,0),f.setUint8(m+2,0),3);if(u===null)return _?0:(f.setUint8(m,192),1);if(w==="boolean")return f.setUint8(m,u?195:194),1;if(typeof u.toJSON=="function")return Li(u.toJSON(),f,m,_);if(w==="object"){let R,z=0,Y;const fe=Array.isArray(u);if(fe?R=u.length:(Y=Ya(u,_),R=Y.length),R<16?(f.setUint8(m,R|(fe?144:128)),z=1):R<65536?(f.setUint8(m,fe?220:222),f.setUint16(m+1,R),z=3):R<4294967296&&(f.setUint8(m,fe?221:223),f.setUint32(m+1,R),z=5),fe)for(let ie=0;ie<R;ie++)z+=Li(u[ie],f,m+z,_);else if(Y)for(let ie=0;ie<R;ie++){const _e=Y[ie];z+=Li(_e,f,m+z),z+=Li(u[_e],f,m+z,_)}return z}if(w==="function")return 0;throw new Error("Unknown type "+w)}function ca(u,f){const m=typeof u;if(m==="string"){const _=oa(u);if(_<32)return 1+_;if(_<256)return 2+_;if(_<65536)return 3+_;if(_<4294967296)return 5+_}if(ArrayBuffer.isView&&ArrayBuffer.isView(u)&&(u=u.buffer),u instanceof ArrayBuffer){const _=u.byteLength;if(_<256)return 2+_;if(_<65536)return 3+_;if(_<4294967296)return 5+_}if(typeof u=="number"){if(Math.floor(u)!==u)return 9;if(u>=0){if(u<128)return 1;if(u<256)return 2;if(u<65536)return 3;if(u<4294967296)return 5;if(u<18446744073709552e3)return 9;throw new Error("Number too big 0x"+u.toString(16))}if(u>=-32)return 1;if(u>=-128)return 2;if(u>=-32768)return 3;if(u>=-2147483648)return 5;if(u>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+u.toString(16).substr(1))}if(m==="boolean")return 1;if(u===null)return f?0:1;if(u===void 0)return f?0:3;if(typeof u.toJSON=="function")return ca(u.toJSON(),f);if(m==="object"){let _,w=0;if(Array.isArray(u)){_=u.length;for(let R=0;R<_;R++)w+=ca(u[R],f)}else{const R=Ya(u,f);_=R.length;for(let z=0;z<_;z++){const Y=R[z];w+=ca(Y)+ca(u[Y],f)}}if(_<16)return 1+w;if(_<65536)return 3+w;if(_<4294967296)return 5+w;throw new Error("Array or object too long 0x"+_.toString(16))}if(m==="function")return 0;throw new Error("Unknown type "+m)}var Qa={encode:wu,decode:Au,inspect:wc,utf8Write:Jo,utf8Read:hh,utf8ByteCount:oa};function Zo(u,f){return!!f.get("x-ably-errorcode")}function Yy(u,f){if(Zo(u,f))return u.error&&ne.fromValues(u.error)}function En(u){const f={};return u.forEach((m,_)=>{f[_]=m}),f}async function ph(u,f,m,_,w,R){const z=new Headers(_||{}),Y=u?u.toUpperCase():ye(R)?"GET":"POST",fe=new AbortController;let ie;const _e=new Promise(Ee=>{ie=setTimeout(()=>{fe.abort(),Ee({error:new Pe("Request timed out",null,408)})},f?f.options.timeouts.httpRequestTimeout:Ne.TIMEOUTS.httpRequestTimeout)}),Se={method:Y,headers:z,body:R,signal:fe.signal};H.Config.isWebworker||(Se.credentials=z.has("authorization")?"include":"same-origin");const Me=(async()=>{try{const Ee=new URLSearchParams(w||{});Ee.set("rnd",Ai());const Ve=m+"?"+Ee,je=await wr().fetch(Ve,Se);if(clearTimeout(ie),je.status==204)return{error:null,statusCode:je.status};const st=je.headers.get("Content-Type");let Vt;st&&st.indexOf("application/x-msgpack")>-1?Vt=await je.arrayBuffer():st&&st.indexOf("application/json")>-1?Vt=await je.json():Vt=await je.text();const Wt=!!st&&st.indexOf("application/x-msgpack")===-1,en=En(je.headers);return je.ok?{error:null,body:Vt,headers:en,unpacked:Wt,statusCode:je.status}:{error:Yy(Vt,je.headers)||new Pe("Error response received from server: "+je.status+" body was: "+H.Config.inspect(Vt),null,je.status),body:Vt,headers:en,unpacked:Wt,statusCode:je.status}}catch(Ee){return clearTimeout(ie),{error:Ee}}})();return Promise.race([_e,Me])}var gh={XHRRequest:Ns,FetchRequest:ph},mh=Ka(ia,gc);H.Crypto=mh,H.BufferUtils=gc,H.Http=wp,H.Config=ia,H.Transports=uh,H.WebStorage=Ko;for(const u of[gu,xs])u.Crypto=mh,u._MsgPack=Qa;wp.bundledRequestImplementations=gh,T.initLogHandlers(),H.Defaults=hi(Ec),H.Config.agent&&(H.Defaults.agent+=" "+H.Config.agent);var Mp={ErrorInfo:ne,Rest:gu,Realtime:xs,msgpack:Qa,makeProtocolMessageFromDeserialized:Yf};if(typeof r.exports=="object"&&typeof n=="object"){var Qy=(u,f,m,_)=>{if(f&&typeof f=="object"||typeof f=="function")for(let w of Object.getOwnPropertyNames(f))!Object.prototype.hasOwnProperty.call(u,w)&&w!==m&&Object.defineProperty(u,w,{get:()=>f[w],enumerable:!(_=Object.getOwnPropertyDescriptor(f,w))||_.enumerable});return u};r.exports=Qy(r.exports,n)}return r.exports})}(jg)),jg.exports}var Qk=Yk();const Xk="2.14.0";function Jk(t){return Object.assign(Object.assign({},t),{params:Object.assign(Object.assign({},t==null?void 0:t.params),{agent:`react-hooks/${Xk}`}),attachOnSubscribe:!1})}var i0={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function Zk(){if(Dw)return Et;Dw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.iterator;function C(Q){return Q===null||typeof Q!="object"?null:(Q=E&&Q[E]||Q["@@iterator"],typeof Q=="function"?Q:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,N={};function k(Q,ge,ye){this.props=Q,this.context=ge,this.refs=N,this.updater=ye||O}k.prototype.isReactComponent={},k.prototype.setState=function(Q,ge){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ge,"setState")},k.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function V(){}V.prototype=k.prototype;function X(Q,ge,ye){this.props=Q,this.context=ge,this.refs=N,this.updater=ye||O}var q=X.prototype=new V;q.constructor=X,x(q,k.prototype),q.isPureReactComponent=!0;var H=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function F(Q,ge,ye,ve,ke,qe){return ye=qe.ref,{$$typeof:t,type:Q,key:ge,ref:ye!==void 0?ye:null,props:qe}}function D(Q,ge){return F(Q.type,ge,void 0,void 0,void 0,Q.props)}function L(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function G(Q){var ge={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ye){return ge[ye]})}var T=/\/+/g;function te(Q,ge){return typeof Q=="object"&&Q!==null&&Q.key!=null?G(""+Q.key):ge.toString(36)}function K(){}function ne(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(K,K):(Q.status="pending",Q.then(function(ge){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ge)},function(ge){Q.status==="pending"&&(Q.status="rejected",Q.reason=ge)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function Pe(Q,ge,ye,ve,ke){var qe=typeof Q;(qe==="undefined"||qe==="boolean")&&(Q=null);var Le=!1;if(Q===null)Le=!0;else switch(qe){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(Q.$$typeof){case t:case e:Le=!0;break;case b:return Le=Q._init,Pe(Le(Q._payload),ge,ye,ve,ke)}}if(Le)return ke=ke(Q),Le=ve===""?"."+te(Q,0):ve,H(ke)?(ye="",Le!=null&&(ye=Le.replace(T,"$&/")+"/"),Pe(ke,ge,ye,"",function(An){return An})):ke!=null&&(L(ke)&&(ke=D(ke,ye+(ke.key==null||Q&&Q.key===ke.key?"":(""+ke.key).replace(T,"$&/")+"/")+Le)),ge.push(ke)),1;Le=0;var Ot=ve===""?".":ve+":";if(H(Q))for(var gt=0;gt<Q.length;gt++)ve=Q[gt],qe=Ot+te(ve,gt),Le+=Pe(ve,ge,ye,qe,ke);else if(gt=C(Q),typeof gt=="function")for(Q=gt.call(Q),gt=0;!(ve=Q.next()).done;)ve=ve.value,qe=Ot+te(ve,gt++),Le+=Pe(ve,ge,ye,qe,ke);else if(qe==="object"){if(typeof Q.then=="function")return Pe(ne(Q),ge,ye,ve,ke);throw ge=String(Q),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return Le}function J(Q,ge,ye){if(Q==null)return Q;var ve=[],ke=0;return Pe(Q,ve,"","",function(qe){return ge.call(ye,qe,ke++)}),ve}function oe(Q){if(Q._status===-1){var ge=Q._result;ge=ge(),ge.then(function(ye){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ye)},function(ye){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ye)}),Q._status===-1&&(Q._status=0,Q._result=ge)}if(Q._status===1)return Q._result.default;throw Q._result}var Ae=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function Ue(){}return Et.Children={map:J,forEach:function(Q,ge,ye){J(Q,function(){ge.apply(this,arguments)},ye)},count:function(Q){var ge=0;return J(Q,function(){ge++}),ge},toArray:function(Q){return J(Q,function(ge){return ge})||[]},only:function(Q){if(!L(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Et.Component=k,Et.Fragment=n,Et.Profiler=i,Et.PureComponent=X,Et.StrictMode=r,Et.Suspense=p,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Et.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return W.H.useMemoCache(Q)}},Et.cache=function(Q){return function(){return Q.apply(null,arguments)}},Et.cloneElement=function(Q,ge,ye){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var ve=x({},Q.props),ke=Q.key,qe=void 0;if(ge!=null)for(Le in ge.ref!==void 0&&(qe=void 0),ge.key!==void 0&&(ke=""+ge.key),ge)!$.call(ge,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ge.ref===void 0||(ve[Le]=ge[Le]);var Le=arguments.length-2;if(Le===1)ve.children=ye;else if(1<Le){for(var Ot=Array(Le),gt=0;gt<Le;gt++)Ot[gt]=arguments[gt+2];ve.children=Ot}return F(Q.type,ke,void 0,void 0,qe,ve)},Et.createContext=function(Q){return Q={$$typeof:c,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:o,_context:Q},Q},Et.createElement=function(Q,ge,ye){var ve,ke={},qe=null;if(ge!=null)for(ve in ge.key!==void 0&&(qe=""+ge.key),ge)$.call(ge,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(ke[ve]=ge[ve]);var Le=arguments.length-2;if(Le===1)ke.children=ye;else if(1<Le){for(var Ot=Array(Le),gt=0;gt<Le;gt++)Ot[gt]=arguments[gt+2];ke.children=Ot}if(Q&&Q.defaultProps)for(ve in Le=Q.defaultProps,Le)ke[ve]===void 0&&(ke[ve]=Le[ve]);return F(Q,qe,void 0,void 0,null,ke)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(Q){return{$$typeof:d,render:Q}},Et.isValidElement=L,Et.lazy=function(Q){return{$$typeof:b,_payload:{_status:-1,_result:Q},_init:oe}},Et.memo=function(Q,ge){return{$$typeof:g,type:Q,compare:ge===void 0?null:ge}},Et.startTransition=function(Q){var ge=W.T,ye={};W.T=ye;try{var ve=Q(),ke=W.S;ke!==null&&ke(ye,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Ue,Ae)}catch(qe){Ae(qe)}finally{W.T=ge}},Et.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Et.use=function(Q){return W.H.use(Q)},Et.useActionState=function(Q,ge,ye){return W.H.useActionState(Q,ge,ye)},Et.useCallback=function(Q,ge){return W.H.useCallback(Q,ge)},Et.useContext=function(Q){return W.H.useContext(Q)},Et.useDebugValue=function(){},Et.useDeferredValue=function(Q,ge){return W.H.useDeferredValue(Q,ge)},Et.useEffect=function(Q,ge,ye){var ve=W.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ve.useEffect(Q,ge)},Et.useId=function(){return W.H.useId()},Et.useImperativeHandle=function(Q,ge,ye){return W.H.useImperativeHandle(Q,ge,ye)},Et.useInsertionEffect=function(Q,ge){return W.H.useInsertionEffect(Q,ge)},Et.useLayoutEffect=function(Q,ge){return W.H.useLayoutEffect(Q,ge)},Et.useMemo=function(Q,ge){return W.H.useMemo(Q,ge)},Et.useOptimistic=function(Q,ge){return W.H.useOptimistic(Q,ge)},Et.useReducer=function(Q,ge,ye){return W.H.useReducer(Q,ge,ye)},Et.useRef=function(Q){return W.H.useRef(Q)},Et.useState=function(Q){return W.H.useState(Q)},Et.useSyncExternalStore=function(Q,ge,ye){return W.H.useSyncExternalStore(Q,ge,ye)},Et.useTransition=function(){return W.H.useTransition()},Et.version="19.1.0",Et}var Nw;function ny(){return Nw||(Nw=1,i0.exports=Zk()),i0.exports}var M=ny();const Wl=eO(M),Lw=$k({__proto__:null,default:Wl},[M]),Uw=Symbol.for("__ABLY_CONTEXT__"),Vw=typeof globalThis<"u"?globalThis:{};function eD(){let t=Vw[Uw];return t||(t=Vw[Uw]=Wl.createContext({})),t}const gf=eD();function Hs(t="default"){const e=Wl.useContext(gf)[t].client;if(!e)throw new Error("Could not find ably client in context. Make sure your ably hooks are called inside an <AblyProvider>");return e}function oO(t,e,n){const r=M.useRef(e);M.useEffect(()=>{r.current=e},[e]),M.useEffect(()=>(n?t.on(n,r.current):t.on(e),()=>{n?t.off(n,e):t.off(e)}),[t,n,e])}function hb(t,e,n="default"){const i=Hs(typeof e=="string"?e:n),o=typeof e=="function"?e:t,c=typeof t!="function"?t:void 0;oO(i.connection,o,c)}function lO(t="default",e){const n=Wl.useContext(gf)[t]._channelNameToChannelContext[e];if(!n)throw new Error(`Could not find a parent ChannelProvider in the component tree for channelName="${e}". Make sure your channel based hooks (usePresence, useChannel, useChannelStateListener) are called inside a <ChannelProvider> component`);return n}function jw(t,e,n){const r=typeof t=="object"?t:{channelName:t},{ablyId:i,channelName:o}=r,{channel:c}=lO(i,o);oO(c,typeof n=="function"?n:e,typeof e!="function"?e:void 0)}function tD(t){const[e,n]=M.useState(null),[r,i]=M.useState(null);return hb(["suspended","failed","disconnected"],o=>{var c;o.reason&&((c=t.onConnectionError)===null||c===void 0||c.call(t,o.reason),n(o.reason))},t.ablyId),hb(["connected","closed"],()=>{n(null)},t.ablyId),jw(t,["suspended","failed","detached"],o=>{var c;o.reason&&((c=t.onChannelError)===null||c===void 0||c.call(t,o.reason),i(o.reason))}),jw(t,["attached"],()=>{i(null)}),{connectionError:e,channelError:r}}const nD=["suspended","closing","closed","failed"],rD=(t,e)=>{try{t.Logger.logAction(t.logger,t.Logger.LOG_ERROR,`[react-hooks] ${e}`)}catch{console.error(`Unable to access ably-js logger, while sending ${e}`)}};function iD(t,e,n){const r=Hs(e),[i,o]=M.useState(r.connection.state);hb(d=>{o(d.current)},e),r.connection.state!==i&&o(r.connection.state);const c=!n&&!nD.includes(i);return M.useEffect(()=>{c&&t.attach().catch(d=>{rD(r,d.toString())})},[c,t]),{connectionState:i}}function Kl(t,e,n){const r={channelName:t},i=Hs(r.ablyId),{channelName:o,skip:c}=r,{channel:d,derived:p}=lO(r.ablyId,o),g=M.useMemo(()=>{if(!p)return d.publish.bind(d);const N=i.channels.get(o);return N.publish.bind(N)},[i.channels,p,d,o]),b=typeof e=="string"?e:null,E=typeof e=="string"?n:e,C=M.useRef(E),{connectionError:O,channelError:x}=tD(r);return M.useEffect(()=>{C.current=E},[E]),M.useEffect(()=>{const N=C.current?V=>{C.current&&C.current(V)}:null,k=N?b===null?[N]:[b,N]:null;return!c&&k&&sD(d,...k),()=>{!c&&k&&aD(d,...k)}},[b,d,c]),iD(d,r.ablyId,c),{channel:d,publish:g,ably:i,connectionError:O,channelError:x}}async function sD(t,...e){await t.subscribe(...e)}async function aD(t,...e){await t.unsubscribe(...e)}const oD=({client:t,children:e,ablyId:n="default"})=>{if(!t)throw new Error("AblyProvider: the `client` prop is required");const r=Wl.useContext(gf),i=M.useMemo(()=>Object.assign(Object.assign({},r),{[n]:{client:t,_channelNameToChannelContext:{}}}),[r,t,n]);return j.jsx(gf.Provider,Object.assign({value:i},{children:e}))},lD=({ablyId:t="default",channelName:e,options:n,deriveOptions:r,children:i})=>{const o=Wl.useContext(gf),{client:c,_channelNameToChannelContext:d}=o[t];if(d[e])throw new Error("You can not use more than one `ChannelProvider` with the same channel name");const p=!!r,g=p?c.channels.getDerived(e,r):c.channels.get(e),b=M.useMemo(()=>Object.assign(Object.assign({},o),{[t]:{client:c,_channelNameToChannelContext:Object.assign(Object.assign({},d),{[e]:{channel:g,derived:p}})}}),[p,c,g,e,d,t,o]);return M.useLayoutEffect(()=>{g.setOptions(Jk(n))},[g,n]),j.jsx(gf.Provider,Object.assign({value:b},{children:i}))};var s0={exports:{}},zh={},a0={exports:{}},o0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function cD(){return Fw||(Fw=1,function(t){function e(J,oe){var Ae=J.length;J.push(oe);e:for(;0<Ae;){var Ue=Ae-1>>>1,Q=J[Ue];if(0<i(Q,oe))J[Ue]=oe,J[Ae]=Q,Ae=Ue;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var oe=J[0],Ae=J.pop();if(Ae!==oe){J[0]=Ae;e:for(var Ue=0,Q=J.length,ge=Q>>>1;Ue<ge;){var ye=2*(Ue+1)-1,ve=J[ye],ke=ye+1,qe=J[ke];if(0>i(ve,Ae))ke<Q&&0>i(qe,ve)?(J[Ue]=qe,J[ke]=Ae,Ue=ke):(J[Ue]=ve,J[ye]=Ae,Ue=ye);else if(ke<Q&&0>i(qe,Ae))J[Ue]=qe,J[ke]=Ae,Ue=ke;else break e}}return oe}function i(J,oe){var Ae=J.sortIndex-oe.sortIndex;return Ae!==0?Ae:J.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],g=[],b=1,E=null,C=3,O=!1,x=!1,N=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function H(J){for(var oe=n(g);oe!==null;){if(oe.callback===null)r(g);else if(oe.startTime<=J)r(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function W(J){if(N=!1,H(J),!x)if(n(p)!==null)x=!0,$||($=!0,te());else{var oe=n(g);oe!==null&&Pe(W,oe.startTime-J)}}var $=!1,F=-1,D=5,L=-1;function G(){return k?!0:!(t.unstable_now()-L<D)}function T(){if(k=!1,$){var J=t.unstable_now();L=J;var oe=!0;try{e:{x=!1,N&&(N=!1,X(F),F=-1),O=!0;var Ae=C;try{t:{for(H(J),E=n(p);E!==null&&!(E.expirationTime>J&&G());){var Ue=E.callback;if(typeof Ue=="function"){E.callback=null,C=E.priorityLevel;var Q=Ue(E.expirationTime<=J);if(J=t.unstable_now(),typeof Q=="function"){E.callback=Q,H(J),oe=!0;break t}E===n(p)&&r(p),H(J)}else r(p);E=n(p)}if(E!==null)oe=!0;else{var ge=n(g);ge!==null&&Pe(W,ge.startTime-J),oe=!1}}break e}finally{E=null,C=Ae,O=!1}oe=void 0}}finally{oe?te():$=!1}}}var te;if(typeof q=="function")te=function(){q(T)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=T,te=function(){ne.postMessage(null)}}else te=function(){V(T,0)};function Pe(J,oe){F=V(function(){J(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(J){switch(C){case 1:case 2:case 3:var oe=3;break;default:oe=C}var Ae=C;C=oe;try{return J()}finally{C=Ae}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ae=C;C=J;try{return oe()}finally{C=Ae}},t.unstable_scheduleCallback=function(J,oe,Ae){var Ue=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Ue+Ae:Ue):Ae=Ue,J){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Ae+Q,J={id:b++,callback:oe,priorityLevel:J,startTime:Ae,expirationTime:Q,sortIndex:-1},Ae>Ue?(J.sortIndex=Ae,e(g,J),n(p)===null&&J===n(g)&&(N?(X(F),F=-1):N=!0,Pe(W,Ae-Ue))):(J.sortIndex=Q,e(p,J),x||O||(x=!0,$||($=!0,te()))),J},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(J){var oe=C;return function(){var Ae=C;C=oe;try{return J.apply(this,arguments)}finally{C=Ae}}}}(o0)),o0}var Bw;function uD(){return Bw||(Bw=1,a0.exports=cD()),a0.exports}var l0={exports:{}},Wr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function fD(){if(zw)return Wr;zw=1;var t=ny();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(p,g,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:p,containerInfo:g,implementation:b}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wr.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(p,g,null,b)},Wr.flushSync=function(p){var g=c.T,b=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=b,r.d.f()}},Wr.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},Wr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Wr.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,E=d(b,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:O}):b==="script"&&r.d.X(p,{crossOrigin:E,integrity:C,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Wr.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=d(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},Wr.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,E=d(b,g.crossOrigin);r.d.L(p,b,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Wr.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=d(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},Wr.requestFormReset=function(p){r.d.r(p)},Wr.unstable_batchedUpdates=function(p,g){return p(g)},Wr.useFormState=function(p,g,b){return c.H.useFormState(p,g,b)},Wr.useFormStatus=function(){return c.H.useHostTransitionStatus()},Wr.version="19.1.0",Wr}var Hw;function cO(){if(Hw)return l0.exports;Hw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),l0.exports=fD(),l0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qw;function hD(){if(qw)return zh;qw=1;var t=uD(),e=ny(),n=cO();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(r(188))}function p(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,h=a;;){var v=l.return;if(v===null)break;var S=v.alternate;if(S===null){if(h=v.return,h!==null){l=h;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===l)return d(v),s;if(S===h)return d(v),a;S=S.sibling}throw Error(r(188))}if(l.return!==h.return)l=v,h=S;else{for(var P=!1,U=v.child;U;){if(U===l){P=!0,l=v,h=S;break}if(U===h){P=!0,h=v,l=S;break}U=U.sibling}if(!P){for(U=S.child;U;){if(U===l){P=!0,l=S,h=v;break}if(U===h){P=!0,h=S,l=v;break}U=U.sibling}if(!P)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),q=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=T&&s[T]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case W:return"Suspense";case $:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case q:return(s.displayName||"Context")+".Provider";case X:return(s._context.displayName||"Context")+".Consumer";case H:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return a=s.displayName||null,a!==null?a:ne(s.type)||"Memo";case D:a=s._payload,s=s._init;try{return ne(s(a))}catch{}}return null}var Pe=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},Ue=[],Q=-1;function ge(s){return{current:s}}function ye(s){0>Q||(s.current=Ue[Q],Ue[Q]=null,Q--)}function ve(s,a){Q++,Ue[Q]=s.current,s.current=a}var ke=ge(null),qe=ge(null),Le=ge(null),Ot=ge(null);function gt(s,a){switch(ve(Le,a),ve(qe,s),ve(ke,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?sw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=sw(a),s=aw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ye(ke),ve(ke,s)}function An(){ye(ke),ye(qe),ye(Le)}function Gt(s){s.memoizedState!==null&&ve(Ot,s);var a=ke.current,l=aw(a,s.type);a!==l&&(ve(qe,s),ve(ke,l))}function _n(s){qe.current===s&&(ye(ke),ye(qe)),Ot.current===s&&(ye(Ot),Lh._currentValue=Ae)}var Rn=Object.prototype.hasOwnProperty,Lr=t.unstable_scheduleCallback,Sn=t.unstable_cancelCallback,Ur=t.unstable_shouldYield,ms=t.unstable_requestPaint,Ln=t.unstable_now,Er=t.unstable_getCurrentPriorityLevel,er=t.unstable_ImmediatePriority,un=t.unstable_UserBlockingPriority,Tt=t.unstable_NormalPriority,hr=t.unstable_LowPriority,ei=t.unstable_IdlePriority,Ai=t.log,ys=t.unstable_setDisableYieldValue,jt=null,nt=null;function Qt(s){if(typeof Ai=="function"&&ys(s),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(jt,s)}catch{}}var Ht=Math.clz32?Math.clz32:Ri,Ws=Math.log,ti=Math.LN2;function Ri(s){return s>>>=0,s===0?32:31-(Ws(s)/ti|0)|0}var Oi=256,ui=4194304;function wr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Yi(s,a,l){var h=s.pendingLanes;if(h===0)return 0;var v=0,S=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var U=h&134217727;return U!==0?(h=U&~S,h!==0?v=wr(h):(P&=U,P!==0?v=wr(P):l||(l=U&~s,l!==0&&(v=wr(l))))):(U=h&~S,U!==0?v=wr(U):P!==0?v=wr(P):l||(l=h&~s,l!==0&&(v=wr(l)))),v===0?0:a!==0&&a!==v&&(a&S)===0&&(S=v&-v,l=a&-a,S>=l||S===32&&(l&4194048)!==0)?a:v}function ni(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Ii(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(){var s=Oi;return Oi<<=1,(Oi&4194048)===0&&(Oi=256),s}function Xi(){var s=ui;return ui<<=1,(ui&62914560)===0&&(ui=4194304),s}function rn(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function fi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function vs(s,a,l,h,v,S){var P=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var U=s.entanglements,Z=s.expirationTimes,he=s.hiddenUpdates;for(l=P&~l;0<l;){var be=31-Ht(l),Ce=1<<be;U[be]=0,Z[be]=-1;var de=he[be];if(de!==null)for(he[be]=null,be=0;be<de.length;be++){var pe=de[be];pe!==null&&(pe.lane&=-536870913)}l&=~Ce}h!==0&&Tr(s,h,0),S!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=S&~(P&~a))}function Tr(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Ht(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|l&4194090}function On(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var h=31-Ht(l),v=1<<h;v&a|s[h]&a&&(s[h]|=a),l&=~v}}function Ji(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ks(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ee(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:Cw(s.type))}function ae(s,a){var l=oe.p;try{return oe.p=s,a()}finally{oe.p=l}}var ce=Math.random().toString(36).slice(2),Te="__reactFiber$"+ce,Ie="__reactProps$"+ce,Fe="__reactContainer$"+ce,Je="__reactEvents$"+ce,Be="__reactListeners$"+ce,$e="__reactHandles$"+ce,Ye="__reactResources$"+ce,it="__reactMarker$"+ce;function We(s){delete s[Te],delete s[Ie],delete s[Je],delete s[Be],delete s[$e]}function et(s){var a=s[Te];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Fe]||l[Te]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=uw(s);s!==null;){if(l=s[Te])return l;s=uw(s)}return a}s=l,l=s.parentNode}return null}function wt(s){if(s=s[Te]||s[Fe]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Ut(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Ft(s){var a=s[Ye];return a||(a=s[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function It(s){s[it]=!0}var Ne=new Set,hi={};function Un(s,a){tr(s,a),tr(s+"Capture",a)}function tr(s,a){for(hi[s]=a,s=0;s<a.length;s++)Ne.add(a[s])}var Hn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},Vr={};function Ys(s){return Rn.call(Vr,s)?!0:Rn.call(qt,s)?!1:Hn.test(s)?Vr[s]=!0:(qt[s]=!0,!1)}function Vn(s,a,l){if(Ys(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function nr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function ht(s,a,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+h)}}var In,jr;function Fr(s){if(In===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);In=a&&a[1]||"",jr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+In+s+jr}var xi=!1;function Xt(s,a){if(!s||xi)return"";xi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(pe){var de=pe}Reflect.construct(s,[],Ce)}else{try{Ce.call()}catch(pe){de=pe}s.call(Ce.prototype)}}else{try{throw Error()}catch(pe){de=pe}(Ce=s())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(pe){if(pe&&de&&typeof pe.stack=="string")return[pe.stack,de.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=h.DetermineComponentFrameRoot(),P=S[0],U=S[1];if(P&&U){var Z=P.split(`
`),he=U.split(`
`);for(v=h=0;h<Z.length&&!Z[h].includes("DetermineComponentFrameRoot");)h++;for(;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;if(h===Z.length||v===he.length)for(h=Z.length-1,v=he.length-1;1<=h&&0<=v&&Z[h]!==he[v];)v--;for(;1<=h&&0<=v;h--,v--)if(Z[h]!==he[v]){if(h!==1||v!==1)do if(h--,v--,0>v||Z[h]!==he[v]){var be=`
`+Z[h].replace(" at new "," at ");return s.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",s.displayName)),be}while(1<=h&&0<=v);break}}}finally{xi=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Fr(l):""}function di(s){switch(s.tag){case 26:case 27:case 5:return Fr(s.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return Xt(s.type,!1);case 11:return Xt(s.type.render,!1);case 1:return Xt(s.type,!0);case 31:return Fr("Activity");default:return""}}function Zi(s){try{var a="";do a+=di(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function rr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Xl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qf(s){var a=Xl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,S=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(P){h=""+P,S.call(this,P)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ao(s){s._valueTracker||(s._valueTracker=qf(s))}function ri(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return s&&(h=Xl(s)?s.checked?"true":"false":s.value),s=h,s!==l?(a.setValue(s),!0):!1}function bs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Qs=/[\n"\\]/g;function xn(s){return s.replace(Qs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ii(s,a,l,h,v,S,P,U){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),a!=null?P==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+rr(a)):s.value!==""+rr(a)&&(s.value=""+rr(a)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),a!=null?Xs(s,P,rr(a)):l!=null?Xs(s,P,rr(l)):h!=null&&s.removeAttribute("value"),v==null&&S!=null&&(s.defaultChecked=!!S),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+rr(U):s.removeAttribute("name")}function _s(s,a,l,h,v,S,P,U){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),a!=null||l!=null){if(!(S!=="submit"&&S!=="reset"||a!=null))return;l=l!=null?""+rr(l):"",a=a!=null?""+rr(a):l,U||a===s.value||(s.value=a),s.defaultValue=a}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=U?s.checked:!!h,s.defaultChecked=!!h,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P)}function Xs(s,a,l){a==="number"&&bs(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Pi(s,a,l,h){if(s=s.options,a){a={};for(var v=0;v<l.length;v++)a["$"+l[v]]=!0;for(l=0;l<s.length;l++)v=a.hasOwnProperty("$"+s[l].value),s[l].selected!==v&&(s[l].selected=v),v&&h&&(s[l].defaultSelected=!0)}else{for(l=""+rr(l),a=null,v=0;v<s.length;v++){if(s[v].value===l){s[v].selected=!0,h&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function Jt(s,a,l){if(a!=null&&(a=""+rr(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+rr(l):""}function fn(s,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(Pe(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=rr(a),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h)}function Ge(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ir(s,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,l):typeof l!="number"||l===0||Js.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Jl(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var v in a)h=a[v],a.hasOwnProperty(v)&&l[v]!==h&&ir(s,v,h)}else for(var S in a)a.hasOwnProperty(S)&&ir(s,S,a[S])}function Ro(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ru=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(s){return ru.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var es=null;function Br(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ts=null,Mi=null;function Io(s){var a=wt(s);if(a&&(s=a.stateNode)){var l=s[Ie]||null;e:switch(s=a.stateNode,a.type){case"input":if(ii(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+xn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==s&&h.form===s.form){var v=h[Ie]||null;if(!v)throw Error(r(90));ii(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===s.form&&ri(h)}break e;case"textarea":Jt(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Pi(s,!!l.multiple,a,!1)}}}var pi=!1;function Zl(s,a,l){if(pi)return s(a,l);pi=!0;try{var h=s(a);return h}finally{if(pi=!1,(ts!==null||Mi!==null)&&(Yp(),ts&&(a=ts,s=Mi,Mi=ts=null,Io(a),s)))for(a=0;a<s.length;a++)Io(s[a])}}function ns(s,a){var l=s.stateNode;if(l===null)return null;var h=l[Ie]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sr=!1;if(zr)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){sr=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{sr=!1}var ki=null,Ss=null,Es=null;function rs(){if(Es)return Es;var s,a=Ss,l=a.length,h,v="value"in ki?ki.value:ki.textContent,S=v.length;for(s=0;s<l&&a[s]===v[s];s++);var P=l-s;for(h=1;h<=P&&a[l-h]===v[S-h];h++);return Es=v.slice(s,1<h?1-h:void 0)}function Di(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function is(){return!0}function ec(){return!1}function qn(s){function a(l,h,v,S,P){this._reactName=l,this._targetInst=v,this.type=h,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(l=s[U],this[U]=l?l(S):S[U]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?is:ec,this.isPropagationStopped=ec,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),a}var at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=qn(at),ka=b({},at,{view:0,detail:0}),iu=qn(ka),Po,Da,ss,dr=b({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ss&&(ss&&s.type==="mousemove"?(Po=s.screenX-ss.screenX,Da=s.screenY-ss.screenY):Da=Po=0,ss=s),Po)},movementY:function(s){return"movementY"in s?s.movementY:Da}}),si=qn(dr),su=b({},dr,{dataTransfer:0}),Mo=qn(su),Na=b({},ka,{relatedTarget:0}),ko=qn(Na),tc=b({},at,{animationName:0,elapsedTime:0,pseudoElement:0}),Do=qn(tc),au=b({},at,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),La=qn(au),ou=b({},at,{data:0}),nc=qn(ou),Ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ic[s])?!!a[s]:!1}function Hr(){return ws}var lu=b({},ka,{key:function(s){if(s.key){var a=Ua[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Di(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?rc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(s){return s.type==="keypress"?Di(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Di(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),No=qn(lu),sc=b({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ac=qn(sc),Ts=b({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),oc=qn(Ts),cu=b({},at,{propertyName:0,elapsedTime:0,pseudoElement:0}),uu=qn(cu),fu=b({},dr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Va=qn(fu),Cr=b({},at,{newState:0,oldState:0}),Lo=qn(Cr),lc=[9,13,27,32],qr=zr&&"CompositionEvent"in window,y=null;zr&&"documentMode"in document&&(y=document.documentMode);var A=zr&&"TextEvent"in window&&!y,I=zr&&(!qr||y&&8<y&&11>=y),B=" ",le=!1;function me(s,a){switch(s){case"keyup":return lc.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function De(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xt=!1;function jn(s,a){switch(s){case"compositionend":return De(a);case"keypress":return a.which!==32?null:(le=!0,B);case"textInput":return s=a.data,s===B&&le?null:s;default:return null}}function Pt(s,a){if(xt)return s==="compositionend"||!qr&&me(s,a)?(s=rs(),Es=Ss=ki=null,xt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return I&&a.locale!=="ko"?null:a.data;default:return null}}var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!$n[s.type]:a==="textarea"}function as(s,a,l,h){ts?Mi?Mi.push(h):Mi=[h]:ts=h,a=tg(a,"onChange"),0<a.length&&(l=new xo("onChange","change",null,l,h),s.push({event:l,listeners:a}))}var Gn=null,Ni=null;function Uo(s){ew(s,0)}function cc(s){var a=Ut(s);if(ri(a))return s}function ap(s,a){if(s==="change")return a}var op=!1;if(zr){var Gf;if(zr){var hu="oninput"in document;if(!hu){var ja=document.createElement("div");ja.setAttribute("oninput","return;"),hu=typeof ja.oninput=="function"}Gf=hu}else Gf=!1;op=Gf&&(!document.documentMode||9<document.documentMode)}function Vo(){Gn&&(Gn.detachEvent("onpropertychange",Wf),Ni=Gn=null)}function Wf(s){if(s.propertyName==="value"&&cc(Ni)){var a=[];as(a,Ni,s,Br(s)),Zl(Uo,a)}}function lp(s,a,l){s==="focusin"?(Vo(),Gn=a,Ni=l,Gn.attachEvent("onpropertychange",Wf)):s==="focusout"&&Vo()}function cp(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cc(Ni)}function up(s,a){if(s==="click")return cc(a)}function $y(s,a){if(s==="input"||s==="change")return cc(a)}function Kf(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var ai=typeof Object.is=="function"?Object.is:Kf;function Zs(s,a){if(ai(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var v=l[h];if(!Rn.call(a,v)||!ai(s[v],a[v]))return!1}return!0}function fp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function du(s,a){var l=fp(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=a&&h>=a)return{node:l,offset:a-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=fp(l)}}function Yf(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Yf(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function $r(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=bs(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=bs(s.document)}return a}function uc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Qf=zr&&"documentMode"in document&&11>=document.documentMode,jo=null,Xf=null,Fa=null,pu=!1;function hp(s,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;pu||jo==null||jo!==bs(h)||(h=jo,"selectionStart"in h&&uc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fa&&Zs(Fa,h)||(Fa=h,h=tg(Xf,"onSelect"),0<h.length&&(a=new xo("onSelect","select",null,a,l),s.push({event:a,listeners:h}),a.target=jo)))}function Ba(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var za={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},Ha={},dp={};zr&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function ea(s){if(Ha[s])return Ha[s];if(!za[s])return s;var a=za[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in dp)return Ha[s]=a[l];return s}var ta=ea("animationend"),gu=ea("animationiteration"),pp=ea("animationstart"),gp=ea("transitionrun"),mp=ea("transitionstart"),Gy=ea("transitioncancel"),yp=ea("transitionend"),vp=new Map,Fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fo.push("scrollEnd");function Wn(s,a){vp.set(s,a),Un(a,[s])}var bp=new WeakMap;function mi(s,a){if(typeof s=="object"&&s!==null){var l=bp.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Zi(a)},bp.set(s,a),a)}return{value:s,source:a,stack:Zi(a)}}var Kn=[],Bo=0,Jf=0;function mu(){for(var s=Bo,a=Jf=Bo=0;a<s;){var l=Kn[a];Kn[a++]=null;var h=Kn[a];Kn[a++]=null;var v=Kn[a];Kn[a++]=null;var S=Kn[a];if(Kn[a++]=null,h!==null&&v!==null){var P=h.pending;P===null?v.next=v:(v.next=P.next,P.next=v),h.pending=v}S!==0&&yu(l,v,S)}}function Cs(s,a,l,h){Kn[Bo++]=s,Kn[Bo++]=a,Kn[Bo++]=l,Kn[Bo++]=h,Jf|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function pr(s,a,l,h){return Cs(s,a,l,h),na(s)}function zo(s,a){return Cs(s,null,null,a),na(s)}function yu(s,a,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var v=!1,S=s.return;S!==null;)S.childLanes|=l,h=S.alternate,h!==null&&(h.childLanes|=l),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(v=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,v&&a!==null&&(v=31-Ht(l),s=S.hiddenUpdates,h=s[v],h===null?s[v]=[a]:h.push(a),a.lane=l|536870912),S):null}function na(s){if(50<Oh)throw Oh=0,Av=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var qa={};function Zf(s,a,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(s,a,l,h){return new Zf(s,a,l,h)}function fc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function As(s,a){var l=s.alternate;return l===null?(l=oi(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function _p(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function hc(s,a,l,h,v,S){var P=0;if(h=s,typeof s=="function")fc(s)&&(P=1);else if(typeof s=="string")P=xk(s,l,ke.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=oi(31,l,a,v),s.elementType=L,s.lanes=S,s;case x:return $a(l.children,v,S,a);case N:P=8,v|=24;break;case k:return s=oi(12,l,a,v|2),s.elementType=k,s.lanes=S,s;case W:return s=oi(13,l,a,v),s.elementType=W,s.lanes=S,s;case $:return s=oi(19,l,a,v),s.elementType=$,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:case q:P=10;break e;case X:P=9;break e;case H:P=11;break e;case F:P=14;break e;case D:P=16,h=null;break e}P=29,l=Error(r(130,s===null?"null":typeof s,"")),h=null}return a=oi(P,l,a,v),a.elementType=s,a.type=h,a.lanes=S,a}function $a(s,a,l,h){return s=oi(7,s,h,a),s.lanes=l,s}function eh(s,a,l){return s=oi(6,s,null,a),s.lanes=l,s}function vu(s,a,l){return a=oi(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Ho=[],qo=0,bu=null,_u=0,Gr=[],yi=0,Rs=null,Os=1,Is="";function Ga(s,a){Ho[qo++]=_u,Ho[qo++]=bu,bu=s,_u=a}function Sp(s,a,l){Gr[yi++]=Os,Gr[yi++]=Is,Gr[yi++]=Rs,Rs=s;var h=Os;s=Is;var v=32-Ht(h)-1;h&=~(1<<v),l+=1;var S=32-Ht(a)+v;if(30<S){var P=v-v%5;S=(h&(1<<P)-1).toString(32),h>>=P,v-=P,Os=1<<32-Ht(a)+v|l<<v|h,Is=S+s}else Os=1<<S|l<<v|h,Is=s}function th(s){s.return!==null&&(Ga(s,1),Sp(s,1,0))}function nh(s){for(;s===bu;)bu=Ho[--qo],Ho[qo]=null,_u=Ho[--qo],Ho[qo]=null;for(;s===Rs;)Rs=Gr[--yi],Gr[yi]=null,Is=Gr[--yi],Gr[yi]=null,Os=Gr[--yi],Gr[yi]=null}var gr=null,yn=null,bt=!1,xs=null,vi=!1,Wa=Error(r(519));function Ps(s){var a=Error(r(418,""));throw ks(mi(a,s)),Wa}function rh(s){var a=s.stateNode,l=s.type,h=s.memoizedProps;switch(a[Te]=s,a[Ie]=h,l){case"dialog":kt("cancel",a),kt("close",a);break;case"iframe":case"object":case"embed":kt("load",a);break;case"video":case"audio":for(l=0;l<xh.length;l++)kt(xh[l],a);break;case"source":kt("error",a);break;case"img":case"image":case"link":kt("error",a),kt("load",a);break;case"details":kt("toggle",a);break;case"input":kt("invalid",a),_s(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ao(a);break;case"select":kt("invalid",a);break;case"textarea":kt("invalid",a),fn(a,h.value,h.defaultValue,h.children),Ao(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||iw(a.textContent,l)?(h.popover!=null&&(kt("beforetoggle",a),kt("toggle",a)),h.onScroll!=null&&kt("scroll",a),h.onScrollEnd!=null&&kt("scrollend",a),h.onClick!=null&&(a.onclick=ng),a=!0):a=!1,a||Ps(s)}function ih(s){for(gr=s.return;gr;)switch(gr.tag){case 5:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:gr=gr.return}}function Ms(s){if(s!==gr)return!1;if(!bt)return ih(s),bt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||zv(s.type,s.memoizedProps)),l=!l),l&&yn&&Ps(s),ih(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){yn=Us(s.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}yn=null}}else a===27?(a=yn,fl(s.type)?(s=Gv,Gv=null,yn=s):yn=a):yn=gr?Us(s.stateNode.nextSibling):null;return!0}function $o(){yn=gr=null,bt=!1}function Go(){var s=xs;return s!==null&&(Si===null?Si=s:Si.push.apply(Si,s),xs=null),s}function ks(s){xs===null?xs=[s]:xs.push(s)}var dc=ge(null),os=null,Ds=null;function ls(s,a,l){ve(dc,a._currentValue),a._currentValue=l}function Yn(s){s._currentValue=dc.current,ye(dc)}function Wo(s,a,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===l)break;s=s.return}}function sh(s,a,l,h){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var S=v.dependencies;if(S!==null){var P=v.child;S=S.firstContext;e:for(;S!==null;){var U=S;S=v;for(var Z=0;Z<a.length;Z++)if(U.context===a[Z]){S.lanes|=l,U=S.alternate,U!==null&&(U.lanes|=l),Wo(S.return,l,s),h||(P=null);break e}S=U.next}}else if(v.tag===18){if(P=v.return,P===null)throw Error(r(341));P.lanes|=l,S=P.alternate,S!==null&&(S.lanes|=l),Wo(P,l,s),P=null}else P=v.child;if(P!==null)P.return=v;else for(P=v;P!==null;){if(P===s){P=null;break}if(v=P.sibling,v!==null){v.return=P.return,P=v;break}P=P.return}v=P}}function pc(s,a,l,h){s=null;for(var v=a,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var P=v.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var U=v.type;ai(v.pendingProps.value,P.value)||(s!==null?s.push(U):s=[U])}}else if(v===Ot.current){if(P=v.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Lh):s=[Lh])}v=v.return}s!==null&&sh(a,s,l,h),a.flags|=262144}function gc(s){for(s=s.firstContext;s!==null;){if(!ai(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ka(s){os=s,Ds=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ar(s){return ah(os,s)}function bi(s,a){return os===null&&Ka(s),ah(s,a)}function ah(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ds===null){if(s===null)throw Error(r(308));Ds=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ds=Ds.next=a;return l}var mc=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},Ep=t.unstable_scheduleCallback,wp=t.unstable_NormalPriority,hn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ra(){return{controller:new mc,data:new Map,refCount:0}}function yc(s){s.refCount--,s.refCount===0&&Ep(wp,function(){s.controller.abort()})}var Ko=null,vn=0,Yo=0,Qo=null;function Wy(s,a){if(Ko===null){var l=Ko=[];vn=0,Yo=kv(),Qo={status:"pending",value:void 0,then:function(h){l.push(h)}}}return vn++,a.then(Tp,Tp),a}function Tp(){if(--vn===0&&Ko!==null){Qo!==null&&(Qo.status="fulfilled");var s=Ko;Ko=null,Yo=0,Qo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Ky(s,a){var l=[],h={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var v=0;v<l.length;v++)(0,l[v])(a)},function(v){for(h.status="rejected",h.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),h}var Cp=J.S;J.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Wy(s,a),Cp!==null&&Cp(s,a)};var ia=ge(null);function oh(){var s=ia.current;return s!==null?s:dn.pooledCache}function Xo(s,a){a===null?ve(ia,ia.current):ve(ia,a.pool)}function Ap(){var s=oh();return s===null?null:{parent:hn._currentValue,pool:s}}var vc=Error(r(460)),Rp=Error(r(474)),Su=Error(r(542)),lh={then:function(){}};function Op(s){return s=s.status,s==="fulfilled"||s==="rejected"}function bc(){}function Ip(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(bc,bc),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Pp(s),s;default:if(typeof a.status=="string")a.then(bc,bc);else{if(s=dn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=h}},function(h){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Pp(s),s}throw _c=a,vc}}var _c=null;function xp(){if(_c===null)throw Error(r(459));var s=_c;return _c=null,s}function Pp(s){if(s===vc||s===Su)throw Error(r(483))}var Ns=!1;function Eu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ch(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function sa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function aa(s,a,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(sn&2)!==0){var v=h.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),h.pending=a,a=na(s),yu(s,null,l),a}return Cs(s,h,a,l),na(s)}function Sc(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,On(s,l)}}function uh(s,a){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var v=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var P={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};S===null?v=S=P:S=S.next=P,l=l.next}while(l!==null);S===null?v=S=a:S=S.next=a}else v=S=a;l={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var fh=!1;function Ec(){if(fh){var s=Qo;if(s!==null)throw s}}function wc(s,a,l,h){fh=!1;var v=s.updateQueue;Ns=!1;var S=v.firstBaseUpdate,P=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var Z=U,he=Z.next;Z.next=null,P===null?S=he:P.next=he,P=Z;var be=s.alternate;be!==null&&(be=be.updateQueue,U=be.lastBaseUpdate,U!==P&&(U===null?be.firstBaseUpdate=he:U.next=he,be.lastBaseUpdate=Z))}if(S!==null){var Ce=v.baseState;P=0,be=he=Z=null,U=S;do{var de=U.lane&-536870913,pe=de!==U.lane;if(pe?(Bt&de)===de:(h&de)===de){de!==0&&de===Yo&&(fh=!0),be!==null&&(be=be.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var pt=s,ot=U;de=a;var ln=l;switch(ot.tag){case 1:if(pt=ot.payload,typeof pt=="function"){Ce=pt.call(ln,Ce,de);break e}Ce=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=ot.payload,de=typeof pt=="function"?pt.call(ln,Ce,de):pt,de==null)break e;Ce=b({},Ce,de);break e;case 2:Ns=!0}}de=U.callback,de!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=v.callbacks,pe===null?v.callbacks=[de]:pe.push(de))}else pe={lane:de,tag:U.tag,payload:U.payload,callback:U.callback,next:null},be===null?(he=be=pe,Z=Ce):be=be.next=pe,P|=de;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;pe=U,U=pe.next,pe.next=null,v.lastBaseUpdate=pe,v.shared.pending=null}}while(!0);be===null&&(Z=Ce),v.baseState=Z,v.firstBaseUpdate=he,v.lastBaseUpdate=be,S===null&&(v.shared.lanes=0),ol|=P,s.lanes=P,s.memoizedState=Ce}}function Jo(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function hh(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Jo(l[s],a)}var oa=ge(null),wu=ge(0);function Tu(s,a){s=ro,ve(wu,s),ve(oa,a),ro=s|a.baseLanes}function Cu(){ve(wu,ro),ve(oa,oa.current)}function dh(){ro=wu.current,ye(oa),ye(wu)}var la=0,St=null,Zt=null,Pn=null,Au=!1,Ya=!1,Li=!1,ca=0,Qa=0,Zo=null,Yy=0;function En(){throw Error(r(321))}function ph(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!ai(s[l],a[l]))return!1;return!0}function gh(s,a,l,h,v,S){return la=S,St=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,J.H=s===null||s.memoizedState===null?VE:jE,Li=!1,S=l(h,v),Li=!1,Ya&&(S=Mp(a,l,h,v)),mh(s),S}function mh(s){J.H=Lp;var a=Zt!==null&&Zt.next!==null;if(la=0,Pn=Zt=St=null,Au=!1,Qa=0,Zo=null,a)throw Error(r(300));s===null||mr||(s=s.dependencies,s!==null&&gc(s)&&(mr=!0))}function Mp(s,a,l,h){St=s;var v=0;do{if(Ya&&(Zo=null),Qa=0,Ya=!1,25<=v)throw Error(r(301));if(v+=1,Pn=Zt=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}J.H=BM,S=a(l,h)}while(Ya);return S}function Qy(){var s=J.H,a=s.useState()[0];return a=typeof a.then=="function"?z(a):a,s=s.useState()[0],(Zt!==null?Zt.memoizedState:null)!==s&&(St.flags|=1024),a}function u(){var s=ca!==0;return ca=0,s}function f(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function m(s){if(Au){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Au=!1}la=0,Pn=Zt=St=null,Ya=!1,Qa=ca=0,Zo=null}function _(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?St.memoizedState=Pn=s:Pn=Pn.next=s,Pn}function w(){if(Zt===null){var s=St.alternate;s=s!==null?s.memoizedState:null}else s=Zt.next;var a=Pn===null?St.memoizedState:Pn.next;if(a!==null)Pn=a,Zt=s;else{if(s===null)throw St.alternate===null?Error(r(467)):Error(r(310));Zt=s,s={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Pn===null?St.memoizedState=Pn=s:Pn=Pn.next=s}return Pn}function R(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function z(s){var a=Qa;return Qa+=1,Zo===null&&(Zo=[]),s=Ip(Zo,s,a),a=St,(Pn===null?a.memoizedState:Pn.next)===null&&(a=a.alternate,J.H=a===null||a.memoizedState===null?VE:jE),s}function Y(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return z(s);if(s.$$typeof===q)return ar(s)}throw Error(r(438,String(s)))}function fe(s){var a=null,l=St.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=St.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=R(),St.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),h=0;h<s;h++)l[h]=G;return a.index++,l}function ie(s,a){return typeof a=="function"?a(s):a}function _e(s){var a=w();return Se(a,Zt,s)}function Se(s,a,l){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var v=s.baseQueue,S=h.pending;if(S!==null){if(v!==null){var P=v.next;v.next=S.next,S.next=P}a.baseQueue=v=S,h.pending=null}if(S=s.baseState,v===null)s.memoizedState=S;else{a=v.next;var U=P=null,Z=null,he=a,be=!1;do{var Ce=he.lane&-536870913;if(Ce!==he.lane?(Bt&Ce)===Ce:(la&Ce)===Ce){var de=he.revertLane;if(de===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ce===Yo&&(be=!0);else if((la&de)===de){he=he.next,de===Yo&&(be=!0);continue}else Ce={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(U=Z=Ce,P=S):Z=Z.next=Ce,St.lanes|=de,ol|=de;Ce=he.action,Li&&l(S,Ce),S=he.hasEagerState?he.eagerState:l(S,Ce)}else de={lane:Ce,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(U=Z=de,P=S):Z=Z.next=de,St.lanes|=Ce,ol|=Ce;he=he.next}while(he!==null&&he!==a);if(Z===null?P=S:Z.next=U,!ai(S,s.memoizedState)&&(mr=!0,be&&(l=Qo,l!==null)))throw l;s.memoizedState=S,s.baseState=P,s.baseQueue=Z,h.lastRenderedState=S}return v===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Me(s){var a=w(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var h=l.dispatch,v=l.pending,S=a.memoizedState;if(v!==null){l.pending=null;var P=v=v.next;do S=s(S,P.action),P=P.next;while(P!==v);ai(S,a.memoizedState)||(mr=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),l.lastRenderedState=S}return[S,h]}function Ee(s,a,l){var h=St,v=w(),S=bt;if(S){if(l===void 0)throw Error(r(407));l=l()}else l=a();var P=!ai((Zt||v).memoizedState,l);P&&(v.memoizedState=l,mr=!0),v=v.queue;var U=st.bind(null,h,v,s);if(yh(2048,8,U,[s]),v.getSnapshot!==a||P||Pn!==null&&Pn.memoizedState.tag&1){if(h.flags|=2048,Ru(9,kp(),je.bind(null,h,v,l,a),null),dn===null)throw Error(r(349));S||(la&124)!==0||Ve(h,a,l)}return l}function Ve(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=St.updateQueue,a===null?(a=R(),St.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function je(s,a,l,h){a.value=l,a.getSnapshot=h,Vt(a)&&Wt(s)}function st(s,a,l){return l(function(){Vt(a)&&Wt(s)})}function Vt(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!ai(s,l)}catch{return!0}}function Wt(s){var a=zo(s,2);a!==null&&Bi(a,s,2)}function en(s){var a=_();if(typeof s=="function"){var l=s;if(s=l(),Li){Qt(!0);try{l()}finally{Qt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ie,lastRenderedState:s},a}function dt(s,a,l,h){return s.baseState=l,Se(s,Zt,typeof h=="function"?h:ie)}function li(s,a,l,h,v){if(Np(s))throw Error(r(485));if(s=a.action,s!==null){var S={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){S.listeners.push(P)}};J.T!==null?l(!0):S.isTransition=!1,h(S),l=a.pending,l===null?(S.next=a.pending=S,or(a,S)):(S.next=l.next,a.pending=l.next=S)}}function or(s,a){var l=a.action,h=a.payload,v=s.state;if(a.isTransition){var S=J.T,P={};J.T=P;try{var U=l(v,h),Z=J.S;Z!==null&&Z(P,U),el(s,a,U)}catch(he){Tc(s,a,he)}finally{J.T=S}}else try{S=l(v,h),el(s,a,S)}catch(he){Tc(s,a,he)}}function el(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Xa(s,a,h)},function(h){return Tc(s,a,h)}):Xa(s,a,l)}function Xa(s,a,l){a.status="fulfilled",a.value=l,pE(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,or(s,l)))}function Tc(s,a,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,pE(a),a=a.next;while(a!==h)}s.action=null}function pE(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function gE(s,a){return a}function mE(s,a){if(bt){var l=dn.formState;if(l!==null){e:{var h=St;if(bt){if(yn){t:{for(var v=yn,S=vi;v.nodeType!==8;){if(!S){v=null;break t}if(v=Us(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){yn=Us(v.nextSibling),h=v.data==="F!";break e}}Ps(h)}h=!1}h&&(a=l[0])}}return l=_(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gE,lastRenderedState:a},l.queue=h,l=NE.bind(null,St,h),h.dispatch=l,h=en(!1),S=tv.bind(null,St,!1,h.queue),h=_(),v={state:a,dispatch:null,action:s,pending:null},h.queue=v,l=li.bind(null,St,v,S,l),v.dispatch=l,h.memoizedState=s,[a,l,!1]}function yE(s){var a=w();return vE(a,Zt,s)}function vE(s,a,l){if(a=Se(s,a,gE)[0],s=_e(ie)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=z(a)}catch(P){throw P===vc?Su:P}else h=a;a=w();var v=a.queue,S=v.dispatch;return l!==a.memoizedState&&(St.flags|=2048,Ru(9,kp(),UM.bind(null,v,l),null)),[h,S,s]}function UM(s,a){s.action=a}function bE(s){var a=w(),l=Zt;if(l!==null)return vE(a,l,s);w(),a=a.memoizedState,l=w();var h=l.queue.dispatch;return l.memoizedState=s,[a,h,!1]}function Ru(s,a,l,h){return s={tag:s,create:l,deps:h,inst:a,next:null},a=St.updateQueue,a===null&&(a=R(),St.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,a.lastEffect=s),s}function kp(){return{destroy:void 0,resource:void 0}}function _E(){return w().memoizedState}function Dp(s,a,l,h){var v=_();h=h===void 0?null:h,St.flags|=s,v.memoizedState=Ru(1|a,kp(),l,h)}function yh(s,a,l,h){var v=w();h=h===void 0?null:h;var S=v.memoizedState.inst;Zt!==null&&h!==null&&ph(h,Zt.memoizedState.deps)?v.memoizedState=Ru(a,S,l,h):(St.flags|=s,v.memoizedState=Ru(1|a,S,l,h))}function SE(s,a){Dp(8390656,8,s,a)}function EE(s,a){yh(2048,8,s,a)}function wE(s,a){return yh(4,2,s,a)}function TE(s,a){return yh(4,4,s,a)}function CE(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function AE(s,a,l){l=l!=null?l.concat([s]):null,yh(4,4,CE.bind(null,a,s),l)}function Xy(){}function RE(s,a){var l=w();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&ph(a,h[1])?h[0]:(l.memoizedState=[s,a],s)}function OE(s,a){var l=w();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&ph(a,h[1]))return h[0];if(h=s(),Li){Qt(!0);try{s()}finally{Qt(!1)}}return l.memoizedState=[h,a],h}function Jy(s,a,l){return l===void 0||(la&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=P1(),St.lanes|=s,ol|=s,l)}function IE(s,a,l,h){return ai(l,a)?l:oa.current!==null?(s=Jy(s,l,h),ai(s,a)||(mr=!0),s):(la&42)===0?(mr=!0,s.memoizedState=l):(s=P1(),St.lanes|=s,ol|=s,a)}function xE(s,a,l,h,v){var S=oe.p;oe.p=S!==0&&8>S?S:8;var P=J.T,U={};J.T=U,tv(s,!1,a,l);try{var Z=v(),he=J.S;if(he!==null&&he(U,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var be=Ky(Z,h);vh(s,a,be,Fi(s))}else vh(s,a,h,Fi(s))}catch(Ce){vh(s,a,{then:function(){},status:"rejected",reason:Ce},Fi())}finally{oe.p=S,J.T=P}}function VM(){}function Zy(s,a,l,h){if(s.tag!==5)throw Error(r(476));var v=PE(s).queue;xE(s,v,a,Ae,l===null?VM:function(){return ME(s),l(h)})}function PE(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ie,lastRenderedState:Ae},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ie,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function ME(s){var a=PE(s).next.queue;vh(s,a,{},Fi())}function ev(){return ar(Lh)}function kE(){return w().memoizedState}function DE(){return w().memoizedState}function jM(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Fi();s=sa(l);var h=aa(a,s,l);h!==null&&(Bi(h,a,l),Sc(h,a,l)),a={cache:ra()},s.payload=a;return}a=a.return}}function FM(s,a,l){var h=Fi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Np(s)?LE(a,l):(l=pr(s,a,l,h),l!==null&&(Bi(l,s,h),UE(l,a,h)))}function NE(s,a,l){var h=Fi();vh(s,a,l,h)}function vh(s,a,l,h){var v={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Np(s))LE(a,v);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var P=a.lastRenderedState,U=S(P,l);if(v.hasEagerState=!0,v.eagerState=U,ai(U,P))return Cs(s,a,v,0),dn===null&&mu(),!1}catch{}finally{}if(l=pr(s,a,v,h),l!==null)return Bi(l,s,h),UE(l,a,h),!0}return!1}function tv(s,a,l,h){if(h={lane:2,revertLane:kv(),action:h,hasEagerState:!1,eagerState:null,next:null},Np(s)){if(a)throw Error(r(479))}else a=pr(s,l,h,2),a!==null&&Bi(a,s,2)}function Np(s){var a=s.alternate;return s===St||a!==null&&a===St}function LE(s,a){Ya=Au=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function UE(s,a,l){if((l&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,On(s,l)}}var Lp={readContext:ar,use:Y,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},VE={readContext:ar,use:Y,useCallback:function(s,a){return _().memoizedState=[s,a===void 0?null:a],s},useContext:ar,useEffect:SE,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Dp(4194308,4,CE.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Dp(4194308,4,s,a)},useInsertionEffect:function(s,a){Dp(4,2,s,a)},useMemo:function(s,a){var l=_();a=a===void 0?null:a;var h=s();if(Li){Qt(!0);try{s()}finally{Qt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(s,a,l){var h=_();if(l!==void 0){var v=l(a);if(Li){Qt(!0);try{l(a)}finally{Qt(!1)}}}else v=a;return h.memoizedState=h.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},h.queue=s,s=s.dispatch=FM.bind(null,St,s),[h.memoizedState,s]},useRef:function(s){var a=_();return s={current:s},a.memoizedState=s},useState:function(s){s=en(s);var a=s.queue,l=NE.bind(null,St,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Xy,useDeferredValue:function(s,a){var l=_();return Jy(l,s,a)},useTransition:function(){var s=en(!1);return s=xE.bind(null,St,s.queue,!0,!1),_().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var h=St,v=_();if(bt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),dn===null)throw Error(r(349));(Bt&124)!==0||Ve(h,a,l)}v.memoizedState=l;var S={value:l,getSnapshot:a};return v.queue=S,SE(st.bind(null,h,S,s),[s]),h.flags|=2048,Ru(9,kp(),je.bind(null,h,S,l,a),null),l},useId:function(){var s=_(),a=dn.identifierPrefix;if(bt){var l=Is,h=Os;l=(h&~(1<<32-Ht(h)-1)).toString(32)+l,a="«"+a+"R"+l,l=ca++,0<l&&(a+="H"+l.toString(32)),a+="»"}else l=Yy++,a="«"+a+"r"+l.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:ev,useFormState:mE,useActionState:mE,useOptimistic:function(s){var a=_();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=tv.bind(null,St,!0,l),l.dispatch=a,[s,a]},useMemoCache:fe,useCacheRefresh:function(){return _().memoizedState=jM.bind(null,St)}},jE={readContext:ar,use:Y,useCallback:RE,useContext:ar,useEffect:EE,useImperativeHandle:AE,useInsertionEffect:wE,useLayoutEffect:TE,useMemo:OE,useReducer:_e,useRef:_E,useState:function(){return _e(ie)},useDebugValue:Xy,useDeferredValue:function(s,a){var l=w();return IE(l,Zt.memoizedState,s,a)},useTransition:function(){var s=_e(ie)[0],a=w().memoizedState;return[typeof s=="boolean"?s:z(s),a]},useSyncExternalStore:Ee,useId:kE,useHostTransitionStatus:ev,useFormState:yE,useActionState:yE,useOptimistic:function(s,a){var l=w();return dt(l,Zt,s,a)},useMemoCache:fe,useCacheRefresh:DE},BM={readContext:ar,use:Y,useCallback:RE,useContext:ar,useEffect:EE,useImperativeHandle:AE,useInsertionEffect:wE,useLayoutEffect:TE,useMemo:OE,useReducer:Me,useRef:_E,useState:function(){return Me(ie)},useDebugValue:Xy,useDeferredValue:function(s,a){var l=w();return Zt===null?Jy(l,s,a):IE(l,Zt.memoizedState,s,a)},useTransition:function(){var s=Me(ie)[0],a=w().memoizedState;return[typeof s=="boolean"?s:z(s),a]},useSyncExternalStore:Ee,useId:kE,useHostTransitionStatus:ev,useFormState:bE,useActionState:bE,useOptimistic:function(s,a){var l=w();return Zt!==null?dt(l,Zt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:fe,useCacheRefresh:DE},Ou=null,bh=0;function Up(s){var a=bh;return bh+=1,Ou===null&&(Ou=[]),Ip(Ou,s,a)}function _h(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Vp(s,a){throw a.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function FE(s){var a=s._init;return a(s._payload)}function BE(s){function a(se,re){if(s){var ue=se.deletions;ue===null?(se.deletions=[re],se.flags|=16):ue.push(re)}}function l(se,re){if(!s)return null;for(;re!==null;)a(se,re),re=re.sibling;return null}function h(se){for(var re=new Map;se!==null;)se.key!==null?re.set(se.key,se):re.set(se.index,se),se=se.sibling;return re}function v(se,re){return se=As(se,re),se.index=0,se.sibling=null,se}function S(se,re,ue){return se.index=ue,s?(ue=se.alternate,ue!==null?(ue=ue.index,ue<re?(se.flags|=67108866,re):ue):(se.flags|=67108866,re)):(se.flags|=1048576,re)}function P(se){return s&&se.alternate===null&&(se.flags|=67108866),se}function U(se,re,ue,we){return re===null||re.tag!==6?(re=eh(ue,se.mode,we),re.return=se,re):(re=v(re,ue),re.return=se,re)}function Z(se,re,ue,we){var Ke=ue.type;return Ke===x?be(se,re,ue.props.children,we,ue.key):re!==null&&(re.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===D&&FE(Ke)===re.type)?(re=v(re,ue.props),_h(re,ue),re.return=se,re):(re=hc(ue.type,ue.key,ue.props,null,se.mode,we),_h(re,ue),re.return=se,re)}function he(se,re,ue,we){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=vu(ue,se.mode,we),re.return=se,re):(re=v(re,ue.children||[]),re.return=se,re)}function be(se,re,ue,we,Ke){return re===null||re.tag!==7?(re=$a(ue,se.mode,we,Ke),re.return=se,re):(re=v(re,ue),re.return=se,re)}function Ce(se,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=eh(""+re,se.mode,ue),re.return=se,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return ue=hc(re.type,re.key,re.props,null,se.mode,ue),_h(ue,re),ue.return=se,ue;case O:return re=vu(re,se.mode,ue),re.return=se,re;case D:var we=re._init;return re=we(re._payload),Ce(se,re,ue)}if(Pe(re)||te(re))return re=$a(re,se.mode,ue,null),re.return=se,re;if(typeof re.then=="function")return Ce(se,Up(re),ue);if(re.$$typeof===q)return Ce(se,bi(se,re),ue);Vp(se,re)}return null}function de(se,re,ue,we){var Ke=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Ke!==null?null:U(se,re,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case C:return ue.key===Ke?Z(se,re,ue,we):null;case O:return ue.key===Ke?he(se,re,ue,we):null;case D:return Ke=ue._init,ue=Ke(ue._payload),de(se,re,ue,we)}if(Pe(ue)||te(ue))return Ke!==null?null:be(se,re,ue,we,null);if(typeof ue.then=="function")return de(se,re,Up(ue),we);if(ue.$$typeof===q)return de(se,re,bi(se,ue),we);Vp(se,ue)}return null}function pe(se,re,ue,we,Ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return se=se.get(ue)||null,U(re,se,""+we,Ke);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case C:return se=se.get(we.key===null?ue:we.key)||null,Z(re,se,we,Ke);case O:return se=se.get(we.key===null?ue:we.key)||null,he(re,se,we,Ke);case D:var At=we._init;return we=At(we._payload),pe(se,re,ue,we,Ke)}if(Pe(we)||te(we))return se=se.get(ue)||null,be(re,se,we,Ke,null);if(typeof we.then=="function")return pe(se,re,ue,Up(we),Ke);if(we.$$typeof===q)return pe(se,re,ue,bi(re,we),Ke);Vp(re,we)}return null}function pt(se,re,ue,we){for(var Ke=null,At=null,Xe=re,lt=re=0,vr=null;Xe!==null&&lt<ue.length;lt++){Xe.index>lt?(vr=Xe,Xe=null):vr=Xe.sibling;var $t=de(se,Xe,ue[lt],we);if($t===null){Xe===null&&(Xe=vr);break}s&&Xe&&$t.alternate===null&&a(se,Xe),re=S($t,re,lt),At===null?Ke=$t:At.sibling=$t,At=$t,Xe=vr}if(lt===ue.length)return l(se,Xe),bt&&Ga(se,lt),Ke;if(Xe===null){for(;lt<ue.length;lt++)Xe=Ce(se,ue[lt],we),Xe!==null&&(re=S(Xe,re,lt),At===null?Ke=Xe:At.sibling=Xe,At=Xe);return bt&&Ga(se,lt),Ke}for(Xe=h(Xe);lt<ue.length;lt++)vr=pe(Xe,se,lt,ue[lt],we),vr!==null&&(s&&vr.alternate!==null&&Xe.delete(vr.key===null?lt:vr.key),re=S(vr,re,lt),At===null?Ke=vr:At.sibling=vr,At=vr);return s&&Xe.forEach(function(ml){return a(se,ml)}),bt&&Ga(se,lt),Ke}function ot(se,re,ue,we){if(ue==null)throw Error(r(151));for(var Ke=null,At=null,Xe=re,lt=re=0,vr=null,$t=ue.next();Xe!==null&&!$t.done;lt++,$t=ue.next()){Xe.index>lt?(vr=Xe,Xe=null):vr=Xe.sibling;var ml=de(se,Xe,$t.value,we);if(ml===null){Xe===null&&(Xe=vr);break}s&&Xe&&ml.alternate===null&&a(se,Xe),re=S(ml,re,lt),At===null?Ke=ml:At.sibling=ml,At=ml,Xe=vr}if($t.done)return l(se,Xe),bt&&Ga(se,lt),Ke;if(Xe===null){for(;!$t.done;lt++,$t=ue.next())$t=Ce(se,$t.value,we),$t!==null&&(re=S($t,re,lt),At===null?Ke=$t:At.sibling=$t,At=$t);return bt&&Ga(se,lt),Ke}for(Xe=h(Xe);!$t.done;lt++,$t=ue.next())$t=pe(Xe,se,lt,$t.value,we),$t!==null&&(s&&$t.alternate!==null&&Xe.delete($t.key===null?lt:$t.key),re=S($t,re,lt),At===null?Ke=$t:At.sibling=$t,At=$t);return s&&Xe.forEach(function(zk){return a(se,zk)}),bt&&Ga(se,lt),Ke}function ln(se,re,ue,we){if(typeof ue=="object"&&ue!==null&&ue.type===x&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case C:e:{for(var Ke=ue.key;re!==null;){if(re.key===Ke){if(Ke=ue.type,Ke===x){if(re.tag===7){l(se,re.sibling),we=v(re,ue.props.children),we.return=se,se=we;break e}}else if(re.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===D&&FE(Ke)===re.type){l(se,re.sibling),we=v(re,ue.props),_h(we,ue),we.return=se,se=we;break e}l(se,re);break}else a(se,re);re=re.sibling}ue.type===x?(we=$a(ue.props.children,se.mode,we,ue.key),we.return=se,se=we):(we=hc(ue.type,ue.key,ue.props,null,se.mode,we),_h(we,ue),we.return=se,se=we)}return P(se);case O:e:{for(Ke=ue.key;re!==null;){if(re.key===Ke)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){l(se,re.sibling),we=v(re,ue.children||[]),we.return=se,se=we;break e}else{l(se,re);break}else a(se,re);re=re.sibling}we=vu(ue,se.mode,we),we.return=se,se=we}return P(se);case D:return Ke=ue._init,ue=Ke(ue._payload),ln(se,re,ue,we)}if(Pe(ue))return pt(se,re,ue,we);if(te(ue)){if(Ke=te(ue),typeof Ke!="function")throw Error(r(150));return ue=Ke.call(ue),ot(se,re,ue,we)}if(typeof ue.then=="function")return ln(se,re,Up(ue),we);if(ue.$$typeof===q)return ln(se,re,bi(se,ue),we);Vp(se,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,re!==null&&re.tag===6?(l(se,re.sibling),we=v(re,ue),we.return=se,se=we):(l(se,re),we=eh(ue,se.mode,we),we.return=se,se=we),P(se)):l(se,re)}return function(se,re,ue,we){try{bh=0;var Ke=ln(se,re,ue,we);return Ou=null,Ke}catch(Xe){if(Xe===vc||Xe===Su)throw Xe;var At=oi(29,Xe,null,se.mode);return At.lanes=we,At.return=se,At}finally{}}}var Iu=BE(!0),zE=BE(!1),cs=ge(null),ua=null;function tl(s){var a=s.alternate;ve(lr,lr.current&1),ve(cs,s),ua===null&&(a===null||oa.current!==null||a.memoizedState!==null)&&(ua=s)}function HE(s){if(s.tag===22){if(ve(lr,lr.current),ve(cs,s),ua===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(ua=s)}}else nl()}function nl(){ve(lr,lr.current),ve(cs,cs.current)}function Ja(s){ye(cs),ua===s&&(ua=null),ye(lr)}var lr=ge(0);function jp(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||$v(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function nv(s,a,l,h){a=s.memoizedState,l=l(h,a),l=l==null?a:b({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var rv={enqueueSetState:function(s,a,l){s=s._reactInternals;var h=Fi(),v=sa(h);v.payload=a,l!=null&&(v.callback=l),a=aa(s,v,h),a!==null&&(Bi(a,s,h),Sc(a,s,h))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var h=Fi(),v=sa(h);v.tag=1,v.payload=a,l!=null&&(v.callback=l),a=aa(s,v,h),a!==null&&(Bi(a,s,h),Sc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Fi(),h=sa(l);h.tag=2,a!=null&&(h.callback=a),a=aa(s,h,l),a!==null&&(Bi(a,s,l),Sc(a,s,l))}};function qE(s,a,l,h,v,S,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,S,P):a.prototype&&a.prototype.isPureReactComponent?!Zs(l,h)||!Zs(v,S):!0}function $E(s,a,l,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==s&&rv.enqueueReplaceState(a,a.state,null)}function Cc(s,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(s=s.defaultProps){l===a&&(l=b({},l));for(var v in s)l[v]===void 0&&(l[v]=s[v])}return l}var Fp=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function GE(s){Fp(s)}function WE(s){console.error(s)}function KE(s){Fp(s)}function Bp(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function YE(s,a,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function iv(s,a,l){return l=sa(l),l.tag=3,l.payload={element:null},l.callback=function(){Bp(s,a)},l}function QE(s){return s=sa(s),s.tag=3,s}function XE(s,a,l,h){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var S=h.value;s.payload=function(){return v(S)},s.callback=function(){YE(a,l,h)}}var P=l.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){YE(a,l,h),typeof v!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})})}function zM(s,a,l,h,v){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&pc(a,l,v,!0),l=cs.current,l!==null){switch(l.tag){case 13:return ua===null?Ov():l.alternate===null&&Mn===0&&(Mn=3),l.flags&=-257,l.flags|=65536,l.lanes=v,h===lh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),xv(s,h,v)),!1;case 22:return l.flags|=65536,h===lh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),xv(s,h,v)),!1}throw Error(r(435,l.tag))}return xv(s,h,v),Ov(),!1}if(bt)return a=cs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,h!==Wa&&(s=Error(r(422),{cause:h}),ks(mi(s,l)))):(h!==Wa&&(a=Error(r(423),{cause:h}),ks(mi(a,l))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,h=mi(h,l),v=iv(s.stateNode,h,v),uh(s,v),Mn!==4&&(Mn=2)),!1;var S=Error(r(520),{cause:h});if(S=mi(S,l),Rh===null?Rh=[S]:Rh.push(S),Mn!==4&&(Mn=2),a===null)return!0;h=mi(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=v&-v,l.lanes|=s,s=iv(l.stateNode,h,s),uh(l,s),!1;case 1:if(a=l.type,S=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ll===null||!ll.has(S))))return l.flags|=65536,v&=-v,l.lanes|=v,v=QE(v),XE(v,s,l,h),uh(l,v),!1}l=l.return}while(l!==null);return!1}var JE=Error(r(461)),mr=!1;function Ar(s,a,l,h){a.child=s===null?zE(a,null,l,h):Iu(a,s.child,l,h)}function ZE(s,a,l,h,v){l=l.render;var S=a.ref;if("ref"in h){var P={};for(var U in h)U!=="ref"&&(P[U]=h[U])}else P=h;return Ka(a),h=gh(s,a,l,P,S,v),U=u(),s!==null&&!mr?(f(s,a,v),Za(s,a,v)):(bt&&U&&th(a),a.flags|=1,Ar(s,a,h,v),a.child)}function e1(s,a,l,h,v){if(s===null){var S=l.type;return typeof S=="function"&&!fc(S)&&S.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=S,t1(s,a,S,h,v)):(s=hc(l.type,null,h,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,!hv(s,v)){var P=S.memoizedProps;if(l=l.compare,l=l!==null?l:Zs,l(P,h)&&s.ref===a.ref)return Za(s,a,v)}return a.flags|=1,s=As(S,h),s.ref=a.ref,s.return=a,a.child=s}function t1(s,a,l,h,v){if(s!==null){var S=s.memoizedProps;if(Zs(S,h)&&s.ref===a.ref)if(mr=!1,a.pendingProps=h=S,hv(s,v))(s.flags&131072)!==0&&(mr=!0);else return a.lanes=s.lanes,Za(s,a,v)}return sv(s,a,l,h,v)}function n1(s,a,l){var h=a.pendingProps,v=h.children,S=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=S!==null?S.baseLanes|l:l,s!==null){for(v=a.child=s.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;a.childLanes=S&~h}else a.childLanes=0,a.child=null;return r1(s,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Xo(a,S!==null?S.cachePool:null),S!==null?Tu(a,S):Cu(),HE(a);else return a.lanes=a.childLanes=536870912,r1(s,a,S!==null?S.baseLanes|l:l,l)}else S!==null?(Xo(a,S.cachePool),Tu(a,S),nl(),a.memoizedState=null):(s!==null&&Xo(a,null),Cu(),nl());return Ar(s,a,v,l),a.child}function r1(s,a,l,h){var v=oh();return v=v===null?null:{parent:hn._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},s!==null&&Xo(a,null),Cu(),HE(a),s!==null&&pc(s,a,h,!0),null}function zp(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function sv(s,a,l,h,v){return Ka(a),l=gh(s,a,l,h,void 0,v),h=u(),s!==null&&!mr?(f(s,a,v),Za(s,a,v)):(bt&&h&&th(a),a.flags|=1,Ar(s,a,l,v),a.child)}function i1(s,a,l,h,v,S){return Ka(a),a.updateQueue=null,l=Mp(a,h,l,v),mh(s),h=u(),s!==null&&!mr?(f(s,a,S),Za(s,a,S)):(bt&&h&&th(a),a.flags|=1,Ar(s,a,l,S),a.child)}function s1(s,a,l,h,v){if(Ka(a),a.stateNode===null){var S=qa,P=l.contextType;typeof P=="object"&&P!==null&&(S=ar(P)),S=new l(h,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=rv,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=h,S.state=a.memoizedState,S.refs={},Eu(a),P=l.contextType,S.context=typeof P=="object"&&P!==null?ar(P):qa,S.state=a.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(nv(a,l,P,h),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(P=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),P!==S.state&&rv.enqueueReplaceState(S,S.state,null),wc(a,h,S,v),Ec(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){S=a.stateNode;var U=a.memoizedProps,Z=Cc(l,U);S.props=Z;var he=S.context,be=l.contextType;P=qa,typeof be=="object"&&be!==null&&(P=ar(be));var Ce=l.getDerivedStateFromProps;be=typeof Ce=="function"||typeof S.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,be||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U||he!==P)&&$E(a,S,h,P),Ns=!1;var de=a.memoizedState;S.state=de,wc(a,h,S,v),Ec(),he=a.memoizedState,U||de!==he||Ns?(typeof Ce=="function"&&(nv(a,l,Ce,h),he=a.memoizedState),(Z=Ns||qE(a,l,Z,h,de,he,P))?(be||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=he),S.props=h,S.state=he,S.context=P,h=Z):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{S=a.stateNode,ch(s,a),P=a.memoizedProps,be=Cc(l,P),S.props=be,Ce=a.pendingProps,de=S.context,he=l.contextType,Z=qa,typeof he=="object"&&he!==null&&(Z=ar(he)),U=l.getDerivedStateFromProps,(he=typeof U=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==Ce||de!==Z)&&$E(a,S,h,Z),Ns=!1,de=a.memoizedState,S.state=de,wc(a,h,S,v),Ec();var pe=a.memoizedState;P!==Ce||de!==pe||Ns||s!==null&&s.dependencies!==null&&gc(s.dependencies)?(typeof U=="function"&&(nv(a,l,U,h),pe=a.memoizedState),(be=Ns||qE(a,l,be,h,de,pe,Z)||s!==null&&s.dependencies!==null&&gc(s.dependencies))?(he||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,pe,Z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,pe,Z)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=pe),S.props=h,S.state=pe,S.context=Z,h=be):(typeof S.componentDidUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=1024),h=!1)}return S=h,zp(s,a),h=(a.flags&128)!==0,S||h?(S=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,s!==null&&h?(a.child=Iu(a,s.child,null,v),a.child=Iu(a,null,l,v)):Ar(s,a,l,v),a.memoizedState=S.state,s=a.child):s=Za(s,a,v),s}function a1(s,a,l,h){return $o(),a.flags|=256,Ar(s,a,l,h),a.child}var av={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ov(s){return{baseLanes:s,cachePool:Ap()}}function lv(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=us),s}function o1(s,a,l){var h=a.pendingProps,v=!1,S=(a.flags&128)!==0,P;if((P=S)||(P=s!==null&&s.memoizedState===null?!1:(lr.current&2)!==0),P&&(v=!0,a.flags&=-129),P=(a.flags&32)!==0,a.flags&=-33,s===null){if(bt){if(v?tl(a):nl(),bt){var U=yn,Z;if(Z=U){e:{for(Z=U,U=vi;Z.nodeType!==8;){if(!U){U=null;break e}if(Z=Us(Z.nextSibling),Z===null){U=null;break e}}U=Z}U!==null?(a.memoizedState={dehydrated:U,treeContext:Rs!==null?{id:Os,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},Z=oi(18,null,null,0),Z.stateNode=U,Z.return=a,a.child=Z,gr=a,yn=null,Z=!0):Z=!1}Z||Ps(a)}if(U=a.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return $v(U)?a.lanes=32:a.lanes=536870912,null;Ja(a)}return U=h.children,h=h.fallback,v?(nl(),v=a.mode,U=Hp({mode:"hidden",children:U},v),h=$a(h,v,l,null),U.return=a,h.return=a,U.sibling=h,a.child=U,v=a.child,v.memoizedState=ov(l),v.childLanes=lv(s,P,l),a.memoizedState=av,h):(tl(a),cv(a,U))}if(Z=s.memoizedState,Z!==null&&(U=Z.dehydrated,U!==null)){if(S)a.flags&256?(tl(a),a.flags&=-257,a=uv(s,a,l)):a.memoizedState!==null?(nl(),a.child=s.child,a.flags|=128,a=null):(nl(),v=h.fallback,U=a.mode,h=Hp({mode:"visible",children:h.children},U),v=$a(v,U,l,null),v.flags|=2,h.return=a,v.return=a,h.sibling=v,a.child=h,Iu(a,s.child,null,l),h=a.child,h.memoizedState=ov(l),h.childLanes=lv(s,P,l),a.memoizedState=av,a=v);else if(tl(a),$v(U)){if(P=U.nextSibling&&U.nextSibling.dataset,P)var he=P.dgst;P=he,h=Error(r(419)),h.stack="",h.digest=P,ks({value:h,source:null,stack:null}),a=uv(s,a,l)}else if(mr||pc(s,a,l,!1),P=(l&s.childLanes)!==0,mr||P){if(P=dn,P!==null&&(h=l&-l,h=(h&42)!==0?1:Ji(h),h=(h&(P.suspendedLanes|l))!==0?0:h,h!==0&&h!==Z.retryLane))throw Z.retryLane=h,zo(s,h),Bi(P,s,h),JE;U.data==="$?"||Ov(),a=uv(s,a,l)}else U.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=Z.treeContext,yn=Us(U.nextSibling),gr=a,bt=!0,xs=null,vi=!1,s!==null&&(Gr[yi++]=Os,Gr[yi++]=Is,Gr[yi++]=Rs,Os=s.id,Is=s.overflow,Rs=a),a=cv(a,h.children),a.flags|=4096);return a}return v?(nl(),v=h.fallback,U=a.mode,Z=s.child,he=Z.sibling,h=As(Z,{mode:"hidden",children:h.children}),h.subtreeFlags=Z.subtreeFlags&65011712,he!==null?v=As(he,v):(v=$a(v,U,l,null),v.flags|=2),v.return=a,h.return=a,h.sibling=v,a.child=h,h=v,v=a.child,U=s.child.memoizedState,U===null?U=ov(l):(Z=U.cachePool,Z!==null?(he=hn._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=Ap(),U={baseLanes:U.baseLanes|l,cachePool:Z}),v.memoizedState=U,v.childLanes=lv(s,P,l),a.memoizedState=av,h):(tl(a),l=s.child,s=l.sibling,l=As(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,s!==null&&(P=a.deletions,P===null?(a.deletions=[s],a.flags|=16):P.push(s)),a.child=l,a.memoizedState=null,l)}function cv(s,a){return a=Hp({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Hp(s,a){return s=oi(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function uv(s,a,l){return Iu(a,s.child,null,l),s=cv(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function l1(s,a,l){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Wo(s.return,a,l)}function fv(s,a,l,h,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:v}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=h,S.tail=l,S.tailMode=v)}function c1(s,a,l){var h=a.pendingProps,v=h.revealOrder,S=h.tail;if(Ar(s,a,h.children,l),h=lr.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&l1(s,l,a);else if(s.tag===19)l1(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(ve(lr,h),v){case"forwards":for(l=a.child,v=null;l!==null;)s=l.alternate,s!==null&&jp(s)===null&&(v=l),l=l.sibling;l=v,l===null?(v=a.child,a.child=null):(v=l.sibling,l.sibling=null),fv(a,!1,v,l,S);break;case"backwards":for(l=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&jp(s)===null){a.child=v;break}s=v.sibling,v.sibling=l,l=v,v=s}fv(a,!0,l,null,S);break;case"together":fv(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Za(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),ol|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(pc(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=As(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=As(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function hv(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&gc(s)))}function HM(s,a,l){switch(a.tag){case 3:gt(a,a.stateNode.containerInfo),ls(a,hn,s.memoizedState.cache),$o();break;case 27:case 5:Gt(a);break;case 4:gt(a,a.stateNode.containerInfo);break;case 10:ls(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(tl(a),a.flags|=128,null):(l&a.child.childLanes)!==0?o1(s,a,l):(tl(a),s=Za(s,a,l),s!==null?s.sibling:null);tl(a);break;case 19:var v=(s.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(pc(s,a,l,!1),h=(l&a.childLanes)!==0),v){if(h)return c1(s,a,l);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ve(lr,lr.current),h)break;return null;case 22:case 23:return a.lanes=0,n1(s,a,l);case 24:ls(a,hn,s.memoizedState.cache)}return Za(s,a,l)}function u1(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)mr=!0;else{if(!hv(s,l)&&(a.flags&128)===0)return mr=!1,HM(s,a,l);mr=(s.flags&131072)!==0}else mr=!1,bt&&(a.flags&1048576)!==0&&Sp(a,_u,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var h=a.elementType,v=h._init;if(h=v(h._payload),a.type=h,typeof h=="function")fc(h)?(s=Cc(h,s),a.tag=1,a=s1(null,a,h,s,l)):(a.tag=0,a=sv(null,a,h,s,l));else{if(h!=null){if(v=h.$$typeof,v===H){a.tag=11,a=ZE(null,a,h,s,l);break e}else if(v===F){a.tag=14,a=e1(null,a,h,s,l);break e}}throw a=ne(h)||h,Error(r(306,a,""))}}return a;case 0:return sv(s,a,a.type,a.pendingProps,l);case 1:return h=a.type,v=Cc(h,a.pendingProps),s1(s,a,h,v,l);case 3:e:{if(gt(a,a.stateNode.containerInfo),s===null)throw Error(r(387));h=a.pendingProps;var S=a.memoizedState;v=S.element,ch(s,a),wc(a,h,null,l);var P=a.memoizedState;if(h=P.cache,ls(a,hn,h),h!==S.cache&&sh(a,[hn],l,!0),Ec(),h=P.element,S.isDehydrated)if(S={element:h,isDehydrated:!1,cache:P.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=a1(s,a,h,l);break e}else if(h!==v){v=mi(Error(r(424)),a),ks(v),a=a1(s,a,h,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(yn=Us(s.firstChild),gr=a,bt=!0,xs=null,vi=!0,l=zE(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($o(),h===v){a=Za(s,a,l);break e}Ar(s,a,h,l)}a=a.child}return a;case 26:return zp(s,a),s===null?(l=pw(a.type,null,a.pendingProps,null))?a.memoizedState=l:bt||(l=a.type,s=a.pendingProps,h=rg(Le.current).createElement(l),h[Te]=a,h[Ie]=s,Or(h,l,s),It(h),a.stateNode=h):a.memoizedState=pw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Gt(a),s===null&&bt&&(h=a.stateNode=fw(a.type,a.pendingProps,Le.current),gr=a,vi=!0,v=yn,fl(a.type)?(Gv=v,yn=Us(h.firstChild)):yn=v),Ar(s,a,a.pendingProps.children,l),zp(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&bt&&((v=h=yn)&&(h=yk(h,a.type,a.pendingProps,vi),h!==null?(a.stateNode=h,gr=a,yn=Us(h.firstChild),vi=!1,v=!0):v=!1),v||Ps(a)),Gt(a),v=a.type,S=a.pendingProps,P=s!==null?s.memoizedProps:null,h=S.children,zv(v,S)?h=null:P!==null&&zv(v,P)&&(a.flags|=32),a.memoizedState!==null&&(v=gh(s,a,Qy,null,null,l),Lh._currentValue=v),zp(s,a),Ar(s,a,h,l),a.child;case 6:return s===null&&bt&&((s=l=yn)&&(l=vk(l,a.pendingProps,vi),l!==null?(a.stateNode=l,gr=a,yn=null,s=!0):s=!1),s||Ps(a)),null;case 13:return o1(s,a,l);case 4:return gt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Iu(a,null,h,l):Ar(s,a,h,l),a.child;case 11:return ZE(s,a,a.type,a.pendingProps,l);case 7:return Ar(s,a,a.pendingProps,l),a.child;case 8:return Ar(s,a,a.pendingProps.children,l),a.child;case 12:return Ar(s,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,ls(a,a.type,h.value),Ar(s,a,h.children,l),a.child;case 9:return v=a.type._context,h=a.pendingProps.children,Ka(a),v=ar(v),h=h(v),a.flags|=1,Ar(s,a,h,l),a.child;case 14:return e1(s,a,a.type,a.pendingProps,l);case 15:return t1(s,a,a.type,a.pendingProps,l);case 19:return c1(s,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},s===null?(l=Hp(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=As(s.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return n1(s,a,l);case 24:return Ka(a),h=ar(hn),s===null?(v=oh(),v===null&&(v=dn,S=ra(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=l),v=S),a.memoizedState={parent:h,cache:v},Eu(a),ls(a,hn,v)):((s.lanes&l)!==0&&(ch(s,a),wc(a,null,null,l),Ec()),v=s.memoizedState,S=a.memoizedState,v.parent!==h?(v={parent:h,cache:h},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),ls(a,hn,h)):(h=S.cache,ls(a,hn,h),h!==v.cache&&sh(a,[hn],l,!0))),Ar(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function eo(s){s.flags|=4}function f1(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!bw(a)){if(a=cs.current,a!==null&&((Bt&4194048)===Bt?ua!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||a!==ua))throw _c=lh,Rp;s.flags|=8192}}function qp(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Xi():536870912,s.lanes|=a,ku|=a)}function Sh(s,a){if(!bt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function wn(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(a)for(var v=s.child;v!==null;)l|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)l|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=h,s.childLanes=l,a}function qM(s,a,l){var h=a.pendingProps;switch(nh(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(a),null;case 1:return wn(a),null;case 3:return l=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Yn(hn),An(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ms(a)?eo(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Go())),wn(a),null;case 26:return l=a.memoizedState,s===null?(eo(a),l!==null?(wn(a),f1(a,l)):(wn(a),a.flags&=-16777217)):l?l!==s.memoizedState?(eo(a),wn(a),f1(a,l)):(wn(a),a.flags&=-16777217):(s.memoizedProps!==h&&eo(a),wn(a),a.flags&=-16777217),null;case 27:_n(a),l=Le.current;var v=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==h&&eo(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return wn(a),null}s=ke.current,Ms(a)?rh(a):(s=fw(v,h,l),a.stateNode=s,eo(a))}return wn(a),null;case 5:if(_n(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&eo(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return wn(a),null}if(s=ke.current,Ms(a))rh(a);else{switch(v=rg(Le.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?v.createElement("select",{is:h.is}):v.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?v.createElement(l,{is:h.is}):v.createElement(l)}}s[Te]=a,s[Ie]=h;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=s;e:switch(Or(s,l,h),l){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&eo(a)}}return wn(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&eo(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(s=Le.current,Ms(a)){if(s=a.stateNode,l=a.memoizedProps,h=null,v=gr,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}s[Te]=a,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||iw(s.nodeValue,l)),s||Ps(a)}else s=rg(s).createTextNode(h),s[Te]=a,a.stateNode=s}return wn(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Ms(a),h!==null&&h.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Te]=a}else $o(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wn(a),v=!1}else v=Go(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Ja(a),a):(Ja(a),null)}if(Ja(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,s=s!==null&&s.memoizedState!==null,l){h=a.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool);var S=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==v&&(h.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),qp(a,a.updateQueue),wn(a),null;case 4:return An(),s===null&&Uv(a.stateNode.containerInfo),wn(a),null;case 10:return Yn(a.type),wn(a),null;case 19:if(ye(lr),v=a.memoizedState,v===null)return wn(a),null;if(h=(a.flags&128)!==0,S=v.rendering,S===null)if(h)Sh(v,!1);else{if(Mn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=jp(s),S!==null){for(a.flags|=128,Sh(v,!1),s=S.updateQueue,a.updateQueue=s,qp(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)_p(l,s),l=l.sibling;return ve(lr,lr.current&1|2),a.child}s=s.sibling}v.tail!==null&&Ln()>Wp&&(a.flags|=128,h=!0,Sh(v,!1),a.lanes=4194304)}else{if(!h)if(s=jp(S),s!==null){if(a.flags|=128,h=!0,s=s.updateQueue,a.updateQueue=s,qp(a,s),Sh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!bt)return wn(a),null}else 2*Ln()-v.renderingStartTime>Wp&&l!==536870912&&(a.flags|=128,h=!0,Sh(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(s=v.last,s!==null?s.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Ln(),a.sibling=null,s=lr.current,ve(lr,h?s&1|2:s&1),a):(wn(a),null);case 22:case 23:return Ja(a),dh(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(wn(a),a.subtreeFlags&6&&(a.flags|=8192)):wn(a),l=a.updateQueue,l!==null&&qp(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),s!==null&&ye(ia),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Yn(hn),wn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function $M(s,a){switch(nh(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Yn(hn),An(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return _n(a),null;case 13:if(Ja(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));$o()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ye(lr),null;case 4:return An(),null;case 10:return Yn(a.type),null;case 22:case 23:return Ja(a),dh(),s!==null&&ye(ia),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Yn(hn),null;case 25:return null;default:return null}}function h1(s,a){switch(nh(a),a.tag){case 3:Yn(hn),An();break;case 26:case 27:case 5:_n(a);break;case 4:An();break;case 13:Ja(a);break;case 19:ye(lr);break;case 10:Yn(a.type);break;case 22:case 23:Ja(a),dh(),s!==null&&ye(ia);break;case 24:Yn(hn)}}function Eh(s,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var v=h.next;l=v;do{if((l.tag&s)===s){h=void 0;var S=l.create,P=l.inst;h=S(),P.destroy=h}l=l.next}while(l!==v)}}catch(U){cn(a,a.return,U)}}function rl(s,a,l){try{var h=a.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var S=v.next;h=S;do{if((h.tag&s)===s){var P=h.inst,U=P.destroy;if(U!==void 0){P.destroy=void 0,v=a;var Z=l,he=U;try{he()}catch(be){cn(v,Z,be)}}}h=h.next}while(h!==S)}}catch(be){cn(a,a.return,be)}}function d1(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{hh(a,l)}catch(h){cn(s,s.return,h)}}}function p1(s,a,l){l.props=Cc(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){cn(s,a,h)}}function wh(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(v){cn(s,a,v)}}function fa(s,a){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(v){cn(s,a,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){cn(s,a,v)}else l.current=null}function g1(s){var a=s.type,l=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(v){cn(s,s.return,v)}}function dv(s,a,l){try{var h=s.stateNode;hk(h,s.type,l,a),h[Ie]=a}catch(v){cn(s,s.return,v)}}function m1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&fl(s.type)||s.tag===4}function pv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||m1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&fl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gv(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ng));else if(h!==4&&(h===27&&fl(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(gv(s,a,l),s=s.sibling;s!==null;)gv(s,a,l),s=s.sibling}function $p(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(h!==4&&(h===27&&fl(s.type)&&(l=s.stateNode),s=s.child,s!==null))for($p(s,a,l),s=s.sibling;s!==null;)$p(s,a,l),s=s.sibling}function y1(s){var a=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);Or(a,h,l),a[Te]=s,a[Ie]=l}catch(S){cn(s,s.return,S)}}var to=!1,Bn=!1,mv=!1,v1=typeof WeakSet=="function"?WeakSet:Set,yr=null;function GM(s,a){if(s=s.containerInfo,Fv=cg,s=$r(s),uc(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var v=h.anchorOffset,S=h.focusNode;h=h.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var P=0,U=-1,Z=-1,he=0,be=0,Ce=s,de=null;t:for(;;){for(var pe;Ce!==l||v!==0&&Ce.nodeType!==3||(U=P+v),Ce!==S||h!==0&&Ce.nodeType!==3||(Z=P+h),Ce.nodeType===3&&(P+=Ce.nodeValue.length),(pe=Ce.firstChild)!==null;)de=Ce,Ce=pe;for(;;){if(Ce===s)break t;if(de===l&&++he===v&&(U=P),de===S&&++be===h&&(Z=P),(pe=Ce.nextSibling)!==null)break;Ce=de,de=Ce.parentNode}Ce=pe}l=U===-1||Z===-1?null:{start:U,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bv={focusedElem:s,selectionRange:l},cg=!1,yr=a;yr!==null;)if(a=yr,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,yr=s;else for(;yr!==null;){switch(a=yr,S=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,l=a,v=S.memoizedProps,S=S.memoizedState,h=l.stateNode;try{var pt=Cc(l.type,v,l.elementType===l.type);s=h.getSnapshotBeforeUpdate(pt,S),h.__reactInternalSnapshotBeforeUpdate=s}catch(ot){cn(l,l.return,ot)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)qv(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":qv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,yr=s;break}yr=a.return}}function b1(s,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:il(s,l),h&4&&Eh(5,l);break;case 1:if(il(s,l),h&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(P){cn(l,l.return,P)}else{var v=Cc(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(v,a,s.__reactInternalSnapshotBeforeUpdate)}catch(P){cn(l,l.return,P)}}h&64&&d1(l),h&512&&wh(l,l.return);break;case 3:if(il(s,l),h&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{hh(s,a)}catch(P){cn(l,l.return,P)}}break;case 27:a===null&&h&4&&y1(l);case 26:case 5:il(s,l),a===null&&h&4&&g1(l),h&512&&wh(l,l.return);break;case 12:il(s,l);break;case 13:il(s,l),h&4&&E1(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=tk.bind(null,l),bk(s,l))));break;case 22:if(h=l.memoizedState!==null||to,!h){a=a!==null&&a.memoizedState!==null||Bn,v=to;var S=Bn;to=h,(Bn=a)&&!S?sl(s,l,(l.subtreeFlags&8772)!==0):il(s,l),to=v,Bn=S}break;case 30:break;default:il(s,l)}}function _1(s){var a=s.alternate;a!==null&&(s.alternate=null,_1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&We(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var bn=null,_i=!1;function no(s,a,l){for(l=l.child;l!==null;)S1(s,a,l),l=l.sibling}function S1(s,a,l){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(jt,l)}catch{}switch(l.tag){case 26:Bn||fa(l,a),no(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bn||fa(l,a);var h=bn,v=_i;fl(l.type)&&(bn=l.stateNode,_i=!1),no(s,a,l),Mh(l.stateNode),bn=h,_i=v;break;case 5:Bn||fa(l,a);case 6:if(h=bn,v=_i,bn=null,no(s,a,l),bn=h,_i=v,bn!==null)if(_i)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(l.stateNode)}catch(S){cn(l,a,S)}else try{bn.removeChild(l.stateNode)}catch(S){cn(l,a,S)}break;case 18:bn!==null&&(_i?(s=bn,cw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Fh(s)):cw(bn,l.stateNode));break;case 4:h=bn,v=_i,bn=l.stateNode.containerInfo,_i=!0,no(s,a,l),bn=h,_i=v;break;case 0:case 11:case 14:case 15:Bn||rl(2,l,a),Bn||rl(4,l,a),no(s,a,l);break;case 1:Bn||(fa(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&p1(l,a,h)),no(s,a,l);break;case 21:no(s,a,l);break;case 22:Bn=(h=Bn)||l.memoizedState!==null,no(s,a,l),Bn=h;break;default:no(s,a,l)}}function E1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Fh(s)}catch(l){cn(a,a.return,l)}}function WM(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new v1),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new v1),a;default:throw Error(r(435,s.tag))}}function yv(s,a){var l=WM(s);a.forEach(function(h){var v=nk.bind(null,s,h);l.has(h)||(l.add(h),h.then(v,v))})}function Ui(s,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var v=l[h],S=s,P=a,U=P;e:for(;U!==null;){switch(U.tag){case 27:if(fl(U.type)){bn=U.stateNode,_i=!1;break e}break;case 5:bn=U.stateNode,_i=!1;break e;case 3:case 4:bn=U.stateNode.containerInfo,_i=!0;break e}U=U.return}if(bn===null)throw Error(r(160));S1(S,P,v),bn=null,_i=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)w1(a,s),a=a.sibling}var Ls=null;function w1(s,a){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ui(a,s),Vi(s),h&4&&(rl(3,s,s.return),Eh(3,s),rl(5,s,s.return));break;case 1:Ui(a,s),Vi(s),h&512&&(Bn||l===null||fa(l,l.return)),h&64&&to&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var v=Ls;if(Ui(a,s),Vi(s),h&512&&(Bn||l===null||fa(l,l.return)),h&4){var S=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){e:{h=s.type,l=s.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":S=v.getElementsByTagName("title")[0],(!S||S[it]||S[Te]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(h),v.head.insertBefore(S,v.querySelector("head > title"))),Or(S,h,l),S[Te]=s,It(S),h=S;break e;case"link":var P=yw("link","href",v).get(h+(l.href||""));if(P){for(var U=0;U<P.length;U++)if(S=P[U],S.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&S.getAttribute("rel")===(l.rel==null?null:l.rel)&&S.getAttribute("title")===(l.title==null?null:l.title)&&S.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){P.splice(U,1);break t}}S=v.createElement(h),Or(S,h,l),v.head.appendChild(S);break;case"meta":if(P=yw("meta","content",v).get(h+(l.content||""))){for(U=0;U<P.length;U++)if(S=P[U],S.getAttribute("content")===(l.content==null?null:""+l.content)&&S.getAttribute("name")===(l.name==null?null:l.name)&&S.getAttribute("property")===(l.property==null?null:l.property)&&S.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&S.getAttribute("charset")===(l.charSet==null?null:l.charSet)){P.splice(U,1);break t}}S=v.createElement(h),Or(S,h,l),v.head.appendChild(S);break;default:throw Error(r(468,h))}S[Te]=s,It(S),h=S}s.stateNode=h}else vw(v,s.type,s.stateNode);else s.stateNode=mw(v,h,s.memoizedProps);else S!==h?(S===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):S.count--,h===null?vw(v,s.type,s.stateNode):mw(v,h,s.memoizedProps)):h===null&&s.stateNode!==null&&dv(s,s.memoizedProps,l.memoizedProps)}break;case 27:Ui(a,s),Vi(s),h&512&&(Bn||l===null||fa(l,l.return)),l!==null&&h&4&&dv(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Ui(a,s),Vi(s),h&512&&(Bn||l===null||fa(l,l.return)),s.flags&32){v=s.stateNode;try{Ge(v,"")}catch(pe){cn(s,s.return,pe)}}h&4&&s.stateNode!=null&&(v=s.memoizedProps,dv(s,v,l!==null?l.memoizedProps:v)),h&1024&&(mv=!0);break;case 6:if(Ui(a,s),Vi(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(pe){cn(s,s.return,pe)}}break;case 3:if(ag=null,v=Ls,Ls=ig(a.containerInfo),Ui(a,s),Ls=v,Vi(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Fh(a.containerInfo)}catch(pe){cn(s,s.return,pe)}mv&&(mv=!1,T1(s));break;case 4:h=Ls,Ls=ig(s.stateNode.containerInfo),Ui(a,s),Vi(s),Ls=h;break;case 12:Ui(a,s),Vi(s);break;case 13:Ui(a,s),Vi(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(wv=Ln()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,yv(s,h)));break;case 22:v=s.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,he=to,be=Bn;if(to=he||v,Bn=be||Z,Ui(a,s),Bn=be,to=he,Vi(s),h&8192)e:for(a=s.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(l===null||Z||to||Bn||Ac(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){Z=l=a;try{if(S=Z.stateNode,v)P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{U=Z.stateNode;var Ce=Z.memoizedProps.style,de=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;U.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(pe){cn(Z,Z.return,pe)}}}else if(a.tag===6){if(l===null){Z=a;try{Z.stateNode.nodeValue=v?"":Z.memoizedProps}catch(pe){cn(Z,Z.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,yv(s,l))));break;case 19:Ui(a,s),Vi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,yv(s,h)));break;case 30:break;case 21:break;default:Ui(a,s),Vi(s)}}function Vi(s){var a=s.flags;if(a&2){try{for(var l,h=s.return;h!==null;){if(m1(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var v=l.stateNode,S=pv(s);$p(s,S,v);break;case 5:var P=l.stateNode;l.flags&32&&(Ge(P,""),l.flags&=-33);var U=pv(s);$p(s,U,P);break;case 3:case 4:var Z=l.stateNode.containerInfo,he=pv(s);gv(s,he,Z);break;default:throw Error(r(161))}}catch(be){cn(s,s.return,be)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function T1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;T1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function il(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)b1(s,a.alternate,a),a=a.sibling}function Ac(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:rl(4,a,a.return),Ac(a);break;case 1:fa(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&p1(a,a.return,l),Ac(a);break;case 27:Mh(a.stateNode);case 26:case 5:fa(a,a.return),Ac(a);break;case 22:a.memoizedState===null&&Ac(a);break;case 30:Ac(a);break;default:Ac(a)}s=s.sibling}}function sl(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,v=s,S=a,P=S.flags;switch(S.tag){case 0:case 11:case 15:sl(v,S,l),Eh(4,S);break;case 1:if(sl(v,S,l),h=S,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(he){cn(h,h.return,he)}if(h=S,v=h.updateQueue,v!==null){var U=h.stateNode;try{var Z=v.shared.hiddenCallbacks;if(Z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Z.length;v++)Jo(Z[v],U)}catch(he){cn(h,h.return,he)}}l&&P&64&&d1(S),wh(S,S.return);break;case 27:y1(S);case 26:case 5:sl(v,S,l),l&&h===null&&P&4&&g1(S),wh(S,S.return);break;case 12:sl(v,S,l);break;case 13:sl(v,S,l),l&&P&4&&E1(v,S);break;case 22:S.memoizedState===null&&sl(v,S,l),wh(S,S.return);break;case 30:break;default:sl(v,S,l)}a=a.sibling}}function vv(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&yc(l))}function bv(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&yc(s))}function ha(s,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)C1(s,a,l,h),a=a.sibling}function C1(s,a,l,h){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ha(s,a,l,h),v&2048&&Eh(9,a);break;case 1:ha(s,a,l,h);break;case 3:ha(s,a,l,h),v&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&yc(s)));break;case 12:if(v&2048){ha(s,a,l,h),s=a.stateNode;try{var S=a.memoizedProps,P=S.id,U=S.onPostCommit;typeof U=="function"&&U(P,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Z){cn(a,a.return,Z)}}else ha(s,a,l,h);break;case 13:ha(s,a,l,h);break;case 23:break;case 22:S=a.stateNode,P=a.alternate,a.memoizedState!==null?S._visibility&2?ha(s,a,l,h):Th(s,a):S._visibility&2?ha(s,a,l,h):(S._visibility|=2,xu(s,a,l,h,(a.subtreeFlags&10256)!==0)),v&2048&&vv(P,a);break;case 24:ha(s,a,l,h),v&2048&&bv(a.alternate,a);break;default:ha(s,a,l,h)}}function xu(s,a,l,h,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var S=s,P=a,U=l,Z=h,he=P.flags;switch(P.tag){case 0:case 11:case 15:xu(S,P,U,Z,v),Eh(8,P);break;case 23:break;case 22:var be=P.stateNode;P.memoizedState!==null?be._visibility&2?xu(S,P,U,Z,v):Th(S,P):(be._visibility|=2,xu(S,P,U,Z,v)),v&&he&2048&&vv(P.alternate,P);break;case 24:xu(S,P,U,Z,v),v&&he&2048&&bv(P.alternate,P);break;default:xu(S,P,U,Z,v)}a=a.sibling}}function Th(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,h=a,v=h.flags;switch(h.tag){case 22:Th(l,h),v&2048&&vv(h.alternate,h);break;case 24:Th(l,h),v&2048&&bv(h.alternate,h);break;default:Th(l,h)}a=a.sibling}}var Ch=8192;function Pu(s){if(s.subtreeFlags&Ch)for(s=s.child;s!==null;)A1(s),s=s.sibling}function A1(s){switch(s.tag){case 26:Pu(s),s.flags&Ch&&s.memoizedState!==null&&Mk(Ls,s.memoizedState,s.memoizedProps);break;case 5:Pu(s);break;case 3:case 4:var a=Ls;Ls=ig(s.stateNode.containerInfo),Pu(s),Ls=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Ch,Ch=16777216,Pu(s),Ch=a):Pu(s));break;default:Pu(s)}}function R1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Ah(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];yr=h,I1(h,s)}R1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)O1(s),s=s.sibling}function O1(s){switch(s.tag){case 0:case 11:case 15:Ah(s),s.flags&2048&&rl(9,s,s.return);break;case 3:Ah(s);break;case 12:Ah(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Gp(s)):Ah(s);break;default:Ah(s)}}function Gp(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];yr=h,I1(h,s)}R1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:rl(8,a,a.return),Gp(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Gp(a));break;default:Gp(a)}s=s.sibling}}function I1(s,a){for(;yr!==null;){var l=yr;switch(l.tag){case 0:case 11:case 15:rl(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:yc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,yr=h;else e:for(l=s;yr!==null;){h=yr;var v=h.sibling,S=h.return;if(_1(h),h===l){yr=null;break e}if(v!==null){v.return=S,yr=v;break e}yr=S}}}var KM={getCacheForType:function(s){var a=ar(hn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},YM=typeof WeakMap=="function"?WeakMap:Map,sn=0,dn=null,Mt=null,Bt=0,an=0,ji=null,al=!1,Mu=!1,_v=!1,ro=0,Mn=0,ol=0,Rc=0,Sv=0,us=0,ku=0,Rh=null,Si=null,Ev=!1,wv=0,Wp=1/0,Kp=null,ll=null,Rr=0,cl=null,Du=null,Nu=0,Tv=0,Cv=null,x1=null,Oh=0,Av=null;function Fi(){if((sn&2)!==0&&Bt!==0)return Bt&-Bt;if(J.T!==null){var s=Yo;return s!==0?s:kv()}return ee()}function P1(){us===0&&(us=(Bt&536870912)===0||bt?Qi():536870912);var s=cs.current;return s!==null&&(s.flags|=32),us}function Bi(s,a,l){(s===dn&&(an===2||an===9)||s.cancelPendingCommit!==null)&&(Lu(s,0),ul(s,Bt,us,!1)),fi(s,l),((sn&2)===0||s!==dn)&&(s===dn&&((sn&2)===0&&(Rc|=l),Mn===4&&ul(s,Bt,us,!1)),da(s))}function M1(s,a,l){if((sn&6)!==0)throw Error(r(327));var h=!l&&(a&124)===0&&(a&s.expiredLanes)===0||ni(s,a),v=h?JM(s,a):Iv(s,a,!0),S=h;do{if(v===0){Mu&&!h&&ul(s,a,0,!1);break}else{if(l=s.current.alternate,S&&!QM(l)){v=Iv(s,a,!1),S=!1;continue}if(v===2){if(S=a,s.errorRecoveryDisabledLanes&S)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){a=P;e:{var U=s;v=Rh;var Z=U.current.memoizedState.isDehydrated;if(Z&&(Lu(U,P).flags|=256),P=Iv(U,P,!1),P!==2){if(_v&&!Z){U.errorRecoveryDisabledLanes|=S,Rc|=S,v=4;break e}S=Si,Si=v,S!==null&&(Si===null?Si=S:Si.push.apply(Si,S))}v=P}if(S=!1,v!==2)continue}}if(v===1){Lu(s,0),ul(s,a,0,!0);break}e:{switch(h=s,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ul(h,a,us,!al);break e;case 2:Si=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=wv+300-Ln(),10<v)){if(ul(h,a,us,!al),Yi(h,0,!0)!==0)break e;h.timeoutHandle=ow(k1.bind(null,h,l,Si,Kp,Ev,a,us,Rc,ku,al,S,2,-0,0),v);break e}k1(h,l,Si,Kp,Ev,a,us,Rc,ku,al,S,0,-0,0)}}break}while(!0);da(s)}function k1(s,a,l,h,v,S,P,U,Z,he,be,Ce,de,pe){if(s.timeoutHandle=-1,Ce=a.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(Nh={stylesheets:null,count:0,unsuspend:Pk},A1(a),Ce=kk(),Ce!==null)){s.cancelPendingCommit=Ce(F1.bind(null,s,a,S,l,h,v,P,U,Z,be,1,de,pe)),ul(s,S,P,!he);return}F1(s,a,S,l,h,v,P,U,Z)}function QM(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var v=l[h],S=v.getSnapshot;v=v.value;try{if(!ai(S(),v))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ul(s,a,l,h){a&=~Sv,a&=~Rc,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var v=a;0<v;){var S=31-Ht(v),P=1<<S;h[S]=-1,v&=~P}l!==0&&Tr(s,l,a)}function Yp(){return(sn&6)===0?(Ih(0),!1):!0}function Rv(){if(Mt!==null){if(an===0)var s=Mt.return;else s=Mt,Ds=os=null,m(s),Ou=null,bh=0,s=Mt;for(;s!==null;)h1(s.alternate,s),s=s.return;Mt=null}}function Lu(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,pk(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Rv(),dn=s,Mt=l=As(s.current,null),Bt=a,an=0,ji=null,al=!1,Mu=ni(s,a),_v=!1,ku=us=Sv=Rc=ol=Mn=0,Si=Rh=null,Ev=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var v=31-Ht(h),S=1<<v;a|=s[v],h&=~S}return ro=a,mu(),l}function D1(s,a){St=null,J.H=Lp,a===vc||a===Su?(a=xp(),an=3):a===Rp?(a=xp(),an=4):an=a===JE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ji=a,Mt===null&&(Mn=1,Bp(s,mi(a,s.current)))}function N1(){var s=J.H;return J.H=Lp,s===null?Lp:s}function L1(){var s=J.A;return J.A=KM,s}function Ov(){Mn=4,al||(Bt&4194048)!==Bt&&cs.current!==null||(Mu=!0),(ol&134217727)===0&&(Rc&134217727)===0||dn===null||ul(dn,Bt,us,!1)}function Iv(s,a,l){var h=sn;sn|=2;var v=N1(),S=L1();(dn!==s||Bt!==a)&&(Kp=null,Lu(s,a)),a=!1;var P=Mn;e:do try{if(an!==0&&Mt!==null){var U=Mt,Z=ji;switch(an){case 8:Rv(),P=6;break e;case 3:case 2:case 9:case 6:cs.current===null&&(a=!0);var he=an;if(an=0,ji=null,Uu(s,U,Z,he),l&&Mu){P=0;break e}break;default:he=an,an=0,ji=null,Uu(s,U,Z,he)}}XM(),P=Mn;break}catch(be){D1(s,be)}while(!0);return a&&s.shellSuspendCounter++,Ds=os=null,sn=h,J.H=v,J.A=S,Mt===null&&(dn=null,Bt=0,mu()),P}function XM(){for(;Mt!==null;)U1(Mt)}function JM(s,a){var l=sn;sn|=2;var h=N1(),v=L1();dn!==s||Bt!==a?(Kp=null,Wp=Ln()+500,Lu(s,a)):Mu=ni(s,a);e:do try{if(an!==0&&Mt!==null){a=Mt;var S=ji;t:switch(an){case 1:an=0,ji=null,Uu(s,a,S,1);break;case 2:case 9:if(Op(S)){an=0,ji=null,V1(a);break}a=function(){an!==2&&an!==9||dn!==s||(an=7),da(s)},S.then(a,a);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:Op(S)?(an=0,ji=null,V1(a)):(an=0,ji=null,Uu(s,a,S,7));break;case 5:var P=null;switch(Mt.tag){case 26:P=Mt.memoizedState;case 5:case 27:var U=Mt;if(!P||bw(P)){an=0,ji=null;var Z=U.sibling;if(Z!==null)Mt=Z;else{var he=U.return;he!==null?(Mt=he,Qp(he)):Mt=null}break t}}an=0,ji=null,Uu(s,a,S,5);break;case 6:an=0,ji=null,Uu(s,a,S,6);break;case 8:Rv(),Mn=6;break e;default:throw Error(r(462))}}ZM();break}catch(be){D1(s,be)}while(!0);return Ds=os=null,J.H=h,J.A=v,sn=l,Mt!==null?0:(dn=null,Bt=0,mu(),Mn)}function ZM(){for(;Mt!==null&&!Ur();)U1(Mt)}function U1(s){var a=u1(s.alternate,s,ro);s.memoizedProps=s.pendingProps,a===null?Qp(s):Mt=a}function V1(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=i1(l,a,a.pendingProps,a.type,void 0,Bt);break;case 11:a=i1(l,a,a.pendingProps,a.type.render,a.ref,Bt);break;case 5:m(a);default:h1(l,a),a=Mt=_p(a,ro),a=u1(l,a,ro)}s.memoizedProps=s.pendingProps,a===null?Qp(s):Mt=a}function Uu(s,a,l,h){Ds=os=null,m(a),Ou=null,bh=0;var v=a.return;try{if(zM(s,v,a,l,Bt)){Mn=1,Bp(s,mi(l,s.current)),Mt=null;return}}catch(S){if(v!==null)throw Mt=v,S;Mn=1,Bp(s,mi(l,s.current)),Mt=null;return}a.flags&32768?(bt||h===1?s=!0:Mu||(Bt&536870912)!==0?s=!1:(al=s=!0,(h===2||h===9||h===3||h===6)&&(h=cs.current,h!==null&&h.tag===13&&(h.flags|=16384))),j1(a,s)):Qp(a)}function Qp(s){var a=s;do{if((a.flags&32768)!==0){j1(a,al);return}s=a.return;var l=qM(a.alternate,a,ro);if(l!==null){Mt=l;return}if(a=a.sibling,a!==null){Mt=a;return}Mt=a=s}while(a!==null);Mn===0&&(Mn=5)}function j1(s,a){do{var l=$M(s.alternate,s);if(l!==null){l.flags&=32767,Mt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Mt=s;return}Mt=s=l}while(s!==null);Mn=6,Mt=null}function F1(s,a,l,h,v,S,P,U,Z){s.cancelPendingCommit=null;do Xp();while(Rr!==0);if((sn&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(S=a.lanes|a.childLanes,S|=Jf,vs(s,l,S,P,U,Z),s===dn&&(Mt=dn=null,Bt=0),Du=a,cl=s,Nu=l,Tv=S,Cv=v,x1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,rk(Tt,function(){return $1(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=J.T,J.T=null,v=oe.p,oe.p=2,P=sn,sn|=4;try{GM(s,a,l)}finally{sn=P,oe.p=v,J.T=h}}Rr=1,B1(),z1(),H1()}}function B1(){if(Rr===1){Rr=0;var s=cl,a=Du,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var h=oe.p;oe.p=2;var v=sn;sn|=4;try{w1(a,s);var S=Bv,P=$r(s.containerInfo),U=S.focusedElem,Z=S.selectionRange;if(P!==U&&U&&U.ownerDocument&&Yf(U.ownerDocument.documentElement,U)){if(Z!==null&&uc(U)){var he=Z.start,be=Z.end;if(be===void 0&&(be=he),"selectionStart"in U)U.selectionStart=he,U.selectionEnd=Math.min(be,U.value.length);else{var Ce=U.ownerDocument||document,de=Ce&&Ce.defaultView||window;if(de.getSelection){var pe=de.getSelection(),pt=U.textContent.length,ot=Math.min(Z.start,pt),ln=Z.end===void 0?ot:Math.min(Z.end,pt);!pe.extend&&ot>ln&&(P=ln,ln=ot,ot=P);var se=du(U,ot),re=du(U,ln);if(se&&re&&(pe.rangeCount!==1||pe.anchorNode!==se.node||pe.anchorOffset!==se.offset||pe.focusNode!==re.node||pe.focusOffset!==re.offset)){var ue=Ce.createRange();ue.setStart(se.node,se.offset),pe.removeAllRanges(),ot>ln?(pe.addRange(ue),pe.extend(re.node,re.offset)):(ue.setEnd(re.node,re.offset),pe.addRange(ue))}}}}for(Ce=[],pe=U;pe=pe.parentNode;)pe.nodeType===1&&Ce.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ce.length;U++){var we=Ce[U];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}cg=!!Fv,Bv=Fv=null}finally{sn=v,oe.p=h,J.T=l}}s.current=a,Rr=2}}function z1(){if(Rr===2){Rr=0;var s=cl,a=Du,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var h=oe.p;oe.p=2;var v=sn;sn|=4;try{b1(s,a.alternate,a)}finally{sn=v,oe.p=h,J.T=l}}Rr=3}}function H1(){if(Rr===4||Rr===3){Rr=0,ms();var s=cl,a=Du,l=Nu,h=x1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Rr=5:(Rr=0,Du=cl=null,q1(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(ll=null),Ks(l),a=a.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(jt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=J.T,v=oe.p,oe.p=2,J.T=null;try{for(var S=s.onRecoverableError,P=0;P<h.length;P++){var U=h[P];S(U.value,{componentStack:U.stack})}}finally{J.T=a,oe.p=v}}(Nu&3)!==0&&Xp(),da(s),v=s.pendingLanes,(l&4194090)!==0&&(v&42)!==0?s===Av?Oh++:(Oh=0,Av=s):Oh=0,Ih(0)}}function q1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,yc(a)))}function Xp(s){return B1(),z1(),H1(),$1()}function $1(){if(Rr!==5)return!1;var s=cl,a=Tv;Tv=0;var l=Ks(Nu),h=J.T,v=oe.p;try{oe.p=32>l?32:l,J.T=null,l=Cv,Cv=null;var S=cl,P=Nu;if(Rr=0,Du=cl=null,Nu=0,(sn&6)!==0)throw Error(r(331));var U=sn;if(sn|=4,O1(S.current),C1(S,S.current,P,l),sn=U,Ih(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(jt,S)}catch{}return!0}finally{oe.p=v,J.T=h,q1(s,a)}}function G1(s,a,l){a=mi(l,a),a=iv(s.stateNode,a,2),s=aa(s,a,2),s!==null&&(fi(s,2),da(s))}function cn(s,a,l){if(s.tag===3)G1(s,s,l);else for(;a!==null;){if(a.tag===3){G1(a,s,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ll===null||!ll.has(h))){s=mi(l,s),l=QE(2),h=aa(a,l,2),h!==null&&(XE(l,h,a,s),fi(h,2),da(h));break}}a=a.return}}function xv(s,a,l){var h=s.pingCache;if(h===null){h=s.pingCache=new YM;var v=new Set;h.set(a,v)}else v=h.get(a),v===void 0&&(v=new Set,h.set(a,v));v.has(l)||(_v=!0,v.add(l),s=ek.bind(null,s,a,l),a.then(s,s))}function ek(s,a,l){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,dn===s&&(Bt&l)===l&&(Mn===4||Mn===3&&(Bt&62914560)===Bt&&300>Ln()-wv?(sn&2)===0&&Lu(s,0):Sv|=l,ku===Bt&&(ku=0)),da(s)}function W1(s,a){a===0&&(a=Xi()),s=zo(s,a),s!==null&&(fi(s,a),da(s))}function tk(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),W1(s,l)}function nk(s,a){var l=0;switch(s.tag){case 13:var h=s.stateNode,v=s.memoizedState;v!==null&&(l=v.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),W1(s,l)}function rk(s,a){return Lr(s,a)}var Jp=null,Vu=null,Pv=!1,Zp=!1,Mv=!1,Oc=0;function da(s){s!==Vu&&s.next===null&&(Vu===null?Jp=Vu=s:Vu=Vu.next=s),Zp=!0,Pv||(Pv=!0,sk())}function Ih(s,a){if(!Mv&&Zp){Mv=!0;do for(var l=!1,h=Jp;h!==null;){if(s!==0){var v=h.pendingLanes;if(v===0)var S=0;else{var P=h.suspendedLanes,U=h.pingedLanes;S=(1<<31-Ht(42|s)+1)-1,S&=v&~(P&~U),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(l=!0,X1(h,S))}else S=Bt,S=Yi(h,h===dn?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(S&3)===0||ni(h,S)||(l=!0,X1(h,S));h=h.next}while(l);Mv=!1}}function ik(){K1()}function K1(){Zp=Pv=!1;var s=0;Oc!==0&&(dk()&&(s=Oc),Oc=0);for(var a=Ln(),l=null,h=Jp;h!==null;){var v=h.next,S=Y1(h,a);S===0?(h.next=null,l===null?Jp=v:l.next=v,v===null&&(Vu=l)):(l=h,(s!==0||(S&3)!==0)&&(Zp=!0)),h=v}Ih(s)}function Y1(s,a){for(var l=s.suspendedLanes,h=s.pingedLanes,v=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var P=31-Ht(S),U=1<<P,Z=v[P];Z===-1?((U&l)===0||(U&h)!==0)&&(v[P]=Ii(U,a)):Z<=a&&(s.expiredLanes|=U),S&=~U}if(a=dn,l=Bt,l=Yi(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===a&&(an===2||an===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Sn(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ni(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(h!==null&&Sn(h),Ks(l)){case 2:case 8:l=un;break;case 32:l=Tt;break;case 268435456:l=ei;break;default:l=Tt}return h=Q1.bind(null,s),l=Lr(l,h),s.callbackPriority=a,s.callbackNode=l,a}return h!==null&&h!==null&&Sn(h),s.callbackPriority=2,s.callbackNode=null,2}function Q1(s,a){if(Rr!==0&&Rr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Xp()&&s.callbackNode!==l)return null;var h=Bt;return h=Yi(s,s===dn?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(M1(s,h,a),Y1(s,Ln()),s.callbackNode!=null&&s.callbackNode===l?Q1.bind(null,s):null)}function X1(s,a){if(Xp())return null;M1(s,a,!0)}function sk(){gk(function(){(sn&6)!==0?Lr(er,ik):K1()})}function kv(){return Oc===0&&(Oc=Qi()),Oc}function J1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oo(""+s)}function Z1(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function ak(s,a,l,h,v){if(a==="submit"&&l&&l.stateNode===v){var S=J1((v[Ie]||null).action),P=h.submitter;P&&(a=(a=P[Ie]||null)?J1(a.formAction):P.getAttribute("formAction"),a!==null&&(S=a,P=null));var U=new xo("action","action",null,h,v);s.push({event:U,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Oc!==0){var Z=P?Z1(v,P):new FormData(v);Zy(l,{pending:!0,data:Z,method:v.method,action:S},null,Z)}}else typeof S=="function"&&(U.preventDefault(),Z=P?Z1(v,P):new FormData(v),Zy(l,{pending:!0,data:Z,method:v.method,action:S},S,Z))},currentTarget:v}]})}}for(var Dv=0;Dv<Fo.length;Dv++){var Nv=Fo[Dv],ok=Nv.toLowerCase(),lk=Nv[0].toUpperCase()+Nv.slice(1);Wn(ok,"on"+lk)}Wn(ta,"onAnimationEnd"),Wn(gu,"onAnimationIteration"),Wn(pp,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(gp,"onTransitionRun"),Wn(mp,"onTransitionStart"),Wn(Gy,"onTransitionCancel"),Wn(yp,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ck=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xh));function ew(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],v=h.event;h=h.listeners;e:{var S=void 0;if(a)for(var P=h.length-1;0<=P;P--){var U=h[P],Z=U.instance,he=U.currentTarget;if(U=U.listener,Z!==S&&v.isPropagationStopped())break e;S=U,v.currentTarget=he;try{S(v)}catch(be){Fp(be)}v.currentTarget=null,S=Z}else for(P=0;P<h.length;P++){if(U=h[P],Z=U.instance,he=U.currentTarget,U=U.listener,Z!==S&&v.isPropagationStopped())break e;S=U,v.currentTarget=he;try{S(v)}catch(be){Fp(be)}v.currentTarget=null,S=Z}}}}function kt(s,a){var l=a[Je];l===void 0&&(l=a[Je]=new Set);var h=s+"__bubble";l.has(h)||(tw(a,s,2,!1),l.add(h))}function Lv(s,a,l){var h=0;a&&(h|=4),tw(l,s,h,a)}var eg="_reactListening"+Math.random().toString(36).slice(2);function Uv(s){if(!s[eg]){s[eg]=!0,Ne.forEach(function(l){l!=="selectionchange"&&(ck.has(l)||Lv(l,!1,s),Lv(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[eg]||(a[eg]=!0,Lv("selectionchange",!1,a))}}function tw(s,a,l,h){switch(Cw(a)){case 2:var v=Lk;break;case 8:v=Uk;break;default:v=Xv}l=v.bind(null,a,l,s),v=void 0,!sr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),h?v!==void 0?s.addEventListener(a,l,{capture:!0,passive:v}):s.addEventListener(a,l,!0):v!==void 0?s.addEventListener(a,l,{passive:v}):s.addEventListener(a,l,!1)}function Vv(s,a,l,h,v){var S=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var P=h.tag;if(P===3||P===4){var U=h.stateNode.containerInfo;if(U===v)break;if(P===4)for(P=h.return;P!==null;){var Z=P.tag;if((Z===3||Z===4)&&P.stateNode.containerInfo===v)return;P=P.return}for(;U!==null;){if(P=et(U),P===null)return;if(Z=P.tag,Z===5||Z===6||Z===26||Z===27){h=S=P;continue e}U=U.parentNode}}h=h.return}Zl(function(){var he=S,be=Br(l),Ce=[];e:{var de=vp.get(s);if(de!==void 0){var pe=xo,pt=s;switch(s){case"keypress":if(Di(l)===0)break e;case"keydown":case"keyup":pe=No;break;case"focusin":pt="focus",pe=ko;break;case"focusout":pt="blur",pe=ko;break;case"beforeblur":case"afterblur":pe=ko;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Mo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=oc;break;case ta:case gu:case pp:pe=Do;break;case yp:pe=uu;break;case"scroll":case"scrollend":pe=iu;break;case"wheel":pe=Va;break;case"copy":case"cut":case"paste":pe=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=ac;break;case"toggle":case"beforetoggle":pe=Lo}var ot=(a&4)!==0,ln=!ot&&(s==="scroll"||s==="scrollend"),se=ot?de!==null?de+"Capture":null:de;ot=[];for(var re=he,ue;re!==null;){var we=re;if(ue=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ue===null||se===null||(we=ns(re,se),we!=null&&ot.push(Ph(re,we,ue))),ln)break;re=re.return}0<ot.length&&(de=new pe(de,pt,null,l,be),Ce.push({event:de,listeners:ot}))}}if((a&7)===0){e:{if(de=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",de&&l!==es&&(pt=l.relatedTarget||l.fromElement)&&(et(pt)||pt[Fe]))break e;if((pe||de)&&(de=be.window===be?be:(de=be.ownerDocument)?de.defaultView||de.parentWindow:window,pe?(pt=l.relatedTarget||l.toElement,pe=he,pt=pt?et(pt):null,pt!==null&&(ln=o(pt),ot=pt.tag,pt!==ln||ot!==5&&ot!==27&&ot!==6)&&(pt=null)):(pe=null,pt=he),pe!==pt)){if(ot=si,we="onMouseLeave",se="onMouseEnter",re="mouse",(s==="pointerout"||s==="pointerover")&&(ot=ac,we="onPointerLeave",se="onPointerEnter",re="pointer"),ln=pe==null?de:Ut(pe),ue=pt==null?de:Ut(pt),de=new ot(we,re+"leave",pe,l,be),de.target=ln,de.relatedTarget=ue,we=null,et(be)===he&&(ot=new ot(se,re+"enter",pt,l,be),ot.target=ue,ot.relatedTarget=ln,we=ot),ln=we,pe&&pt)t:{for(ot=pe,se=pt,re=0,ue=ot;ue;ue=ju(ue))re++;for(ue=0,we=se;we;we=ju(we))ue++;for(;0<re-ue;)ot=ju(ot),re--;for(;0<ue-re;)se=ju(se),ue--;for(;re--;){if(ot===se||se!==null&&ot===se.alternate)break t;ot=ju(ot),se=ju(se)}ot=null}else ot=null;pe!==null&&nw(Ce,de,pe,ot,!1),pt!==null&&ln!==null&&nw(Ce,ln,pt,ot,!0)}}e:{if(de=he?Ut(he):window,pe=de.nodeName&&de.nodeName.toLowerCase(),pe==="select"||pe==="input"&&de.type==="file")var Ke=ap;else if(Fn(de))if(op)Ke=$y;else{Ke=cp;var At=lp}else pe=de.nodeName,!pe||pe.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?he&&Ro(he.elementType)&&(Ke=ap):Ke=up;if(Ke&&(Ke=Ke(s,he))){as(Ce,Ke,l,be);break e}At&&At(s,de,he),s==="focusout"&&he&&de.type==="number"&&he.memoizedProps.value!=null&&Xs(de,"number",de.value)}switch(At=he?Ut(he):window,s){case"focusin":(Fn(At)||At.contentEditable==="true")&&(jo=At,Xf=he,Fa=null);break;case"focusout":Fa=Xf=jo=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,hp(Ce,l,be);break;case"selectionchange":if(Qf)break;case"keydown":case"keyup":hp(Ce,l,be)}var Xe;if(qr)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else xt?me(s,l)&&(lt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(lt="onCompositionStart");lt&&(I&&l.locale!=="ko"&&(xt||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&xt&&(Xe=rs()):(ki=be,Ss="value"in ki?ki.value:ki.textContent,xt=!0)),At=tg(he,lt),0<At.length&&(lt=new nc(lt,s,null,l,be),Ce.push({event:lt,listeners:At}),Xe?lt.data=Xe:(Xe=De(l),Xe!==null&&(lt.data=Xe)))),(Xe=A?jn(s,l):Pt(s,l))&&(lt=tg(he,"onBeforeInput"),0<lt.length&&(At=new nc("onBeforeInput","beforeinput",null,l,be),Ce.push({event:At,listeners:lt}),At.data=Xe)),ak(Ce,s,he,l,be)}ew(Ce,a)})}function Ph(s,a,l){return{instance:s,listener:a,currentTarget:l}}function tg(s,a){for(var l=a+"Capture",h=[];s!==null;){var v=s,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=ns(s,l),v!=null&&h.unshift(Ph(s,v,S)),v=ns(s,a),v!=null&&h.push(Ph(s,v,S))),s.tag===3)return h;s=s.return}return[]}function ju(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function nw(s,a,l,h,v){for(var S=a._reactName,P=[];l!==null&&l!==h;){var U=l,Z=U.alternate,he=U.stateNode;if(U=U.tag,Z!==null&&Z===h)break;U!==5&&U!==26&&U!==27||he===null||(Z=he,v?(he=ns(l,S),he!=null&&P.unshift(Ph(l,he,Z))):v||(he=ns(l,S),he!=null&&P.push(Ph(l,he,Z)))),l=l.return}P.length!==0&&s.push({event:a,listeners:P})}var uk=/\r\n?/g,fk=/\u0000|\uFFFD/g;function rw(s){return(typeof s=="string"?s:""+s).replace(uk,`
`).replace(fk,"")}function iw(s,a){return a=rw(a),rw(s)===a}function ng(){}function on(s,a,l,h,v,S){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Ge(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Ge(s,""+h);break;case"className":nr(s,"class",h);break;case"tabIndex":nr(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":nr(s,l,h);break;case"style":Jl(s,h,S);break;case"data":if(a!=="object"){nr(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Oo(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(l==="formAction"?(a!=="input"&&on(s,a,"name",v.name,v,null),on(s,a,"formEncType",v.formEncType,v,null),on(s,a,"formMethod",v.formMethod,v,null),on(s,a,"formTarget",v.formTarget,v,null)):(on(s,a,"encType",v.encType,v,null),on(s,a,"method",v.method,v,null),on(s,a,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=Oo(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=ng);break;case"onScroll":h!=null&&kt("scroll",s);break;case"onScrollEnd":h!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=Oo(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":kt("beforetoggle",s),kt("toggle",s),Vn(s,"popover",h);break;case"xlinkActuate":ht(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ht(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ht(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ht(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ht(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ht(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ht(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ht(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ht(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Vn(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=$f.get(l)||l,Vn(s,l,h))}}function jv(s,a,l,h,v,S){switch(l){case"style":Jl(s,h,S);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof h=="string"?Ge(s,h):(typeof h=="number"||typeof h=="bigint")&&Ge(s,""+h);break;case"onScroll":h!=null&&kt("scroll",s);break;case"onScrollEnd":h!=null&&kt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=ng);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hi.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),a=l.slice(2,v?l.length-7:void 0),S=s[Ie]||null,S=S!=null?S[l]:null,typeof S=="function"&&s.removeEventListener(a,S,v),typeof h=="function")){typeof S!="function"&&S!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,h,v);break e}l in s?s[l]=h:h===!0?s.setAttribute(l,""):Vn(s,l,h)}}}function Or(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var h=!1,v=!1,S;for(S in l)if(l.hasOwnProperty(S)){var P=l[S];if(P!=null)switch(S){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:on(s,a,S,P,l,null)}}v&&on(s,a,"srcSet",l.srcSet,l,null),h&&on(s,a,"src",l.src,l,null);return;case"input":kt("invalid",s);var U=S=P=v=null,Z=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var be=l[h];if(be!=null)switch(h){case"name":v=be;break;case"type":P=be;break;case"checked":Z=be;break;case"defaultChecked":he=be;break;case"value":S=be;break;case"defaultValue":U=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,a));break;default:on(s,a,h,be,l,null)}}_s(s,S,U,Z,he,P,v,!1),Ao(s);return;case"select":kt("invalid",s),h=P=S=null;for(v in l)if(l.hasOwnProperty(v)&&(U=l[v],U!=null))switch(v){case"value":S=U;break;case"defaultValue":P=U;break;case"multiple":h=U;default:on(s,a,v,U,l,null)}a=S,l=P,s.multiple=!!h,a!=null?Pi(s,!!h,a,!1):l!=null&&Pi(s,!!h,l,!0);return;case"textarea":kt("invalid",s),S=v=h=null;for(P in l)if(l.hasOwnProperty(P)&&(U=l[P],U!=null))switch(P){case"value":h=U;break;case"defaultValue":v=U;break;case"children":S=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:on(s,a,P,U,l,null)}fn(s,h,v,S),Ao(s);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(h=l[Z],h!=null))switch(Z){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:on(s,a,Z,h,l,null)}return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(h=0;h<xh.length;h++)kt(xh[h],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:on(s,a,he,h,l,null)}return;default:if(Ro(a)){for(be in l)l.hasOwnProperty(be)&&(h=l[be],h!==void 0&&jv(s,a,be,h,l,void 0));return}}for(U in l)l.hasOwnProperty(U)&&(h=l[U],h!=null&&on(s,a,U,h,l,null))}function hk(s,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,P=null,U=null,Z=null,he=null,be=null;for(pe in l){var Ce=l[pe];if(l.hasOwnProperty(pe)&&Ce!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Z=Ce;default:h.hasOwnProperty(pe)||on(s,a,pe,null,h,Ce)}}for(var de in h){var pe=h[de];if(Ce=l[de],h.hasOwnProperty(de)&&(pe!=null||Ce!=null))switch(de){case"type":S=pe;break;case"name":v=pe;break;case"checked":he=pe;break;case"defaultChecked":be=pe;break;case"value":P=pe;break;case"defaultValue":U=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,a));break;default:pe!==Ce&&on(s,a,de,pe,h,Ce)}}ii(s,P,U,Z,he,be,S,v);return;case"select":pe=P=U=de=null;for(S in l)if(Z=l[S],l.hasOwnProperty(S)&&Z!=null)switch(S){case"value":break;case"multiple":pe=Z;default:h.hasOwnProperty(S)||on(s,a,S,null,h,Z)}for(v in h)if(S=h[v],Z=l[v],h.hasOwnProperty(v)&&(S!=null||Z!=null))switch(v){case"value":de=S;break;case"defaultValue":U=S;break;case"multiple":P=S;default:S!==Z&&on(s,a,v,S,h,Z)}a=U,l=P,h=pe,de!=null?Pi(s,!!l,de,!1):!!h!=!!l&&(a!=null?Pi(s,!!l,a,!0):Pi(s,!!l,l?[]:"",!1));return;case"textarea":pe=de=null;for(U in l)if(v=l[U],l.hasOwnProperty(U)&&v!=null&&!h.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:on(s,a,U,null,h,v)}for(P in h)if(v=h[P],S=l[P],h.hasOwnProperty(P)&&(v!=null||S!=null))switch(P){case"value":de=v;break;case"defaultValue":pe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&on(s,a,P,v,h,S)}Jt(s,de,pe);return;case"option":for(var pt in l)if(de=l[pt],l.hasOwnProperty(pt)&&de!=null&&!h.hasOwnProperty(pt))switch(pt){case"selected":s.selected=!1;break;default:on(s,a,pt,null,h,de)}for(Z in h)if(de=h[Z],pe=l[Z],h.hasOwnProperty(Z)&&de!==pe&&(de!=null||pe!=null))switch(Z){case"selected":s.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:on(s,a,Z,de,h,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in l)de=l[ot],l.hasOwnProperty(ot)&&de!=null&&!h.hasOwnProperty(ot)&&on(s,a,ot,null,h,de);for(he in h)if(de=h[he],pe=l[he],h.hasOwnProperty(he)&&de!==pe&&(de!=null||pe!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:on(s,a,he,de,h,pe)}return;default:if(Ro(a)){for(var ln in l)de=l[ln],l.hasOwnProperty(ln)&&de!==void 0&&!h.hasOwnProperty(ln)&&jv(s,a,ln,void 0,h,de);for(be in h)de=h[be],pe=l[be],!h.hasOwnProperty(be)||de===pe||de===void 0&&pe===void 0||jv(s,a,be,de,h,pe);return}}for(var se in l)de=l[se],l.hasOwnProperty(se)&&de!=null&&!h.hasOwnProperty(se)&&on(s,a,se,null,h,de);for(Ce in h)de=h[Ce],pe=l[Ce],!h.hasOwnProperty(Ce)||de===pe||de==null&&pe==null||on(s,a,Ce,de,h,pe)}var Fv=null,Bv=null;function rg(s){return s.nodeType===9?s:s.ownerDocument}function sw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function zv(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Hv=null;function dk(){var s=window.event;return s&&s.type==="popstate"?s===Hv?!1:(Hv=s,!0):(Hv=null,!1)}var ow=typeof setTimeout=="function"?setTimeout:void 0,pk=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,gk=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(s){return lw.resolve(null).then(s).catch(mk)}:ow;function mk(s){setTimeout(function(){throw s})}function fl(s){return s==="head"}function cw(s,a){var l=a,h=0,v=0;do{var S=l.nextSibling;if(s.removeChild(l),S&&S.nodeType===8)if(l=S.data,l==="/$"){if(0<h&&8>h){l=h;var P=s.ownerDocument;if(l&1&&Mh(P.documentElement),l&2&&Mh(P.body),l&4)for(l=P.head,Mh(l),P=l.firstChild;P;){var U=P.nextSibling,Z=P.nodeName;P[it]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&P.rel.toLowerCase()==="stylesheet"||l.removeChild(P),P=U}}if(v===0){s.removeChild(S),Fh(a);return}v--}else l==="$"||l==="$?"||l==="$!"?v++:h=l.charCodeAt(0)-48;else h=0;l=S}while(l);Fh(a)}function qv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":qv(l),We(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function yk(s,a,l,h){for(;s.nodeType===1;){var v=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[it])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=Us(s.nextSibling),s===null)break}return null}function vk(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Us(s.nextSibling),s===null))return null;return s}function $v(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function bk(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Us(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Gv=null;function uw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function fw(s,a,l){switch(a=rg(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Mh(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);We(s)}var fs=new Map,hw=new Set;function ig(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var io=oe.d;oe.d={f:_k,r:Sk,D:Ek,C:wk,L:Tk,m:Ck,X:Rk,S:Ak,M:Ok};function _k(){var s=io.f(),a=Yp();return s||a}function Sk(s){var a=wt(s);a!==null&&a.tag===5&&a.type==="form"?ME(a):io.r(s)}var Fu=typeof document>"u"?null:document;function dw(s,a,l){var h=Fu;if(h&&typeof a=="string"&&a){var v=xn(a);v='link[rel="'+s+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),hw.has(v)||(hw.add(v),s={rel:s,crossOrigin:l,href:a},h.querySelector(v)===null&&(a=h.createElement("link"),Or(a,"link",s),It(a),h.head.appendChild(a)))}}function Ek(s){io.D(s),dw("dns-prefetch",s,null)}function wk(s,a){io.C(s,a),dw("preconnect",s,a)}function Tk(s,a,l){io.L(s,a,l);var h=Fu;if(h&&s&&a){var v='link[rel="preload"][as="'+xn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+xn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+xn(l.imageSizes)+'"]')):v+='[href="'+xn(s)+'"]';var S=v;switch(a){case"style":S=Bu(s);break;case"script":S=zu(s)}fs.has(S)||(s=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),fs.set(S,s),h.querySelector(v)!==null||a==="style"&&h.querySelector(kh(S))||a==="script"&&h.querySelector(Dh(S))||(a=h.createElement("link"),Or(a,"link",s),It(a),h.head.appendChild(a)))}}function Ck(s,a){io.m(s,a);var l=Fu;if(l&&s){var h=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+xn(h)+'"][href="'+xn(s)+'"]',S=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=zu(s)}if(!fs.has(S)&&(s=b({rel:"modulepreload",href:s},a),fs.set(S,s),l.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Dh(S)))return}h=l.createElement("link"),Or(h,"link",s),It(h),l.head.appendChild(h)}}}function Ak(s,a,l){io.S(s,a,l);var h=Fu;if(h&&s){var v=Ft(h).hoistableStyles,S=Bu(s);a=a||"default";var P=v.get(S);if(!P){var U={loading:0,preload:null};if(P=h.querySelector(kh(S)))U.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},l),(l=fs.get(S))&&Wv(s,l);var Z=P=h.createElement("link");It(Z),Or(Z,"link",s),Z._p=new Promise(function(he,be){Z.onload=he,Z.onerror=be}),Z.addEventListener("load",function(){U.loading|=1}),Z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,sg(P,a,h)}P={type:"stylesheet",instance:P,count:1,state:U},v.set(S,P)}}}function Rk(s,a){io.X(s,a);var l=Fu;if(l&&s){var h=Ft(l).hoistableScripts,v=zu(s),S=h.get(v);S||(S=l.querySelector(Dh(v)),S||(s=b({src:s,async:!0},a),(a=fs.get(v))&&Kv(s,a),S=l.createElement("script"),It(S),Or(S,"link",s),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(v,S))}}function Ok(s,a){io.M(s,a);var l=Fu;if(l&&s){var h=Ft(l).hoistableScripts,v=zu(s),S=h.get(v);S||(S=l.querySelector(Dh(v)),S||(s=b({src:s,async:!0,type:"module"},a),(a=fs.get(v))&&Kv(s,a),S=l.createElement("script"),It(S),Or(S,"link",s),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(v,S))}}function pw(s,a,l,h){var v=(v=Le.current)?ig(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Bu(l.href),l=Ft(v).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Bu(l.href);var S=Ft(v).hoistableStyles,P=S.get(s);if(P||(v=v.ownerDocument||v,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,P),(S=v.querySelector(kh(s)))&&!S._p&&(P.instance=S,P.state.loading=5),fs.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fs.set(s,l),S||Ik(v,s,l,P.state))),a&&h===null)throw Error(r(528,""));return P}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zu(l),l=Ft(v).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Bu(s){return'href="'+xn(s)+'"'}function kh(s){return'link[rel="stylesheet"]['+s+"]"}function gw(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function Ik(s,a,l,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Or(a,"link",l),It(a),s.head.appendChild(a))}function zu(s){return'[src="'+xn(s)+'"]'}function Dh(s){return"script[async]"+s}function mw(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+xn(l.href)+'"]');if(h)return a.instance=h,It(h),h;var v=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),It(h),Or(h,"style",v),sg(h,l.precedence,s),a.instance=h;case"stylesheet":v=Bu(l.href);var S=s.querySelector(kh(v));if(S)return a.state.loading|=4,a.instance=S,It(S),S;h=gw(l),(v=fs.get(v))&&Wv(h,v),S=(s.ownerDocument||s).createElement("link"),It(S);var P=S;return P._p=new Promise(function(U,Z){P.onload=U,P.onerror=Z}),Or(S,"link",h),a.state.loading|=4,sg(S,l.precedence,s),a.instance=S;case"script":return S=zu(l.src),(v=s.querySelector(Dh(S)))?(a.instance=v,It(v),v):(h=l,(v=fs.get(S))&&(h=b({},l),Kv(h,v)),s=s.ownerDocument||s,v=s.createElement("script"),It(v),Or(v,"link",h),s.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,sg(h,l.precedence,s));return a.instance}function sg(s,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,S=v,P=0;P<h.length;P++){var U=h[P];if(U.dataset.precedence===a)S=U;else if(S!==v)break}S?S.parentNode.insertBefore(s,S.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Wv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Kv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var ag=null;function yw(s,a,l){if(ag===null){var h=new Map,v=ag=new Map;v.set(l,h)}else v=ag,h=v.get(l),h||(h=new Map,v.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),v=0;v<l.length;v++){var S=l[v];if(!(S[it]||S[Te]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var P=S.getAttribute(a)||"";P=s+P;var U=h.get(P);U?U.push(S):h.set(P,[S])}}return h}function vw(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function xk(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function bw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Nh=null;function Pk(){}function Mk(s,a,l){if(Nh===null)throw Error(r(475));var h=Nh;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Bu(l.href),S=s.querySelector(kh(v));if(S){s=S._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=og.bind(h),s.then(h,h)),a.state.loading|=4,a.instance=S,It(S);return}S=s.ownerDocument||s,l=gw(l),(v=fs.get(v))&&Wv(l,v),S=S.createElement("link"),It(S);var P=S;P._p=new Promise(function(U,Z){P.onload=U,P.onerror=Z}),Or(S,"link",l),a.instance=S}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=og.bind(h),s.addEventListener("load",a),s.addEventListener("error",a))}}function kk(){if(Nh===null)throw Error(r(475));var s=Nh;return s.stylesheets&&s.count===0&&Yv(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&Yv(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function og(){if(this.count--,this.count===0){if(this.stylesheets)Yv(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var lg=null;function Yv(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,lg=new Map,a.forEach(Dk,s),lg=null,og.call(s))}function Dk(s,a){if(!(a.state.loading&4)){var l=lg.get(s);if(l)var h=l.get(null);else{l=new Map,lg.set(s,l);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var P=v[S];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(l.set(P.dataset.precedence,P),h=P)}h&&l.set(null,h)}v=a.instance,P=v.getAttribute("data-precedence"),S=l.get(P)||h,S===h&&l.set(null,v),l.set(P,v),this.count++,h=og.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),S?S.parentNode.insertBefore(v,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),a.state.loading|=4}}var Lh={$$typeof:q,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function Nk(s,a,l,h,v,S,P,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function _w(s,a,l,h,v,S,P,U,Z,he,be,Ce){return s=new Nk(s,a,l,P,U,Z,he,Ce),a=1,S===!0&&(a|=24),S=oi(3,null,null,a),s.current=S,S.stateNode=s,a=ra(),a.refCount++,s.pooledCache=a,a.refCount++,S.memoizedState={element:h,isDehydrated:l,cache:a},Eu(S),s}function Sw(s){return s?(s=qa,s):qa}function Ew(s,a,l,h,v,S){v=Sw(v),h.context===null?h.context=v:h.pendingContext=v,h=sa(a),h.payload={element:l},S=S===void 0?null:S,S!==null&&(h.callback=S),l=aa(s,h,a),l!==null&&(Bi(l,s,a),Sc(l,s,a))}function ww(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Qv(s,a){ww(s,a),(s=s.alternate)&&ww(s,a)}function Tw(s){if(s.tag===13){var a=zo(s,67108864);a!==null&&Bi(a,s,67108864),Qv(s,67108864)}}var cg=!0;function Lk(s,a,l,h){var v=J.T;J.T=null;var S=oe.p;try{oe.p=2,Xv(s,a,l,h)}finally{oe.p=S,J.T=v}}function Uk(s,a,l,h){var v=J.T;J.T=null;var S=oe.p;try{oe.p=8,Xv(s,a,l,h)}finally{oe.p=S,J.T=v}}function Xv(s,a,l,h){if(cg){var v=Jv(h);if(v===null)Vv(s,a,h,ug,l),Aw(s,h);else if(jk(v,s,a,l,h))h.stopPropagation();else if(Aw(s,h),a&4&&-1<Vk.indexOf(s)){for(;v!==null;){var S=wt(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var P=wr(S.pendingLanes);if(P!==0){var U=S;for(U.pendingLanes|=2,U.entangledLanes|=2;P;){var Z=1<<31-Ht(P);U.entanglements[1]|=Z,P&=~Z}da(S),(sn&6)===0&&(Wp=Ln()+500,Ih(0))}}break;case 13:U=zo(S,2),U!==null&&Bi(U,S,2),Yp(),Qv(S,2)}if(S=Jv(h),S===null&&Vv(s,a,h,ug,l),S===v)break;v=S}v!==null&&h.stopPropagation()}else Vv(s,a,h,null,l)}}function Jv(s){return s=Br(s),Zv(s)}var ug=null;function Zv(s){if(ug=null,s=et(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return ug=s,null}function Cw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case er:return 2;case un:return 8;case Tt:case hr:return 32;case ei:return 268435456;default:return 32}default:return 32}}var e0=!1,hl=null,dl=null,pl=null,Uh=new Map,Vh=new Map,gl=[],Vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Aw(s,a){switch(s){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Uh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(a.pointerId)}}function jh(s,a,l,h,v,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:S,targetContainers:[v]},a!==null&&(a=wt(a),a!==null&&Tw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function jk(s,a,l,h,v){switch(a){case"focusin":return hl=jh(hl,s,a,l,h,v),!0;case"dragenter":return dl=jh(dl,s,a,l,h,v),!0;case"mouseover":return pl=jh(pl,s,a,l,h,v),!0;case"pointerover":var S=v.pointerId;return Uh.set(S,jh(Uh.get(S)||null,s,a,l,h,v)),!0;case"gotpointercapture":return S=v.pointerId,Vh.set(S,jh(Vh.get(S)||null,s,a,l,h,v)),!0}return!1}function Rw(s){var a=et(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,ae(s.priority,function(){if(l.tag===13){var h=Fi();h=Ji(h);var v=zo(l,h);v!==null&&Bi(v,l,h),Qv(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fg(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Jv(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);es=h,l.target.dispatchEvent(h),es=null}else return a=wt(l),a!==null&&Tw(a),s.blockedOn=l,!1;a.shift()}return!0}function Ow(s,a,l){fg(s)&&l.delete(a)}function Fk(){e0=!1,hl!==null&&fg(hl)&&(hl=null),dl!==null&&fg(dl)&&(dl=null),pl!==null&&fg(pl)&&(pl=null),Uh.forEach(Ow),Vh.forEach(Ow)}function hg(s,a){s.blockedOn===a&&(s.blockedOn=null,e0||(e0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Fk)))}var dg=null;function Iw(s){dg!==s&&(dg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dg===s&&(dg=null);for(var a=0;a<s.length;a+=3){var l=s[a],h=s[a+1],v=s[a+2];if(typeof h!="function"){if(Zv(h||l)===null)continue;break}var S=wt(l);S!==null&&(s.splice(a,3),a-=3,Zy(S,{pending:!0,data:v,method:l.method,action:h},h,v))}}))}function Fh(s){function a(Z){return hg(Z,s)}hl!==null&&hg(hl,s),dl!==null&&hg(dl,s),pl!==null&&hg(pl,s),Uh.forEach(a),Vh.forEach(a);for(var l=0;l<gl.length;l++){var h=gl[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<gl.length&&(l=gl[0],l.blockedOn===null);)Rw(l),l.blockedOn===null&&gl.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var v=l[h],S=l[h+1],P=v[Ie]||null;if(typeof S=="function")P||Iw(l);else if(P){var U=null;if(S&&S.hasAttribute("formAction")){if(v=S,P=S[Ie]||null)U=P.formAction;else if(Zv(v)!==null)continue}else U=P.action;typeof U=="function"?l[h+1]=U:(l.splice(h,3),h-=3),Iw(l)}}}function t0(s){this._internalRoot=s}pg.prototype.render=t0.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=Fi();Ew(l,h,s,a,null,null)},pg.prototype.unmount=t0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ew(s.current,2,null,s,null,null),Yp(),a[Fe]=null}};function pg(s){this._internalRoot=s}pg.prototype.unstable_scheduleHydration=function(s){if(s){var a=ee();s={blockedOn:null,target:s,priority:a};for(var l=0;l<gl.length&&a!==0&&a<gl[l].priority;l++);gl.splice(l,0,s),l===0&&Rw(s)}};var xw=e.version;if(xw!=="19.1.0")throw Error(r(527,xw,"19.1.0"));oe.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var Bk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gg.isDisabled&&gg.supportsFiber)try{jt=gg.inject(Bk),nt=gg}catch{}}return zh.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,h="",v=GE,S=WE,P=KE,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(P=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(U=a.unstable_transitionCallbacks)),a=_w(s,1,!1,null,null,l,h,v,S,P,U,null),s[Fe]=a.current,Uv(s),new t0(a)},zh.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var h=!1,v="",S=GE,P=WE,U=KE,Z=null,he=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(P=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(he=l.formState)),a=_w(s,1,!0,a,l??null,h,v,S,P,U,Z,he),a.context=Sw(null),l=a.current,h=Fi(),h=Ji(h),v=sa(h),v.callback=null,aa(l,v,h),l=h,a.current.lanes=l,fi(a,l),da(a),s[Fe]=a.current,Uv(s),new pg(a)},zh.version="19.1.0",zh}var $w;function dD(){if($w)return s0.exports;$w=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),s0.exports=hD(),s0.exports}var pD=dD(),c0={exports:{}},u0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function gD(){if(Gw)return u0;Gw=1;var t=ny();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,d=t.useDebugValue;return u0.useSyncExternalStoreWithSelector=function(p,g,b,E,C){var O=i(null);if(O.current===null){var x={hasValue:!1,value:null};O.current=x}else x=O.current;O=c(function(){function k(W){if(!V){if(V=!0,X=W,W=E(W),C!==void 0&&x.hasValue){var $=x.value;if(C($,W))return q=$}return q=W}if($=q,n(X,W))return $;var F=E(W);return C!==void 0&&C($,F)?(X=W,$):(X=W,q=F)}var V=!1,X,q,H=b===void 0?null:b;return[function(){return k(g())},H===null?void 0:function(){return k(H())}]},[g,b,E,C]);var N=r(p,O[0],O[1]);return o(function(){x.hasValue=!0,x.value=N},[N]),d(N),N},u0}var Ww;function mD(){return Ww||(Ww=1,c0.exports=gD()),c0.exports}var yD=mD();function vD(t){t()}function bD(){let t=null,e=null;return{clear(){t=null,e=null},notify(){vD(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Kw={notify(){},get:()=>[]};function _D(t,e){let n,r=Kw,i=0,o=!1;function c(N){b();const k=r.subscribe(N);let V=!1;return()=>{V||(V=!0,k(),E())}}function d(){r.notify()}function p(){x.onStateChange&&x.onStateChange()}function g(){return o}function b(){i++,n||(n=t.subscribe(p),r=bD())}function E(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Kw)}function C(){o||(o=!0,b())}function O(){o&&(o=!1,E())}const x={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:C,tryUnsubscribe:O,getListeners:()=>r};return x}var SD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ED=SD(),wD=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TD=wD(),CD=()=>ED||TD?M.useLayoutEffect:M.useEffect,AD=CD(),f0=Symbol.for("react-redux-context"),h0=typeof globalThis<"u"?globalThis:{};function RD(){if(!M.createContext)return{};const t=h0[f0]??(h0[f0]=new Map);let e=t.get(M.createContext);return e||(e=M.createContext(null),t.set(M.createContext,e)),e}var kl=RD();function OD(t){const{children:e,context:n,serverState:r,store:i}=t,o=M.useMemo(()=>{const p=_D(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),c=M.useMemo(()=>i.getState(),[i]);AD(()=>{const{subscription:p}=o;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[o,c]);const d=n||kl;return M.createElement(d.Provider,{value:o},e)}var ID=OD;function D_(t=kl){return function(){return M.useContext(t)}}var uO=D_();function fO(t=kl){const e=t===kl?uO:D_(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var xD=fO();function PD(t=kl){const e=t===kl?xD:fO(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var qs=PD(),MD=(t,e)=>t===e;function kD(t=kl){const e=t===kl?uO:D_(t),n=(r,i={})=>{const{equalityFn:o=MD}=typeof i=="function"?{equalityFn:i}:i,c=e(),{store:d,subscription:p,getServerState:g}=c;M.useRef(!0);const b=M.useCallback({[r.name](C){return r(C)}}[r.name],[r]),E=yD.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,b,o);return M.useDebugValue(E),E};return Object.assign(n,{withTypes:()=>n}),n}var fr=kD();const DD=()=>{};var Yw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ND=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],d=t[n++],p=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},dO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,d=c?t[i+1]:0,p=i+2<t.length,g=p?t[i+2]:0,b=o>>2,E=(o&3)<<4|d>>4;let C=(d&15)<<2|g>>6,O=g&63;p||(O=64,c||(C=64)),r.push(n[b],n[E],n[C],n[O])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ND(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const g=i<t.length?n[t.charAt(i)]:64;++i;const E=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||d==null||g==null||E==null)throw new LD;const C=o<<2|d>>4;if(r.push(C),g!==64){const O=d<<4&240|g>>2;if(r.push(O),E!==64){const x=g<<6&192|E;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UD=function(t){const e=hO(t);return dO.encodeByteArray(e,!0)},dm=function(t){return UD(t).replace(/\./g,"")},pO=function(t){try{return dO.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=()=>VD().__FIREBASE_DEFAULTS__,FD=()=>{if(typeof process>"u"||typeof Yw>"u")return;const t=Yw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pO(t[1]);return e&&JSON.parse(e)},ry=()=>{try{return DD()||jD()||FD()||BD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gO=t=>{var e,n;return(n=(e=ry())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zD=t=>{const e=gO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mO=()=>{var t;return(t=ry())===null||t===void 0?void 0:t.config},yO=t=>{var e;return(e=ry())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HD=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){return t.endsWith(".cloudworkstations.dev")}async function vO(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dm(JSON.stringify(n)),dm(JSON.stringify(c)),""].join(".")}const ld={};function $D(){const t={prod:[],emulator:[]};for(const e of Object.keys(ld))ld[e]?t.emulator.push(e):t.prod.push(e);return t}function GD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qw=!1;function bO(t,e){if(typeof window>"u"||typeof document>"u"||!If(window.location.host)||ld[t]===e||ld[t]||Qw)return;ld[t]=e;function n(C){return`__firebase__banner__${C}`}const r="__firebase__banner",o=$D().prod.length>0;function c(){const C=document.getElementById(r);C&&C.remove()}function d(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,O){C.setAttribute("width","24"),C.setAttribute("id",O),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function g(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Qw=!0,c()},C}function b(C,O){C.setAttribute("id",O),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=GD(r),O=n("text"),x=document.getElementById(O)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),V=n("preprendIcon"),X=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const q=C.element;d(q),b(k,N);const H=g();p(X,V),q.append(X,x,k,H),document.body.appendChild(q)}o?(x.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jr())}function KD(){var t;const e=(t=ry())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JD(){const t=Jr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZD(){return!KD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eN(){try{return typeof indexedDB=="object"}catch{return!1}}function tN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="FirebaseError";class wo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nN,Object.setPrototypeOf(this,wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bd.prototype.create)}}class Bd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?rN(o,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new wo(i,d,r)}}function rN(t,e){return t.replace(iN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iN=/\{\$([^}]+)}/g;function sN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(Xw(o)&&Xw(c)){if(!Uc(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Xw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Zh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aN(t,e){const n=new oN(t,e);return n.subscribe.bind(n)}class oN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=d0),i.error===void 0&&(i.error=d0),i.complete===void 0&&(i.complete=d0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function d0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t){return t&&t._delegate?t._delegate:t}class Vc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fN(e))try{this.getOrInitializeService({instanceIdentifier:Ic})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ic){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ic){return this.instances.has(e)}getOptions(e=Ic){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ic){return this.component?this.component.multipleInstances?e:Ic:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uN(t){return t===Ic?void 0:t}function fN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Nt||(Nt={}));const dN={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},pN=Nt.INFO,gN={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},mN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let N_=class{constructor(e){this.name=e,this._logLevel=pN,this._logHandler=mN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...e),this._logHandler(this,Nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...e),this._logHandler(this,Nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...e),this._logHandler(this,Nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...e),this._logHandler(this,Nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...e),this._logHandler(this,Nt.ERROR,...e)}};const yN=(t,e)=>e.some(n=>t instanceof n);let Jw,Zw;function vN(){return Jw||(Jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bN(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _O=new WeakMap,db=new WeakMap,SO=new WeakMap,p0=new WeakMap,L_=new WeakMap;function _N(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(Rl(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&_O.set(n,t)}).catch(()=>{}),L_.set(e,t),e}function SN(t){if(db.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});db.set(t,e)}let pb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return db.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EN(t){pb=t(pb)}function wN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(g0(this),e,...n);return SO.set(r,e.sort?e.sort():[e]),Rl(r)}:bN().includes(t)?function(...e){return t.apply(g0(this),e),Rl(_O.get(this))}:function(...e){return Rl(t.apply(g0(this),e))}}function TN(t){return typeof t=="function"?wN(t):(t instanceof IDBTransaction&&SN(t),yN(t,vN())?new Proxy(t,pb):t)}function Rl(t){if(t instanceof IDBRequest)return _N(t);if(p0.has(t))return p0.get(t);const e=TN(t);return e!==t&&(p0.set(t,e),L_.set(e,t)),e}const g0=t=>L_.get(t);function CN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),d=Rl(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Rl(c.result),p.oldVersion,p.newVersion,Rl(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),d.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const AN=["get","getKey","getAll","getAllKeys","count"],RN=["put","add","delete","clear"],m0=new Map;function eT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(m0.get(e))return m0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AN.includes(n)))return;const o=async function(c,...d){const p=this.transaction(c,i?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[n](...d),i&&p.done]))[0]};return m0.set(e,o),o}EN(t=>({...t,get:(e,n,r)=>eT(e,n)||t.get(e,n,r),has:(e,n)=>!!eT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function IN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gb="@firebase/app",tT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new N_("@firebase/app"),xN="@firebase/app-compat",PN="@firebase/analytics-compat",MN="@firebase/analytics",kN="@firebase/app-check-compat",DN="@firebase/app-check",NN="@firebase/auth",LN="@firebase/auth-compat",UN="@firebase/database",VN="@firebase/data-connect",jN="@firebase/database-compat",FN="@firebase/functions",BN="@firebase/functions-compat",zN="@firebase/installations",HN="@firebase/installations-compat",qN="@firebase/messaging",$N="@firebase/messaging-compat",GN="@firebase/performance",WN="@firebase/performance-compat",KN="@firebase/remote-config",YN="@firebase/remote-config-compat",QN="@firebase/storage",XN="@firebase/storage-compat",JN="@firebase/firestore",ZN="@firebase/ai",e4="@firebase/firestore-compat",t4="firebase",n4="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="[DEFAULT]",r4={[gb]:"fire-core",[xN]:"fire-core-compat",[MN]:"fire-analytics",[PN]:"fire-analytics-compat",[DN]:"fire-app-check",[kN]:"fire-app-check-compat",[NN]:"fire-auth",[LN]:"fire-auth-compat",[UN]:"fire-rtdb",[VN]:"fire-data-connect",[jN]:"fire-rtdb-compat",[FN]:"fire-fn",[BN]:"fire-fn-compat",[zN]:"fire-iid",[HN]:"fire-iid-compat",[qN]:"fire-fcm",[$N]:"fire-fcm-compat",[GN]:"fire-perf",[WN]:"fire-perf-compat",[KN]:"fire-rc",[YN]:"fire-rc-compat",[QN]:"fire-gcs",[XN]:"fire-gcs-compat",[JN]:"fire-fst",[e4]:"fire-fst-compat",[ZN]:"fire-vertex","fire-js":"fire-js",[t4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Map,i4=new Map,yb=new Map;function nT(t,e){try{t.container.addComponent(e)}catch(n){po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mf(t){const e=t.name;if(yb.has(e))return po.debug(`There were multiple attempts to register component ${e}.`),!1;yb.set(e,t);for(const n of pm.values())nT(n,t);for(const n of i4.values())nT(n,t);return!0}function U_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ps(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ol=new Bd("app","Firebase",s4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=n4;function EO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ol.create("bad-app-name",{appName:String(i)});if(n||(n=mO()),!n)throw Ol.create("no-options");const o=pm.get(i);if(o){if(Uc(n,o.options)&&Uc(r,o.config))return o;throw Ol.create("duplicate-app",{appName:i})}const c=new hN(i);for(const p of yb.values())c.addComponent(p);const d=new a4(n,r,c);return pm.set(i,d),d}function wO(t=mb){const e=pm.get(t);if(!e&&t===mb&&mO())return EO();if(!e)throw Ol.create("no-app",{appName:t});return e}function Il(t,e,n){var r;let i=(r=r4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),po.warn(d.join(" "));return}mf(new Vc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="firebase-heartbeat-database",l4=1,vd="firebase-heartbeat-store";let y0=null;function TO(){return y0||(y0=CN(o4,l4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ol.create("idb-open",{originalErrorMessage:t.message})})),y0}async function c4(t){try{const n=(await TO()).transaction(vd),r=await n.objectStore(vd).get(CO(t));return await n.done,r}catch(e){if(e instanceof wo)po.warn(e.message);else{const n=Ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});po.warn(n.message)}}}async function rT(t,e){try{const r=(await TO()).transaction(vd,"readwrite");await r.objectStore(vd).put(e,CO(t)),await r.done}catch(n){if(n instanceof wo)po.warn(n.message);else{const r=Ol.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});po.warn(r.message)}}}function CO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=1024,f4=30;class h4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=iT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>f4){const c=g4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){po.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iT(),{heartbeatsToSend:r,unsentEntries:i}=d4(this._heartbeatsCache.heartbeats),o=dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return po.warn(n),""}}}function iT(){return new Date().toISOString().substring(0,10)}function d4(t,e=u4){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),sT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eN()?tN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sT(t){return dm(JSON.stringify({version:2,heartbeats:t})).length}function g4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){mf(new Vc("platform-logger",e=>new ON(e),"PRIVATE")),mf(new Vc("heartbeat",e=>new h4(e),"PRIVATE")),Il(gb,tT,t),Il(gb,tT,"esm2017"),Il("fire-js","")}m4("");function V_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y4=AO,RO=new Bd("auth","Firebase",AO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new N_("@firebase/auth");function v4(t,...e){gm.logLevel<=Nt.WARN&&gm.warn(`Auth (${xf}): ${t}`,...e)}function Bg(t,...e){gm.logLevel<=Nt.ERROR&&gm.error(`Auth (${xf}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,...e){throw j_(t,...e)}function Sa(t,...e){return j_(t,...e)}function OO(t,e,n){const r=Object.assign(Object.assign({},y4()),{[e]:n});return new Bd("auth","Firebase",r).create(e,{appName:t.name})}function co(t){return OO(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RO.create(t,...e)}function ut(t,e,...n){if(!t)throw j_(e,...n)}function oo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bg(e),new Error(e)}function go(t,e){t||oo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function b4(){return aT()==="http:"||aT()==="https:"}function aT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b4()||QD()||"connection"in navigator)?navigator.onLine:!0}function S4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.shortDelay=e,this.longDelay=n,go(n>e,"Short delay should be less than long delay!"),this.isMobile=WD()||XD()}get(){return _4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e){go(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T4=new Hd(3e4,6e4);function Yl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ql(t,e,n,r,i={}){return xO(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=zd(Object.assign({key:t.config.apiKey},c)).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const g=Object.assign({method:e,headers:p},o);return YD()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&If(t.emulatorConfig.host)&&(g.credentials="include"),IO.fetch()(await PO(t,t.config.apiHost,n,d),g)})}async function xO(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},E4),e);try{const i=new A4(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw mg(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw mg(t,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw mg(t,"email-already-in-use",c);if(p==="USER_DISABLED")throw mg(t,"user-disabled",c);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw OO(t,b,g);Bs(t,b)}}catch(i){if(i instanceof wo)throw i;Bs(t,"network-request-failed",{message:String(i)})}}async function qd(t,e,n,r,i={}){const o=await Ql(t,e,n,r,i);return"mfaPendingCredential"in o&&Bs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function PO(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?F_(t.config,i):`${t.config.apiScheme}://${i}`;return w4.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function C4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class A4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sa(this.auth,"network-request-failed")),T4.get())})}}function mg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sa(t,e,r);return i.customData._tokenResponse=n,i}function oT(t){return t!==void 0&&t.enterprise!==void 0}class R4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return C4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O4(t,e){return Ql(t,"GET","/v2/recaptchaConfig",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e){return Ql(t,"POST","/v1/accounts:delete",e)}async function mm(t,e){return Ql(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x4(t,e=!1){const n=ci(t),r=await n.getIdToken(e),i=B_(r);ut(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:cd(v0(i.auth_time)),issuedAtTime:cd(v0(i.iat)),expirationTime:cd(v0(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function v0(t){return Number(t)*1e3}function B_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bg("JWT malformed, contained fewer than 3 sections"),null;try{const i=pO(n);return i?JSON.parse(i):(Bg("Failed to decode base64 JWT payload"),null)}catch(i){return Bg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lT(t){const e=B_(t);return ut(e,"internal-error"),ut(typeof e.exp<"u","internal-error"),ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wo&&P4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function P4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cd(this.lastLoginAt),this.creationTime=cd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ym(t){var e;const n=t.auth,r=await t.getIdToken(),i=await bd(t,mm(n,{idToken:r}));ut(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?MO(o.providerUserInfo):[],d=D4(t.providerData,c),p=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),b=p?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new bb(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(t,E)}async function k4(t){const e=ci(t);await ym(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function MO(t){return t.map(e=>{var{providerId:n}=e,r=V_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(t,e){const n=await xO(t,{},async()=>{const r=zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await PO(t,i,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return t.emulatorConfig&&If(t.emulatorConfig.host)&&(p.credentials="include"),IO.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L4(t,e){return Ql(t,"POST","/v2/accounts:revokeToken",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken<"u","internal-error"),ut(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ut(e.length!==0,"internal-error");const n=lT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await N4(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new lf;return r&&(ut(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(ut(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lf,this.toJSON())}_performRefresh(){return oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e){ut(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class js{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=V_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bb(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bd(this,this.stsTokenManager.getToken(this.auth,e));return ut(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return x4(this,e)}reload(){return k4(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ym(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await bd(this,I4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,c,d,p,g,b;const E=(r=n.displayName)!==null&&r!==void 0?r:void 0,C=(i=n.email)!==null&&i!==void 0?i:void 0,O=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,x=(c=n.photoURL)!==null&&c!==void 0?c:void 0,N=(d=n.tenantId)!==null&&d!==void 0?d:void 0,k=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,V=(g=n.createdAt)!==null&&g!==void 0?g:void 0,X=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:q,emailVerified:H,isAnonymous:W,providerData:$,stsTokenManager:F}=n;ut(q&&F,e,"internal-error");const D=lf.fromJSON(this.name,F);ut(typeof q=="string",e,"internal-error"),vl(E,e.name),vl(C,e.name),ut(typeof H=="boolean",e,"internal-error"),ut(typeof W=="boolean",e,"internal-error"),vl(O,e.name),vl(x,e.name),vl(N,e.name),vl(k,e.name),vl(V,e.name),vl(X,e.name);const L=new js({uid:q,auth:e,email:C,emailVerified:H,displayName:E,isAnonymous:W,photoURL:x,phoneNumber:O,tenantId:N,stsTokenManager:D,createdAt:V,lastLoginAt:X});return $&&Array.isArray($)&&(L.providerData=$.map(G=>Object.assign({},G))),k&&(L._redirectEventId=k),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new lf;i.updateFromServerResponse(n);const o=new js({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ym(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ut(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?MO(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),d=new lf;d.updateFromIdToken(r);const p=new js({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function lo(t){go(t instanceof Function,"Expected a class definition");let e=cT.get(t);return e?(go(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kO.type="NONE";const uT=kO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e,n){return`firebase:${t}:${e}:${n}`}class cf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=zg(this.userKey,i.apiKey,o),this.fullPersistenceKey=zg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mm(this.auth,{idToken:e}).catch(()=>{});return n?js._fromGetAccountInfoResponse(this.auth,n,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cf(lo(uT),e,r);const i=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||lo(uT);const c=zg(r,e.config.apiKey,e.name);let d=null;for(const g of n)try{const b=await g._get(c);if(b){let E;if(typeof b=="string"){const C=await mm(e,{idToken:b}).catch(()=>{});if(!C)break;E=await js._fromGetAccountInfoResponse(e,C,b)}else E=js._fromJSON(e,b);g!==o&&(d=E),o=g;break}}catch{}const p=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new cf(o,e,r):(o=p[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new cf(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jO(e))return"Blackberry";if(FO(e))return"Webos";if(NO(e))return"Safari";if((e.includes("chrome/")||LO(e))&&!e.includes("edge/"))return"Chrome";if(VO(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DO(t=Jr()){return/firefox\//i.test(t)}function NO(t=Jr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LO(t=Jr()){return/crios\//i.test(t)}function UO(t=Jr()){return/iemobile/i.test(t)}function VO(t=Jr()){return/android/i.test(t)}function jO(t=Jr()){return/blackberry/i.test(t)}function FO(t=Jr()){return/webos/i.test(t)}function z_(t=Jr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function U4(t=Jr()){var e;return z_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function V4(){return JD()&&document.documentMode===10}function BO(t=Jr()){return z_(t)||VO(t)||FO(t)||jO(t)||/windows phone/i.test(t)||UO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t,e=[]){let n;switch(t){case"Browser":n=fT(Jr());break;case"Worker":n=`${fT(Jr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,d)=>{try{const p=e(o);c(p)}catch(p){d(p)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(t,e={}){return Ql(t,"GET","/v2/passwordPolicy",Yl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=6;class z4{constructor(e){var n,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:B4,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsUppercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hT(this),this.idTokenSubscription=new hT(this),this.beforeStateQueue=new j4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lo(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await cf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mm(this,{idToken:e}),r=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ps(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ym(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(co(this));const n=e?ci(e):null;return n&&ut(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F4(this),n=new z4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await L4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lo(e)||this._popupRedirectResolver;ut(n,this,"argument-error"),this.redirectPersistenceManager=await cf.create(this,[lo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&v4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yc(t){return ci(t)}class hT{constructor(e){this.auth=e,this.observer=null,this.addObserver=aN(n=>this.observer=n)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q4(t){iy=t}function HO(t){return iy.loadJS(t)}function $4(){return iy.recaptchaEnterpriseScript}function G4(){return iy.gapiScript}function W4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class K4{constructor(){this.enterprise=new Y4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Y4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q4="recaptcha-enterprise",qO="NO_RECAPTCHA";class X4{constructor(e){this.type=Q4,this.auth=Yc(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{O4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new R4(p);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function i(o,c,d){const p=window.grecaptcha;oT(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(g=>{c(g)}).catch(()=>{c(qO)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new K4().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!n&&oT(window.grecaptcha))i(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=$4();p.length!==0&&(p+=d),HO(p).then(()=>{i(d,o,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function dT(t,e,n,r=!1,i=!1){const o=new X4(t);let c;if(i)c=qO;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function _b(t,e,n,r,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await dT(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await dT(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t,e){const n=U_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Uc(o,e??{}))return i;Bs(i,"already-initialized")}return n.initialize({options:e})}function Z4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eL(t,e,n){const r=Yc(t);ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=$O(e),{host:c,port:d}=tL(e),p=d===null?"":`:${d}`,g={url:`${o}//${c}${p}/`},b=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ut(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ut(Uc(g,r.config.emulator)&&Uc(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,If(c)?(vO(`${o}//${c}${p}`),bO("Auth",!0)):nL()}function $O(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tL(t){const e=$O(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:pT(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:pT(c)}}}function pT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oo("not implemented")}_getIdTokenResponse(e){return oo("not implemented")}_linkToIdToken(e,n){return oo("not implemented")}_getReauthenticationResolver(e){return oo("not implemented")}}async function rL(t,e){return Ql(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t,e){return qd(t,"POST","/v1/accounts:signInWithPassword",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){return qd(t,"POST","/v1/accounts:signInWithEmailLink",Yl(t,e))}async function aL(t,e){return qd(t,"POST","/v1/accounts:signInWithEmailLink",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends H_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _d(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _d(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _b(e,n,"signInWithPassword",iL);case"emailLink":return sL(e,{email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _b(e,r,"signUpPassword",rL);case"emailLink":return aL(e,{idToken:n,email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(t,e){return qd(t,"POST","/v1/accounts:signInWithIdp",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="http://localhost";class jc extends H_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=V_(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new jc(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return uf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uf(e,n)}buildRequest(){const e={requestUri:oL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cL(t){const e=Jh(Zh(t)).link,n=e?Jh(Zh(e)).deep_link_id:null,r=Jh(Zh(t)).deep_link_id;return(r?Jh(Zh(r)).link:null)||r||n||e||t}class q_{constructor(e){var n,r,i,o,c,d;const p=Jh(Zh(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,b=(r=p.oobCode)!==null&&r!==void 0?r:null,E=lL((i=p.mode)!==null&&i!==void 0?i:null);ut(g&&b&&E,"argument-error"),this.apiKey=g,this.operation=E,this.code=b,this.continueUrl=(o=p.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=cL(e);try{return new q_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this.providerId=Pf.PROVIDER_ID}static credential(e,n){return _d._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=q_.parseLink(n);return ut(r,"argument-error"),_d._fromEmailAndCode(e,r.code,r.tenantId)}}Pf.PROVIDER_ID="password";Pf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends GO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends $d{constructor(){super("facebook.com")}static credential(e){return jc._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends $d{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return El.credential(n,r)}catch{return null}}}El.GOOGLE_SIGN_IN_METHOD="google.com";El.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends $d{constructor(){super("github.com")}static credential(e){return jc._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wl.credential(e.oauthAccessToken)}catch{return null}}}wl.GITHUB_SIGN_IN_METHOD="github.com";wl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends $d{constructor(){super("twitter.com")}static credential(e,n){return jc._fromParams({providerId:Tl.PROVIDER_ID,signInMethod:Tl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tl.credentialFromTaggedObject(e)}static credentialFromError(e){return Tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tl.credential(n,r)}catch{return null}}}Tl.TWITTER_SIGN_IN_METHOD="twitter.com";Tl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){return qd(t,"POST","/v1/accounts:signUp",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await js._fromIdTokenResponse(e,r,i),c=gT(r);return new Fc({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=gT(r);return new Fc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function gT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends wo{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vm(e,n,r,i)}}function WO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vm._fromErrorAndOperation(t,o,e,r):o})}async function fL(t,e,n=!1){const r=await bd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e,n=!1){const{auth:r}=t;if(ps(r.app))return Promise.reject(co(r));const i="reauthenticate";try{const o=await bd(t,WO(r,i,e,t),n);ut(o.idToken,r,"internal-error");const c=B_(o.idToken);ut(c,r,"internal-error");const{sub:d}=c;return ut(t.uid===d,r,"user-mismatch"),Fc._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(t,e,n=!1){if(ps(t.app))return Promise.reject(co(t));const r="signIn",i=await WO(t,r,e),o=await Fc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function dL(t,e){return KO(Yc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(t){const e=Yc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pL(t,e,n){if(ps(t.app))return Promise.reject(co(t));const r=Yc(t),c=await _b(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uL).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&YO(t),p}),d=await Fc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function gL(t,e,n){return ps(t.app)?Promise.reject(co(t)):dL(ci(t),Pf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&YO(t),r})}function mL(t,e,n,r){return ci(t).onIdTokenChanged(e,n,r)}function yL(t,e,n){return ci(t).beforeAuthStateChanged(e,n)}function vL(t,e,n,r){return ci(t).onAuthStateChanged(e,n,r)}function bL(t){return ci(t).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=1e3,SL=10;class XO extends QO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);V4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_L)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XO.type="LOCAL";const EL=XO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO extends QO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JO.type="SESSION";const ZO=JO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new sy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async g=>g(n.origin,o)),p=await wL(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((d,p)=>{const g=$_("",20);i.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(E){const C=E;if(C.data.eventId===g)switch(C.data.status){case"ack":clearTimeout(b),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(C.data.response);break;default:clearTimeout(b),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(){return window}function CL(t){Ea().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof Ea().WorkerGlobalScope<"u"&&typeof Ea().importScripts=="function"}async function AL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OL(){return eI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebaseLocalStorageDb",IL=1,_m="firebaseLocalStorage",nI="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ay(t,e){return t.transaction([_m],e?"readwrite":"readonly").objectStore(_m)}function xL(){const t=indexedDB.deleteDatabase(tI);return new Gd(t).toPromise()}function Sb(){const t=indexedDB.open(tI,IL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_m,{keyPath:nI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_m)?e(r):(r.close(),await xL(),e(await Sb()))})})}async function mT(t,e,n){const r=ay(t,!0).put({[nI]:e,value:n});return new Gd(r).toPromise()}async function PL(t,e){const n=ay(t,!1).get(e),r=await new Gd(n).toPromise();return r===void 0?null:r.value}function yT(t,e){const n=ay(t,!0).delete(e);return new Gd(n).toPromise()}const ML=800,kL=3;class rI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sy._getInstance(OL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AL(),!this.activeServiceWorker)return;this.sender=new TL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sb();return await mT(e,bm,"1"),await yT(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=ay(i,!1).getAll();return new Gd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ML)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rI.type="LOCAL";const DL=rI;new Hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t,e){return e?lo(e):(ut(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends H_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LL(t){return KO(t.auth,new G_(t),t.bypassAuthState)}function UL(t){const{auth:e,user:n}=t;return ut(n,e,"internal-error"),hL(n,new G_(t),t.bypassAuthState)}async function VL(t){const{auth:e,user:n}=t;return ut(n,e,"internal-error"),fL(n,new G_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LL;case"linkViaPopup":case"linkViaRedirect":return VL;case"reauthViaPopup":case"reauthViaRedirect":return UL;default:Bs(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new Hd(2e3,1e4);class rf extends iI{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,rf.currentPopupAction&&rf.currentPopupAction.cancel(),rf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){go(this.filter.length===1,"Popup operations only handle one event");const e=$_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jL.get())};e()}}rf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="pendingRedirect",Hg=new Map;class BL extends iI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hg.get(this.auth._key());if(!e){try{const r=await zL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hg.set(this.auth._key(),e)}return this.bypassAuthState||Hg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zL(t,e){const n=$L(e),r=qL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HL(t,e){Hg.set(t._key(),e)}function qL(t){return lo(t._redirectPersistence)}function $L(t){return zg(FL,t.config.apiKey,t.name)}async function GL(t,e,n=!1){if(ps(t.app))return Promise.reject(co(t));const r=Yc(t),i=NL(r,e),c=await new BL(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=10*60*1e3;class KL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WL&&this.cachedEventUids.clear(),this.cachedEventUids.has(vT(e))}saveEventToCache(e){this.cachedEventUids.add(vT(e)),this.lastProcessedEventTime=Date.now()}}function vT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e={}){return Ql(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JL=/^https?/;async function ZL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QL(t);for(const n of e)try{if(e3(n))return}catch{}Bs(t,"unauthorized-domain")}function e3(t){const e=vb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!JL.test(n))return!1;if(XL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=new Hd(3e4,6e4);function bT(){const t=Ea().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function n3(t){return new Promise((e,n)=>{var r,i,o;function c(){bT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bT(),n(Sa(t,"network-request-failed"))},timeout:t3.get()})}if(!((i=(r=Ea().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ea().gapi)===null||o===void 0)&&o.load)c();else{const d=W4("iframefcb");return Ea()[d]=()=>{gapi.load?c():n(Sa(t,"network-request-failed"))},HO(`${G4()}?onload=${d}`).catch(p=>n(p))}}).catch(e=>{throw qg=null,e})}let qg=null;function r3(t){return qg=qg||n3(t),qg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new Hd(5e3,15e3),s3="__/auth/iframe",a3="emulator/auth/iframe",o3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c3(t){const e=t.config;ut(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?F_(e,a3):`https://${t.config.authDomain}/${s3}`,r={apiKey:e.apiKey,appName:t.name,v:xf},i=l3.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${zd(r).slice(1)}`}async function u3(t){const e=await r3(t),n=Ea().gapi;return ut(n,t,"internal-error"),e.open({where:document.body,url:c3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o3,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Sa(t,"network-request-failed"),d=Ea().setTimeout(()=>{o(c)},i3.get());function p(){Ea().clearTimeout(d),i(r)}r.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h3=500,d3=600,p3="_blank",g3="http://localhost";class _T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m3(t,e,n,r=h3,i=d3){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},f3),{width:r.toString(),height:i.toString(),top:o,left:c}),g=Jr().toLowerCase();n&&(d=LO(g)?p3:n),DO(g)&&(e=e||g3,p.scrollbars="yes");const b=Object.entries(p).reduce((C,[O,x])=>`${C}${O}=${x},`,"");if(U4(g)&&d!=="_self")return y3(e||"",d),new _T(null);const E=window.open(e||"",d,b);ut(E,t,"popup-blocked");try{E.focus()}catch{}return new _T(E)}function y3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="__/auth/handler",b3="emulator/auth/handler",_3=encodeURIComponent("fac");async function ST(t,e,n,r,i,o){ut(t.config.authDomain,t,"auth-domain-config-required"),ut(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xf,eventId:i};if(e instanceof GO){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",sN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))c[b]=E}if(e instanceof $d){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(c.scopes=b.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const b of Object.keys(d))d[b]===void 0&&delete d[b];const p=await t._getAppCheckToken(),g=p?`#${_3}=${encodeURIComponent(p)}`:"";return`${S3(t)}?${zd(d).slice(1)}${g}`}function S3({config:t}){return t.emulator?F_(t,b3):`https://${t.authDomain}/${v3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="webStorageSupport";class E3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZO,this._completeRedirectFn=GL,this._overrideRedirectResult=HL}async _openPopup(e,n,r,i){var o;go((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await ST(e,n,r,vb(),i);return m3(e,c,$_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await ST(e,n,r,vb(),i);return CL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(go(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await u3(e),r=new KL(e);return n.register("authEvent",i=>(ut(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(b0,{type:b0},i=>{var o;const c=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[b0];c!==void 0&&n(!!c),Bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BO()||NO()||z_()}}const w3=E3;var ET="@firebase/auth",wT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A3(t){mf(new Vc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ut(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zO(t)},g=new H4(r,i,o,p);return Z4(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mf(new Vc("auth-internal",e=>{const n=Yc(e.getProvider("auth").getImmediate());return(r=>new T3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Il(ET,wT,C3(t)),Il(ET,wT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=5*60,O3=yO("authIdTokenMaxAge")||R3;let TT=null;const I3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>O3)return;const i=n==null?void 0:n.token;TT!==i&&(TT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function x3(t=wO()){const e=U_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=J4(t,{popupRedirectResolver:w3,persistence:[DL,EL,ZO]}),r=yO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=I3(o.toString());yL(n,c,()=>c(n.currentUser)),mL(n,d=>c(d))}}const i=gO("auth");return i&&eL(n,`http://${i}`),n}function P3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}q4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Sa("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",P3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A3("Browser");var Hh={},CT;function M3(){if(CT)return Hh;CT=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.parse=c,Hh.serialize=g;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function c(C,O){const x=new o,N=C.length;if(N<2)return x;const k=(O==null?void 0:O.decode)||b;let V=0;do{const X=C.indexOf("=",V);if(X===-1)break;const q=C.indexOf(";",V),H=q===-1?N:q;if(X>H){V=C.lastIndexOf(";",X-1)+1;continue}const W=d(C,V,X),$=p(C,X,W),F=C.slice(W,$);if(x[F]===void 0){let D=d(C,X+1,H),L=p(C,H,D);const G=k(C.slice(D,L));x[F]=G}V=H+1}while(V<N);return x}function d(C,O,x){do{const N=C.charCodeAt(O);if(N!==32&&N!==9)return O}while(++O<x);return x}function p(C,O,x){for(;O>x;){const N=C.charCodeAt(--O);if(N!==32&&N!==9)return O+1}return x}function g(C,O,x){const N=(x==null?void 0:x.encode)||encodeURIComponent;if(!t.test(C))throw new TypeError(`argument name is invalid: ${C}`);const k=N(O);if(!e.test(k))throw new TypeError(`argument val is invalid: ${O}`);let V=C+"="+k;if(!x)return V;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);V+="; Max-Age="+x.maxAge}if(x.domain){if(!n.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);V+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);V+="; Path="+x.path}if(x.expires){if(!E(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);V+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(V+="; HttpOnly"),x.secure&&(V+="; Secure"),x.partitioned&&(V+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return V}function b(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function E(C){return i.call(C)==="[object Date]"}return Hh}M3();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var aI=t=>{throw TypeError(t)},k3=(t,e,n)=>e.has(t)||aI("Cannot "+n),_0=(t,e,n)=>(k3(t,e,"read from private field"),n?n.call(t):e.get(t)),D3=(t,e,n)=>e.has(t)?aI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),AT="popstate";function N3(t={}){function e(i,o){let{pathname:c="/",search:d="",hash:p=""}=To(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Sd("",{pathname:c,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=i.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof o=="string"?o:Dl(o))}function r(i,o){Tn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return U3(e,n,r,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L3(){return Math.random().toString(36).substring(2,10)}function RT(t,e){return{usr:t.state,key:t.key,idx:e}}function Sd(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?To(e):e,state:n,key:e&&e.key||r||L3()}}function Dl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function To(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function U3(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d="POP",p=null,g=b();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function b(){return(c.state||{idx:null}).idx}function E(){d="POP";let k=b(),V=k==null?null:k-g;g=k,p&&p({action:d,location:N.location,delta:V})}function C(k,V){d="PUSH";let X=Sd(N.location,k,V);n&&n(X,k),g=b()+1;let q=RT(X,g),H=N.createHref(X);try{c.pushState(q,"",H)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(H)}o&&p&&p({action:d,location:N.location,delta:1})}function O(k,V){d="REPLACE";let X=Sd(N.location,k,V);n&&n(X,k),g=b();let q=RT(X,g),H=N.createHref(X);c.replaceState(q,"",H),o&&p&&p({action:d,location:N.location,delta:0})}function x(k){return oI(k)}let N={get action(){return d},get location(){return t(i,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(AT,E),p=k,()=>{i.removeEventListener(AT,E),p=null}},createHref(k){return e(i,k)},createURL:x,encodeLocation(k){let V=x(k);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:C,replace:O,go(k){return c.go(k)}};return N}function oI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Dl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var ed,OT=class{constructor(t){if(D3(this,ed,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(_0(this,ed).has(t))return _0(this,ed).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){_0(this,ed).set(t,e)}};ed=new WeakMap;var V3=new Set(["lazy","caseSensitive","path","id","index","children"]);function j3(t){return V3.has(t)}var F3=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function B3(t){return F3.has(t)}function z3(t){return t.index===!0}function Sm(t,e,n=[],r={}){return t.map((i,o)=>{let c=[...n,String(o)],d=typeof i.id=="string"?i.id:c.join("-");if(Rt(i.index!==!0||!i.children,"Cannot specify children on an index route"),Rt(!r[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),z3(i)){let p={...i,...e(i),id:d};return r[d]=p,p}else{let p={...i,...e(i),id:d,children:void 0};return r[d]=p,i.children&&(p.children=Sm(i.children,e,c,r)),p}})}function Cl(t,e,n="/"){return $g(t,e,n,!1)}function $g(t,e,n,r){let i=typeof e=="string"?To(e):e,o=Ti(i.pathname||"/",n);if(o==null)return null;let c=lI(t);q3(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=t6(o);d=Z3(c[p],g,r)}return d}function H3(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function lI(t,e=[],n=[],r=""){let i=(o,c,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};p.relativePath.startsWith("/")&&(Rt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let g=wa([r,p.relativePath]),b=n.concat(p);o.children&&o.children.length>0&&(Rt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),lI(o.children,e,b,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:X3(g,o.index),routesMeta:b})};return t.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,c);else for(let p of cI(o.path))i(o,c,p)}),e}function cI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=cI(r.join("/")),d=[];return d.push(...c.map(p=>p===""?o:[o,p].join("/"))),i&&d.push(...c),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function q3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:J3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $3=/^:[\w-]+$/,G3=3,W3=2,K3=1,Y3=10,Q3=-2,IT=t=>t==="*";function X3(t,e){let n=t.split("/"),r=n.length;return n.some(IT)&&(r+=Q3),e&&(r+=W3),n.filter(i=>!IT(i)).reduce((i,o)=>i+($3.test(o)?G3:o===""?K3:Y3),r)}function J3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Z3(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,b=o==="/"?e:e.slice(o.length)||"/",E=Em({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},b),C=p.route;if(!E&&g&&n&&!r[r.length-1].route.index&&(E=Em({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!E)return null;Object.assign(i,E.params),c.push({params:i,pathname:wa([o,E.pathname]),pathnameBase:i6(wa([o,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(o=wa([o,E.pathnameBase]))}return c}function Em(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((g,{paramName:b,isOptional:E},C)=>{if(b==="*"){let x=d[C]||"";c=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const O=d[C];return E&&!O?g[b]=void 0:g[b]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:t}}function e6(t,e=!1,n=!0){Tn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function t6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ti(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function n6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?To(t):t;return{pathname:n?n.startsWith("/")?n:r6(n,e):e,search:s6(r),hash:a6(i)}}function r6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function S0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function oy(t){let e=uI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function ly(t,e,n,r=!1){let i;typeof t=="string"?i=To(t):(i={...t},Rt(!i.pathname||!i.pathname.includes("?"),S0("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),S0("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),S0("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=n;else{let E=e.length-1;if(!r&&c.startsWith("..")){let C=c.split("/");for(;C[0]==="..";)C.shift(),E-=1;i.pathname=C.join("/")}d=E>=0?e[E]:"/"}let p=n6(i,d),g=c&&c!=="/"&&c.endsWith("/"),b=(o||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||b)&&(p.pathname+="/"),p}var wa=t=>t.join("/").replace(/\/\/+/g,"/"),i6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),s6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,a6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,wm=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Ed(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var fI=["POST","PUT","PATCH","DELETE"],o6=new Set(fI),l6=["GET",...fI],c6=new Set(l6),u6=new Set([301,302,303,307,308]),f6=new Set([307,308]),E0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},h6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},W_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d6=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),hI="remix-router-transitions",dI=Symbol("ResetLoaderData");function p6(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Rt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||d6,o={},c=Sm(t.routes,i,void 0,o),d,p=t.basename||"/",g=t.dataStrategy||b6,b={unstable_middleware:!1,...t.future},E=null,C=new Set,O=null,x=null,N=null,k=t.hydrationData!=null,V=Cl(c,t.history.location,p),X=!1,q=null,H;if(V==null&&!t.patchRoutesOnNavigation){let ee=hs(404,{pathname:t.history.location.pathname}),{matches:ae,route:ce}=BT(c);H=!0,V=ae,q={[ce.id]:ee}}else if(V&&!t.hydrationData&&Tr(V,c,t.history.location.pathname).active&&(V=null),V)if(V.some(ee=>ee.route.lazy))H=!1;else if(!V.some(ee=>ee.route.loader))H=!0;else{let ee=t.hydrationData?t.hydrationData.loaderData:null,ae=t.hydrationData?t.hydrationData.errors:null;if(ae){let ce=V.findIndex(Te=>ae[Te.route.id]!==void 0);H=V.slice(0,ce+1).every(Te=>!wb(Te.route,ee,ae))}else H=V.every(ce=>!wb(ce.route,ee,ae))}else{H=!1,V=[];let ee=Tr(null,c,t.history.location.pathname);ee.active&&ee.matches&&(X=!0,V=ee.matches)}let W,$={historyAction:t.history.action,location:t.history.location,matches:V,initialized:H,navigation:E0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||q,fetchers:new Map,blockers:new Map},F="POP",D=!1,L,G=!1,T=new Map,te=null,K=!1,ne=!1,Pe=new Set,J=new Map,oe=0,Ae=-1,Ue=new Map,Q=new Set,ge=new Map,ye=new Map,ve=new Set,ke=new Map,qe,Le=null;function Ot(){if(E=t.history.listen(({action:ee,location:ae,delta:ce})=>{if(qe){qe(),qe=void 0;return}Tn(ke.size===0||ce!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Te=Ii({currentLocation:$.location,nextLocation:ae,historyAction:ee});if(Te&&ce!=null){let Ie=new Promise(Fe=>{qe=Fe});t.history.go(ce*-1),ni(Te,{state:"blocked",location:ae,proceed(){ni(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),Ie.then(()=>t.history.go(ce))},reset(){let Fe=new Map($.blockers);Fe.set(Te,Xu),Gt({blockers:Fe})}});return}return Sn(ee,ae)}),n){x6(e,T);let ee=()=>P6(e,T);e.addEventListener("pagehide",ee),te=()=>e.removeEventListener("pagehide",ee)}return $.initialized||Sn("POP",$.location,{initialHydration:!0}),W}function gt(){E&&E(),te&&te(),C.clear(),L&&L.abort(),$.fetchers.forEach((ee,ae)=>Ht(ae)),$.blockers.forEach((ee,ae)=>Yi(ae))}function An(ee){return C.add(ee),()=>C.delete(ee)}function Gt(ee,ae={}){$={...$,...ee};let ce=[],Te=[];$.fetchers.forEach((Ie,Fe)=>{Ie.state==="idle"&&(ve.has(Fe)?ce.push(Fe):Te.push(Fe))}),ve.forEach(Ie=>{!$.fetchers.has(Ie)&&!J.has(Ie)&&ce.push(Ie)}),[...C].forEach(Ie=>Ie($,{deletedFetchers:ce,viewTransitionOpts:ae.viewTransitionOpts,flushSync:ae.flushSync===!0})),ce.forEach(Ie=>Ht(Ie)),Te.forEach(Ie=>$.fetchers.delete(Ie))}function _n(ee,ae,{flushSync:ce}={}){var Ye,it;let Te=$.actionData!=null&&$.navigation.formMethod!=null&&Hi($.navigation.formMethod)&&$.navigation.state==="loading"&&((Ye=ee.state)==null?void 0:Ye._isRedirect)!==!0,Ie;ae.actionData?Object.keys(ae.actionData).length>0?Ie=ae.actionData:Ie=null:Te?Ie=$.actionData:Ie=null;let Fe=ae.loaderData?jT($.loaderData,ae.loaderData,ae.matches||[],ae.errors):$.loaderData,Je=$.blockers;Je.size>0&&(Je=new Map(Je),Je.forEach((We,et)=>Je.set(et,Xu)));let Be=D===!0||$.navigation.formMethod!=null&&Hi($.navigation.formMethod)&&((it=ee.state)==null?void 0:it._isRedirect)!==!0;d&&(c=d,d=void 0),K||F==="POP"||(F==="PUSH"?t.history.push(ee,ee.state):F==="REPLACE"&&t.history.replace(ee,ee.state));let $e;if(F==="POP"){let We=T.get($.location.pathname);We&&We.has(ee.pathname)?$e={currentLocation:$.location,nextLocation:ee}:T.has(ee.pathname)&&($e={currentLocation:ee,nextLocation:$.location})}else if(G){let We=T.get($.location.pathname);We?We.add(ee.pathname):(We=new Set([ee.pathname]),T.set($.location.pathname,We)),$e={currentLocation:$.location,nextLocation:ee}}Gt({...ae,actionData:Ie,loaderData:Fe,historyAction:F,location:ee,initialized:!0,navigation:E0,revalidation:"idle",restoreScrollPosition:vs(ee,ae.matches||$.matches),preventScrollReset:Be,blockers:Je},{viewTransitionOpts:$e,flushSync:ce===!0}),F="POP",D=!1,G=!1,K=!1,ne=!1,Le==null||Le.resolve(),Le=null}async function Rn(ee,ae){if(typeof ee=="number"){t.history.go(ee);return}let ce=Eb($.location,$.matches,p,ee,ae==null?void 0:ae.fromRouteId,ae==null?void 0:ae.relative),{path:Te,submission:Ie,error:Fe}=xT(!1,ce,ae),Je=$.location,Be=Sd($.location,Te,ae&&ae.state);Be={...Be,...t.history.encodeLocation(Be)};let $e=ae&&ae.replace!=null?ae.replace:void 0,Ye="PUSH";$e===!0?Ye="REPLACE":$e===!1||Ie!=null&&Hi(Ie.formMethod)&&Ie.formAction===$.location.pathname+$.location.search&&(Ye="REPLACE");let it=ae&&"preventScrollReset"in ae?ae.preventScrollReset===!0:void 0,We=(ae&&ae.flushSync)===!0,et=Ii({currentLocation:Je,nextLocation:Be,historyAction:Ye});if(et){ni(et,{state:"blocked",location:Be,proceed(){ni(et,{state:"proceeding",proceed:void 0,reset:void 0,location:Be}),Rn(ee,ae)},reset(){let wt=new Map($.blockers);wt.set(et,Xu),Gt({blockers:wt})}});return}await Sn(Ye,Be,{submission:Ie,pendingError:Fe,preventScrollReset:it,replace:ae&&ae.replace,enableViewTransition:ae&&ae.viewTransition,flushSync:We})}function Lr(){Le||(Le=M6()),ys(),Gt({revalidation:"loading"});let ee=Le.promise;return $.navigation.state==="submitting"?ee:$.navigation.state==="idle"?(Sn($.historyAction,$.location,{startUninterruptedRevalidation:!0}),ee):(Sn(F||$.historyAction,$.navigation.location,{overrideNavigation:$.navigation,enableViewTransition:G===!0}),ee)}async function Sn(ee,ae,ce){L&&L.abort(),L=null,F=ee,K=(ce&&ce.startUninterruptedRevalidation)===!0,fi($.location,$.matches),D=(ce&&ce.preventScrollReset)===!0,G=(ce&&ce.enableViewTransition)===!0;let Te=d||c,Ie=ce&&ce.overrideNavigation,Fe=ce!=null&&ce.initialHydration&&$.matches&&$.matches.length>0&&!X?$.matches:Cl(Te,ae,p),Je=(ce&&ce.flushSync)===!0;if(Fe&&$.initialized&&!ne&&C6($.location,ae)&&!(ce&&ce.submission&&Hi(ce.submission.formMethod))){_n(ae,{matches:Fe},{flushSync:Je});return}let Be=Tr(Fe,Te,ae.pathname);if(Be.active&&Be.matches&&(Fe=Be.matches),!Fe){let{error:Ft,notFoundMatches:It,route:Ne}=Qi(ae.pathname);_n(ae,{matches:It,loaderData:{},errors:{[Ne.id]:Ft}},{flushSync:Je});return}L=new AbortController;let $e=Ju(t.history,ae,L.signal,ce&&ce.submission),Ye=new OT(t.unstable_getContext?await t.unstable_getContext():void 0),it;if(ce&&ce.pendingError)it=[Mc(Fe).route.id,{type:"error",error:ce.pendingError}];else if(ce&&ce.submission&&Hi(ce.submission.formMethod)){let Ft=await Ur($e,ae,ce.submission,Fe,Ye,Be.active,ce&&ce.initialHydration===!0,{replace:ce.replace,flushSync:Je});if(Ft.shortCircuited)return;if(Ft.pendingActionResult){let[It,Ne]=Ft.pendingActionResult;if(zi(Ne)&&Ed(Ne.error)&&Ne.error.status===404){L=null,_n(ae,{matches:Ft.matches,loaderData:{},errors:{[It]:Ne.error}});return}}Fe=Ft.matches||Fe,it=Ft.pendingActionResult,Ie=w0(ae,ce.submission),Je=!1,Be.active=!1,$e=Ju(t.history,$e.url,$e.signal)}let{shortCircuited:We,matches:et,loaderData:wt,errors:Ut}=await ms($e,ae,Fe,Ye,Be.active,Ie,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,Je,it);We||(L=null,_n(ae,{matches:et||Fe,...FT(it),loaderData:wt,errors:Ut}))}async function Ur(ee,ae,ce,Te,Ie,Fe,Je,Be={}){ys();let $e=O6(ae,ce);if(Gt({navigation:$e},{flushSync:Be.flushSync===!0}),Fe){let We=await On(Te,ae.pathname,ee.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){let et=Mc(We.partialMatches).route.id;return{matches:We.partialMatches,pendingActionResult:[et,{type:"error",error:We.error}]}}else if(We.matches)Te=We.matches;else{let{notFoundMatches:et,error:wt,route:Ut}=Qi(ae.pathname);return{matches:et,pendingActionResult:[Ut.id,{type:"error",error:wt}]}}}let Ye,it=td(Te,ae);if(!it.route.action&&!it.route.lazy)Ye={type:"error",error:hs(405,{method:ee.method,pathname:ae.pathname,routeId:it.route.id})};else{let We=ff(i,o,ee,Te,it,Je?[]:r,Ie),et=await ei(ee,We,Ie,null);if(Ye=et[it.route.id],!Ye){for(let wt of Te)if(et[wt.route.id]){Ye=et[wt.route.id];break}}if(ee.signal.aborted)return{shortCircuited:!0}}if(kc(Ye)){let We;return Be&&Be.replace!=null?We=Be.replace:We=LT(Ye.response.headers.get("Location"),new URL(ee.url),p)===$.location.pathname+$.location.search,await hr(ee,Ye,!0,{submission:ce,replace:We}),{shortCircuited:!0}}if(zi(Ye)){let We=Mc(Te,it.route.id);return(Be&&Be.replace)!==!0&&(F="PUSH"),{matches:Te,pendingActionResult:[We.route.id,Ye,it.route.id]}}return{matches:Te,pendingActionResult:[it.route.id,Ye]}}async function ms(ee,ae,ce,Te,Ie,Fe,Je,Be,$e,Ye,it,We){let et=Fe||w0(ae,Je),wt=Je||Be||HT(et),Ut=!K&&!Ye;if(Ie){if(Ut){let In=Ln(We);Gt({navigation:et,...In!==void 0?{actionData:In}:{}},{flushSync:it})}let ht=await On(ce,ae.pathname,ee.signal);if(ht.type==="aborted")return{shortCircuited:!0};if(ht.type==="error"){let In=Mc(ht.partialMatches).route.id;return{matches:ht.partialMatches,loaderData:{},errors:{[In]:ht.error}}}else if(ht.matches)ce=ht.matches;else{let{error:In,notFoundMatches:jr,route:Fr}=Qi(ae.pathname);return{matches:jr,loaderData:{},errors:{[Fr.id]:In}}}}let Ft=d||c,{dsMatches:It,revalidatingFetchers:Ne}=PT(ee,Te,i,o,t.history,$,ce,wt,ae,Ye?[]:r,Ye===!0,ne,Pe,ve,ge,Q,Ft,p,t.patchRoutesOnNavigation!=null,We);if(Ae=++oe,!t.dataStrategy&&!It.some(ht=>ht.shouldLoad)&&Ne.length===0){let ht=Oi();return _n(ae,{matches:ce,loaderData:{},errors:We&&zi(We[1])?{[We[0]]:We[1].error}:null,...FT(We),...ht?{fetchers:new Map($.fetchers)}:{}},{flushSync:it}),{shortCircuited:!0}}if(Ut){let ht={};if(!Ie){ht.navigation=et;let In=Ln(We);In!==void 0&&(ht.actionData=In)}Ne.length>0&&(ht.fetchers=Er(Ne)),Gt(ht,{flushSync:it})}Ne.forEach(ht=>{ti(ht.key),ht.controller&&J.set(ht.key,ht.controller)});let hi=()=>Ne.forEach(ht=>ti(ht.key));L&&L.signal.addEventListener("abort",hi);let{loaderResults:Un,fetcherResults:tr}=await Ai(It,Ne,ee,Te);if(ee.signal.aborted)return{shortCircuited:!0};L&&L.signal.removeEventListener("abort",hi),Ne.forEach(ht=>J.delete(ht.key));let Hn=yg(Un);if(Hn)return await hr(ee,Hn.result,!0,{replace:$e}),{shortCircuited:!0};if(Hn=yg(tr),Hn)return Q.add(Hn.key),await hr(ee,Hn.result,!0,{replace:$e}),{shortCircuited:!0};let{loaderData:qt,errors:Vr}=VT($,ce,Un,We,Ne,tr);Ye&&$.errors&&(Vr={...$.errors,...Vr});let Ys=Oi(),Vn=ui(Ae),nr=Ys||Vn||Ne.length>0;return{matches:ce,loaderData:qt,errors:Vr,...nr?{fetchers:new Map($.fetchers)}:{}}}function Ln(ee){if(ee&&!zi(ee[1]))return{[ee[0]]:ee[1].data};if($.actionData)return Object.keys($.actionData).length===0?null:$.actionData}function Er(ee){return ee.forEach(ae=>{let ce=$.fetchers.get(ae.key),Te=qh(void 0,ce?ce.data:void 0);$.fetchers.set(ae.key,Te)}),new Map($.fetchers)}async function er(ee,ae,ce,Te){ti(ee);let Ie=(Te&&Te.flushSync)===!0,Fe=d||c,Je=Eb($.location,$.matches,p,ce,ae,Te==null?void 0:Te.relative),Be=Cl(Fe,Je,p),$e=Tr(Be,Fe,Je);if($e.active&&$e.matches&&(Be=$e.matches),!Be){nt(ee,ae,hs(404,{pathname:Je}),{flushSync:Ie});return}let{path:Ye,submission:it,error:We}=xT(!0,Je,Te);if(We){nt(ee,ae,We,{flushSync:Ie});return}let et=td(Be,Ye),wt=new OT(t.unstable_getContext?await t.unstable_getContext():void 0),Ut=(Te&&Te.preventScrollReset)===!0;if(it&&Hi(it.formMethod)){await un(ee,ae,Ye,et,Be,wt,$e.active,Ie,Ut,it);return}ge.set(ee,{routeId:ae,path:Ye}),await Tt(ee,ae,Ye,et,Be,wt,$e.active,Ie,Ut,it)}async function un(ee,ae,ce,Te,Ie,Fe,Je,Be,$e,Ye){ys(),ge.delete(ee);function it(Xt){if(!Xt.route.action&&!Xt.route.lazy){let di=hs(405,{method:Ye.formMethod,pathname:ce,routeId:ae});return nt(ee,ae,di,{flushSync:Be}),!0}return!1}if(!Je&&it(Te))return;let We=$.fetchers.get(ee);jt(ee,I6(Ye,We),{flushSync:Be});let et=new AbortController,wt=Ju(t.history,ce,et.signal,Ye);if(Je){let Xt=await On(Ie,ce,wt.signal,ee);if(Xt.type==="aborted")return;if(Xt.type==="error"){nt(ee,ae,Xt.error,{flushSync:Be});return}else if(Xt.matches){if(Ie=Xt.matches,Te=td(Ie,ce),it(Te))return}else{nt(ee,ae,hs(404,{pathname:ce}),{flushSync:Be});return}}J.set(ee,et);let Ut=oe,Ft=ff(i,o,wt,Ie,Te,r,Fe),Ne=(await ei(wt,Ft,Fe,ee))[Te.route.id];if(wt.signal.aborted){J.get(ee)===et&&J.delete(ee);return}if(ve.has(ee)){if(kc(Ne)||zi(Ne)){jt(ee,_l(void 0));return}}else{if(kc(Ne))if(J.delete(ee),Ae>Ut){jt(ee,_l(void 0));return}else return Q.add(ee),jt(ee,qh(Ye)),hr(wt,Ne,!1,{fetcherSubmission:Ye,preventScrollReset:$e});if(zi(Ne)){nt(ee,ae,Ne.error);return}}let hi=$.navigation.location||$.location,Un=Ju(t.history,hi,et.signal),tr=d||c,Hn=$.navigation.state!=="idle"?Cl(tr,$.navigation.location,p):$.matches;Rt(Hn,"Didn't find any matches after fetcher action");let qt=++oe;Ue.set(ee,qt);let Vr=qh(Ye,Ne.data);$.fetchers.set(ee,Vr);let{dsMatches:Ys,revalidatingFetchers:Vn}=PT(Un,Fe,i,o,t.history,$,Hn,Ye,hi,r,!1,ne,Pe,ve,ge,Q,tr,p,t.patchRoutesOnNavigation!=null,[Te.route.id,Ne]);Vn.filter(Xt=>Xt.key!==ee).forEach(Xt=>{let di=Xt.key,Zi=$.fetchers.get(di),rr=qh(void 0,Zi?Zi.data:void 0);$.fetchers.set(di,rr),ti(di),Xt.controller&&J.set(di,Xt.controller)}),Gt({fetchers:new Map($.fetchers)});let nr=()=>Vn.forEach(Xt=>ti(Xt.key));et.signal.addEventListener("abort",nr);let{loaderResults:ht,fetcherResults:In}=await Ai(Ys,Vn,Un,Fe);if(et.signal.aborted)return;if(et.signal.removeEventListener("abort",nr),Ue.delete(ee),J.delete(ee),Vn.forEach(Xt=>J.delete(Xt.key)),$.fetchers.has(ee)){let Xt=_l(Ne.data);$.fetchers.set(ee,Xt)}let jr=yg(ht);if(jr)return hr(Un,jr.result,!1,{preventScrollReset:$e});if(jr=yg(In),jr)return Q.add(jr.key),hr(Un,jr.result,!1,{preventScrollReset:$e});let{loaderData:Fr,errors:xi}=VT($,Hn,ht,void 0,Vn,In);ui(qt),$.navigation.state==="loading"&&qt>Ae?(Rt(F,"Expected pending action"),L&&L.abort(),_n($.navigation.location,{matches:Hn,loaderData:Fr,errors:xi,fetchers:new Map($.fetchers)})):(Gt({errors:xi,loaderData:jT($.loaderData,Fr,Hn,xi),fetchers:new Map($.fetchers)}),ne=!1)}async function Tt(ee,ae,ce,Te,Ie,Fe,Je,Be,$e,Ye){let it=$.fetchers.get(ee);jt(ee,qh(Ye,it?it.data:void 0),{flushSync:Be});let We=new AbortController,et=Ju(t.history,ce,We.signal);if(Je){let Ne=await On(Ie,ce,et.signal,ee);if(Ne.type==="aborted")return;if(Ne.type==="error"){nt(ee,ae,Ne.error,{flushSync:Be});return}else if(Ne.matches)Ie=Ne.matches,Te=td(Ie,ce);else{nt(ee,ae,hs(404,{pathname:ce}),{flushSync:Be});return}}J.set(ee,We);let wt=oe,Ut=ff(i,o,et,Ie,Te,r,Fe),It=(await ei(et,Ut,Fe,ee))[Te.route.id];if(J.get(ee)===We&&J.delete(ee),!et.signal.aborted){if(ve.has(ee)){jt(ee,_l(void 0));return}if(kc(It))if(Ae>wt){jt(ee,_l(void 0));return}else{Q.add(ee),await hr(et,It,!1,{preventScrollReset:$e});return}if(zi(It)){nt(ee,ae,It.error);return}jt(ee,_l(It.data))}}async function hr(ee,ae,ce,{submission:Te,fetcherSubmission:Ie,preventScrollReset:Fe,replace:Je}={}){ae.response.headers.has("X-Remix-Revalidate")&&(ne=!0);let Be=ae.response.headers.get("Location");Rt(Be,"Expected a Location header on the redirect Response"),Be=LT(Be,new URL(ee.url),p);let $e=Sd($.location,Be,{_isRedirect:!0});if(n){let Ut=!1;if(ae.response.headers.has("X-Remix-Reload-Document"))Ut=!0;else if(W_.test(Be)){const Ft=oI(Be,!0);Ut=Ft.origin!==e.location.origin||Ti(Ft.pathname,p)==null}if(Ut){Je?e.location.replace(Be):e.location.assign(Be);return}}L=null;let Ye=Je===!0||ae.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:it,formAction:We,formEncType:et}=$.navigation;!Te&&!Ie&&it&&We&&et&&(Te=HT($.navigation));let wt=Te||Ie;if(f6.has(ae.response.status)&&wt&&Hi(wt.formMethod))await Sn(Ye,$e,{submission:{...wt,formAction:Be},preventScrollReset:Fe||D,enableViewTransition:ce?G:void 0});else{let Ut=w0($e,Te);await Sn(Ye,$e,{overrideNavigation:Ut,fetcherSubmission:Ie,preventScrollReset:Fe||D,enableViewTransition:ce?G:void 0})}}async function ei(ee,ae,ce,Te){let Ie,Fe={};try{Ie=await _6(g,ee,ae,Te,ce,!1)}catch(Je){return ae.filter(Be=>Be.shouldLoad).forEach(Be=>{Fe[Be.route.id]={type:"error",error:Je}}),Fe}if(ee.signal.aborted)return Fe;for(let[Je,Be]of Object.entries(Ie))if(A6(Be)){let $e=Be.result;Fe[Je]={type:"redirect",response:w6($e,ee,Je,ae,p)}}else Fe[Je]=await E6(Be);return Fe}async function Ai(ee,ae,ce,Te){let Ie=ei(ce,ee,Te,null),Fe=Promise.all(ae.map(async $e=>{if($e.matches&&$e.match&&$e.request&&$e.controller){let it=(await ei($e.request,$e.matches,Te,$e.key))[$e.match.route.id];return{[$e.key]:it}}else return Promise.resolve({[$e.key]:{type:"error",error:hs(404,{pathname:$e.path})}})})),Je=await Ie,Be=(await Fe).reduce(($e,Ye)=>Object.assign($e,Ye),{});return{loaderResults:Je,fetcherResults:Be}}function ys(){ne=!0,ge.forEach((ee,ae)=>{J.has(ae)&&Pe.add(ae),ti(ae)})}function jt(ee,ae,ce={}){$.fetchers.set(ee,ae),Gt({fetchers:new Map($.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function nt(ee,ae,ce,Te={}){let Ie=Mc($.matches,ae);Ht(ee),Gt({errors:{[Ie.route.id]:ce},fetchers:new Map($.fetchers)},{flushSync:(Te&&Te.flushSync)===!0})}function Qt(ee){return ye.set(ee,(ye.get(ee)||0)+1),ve.has(ee)&&ve.delete(ee),$.fetchers.get(ee)||h6}function Ht(ee){let ae=$.fetchers.get(ee);J.has(ee)&&!(ae&&ae.state==="loading"&&Ue.has(ee))&&ti(ee),ge.delete(ee),Ue.delete(ee),Q.delete(ee),ve.delete(ee),Pe.delete(ee),$.fetchers.delete(ee)}function Ws(ee){let ae=(ye.get(ee)||0)-1;ae<=0?(ye.delete(ee),ve.add(ee)):ye.set(ee,ae),Gt({fetchers:new Map($.fetchers)})}function ti(ee){let ae=J.get(ee);ae&&(ae.abort(),J.delete(ee))}function Ri(ee){for(let ae of ee){let ce=Qt(ae),Te=_l(ce.data);$.fetchers.set(ae,Te)}}function Oi(){let ee=[],ae=!1;for(let ce of Q){let Te=$.fetchers.get(ce);Rt(Te,`Expected fetcher: ${ce}`),Te.state==="loading"&&(Q.delete(ce),ee.push(ce),ae=!0)}return Ri(ee),ae}function ui(ee){let ae=[];for(let[ce,Te]of Ue)if(Te<ee){let Ie=$.fetchers.get(ce);Rt(Ie,`Expected fetcher: ${ce}`),Ie.state==="loading"&&(ti(ce),Ue.delete(ce),ae.push(ce))}return Ri(ae),ae.length>0}function wr(ee,ae){let ce=$.blockers.get(ee)||Xu;return ke.get(ee)!==ae&&ke.set(ee,ae),ce}function Yi(ee){$.blockers.delete(ee),ke.delete(ee)}function ni(ee,ae){let ce=$.blockers.get(ee)||Xu;Rt(ce.state==="unblocked"&&ae.state==="blocked"||ce.state==="blocked"&&ae.state==="blocked"||ce.state==="blocked"&&ae.state==="proceeding"||ce.state==="blocked"&&ae.state==="unblocked"||ce.state==="proceeding"&&ae.state==="unblocked",`Invalid blocker state transition: ${ce.state} -> ${ae.state}`);let Te=new Map($.blockers);Te.set(ee,ae),Gt({blockers:Te})}function Ii({currentLocation:ee,nextLocation:ae,historyAction:ce}){if(ke.size===0)return;ke.size>1&&Tn(!1,"A router only supports one blocker at a time");let Te=Array.from(ke.entries()),[Ie,Fe]=Te[Te.length-1],Je=$.blockers.get(Ie);if(!(Je&&Je.state==="proceeding")&&Fe({currentLocation:ee,nextLocation:ae,historyAction:ce}))return Ie}function Qi(ee){let ae=hs(404,{pathname:ee}),ce=d||c,{matches:Te,route:Ie}=BT(ce);return{notFoundMatches:Te,route:Ie,error:ae}}function Xi(ee,ae,ce){if(O=ee,N=ae,x=ce||null,!k&&$.navigation===E0){k=!0;let Te=vs($.location,$.matches);Te!=null&&Gt({restoreScrollPosition:Te})}return()=>{O=null,N=null,x=null}}function rn(ee,ae){return x&&x(ee,ae.map(Te=>H3(Te,$.loaderData)))||ee.key}function fi(ee,ae){if(O&&N){let ce=rn(ee,ae);O[ce]=N()}}function vs(ee,ae){if(O){let ce=rn(ee,ae),Te=O[ce];if(typeof Te=="number")return Te}return null}function Tr(ee,ae,ce){if(t.patchRoutesOnNavigation)if(ee){if(Object.keys(ee[0].params).length>0)return{active:!0,matches:$g(ae,ce,p,!0)}}else return{active:!0,matches:$g(ae,ce,p,!0)||[]};return{active:!1,matches:null}}async function On(ee,ae,ce,Te){if(!t.patchRoutesOnNavigation)return{type:"success",matches:ee};let Ie=ee;for(;;){let Fe=d==null,Je=d||c,Be=o;try{await t.patchRoutesOnNavigation({signal:ce,path:ae,matches:Ie,fetcherKey:Te,patch:(it,We)=>{ce.aborted||MT(it,We,Je,Be,i)}})}catch(it){return{type:"error",error:it,partialMatches:Ie}}finally{Fe&&!ce.aborted&&(c=[...c])}if(ce.aborted)return{type:"aborted"};let $e=Cl(Je,ae,p);if($e)return{type:"success",matches:$e};let Ye=$g(Je,ae,p,!0);if(!Ye||Ie.length===Ye.length&&Ie.every((it,We)=>it.route.id===Ye[We].route.id))return{type:"success",matches:null};Ie=Ye}}function Ji(ee){o={},d=Sm(ee,i,void 0,o)}function Ks(ee,ae){let ce=d==null;MT(ee,ae,d||c,o,i),ce&&(c=[...c],Gt({}))}return W={get basename(){return p},get future(){return b},get state(){return $},get routes(){return c},get window(){return e},initialize:Ot,subscribe:An,enableScrollRestoration:Xi,navigate:Rn,fetch:er,revalidate:Lr,createHref:ee=>t.history.createHref(ee),encodeLocation:ee=>t.history.encodeLocation(ee),getFetcher:Qt,deleteFetcher:Ws,dispose:gt,getBlocker:wr,deleteBlocker:Yi,patchRoutes:Ks,_internalFetchControllers:J,_internalSetRoutes:Ji},W}function g6(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Eb(t,e,n,r,i,o){let c,d;if(i){c=[];for(let g of e)if(c.push(g),g.route.id===i){d=g;break}}else c=e,d=e[e.length-1];let p=ly(r||".",oy(c),Ti(t.pathname,n)||t.pathname,o==="path");if(r==null&&(p.search=t.search,p.hash=t.hash),(r==null||r===""||r===".")&&d){let g=K_(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let b=new URLSearchParams(p.search),E=b.getAll("index");b.delete("index"),E.filter(O=>O).forEach(O=>b.append("index",O));let C=b.toString();p.search=C?`?${C}`:""}}return n!=="/"&&(p.pathname=p.pathname==="/"?n:wa([n,p.pathname])),Dl(p)}function xT(t,e,n){if(!n||!g6(n))return{path:e};if(n.formMethod&&!R6(n.formMethod))return{path:e,error:hs(405,{method:n.formMethod})};let r=()=>({path:e,error:hs(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),c=bI(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Hi(o))return r();let E=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((C,[O,x])=>`${C}${O}=${x}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:E}}}else if(n.formEncType==="application/json"){if(!Hi(o))return r();try{let E=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:c,formEncType:n.formEncType,formData:void 0,json:E,text:void 0}}}catch{return r()}}}Rt(typeof FormData=="function","FormData is not available in this environment");let d,p;if(n.formData)d=Cb(n.formData),p=n.formData;else if(n.body instanceof FormData)d=Cb(n.body),p=n.body;else if(n.body instanceof URLSearchParams)d=n.body,p=UT(d);else if(n.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(n.body),p=UT(d)}catch{return r()}let g={formMethod:o,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Hi(g.formMethod))return{path:e,submission:g};let b=To(e);return t&&b.search&&K_(b.search)&&d.append("index",""),b.search=`?${d}`,{path:Dl(b),submission:g}}function PT(t,e,n,r,i,o,c,d,p,g,b,E,C,O,x,N,k,V,X,q){var K;let H=q?zi(q[1])?q[1].error:q[1].data:void 0,W=i.createURL(o.location),$=i.createURL(p),F;if(b&&o.errors){let ne=Object.keys(o.errors)[0];F=c.findIndex(Pe=>Pe.route.id===ne)}else if(q&&zi(q[1])){let ne=q[0];F=c.findIndex(Pe=>Pe.route.id===ne)-1}let D=q?q[1].statusCode:void 0,L=D&&D>=400,G={currentUrl:W,currentParams:((K=o.matches[0])==null?void 0:K.params)||{},nextUrl:$,nextParams:c[0].params,...d,actionResult:H,actionStatus:D},T=c.map((ne,Pe)=>{let{route:J}=ne,oe=null;if(F!=null&&Pe>F?oe=!1:J.lazy?oe=!0:J.loader==null?oe=!1:b?oe=wb(J,o.loaderData,o.errors):m6(o.loaderData,o.matches[Pe],ne)&&(oe=!0),oe!==null)return Tb(n,r,t,ne,g,e,oe);let Ae=L?!1:E||W.pathname+W.search===$.pathname+$.search||W.search!==$.search||y6(o.matches[Pe],ne),Ue={...G,defaultShouldRevalidate:Ae},Q=Tm(ne,Ue);return Tb(n,r,t,ne,g,e,Q,Ue)}),te=[];return x.forEach((ne,Pe)=>{if(b||!c.some(ve=>ve.route.id===ne.routeId)||O.has(Pe))return;let J=o.fetchers.get(Pe),oe=J&&J.state!=="idle"&&J.data===void 0,Ae=Cl(k,ne.path,V);if(!Ae){if(X&&oe)return;te.push({key:Pe,routeId:ne.routeId,path:ne.path,matches:null,match:null,request:null,controller:null});return}if(N.has(Pe))return;let Ue=td(Ae,ne.path),Q=new AbortController,ge=Ju(i,ne.path,Q.signal),ye=null;if(C.has(Pe))C.delete(Pe),ye=ff(n,r,ge,Ae,Ue,g,e);else if(oe)E&&(ye=ff(n,r,ge,Ae,Ue,g,e));else{let ve={...G,defaultShouldRevalidate:L?!1:E};Tm(Ue,ve)&&(ye=ff(n,r,ge,Ae,Ue,g,e,ve))}ye&&te.push({key:Pe,routeId:ne.routeId,path:ne.path,matches:ye,match:Ue,request:ge,controller:Q})}),{dsMatches:T,revalidatingFetchers:te}}function wb(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function m6(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function y6(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Tm(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function MT(t,e,n,r,i){let o;if(t){let p=r[t];Rt(p,`No route found to patch children into: routeId = ${t}`),p.children||(p.children=[]),o=p.children}else o=n;let c=e.filter(p=>!o.some(g=>pI(p,g))),d=Sm(c,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...d)}function pI(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>pI(n,o))}):!1}var kT=new WeakMap,gI=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(Rt(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[t];if(!o)return;let c=kT.get(i);c||(c={},kT.set(i,c));let d=c[t];if(d)return d;let p=(async()=>{let g=j3(t),E=i[t]!==void 0&&t!=="hasErrorBoundary";if(g)Tn(!g,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),c[t]=Promise.resolve();else if(E)Tn(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let C=await o();C!=null&&(Object.assign(i,{[t]:C}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(C=>C===void 0)&&(i.lazy=void 0))})();return c[t]=p,p},DT=new WeakMap;function v6(t,e,n,r,i){let o=n[t.id];if(Rt(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let b=DT.get(o);if(b)return{lazyRoutePromise:b,lazyHandlerPromise:b};let E=(async()=>{Rt(typeof t.lazy=="function","No lazy route function found");let C=await t.lazy(),O={};for(let x in C){let N=C[x];if(N===void 0)continue;let k=B3(x),X=o[x]!==void 0&&x!=="hasErrorBoundary";k?Tn(!k,"Route property "+x+" is not a supported property to be returned from a lazy route function. This property will be ignored."):X?Tn(!X,`Route "${o.id}" has a static property "${x}" defined but its lazy function is also returning a value for this property. The lazy route property "${x}" will be ignored.`):O[x]=N}Object.assign(o,O),Object.assign(o,{...r(o),lazy:void 0})})();return DT.set(o,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(t.lazy),d=[],p;for(let b of c){if(i&&i.includes(b))continue;let E=gI({key:b,route:t,manifest:n,mapRouteProperties:r});E&&(d.push(E),b===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function NT(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{n[e[o].route.id]=i}),n}async function b6(t){return t.matches.some(e=>e.route.unstable_middleware)?mI(t,!1,()=>NT(t),(e,n)=>({[n]:{type:"error",result:e}})):NT(t)}async function mI(t,e,n,r){let{matches:i,request:o,params:c,context:d}=t,p={handlerResult:void 0};try{let g=i.flatMap(E=>E.route.unstable_middleware?E.route.unstable_middleware.map(C=>[E.route.id,C]):[]),b=await yI({request:o,params:c,context:d},g,e,p,n);return e?b:p.handlerResult}catch(g){if(!p.middlewareError)throw g;let b=await r(p.middlewareError.error,p.middlewareError.routeId);return p.handlerResult?Object.assign(p.handlerResult,b):b}}async function yI(t,e,n,r,i,o=0){let{request:c}=t;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let d=e[o];if(!d)return r.handlerResult=await i(),r.handlerResult;let[p,g]=d,b=!1,E,C=async()=>{if(b)throw new Error("You may only call `next()` once per middleware");b=!0,await yI(t,e,n,r,i,o+1)};try{let O=await g({request:t.request,params:t.params,context:t.context},C);return b?O===void 0?E:O:C()}catch(O){throw r.middlewareError?r.middlewareError.error!==O&&(r.middlewareError={routeId:p,error:O}):r.middlewareError={routeId:p,error:O},O}}function vI(t,e,n,r,i){let o=gI({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),c=v6(r.route,Hi(n.method)?"action":"loader",e,t,i);return{middleware:o,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Tb(t,e,n,r,i,o,c,d=null){let p=!1,g=vI(t,e,n,r,i);return{...r,_lazyPromises:g,shouldLoad:c,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(b){return p=!0,d?typeof b=="boolean"?Tm(r,{...d,defaultShouldRevalidate:b}):Tm(r,d):c},resolve(b){return p||c||b&&n.method==="GET"&&(r.route.lazy||r.route.loader)?S6({request:n,match:r,lazyHandlerPromise:g==null?void 0:g.handler,lazyRoutePromise:g==null?void 0:g.route,handlerOverride:b,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function ff(t,e,n,r,i,o,c,d=null){return r.map(p=>p.route.id!==i.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:vI(t,e,n,p,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Tb(t,e,n,p,o,c,!0,d))}async function _6(t,e,n,r,i,o){n.some(g=>{var b;return(b=g._lazyPromises)==null?void 0:b.middleware})&&await Promise.all(n.map(g=>{var b;return(b=g._lazyPromises)==null?void 0:b.middleware}));let c={request:e,params:n[0].params,context:i,matches:n},p=await t({...c,fetcherKey:r,unstable_runClientMiddleware:g=>{let b=c;return mI(b,!1,()=>g({...b,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(E,C)=>({[C]:{type:"error",result:E}}))}});try{await Promise.all(n.flatMap(g=>{var b,E;return[(b=g._lazyPromises)==null?void 0:b.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function S6({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:o}){let c,d,p=Hi(t.method),g=p?"action":"loader",b=E=>{let C,O=new Promise((k,V)=>C=V);d=()=>C(),t.signal.addEventListener("abort",d);let x=k=>typeof E!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${e.route.id}]`)):E({request:t,params:e.params,context:o},...k!==void 0?[k]:[]),N=(async()=>{try{return{type:"data",result:await(i?i(V=>x(V)):x())}}catch(k){return{type:"error",result:k}}})();return Promise.race([N,O])};try{let E=p?e.route.action:e.route.loader;if(n||r)if(E){let C,[O]=await Promise.all([b(E).catch(x=>{C=x}),n,r]);if(C!==void 0)throw C;c=O}else{await n;let C=p?e.route.action:e.route.loader;if(C)[c]=await Promise.all([b(C),r]);else if(g==="action"){let O=new URL(t.url),x=O.pathname+O.search;throw hs(405,{method:t.method,pathname:x,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(E)c=await b(E);else{let C=new URL(t.url),O=C.pathname+C.search;throw hs(404,{pathname:O})}}catch(E){return{type:"error",result:E}}finally{d&&t.signal.removeEventListener("abort",d)}return c}async function E6(t){var r,i,o,c,d,p;let{result:e,type:n}=t;if(_I(e)){let g;try{let b=e.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?e.body==null?g=null:g=await e.json():g=await e.text()}catch(b){return{type:"error",error:b}}return n==="error"?{type:"error",error:new wm(e.status,e.statusText,g),statusCode:e.status,headers:e.headers}:{type:"data",data:g,statusCode:e.status,headers:e.headers}}return n==="error"?zT(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new wm(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:Ed(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Ed(e)?e.status:void 0}:zT(e)?{type:"data",data:e.data,statusCode:(d=e.init)==null?void 0:d.status,headers:(p=e.init)!=null&&p.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function w6(t,e,n,r,i){let o=t.headers.get("Location");if(Rt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!W_.test(o)){let c=r.slice(0,r.findIndex(d=>d.route.id===n)+1);o=Eb(new URL(e.url),c,i,o),t.headers.set("Location",o)}return t}function LT(t,e,n){if(W_.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Ti(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Ju(t,e,n,r){let i=t.createURL(bI(e)).toString(),o={signal:n};if(r&&Hi(r.formMethod)){let{formMethod:c,formEncType:d}=r;o.method=c.toUpperCase(),d==="application/json"?(o.headers=new Headers({"Content-Type":d}),o.body=JSON.stringify(r.json)):d==="text/plain"?o.body=r.text:d==="application/x-www-form-urlencoded"&&r.formData?o.body=Cb(r.formData):o.body=r.formData}return new Request(i,o)}function Cb(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function UT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function T6(t,e,n,r=!1,i=!1){let o={},c=null,d,p=!1,g={},b=n&&zi(n[1])?n[1].error:void 0;return t.forEach(E=>{if(!(E.route.id in e))return;let C=E.route.id,O=e[C];if(Rt(!kc(O),"Cannot handle redirect results in processLoaderData"),zi(O)){let x=O.error;if(b!==void 0&&(x=b,b=void 0),c=c||{},i)c[C]=x;else{let N=Mc(t,C);c[N.route.id]==null&&(c[N.route.id]=x)}r||(o[C]=dI),p||(p=!0,d=Ed(O.error)?O.error.status:500),O.headers&&(g[C]=O.headers)}else o[C]=O.data,O.statusCode&&O.statusCode!==200&&!p&&(d=O.statusCode),O.headers&&(g[C]=O.headers)}),b!==void 0&&n&&(c={[n[0]]:b},n[2]&&(o[n[2]]=void 0)),{loaderData:o,errors:c,statusCode:d||200,loaderHeaders:g}}function VT(t,e,n,r,i,o){let{loaderData:c,errors:d}=T6(e,n,r);return i.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:b,controller:E}=p,C=o[g];if(Rt(C,"Did not find corresponding fetcher result"),!(E&&E.signal.aborted))if(zi(C)){let O=Mc(t.matches,b==null?void 0:b.route.id);d&&d[O.route.id]||(d={...d,[O.route.id]:C.error}),t.fetchers.delete(g)}else if(kc(C))Rt(!1,"Unhandled fetcher revalidation redirect");else{let O=_l(C.data);t.fetchers.set(g,O)}}),{loaderData:c,errors:d}}function jT(t,e,n,r){let i=Object.entries(e).filter(([,o])=>o!==dI).reduce((o,[c,d])=>(o[c]=d,o),{});for(let o of n){let c=o.route.id;if(!e.hasOwnProperty(c)&&t.hasOwnProperty(c)&&o.route.loader&&(i[c]=t[c]),r&&r.hasOwnProperty(c))break}return i}function FT(t){return t?zi(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Mc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function BT(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function hs(t,{pathname:e,routeId:n,method:r,type:i,message:o}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return t===400?(c="Bad Request",r&&e&&n?d=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(d="Unable to encode submission body")):t===403?(c="Forbidden",d=`Route "${n}" does not match URL "${e}"`):t===404?(c="Not Found",d=`No route matches URL "${e}"`):t===405&&(c="Method Not Allowed",r&&e&&n?d=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(d=`Invalid request method "${r.toUpperCase()}"`)),new wm(t||500,c,new Error(d),!0)}function yg(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(kc(i))return{key:r,result:i}}}function bI(t){let e=typeof t=="string"?To(t):t;return Dl({...e,hash:""})}function C6(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function A6(t){return _I(t.result)&&u6.has(t.result.status)}function zi(t){return t.type==="error"}function kc(t){return(t&&t.type)==="redirect"}function zT(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function _I(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function R6(t){return c6.has(t.toUpperCase())}function Hi(t){return o6.has(t.toUpperCase())}function K_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function td(t,e){let n=typeof e=="string"?To(e).search:e.search;if(t[t.length-1].route.index&&K_(n||""))return t[t.length-1];let r=uI(t);return r[r.length-1]}function HT(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:c}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:c,text:void 0}}}function w0(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function O6(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function qh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function I6(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function _l(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function x6(t,e){try{let n=t.sessionStorage.getItem(hI);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function P6(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(hI,JSON.stringify(n))}catch(r){Tn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function M6(){let t,e,n=new Promise((r,i)=>{t=async o=>{r(o);try{await n}catch{}},e=async o=>{i(o);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Qc=M.createContext(null);Qc.displayName="DataRouter";var Wd=M.createContext(null);Wd.displayName="DataRouterState";var Y_=M.createContext({isTransitioning:!1});Y_.displayName="ViewTransition";var SI=M.createContext(new Map);SI.displayName="Fetchers";var k6=M.createContext(null);k6.displayName="Await";var $s=M.createContext(null);$s.displayName="Navigation";var cy=M.createContext(null);cy.displayName="Location";var Gs=M.createContext({outlet:null,matches:[],isDataRoute:!1});Gs.displayName="Route";var Q_=M.createContext(null);Q_.displayName="RouteError";function D6(t,{relative:e}={}){Rt(Mf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext($s),{hash:i,pathname:o,search:c}=Kd(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:wa([n,o])),r.createHref({pathname:d,search:c,hash:i})}function Mf(){return M.useContext(cy)!=null}function xa(){return Rt(Mf(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(cy).location}var EI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wI(t){M.useContext($s).static||M.useLayoutEffect(t)}function kf(){let{isDataRoute:t}=M.useContext(Gs);return t?Y6():N6()}function N6(){Rt(Mf(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Qc),{basename:e,navigator:n}=M.useContext($s),{matches:r}=M.useContext(Gs),{pathname:i}=xa(),o=JSON.stringify(oy(r)),c=M.useRef(!1);return wI(()=>{c.current=!0}),M.useCallback((p,g={})=>{if(Tn(c.current,EI),!c.current)return;if(typeof p=="number"){n.go(p);return}let b=ly(p,JSON.parse(o),i,g.relative==="path");t==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:wa([e,b.pathname])),(g.replace?n.replace:n.push)(b,g.state,g)},[e,n,o,i,t])}var L6=M.createContext(null);function U6(t){let e=M.useContext(Gs).outlet;return e&&M.createElement(L6.Provider,{value:t},e)}function Kd(t,{relative:e}={}){let{matches:n}=M.useContext(Gs),{pathname:r}=xa(),i=JSON.stringify(oy(n));return M.useMemo(()=>ly(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function V6(t,e,n,r){Rt(Mf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext($s),{matches:o}=M.useContext(Gs),c=o[o.length-1],d=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",b=c&&c.route;{let V=b&&b.path||"";AI(p,!b||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let E=xa(),C;C=E;let O=C.pathname||"/",x=O;if(g!=="/"){let V=g.replace(/^\//,"").split("/");x="/"+O.replace(/^\//,"").split("/").slice(V.length).join("/")}let N=Cl(t,{pathname:x});return Tn(b||N!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Tn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),H6(N&&N.map(V=>Object.assign({},V,{params:Object.assign({},d,V.params),pathname:wa([g,i.encodeLocation?i.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?g:wa([g,i.encodeLocation?i.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,r)}function j6(){let t=G6(),e=Ed(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,c)}var F6=M.createElement(j6,null),B6=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(Gs.Provider,{value:this.props.routeContext},M.createElement(Q_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function z6({routeContext:t,match:e,children:n}){let r=M.useContext(Qc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Gs.Provider,{value:t},n)}function H6(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let p=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);Rt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,d=-1;if(n)for(let p=0;p<i.length;p++){let g=i[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:b,errors:E}=n,C=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||C){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((p,g,b)=>{let E,C=!1,O=null,x=null;n&&(E=o&&g.route.id?o[g.route.id]:void 0,O=g.route.errorElement||F6,c&&(d<0&&b===0?(AI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,x=null):d===b&&(C=!0,x=g.route.hydrateFallbackElement||null)));let N=e.concat(i.slice(0,b+1)),k=()=>{let V;return E?V=O:C?V=x:g.route.Component?V=M.createElement(g.route.Component,null):g.route.element?V=g.route.element:V=p,M.createElement(z6,{match:g,routeContext:{outlet:p,matches:N,isDataRoute:n!=null},children:V})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?M.createElement(B6,{location:n.location,revalidation:n.revalidation,component:O,error:E,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}function X_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TI(t){let e=M.useContext(Qc);return Rt(e,X_(t)),e}function CI(t){let e=M.useContext(Wd);return Rt(e,X_(t)),e}function q6(t){let e=M.useContext(Gs);return Rt(e,X_(t)),e}function J_(t){let e=q6(t),n=e.matches[e.matches.length-1];return Rt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function $6(){return J_("useRouteId")}function G6(){var r;let t=M.useContext(Q_),e=CI("useRouteError"),n=J_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}var W6=0;function K6(t){let{router:e,basename:n}=TI("useBlocker"),r=CI("useBlocker"),[i,o]=M.useState(""),c=M.useCallback(d=>{if(typeof t!="function")return!!t;if(n==="/")return t(d);let{currentLocation:p,nextLocation:g,historyAction:b}=d;return t({currentLocation:{...p,pathname:Ti(p.pathname,n)||p.pathname},nextLocation:{...g,pathname:Ti(g.pathname,n)||g.pathname},historyAction:b})},[n,t]);return M.useEffect(()=>{let d=String(++W6);return o(d),()=>e.deleteBlocker(d)},[e]),M.useEffect(()=>{i!==""&&e.getBlocker(i,c)},[e,i,c]),i&&r.blockers.has(i)?r.blockers.get(i):Xu}function Y6(){let{router:t}=TI("useNavigate"),e=J_("useNavigate"),n=M.useRef(!1);return wI(()=>{n.current=!0}),M.useCallback(async(i,o={})=>{Tn(n.current,EI),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var qT={};function AI(t,e,n){!e&&!qT[t]&&(qT[t]=!0,Tn(!1,n))}var $T={};function GT(t,e){!t&&!$T[e]&&($T[e]=!0,console.warn(e))}function Q6(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var X6=["HydrateFallback","hydrateFallbackElement"],J6=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function Z6({router:t,flushSync:e}){let[n,r]=M.useState(t.state),[i,o]=M.useState(),[c,d]=M.useState({isTransitioning:!1}),[p,g]=M.useState(),[b,E]=M.useState(),[C,O]=M.useState(),x=M.useRef(new Map),N=M.useCallback((q,{deletedFetchers:H,flushSync:W,viewTransitionOpts:$})=>{q.fetchers.forEach((D,L)=>{D.data!==void 0&&x.current.set(L,D.data)}),H.forEach(D=>x.current.delete(D)),GT(W===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let F=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(GT($==null||F,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!$||!F){e&&W?e(()=>r(q)):M.startTransition(()=>r(q));return}if(e&&W){e(()=>{b&&(p&&p.resolve(),b.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation})});let D=t.window.document.startViewTransition(()=>{e(()=>r(q))});D.finished.finally(()=>{e(()=>{g(void 0),E(void 0),o(void 0),d({isTransitioning:!1})})}),e(()=>E(D));return}b?(p&&p.resolve(),b.skipTransition(),O({state:q,currentLocation:$.currentLocation,nextLocation:$.nextLocation})):(o(q),d({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}))},[t.window,e,b,p]);M.useLayoutEffect(()=>t.subscribe(N),[t,N]),M.useEffect(()=>{c.isTransitioning&&!c.flushSync&&g(new J6)},[c]),M.useEffect(()=>{if(p&&i&&t.window){let q=i,H=p.promise,W=t.window.document.startViewTransition(async()=>{M.startTransition(()=>r(q)),await H});W.finished.finally(()=>{g(void 0),E(void 0),o(void 0),d({isTransitioning:!1})}),E(W)}},[i,p,t.window]),M.useEffect(()=>{p&&i&&n.location.key===i.location.key&&p.resolve()},[p,b,n.location,i]),M.useEffect(()=>{!c.isTransitioning&&C&&(o(C.state),d({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),O(void 0))},[c.isTransitioning,C]);let k=M.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:q=>t.navigate(q),push:(q,H,W)=>t.navigate(q,{state:H,preventScrollReset:W==null?void 0:W.preventScrollReset}),replace:(q,H,W)=>t.navigate(q,{replace:!0,state:H,preventScrollReset:W==null?void 0:W.preventScrollReset})}),[t]),V=t.basename||"/",X=M.useMemo(()=>({router:t,navigator:k,static:!1,basename:V}),[t,k,V]);return M.createElement(M.Fragment,null,M.createElement(Qc.Provider,{value:X},M.createElement(Wd.Provider,{value:n},M.createElement(SI.Provider,{value:x.current},M.createElement(Y_.Provider,{value:c},M.createElement(rU,{basename:V,location:n.location,navigationType:n.historyAction,navigator:k},M.createElement(eU,{routes:t.routes,future:t.future,state:n})))))),null)}var eU=M.memo(tU);function tU({routes:t,future:e,state:n}){return V6(t,void 0,n,e)}function RI({to:t,replace:e,state:n,relative:r}){Rt(Mf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext($s);Tn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Gs),{pathname:c}=xa(),d=kf(),p=ly(t,oy(o),c,r==="path"),g=JSON.stringify(p);return M.useEffect(()=>{d(JSON.parse(g),{replace:e,state:n,relative:r})},[d,g,r,e,n]),null}function nU(t){return U6(t.context)}function rU({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Rt(!Mf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof n=="string"&&(n=To(n));let{pathname:p="/",search:g="",hash:b="",state:E=null,key:C="default"}=n,O=M.useMemo(()=>{let x=Ti(p,c);return x==null?null:{location:{pathname:x,search:g,hash:b,state:E,key:C},navigationType:r}},[c,p,g,b,E,C,r]);return Tn(O!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${b}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:M.createElement($s.Provider,{value:d},M.createElement(cy.Provider,{children:e,value:O}))}var Gg="get",Wg="application/x-www-form-urlencoded";function uy(t){return t!=null&&typeof t.tagName=="string"}function iU(t){return uy(t)&&t.tagName.toLowerCase()==="button"}function sU(t){return uy(t)&&t.tagName.toLowerCase()==="form"}function aU(t){return uy(t)&&t.tagName.toLowerCase()==="input"}function oU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lU(t,e){return t.button===0&&(!e||e==="_self")&&!oU(t)}function Ab(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function cU(t,e){let n=Ab(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var vg=null;function uU(){if(vg===null)try{new FormData(document.createElement("form"),0),vg=!1}catch{vg=!0}return vg}var fU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function T0(t){return t!=null&&!fU.has(t)?(Tn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wg}"`),null):t}function hU(t,e){let n,r,i,o,c;if(sU(t)){let d=t.getAttribute("action");r=d?Ti(d,e):null,n=t.getAttribute("method")||Gg,i=T0(t.getAttribute("enctype"))||Wg,o=new FormData(t)}else if(iU(t)||aU(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(r=p?Ti(p,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Gg,i=T0(t.getAttribute("formenctype"))||T0(d.getAttribute("enctype"))||Wg,o=new FormData(d,t),!uU()){let{name:g,type:b,value:E}=t;if(b==="image"){let C=g?`${g}.`:"";o.append(`${C}x`,"0"),o.append(`${C}y`,"0")}else g&&o.append(g,E)}}else{if(uy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gg,r=null,i=Wg,c=t}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:c}}function Z_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function dU(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function gU(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await dU(o,n);return c.links?c.links():[]}return[]}));return bU(r.flat(1).filter(pU).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function WT(t,e,n,r,i,o){let c=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,d=(p,g)=>{var b;return n[g].pathname!==p.pathname||((b=n[g].route.path)==null?void 0:b.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return o==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):o==="data"?e.filter((p,g)=>{var E;let b=r.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function mU(t,e,{includeHydrateFallback:n}={}){return yU(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function yU(t){return[...new Set(t)]}function vU(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function bU(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(vU(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _U=new Set([100,101,204,205]);function SU(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ti(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function OI(){let t=M.useContext(Qc);return Z_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function EU(){let t=M.useContext(Wd);return Z_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var eS=M.createContext(void 0);eS.displayName="FrameworkContext";function II(){let t=M.useContext(eS);return Z_(t,"You must render this element inside a <HydratedRouter> element"),t}function wU(t,e){let n=M.useContext(eS),[r,i]=M.useState(!1),[o,c]=M.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:b,onTouchStart:E}=e,C=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let N=V=>{V.forEach(X=>{c(X.isIntersecting)})},k=new IntersectionObserver(N,{threshold:.5});return C.current&&k.observe(C.current),()=>{k.disconnect()}}},[t]),M.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let O=()=>{i(!0)},x=()=>{i(!1),c(!1)};return n?t!=="intent"?[o,C,{}]:[o,C,{onFocus:$h(d,O),onBlur:$h(p,x),onMouseEnter:$h(g,O),onMouseLeave:$h(b,x),onTouchStart:$h(E,O)}]:[!1,C,{}]}function $h(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function TU({page:t,...e}){let{router:n}=OI(),r=M.useMemo(()=>Cl(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?M.createElement(AU,{page:t,matches:r,...e}):null}function CU(t){let{manifest:e,routeModules:n}=II(),[r,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return gU(t,e,n).then(c=>{o||i(c)}),()=>{o=!0}},[t,e,n]),r}function AU({page:t,matches:e,...n}){let r=xa(),{manifest:i,routeModules:o}=II(),{basename:c}=OI(),{loaderData:d,matches:p}=EU(),g=M.useMemo(()=>WT(t,e,p,i,r,"data"),[t,e,p,i,r]),b=M.useMemo(()=>WT(t,e,p,i,r,"assets"),[t,e,p,i,r]),E=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,N=!1;if(e.forEach(V=>{var q;let X=i.routes[V.route.id];!X||!X.hasLoader||(!g.some(H=>H.route.id===V.route.id)&&V.route.id in d&&((q=o[V.route.id])!=null&&q.shouldRevalidate)||X.hasClientLoader?N=!0:x.add(V.route.id))}),x.size===0)return[];let k=SU(t,c);return N&&x.size>0&&k.searchParams.set("_routes",e.filter(V=>x.has(V.route.id)).map(V=>V.route.id).join(",")),[k.pathname+k.search]},[c,d,r,i,g,e,t,o]),C=M.useMemo(()=>mU(b,i),[b,i]),O=CU(b);return M.createElement(M.Fragment,null,E.map(x=>M.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),C.map(x=>M.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),O.map(({key:x,link:N})=>M.createElement("link",{key:x,...N})))}function RU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var xI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xI&&(window.__reactRouterVersion="7.6.2")}catch{}function OU(t,e){return p6({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:N3({window:e==null?void 0:e.window}),hydrationData:IU(),routes:t,mapRouteProperties:Q6,hydrationRouteProperties:X6,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function IU(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:xU(t.errors)}),t}function xU(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new wm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let c=new o(i.message);c.stack="",n[r]=c}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var PI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tS=M.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:d,target:p,to:g,preventScrollReset:b,viewTransition:E,...C},O){let{basename:x}=M.useContext($s),N=typeof g=="string"&&PI.test(g),k,V=!1;if(typeof g=="string"&&N&&(k=g,xI))try{let L=new URL(window.location.href),G=g.startsWith("//")?new URL(L.protocol+g):new URL(g),T=Ti(G.pathname,x);G.origin===L.origin&&T!=null?g=T+G.search+G.hash:V=!0}catch{Tn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=D6(g,{relative:i}),[q,H,W]=wU(r,C),$=DU(g,{replace:c,state:d,target:p,preventScrollReset:b,relative:i,viewTransition:E});function F(L){e&&e(L),L.defaultPrevented||$(L)}let D=M.createElement("a",{...C,...W,href:k||X,onClick:V||o?e:F,ref:RU(O,H),target:p,"data-discover":!N&&n==="render"?"true":void 0});return q&&!N?M.createElement(M.Fragment,null,D,M.createElement(TU,{page:X})):D});tS.displayName="Link";var PU=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:p,...g},b){let E=Kd(c,{relative:g.relative}),C=xa(),O=M.useContext(Wd),{navigator:x,basename:N}=M.useContext($s),k=O!=null&&jU(E)&&d===!0,V=x.encodeLocation?x.encodeLocation(E).pathname:E.pathname,X=C.pathname,q=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(X=X.toLowerCase(),q=q?q.toLowerCase():null,V=V.toLowerCase()),q&&N&&(q=Ti(q,N)||q);const H=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let W=X===V||!i&&X.startsWith(V)&&X.charAt(H)==="/",$=q!=null&&(q===V||!i&&q.startsWith(V)&&q.charAt(V.length)==="/"),F={isActive:W,isPending:$,isTransitioning:k},D=W?e:void 0,L;typeof r=="function"?L=r(F):L=[r,W?"active":null,$?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let G=typeof o=="function"?o(F):o;return M.createElement(tS,{...g,"aria-current":D,className:L,ref:b,style:G,to:c,viewTransition:d},typeof p=="function"?p(F):p)});PU.displayName="NavLink";var MU=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:c=Gg,action:d,onSubmit:p,relative:g,preventScrollReset:b,viewTransition:E,...C},O)=>{let x=UU(),N=VU(d,{relative:g}),k=c.toLowerCase()==="get"?"get":"post",V=typeof d=="string"&&PI.test(d),X=q=>{if(p&&p(q),q.defaultPrevented)return;q.preventDefault();let H=q.nativeEvent.submitter,W=(H==null?void 0:H.getAttribute("formmethod"))||c;x(H||q.currentTarget,{fetcherKey:e,method:W,navigate:n,replace:i,state:o,relative:g,preventScrollReset:b,viewTransition:E})};return M.createElement("form",{ref:O,method:k,action:N,onSubmit:r?p:X,...C,"data-discover":!V&&t==="render"?"true":void 0})});MU.displayName="Form";function kU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MI(t){let e=M.useContext(Qc);return Rt(e,kU(t)),e}function DU(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:c}={}){let d=kf(),p=xa(),g=Kd(t,{relative:o});return M.useCallback(b=>{if(lU(b,e)){b.preventDefault();let E=n!==void 0?n:Dl(p)===Dl(g);d(t,{replace:E,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[p,d,g,n,r,e,t,i,o,c])}function nS(t){Tn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(Ab(t)),n=M.useRef(!1),r=xa(),i=M.useMemo(()=>cU(r.search,n.current?null:e.current),[r.search]),o=kf(),c=M.useCallback((d,p)=>{const g=Ab(typeof d=="function"?d(i):d);n.current=!0,o("?"+g,p)},[o,i]);return[i,c]}var NU=0,LU=()=>`__${String(++NU)}__`;function UU(){let{router:t}=MI("useSubmit"),{basename:e}=M.useContext($s),n=$6();return M.useCallback(async(r,i={})=>{let{action:o,method:c,encType:d,formData:p,body:g}=hU(r,e);if(i.navigate===!1){let b=i.fetcherKey||LU();await t.fetch(b,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:g,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:g,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function VU(t,{relative:e}={}){let{basename:n}=M.useContext($s),r=M.useContext(Gs);Rt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Kd(t||".",{relative:e})},c=xa();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),p=d.getAll("index");if(p.some(b=>b==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let b=d.toString();o.search=b?`?${b}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:wa([n,o.pathname])),Dl(o)}function jU(t,e={}){let n=M.useContext(Y_);Rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=MI("useViewTransitionState"),i=Kd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ti(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Ti(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Em(i.pathname,c)!=null||Em(i.pathname,o)!=null}[..._U];const FU=(t,e,n,r)=>{var o,c,d,p;const i=[n,{code:e,...r||{}}];if((c=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&c.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Lc(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(p=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&p.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},KT={},Rb=(t,e,n,r)=>{Lc(n)&&KT[n]||(Lc(n)&&(KT[n]=new Date),FU(t,e,n,r))},kI=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Ob=(t,e,n)=>{t.loadNamespaces(e,kI(t,n))},YT=(t,e,n,r)=>{if(Lc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Ob(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,kI(t,r))},BU=(t,e,n={})=>!e.languages||!e.languages.length?(Rb(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{var o;if(((o=n.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Lc=t=>typeof t=="string",zU=t=>typeof t=="object"&&t!==null,HU=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,qU={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},$U=t=>qU[t],GU=t=>t.replace(HU,$U);let Ib={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:GU};const WU=(t={})=>{Ib={...Ib,...t}},KU=()=>Ib;let DI;const YU=t=>{DI=t},QU=()=>DI,XU={type:"3rdParty",init(t){WU(t.options.react),YU(t)}},JU=M.createContext();class ZU{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const eV=(t,e)=>{const n=M.useRef();return M.useEffect(()=>{n.current=t},[t,e]),n.current},NI=(t,e,n,r)=>t.getFixedT(e,n,r),tV=(t,e,n,r)=>M.useCallback(NI(t,e,n,r),[t,e,n,r]),Nn=(t,e={})=>{var H,W,$,F;const{i18n:n}=e,{i18n:r,defaultNS:i}=M.useContext(JU)||{},o=n||r||QU();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new ZU),!o){Rb(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const D=(G,T)=>Lc(T)?T:zU(T)&&Lc(T.defaultValue)?T.defaultValue:Array.isArray(G)?G[G.length-1]:G,L=[D,{},!1];return L.t=D,L.i18n={},L.ready=!1,L}(H=o.options.react)!=null&&H.wait&&Rb(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...KU(),...o.options.react,...e},{useSuspense:d,keyPrefix:p}=c;let g=i||((W=o.options)==null?void 0:W.defaultNS);g=Lc(g)?[g]:g||["translation"],(F=($=o.reportNamespaces).addUsedNamespaces)==null||F.call($,g);const b=(o.isInitialized||o.initializedStoreOnce)&&g.every(D=>BU(D,o,c)),E=tV(o,e.lng||null,c.nsMode==="fallback"?g:g[0],p),C=()=>E,O=()=>NI(o,e.lng||null,c.nsMode==="fallback"?g:g[0],p),[x,N]=M.useState(C);let k=g.join();e.lng&&(k=`${e.lng}${k}`);const V=eV(k),X=M.useRef(!0);M.useEffect(()=>{const{bindI18n:D,bindI18nStore:L}=c;X.current=!0,!b&&!d&&(e.lng?YT(o,e.lng,g,()=>{X.current&&N(O)}):Ob(o,g,()=>{X.current&&N(O)})),b&&V&&V!==k&&X.current&&N(O);const G=()=>{X.current&&N(O)};return D&&(o==null||o.on(D,G)),L&&(o==null||o.store.on(L,G)),()=>{X.current=!1,o&&(D==null||D.split(" ").forEach(T=>o.off(T,G))),L&&o&&L.split(" ").forEach(T=>o.store.off(T,G))}},[o,k]),M.useEffect(()=>{X.current&&b&&N(C)},[o,p,b]);const q=[x,o,b];if(q.t=x,q.i18n=o,q.ready=b,b||!b&&!d)return q;throw new Promise(D=>{e.lng?YT(o,e.lng,g,()=>D()):Ob(o,g,()=>D())})},nV="_BlockUI_1m4vb_1",rV={BlockUI:nV},iV=()=>j.jsx("div",{className:rV.BlockUI,children:j.jsx(LP,{size:"3x"})});M.memo(iV);const kn=Object.freeze({DEFAULT:"DEFAULT",DANGER:"DANGER",PRIMARY:"PRIMARY",SUCCESS:"SUCCESS"}),sV="_Button_1o78h_1",aV={Button:sV},oV=t=>{const{category:e=kn.DEFAULT,children:n,className:r="",icon:i=null,textOnly:o=!1,...c}=t;return j.jsxs("button",{className:`${aV.Button} ${r}`,"data-category":e,"data-text-only":o,"data-has-icon":i!=null,...c,children:[i,n]})},mn=M.memo(oV),lV=(t,e)=>Object.keys(e).forEach(n=>{const{extraReducers:r=()=>null}=e[n];r(t)}),bg=(t,e)=>Object.keys(t).map(n=>t[n][e]).reduce((n,r)=>({...n,...r}),{});function xr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var cV=typeof Symbol=="function"&&Symbol.observable||"@@observable",QT=cV,C0=()=>Math.random().toString(36).substring(7).split("").join("."),uV={INIT:`@@redux/INIT${C0()}`,REPLACE:`@@redux/REPLACE${C0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${C0()}`},Cm=uV;function rS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function LI(t,e,n){if(typeof t!="function")throw new Error(xr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xr(1));return n(LI)(t,e)}let r=t,i=e,o=new Map,c=o,d=0,p=!1;function g(){c===o&&(c=new Map,o.forEach((k,V)=>{c.set(V,k)}))}function b(){if(p)throw new Error(xr(3));return i}function E(k){if(typeof k!="function")throw new Error(xr(4));if(p)throw new Error(xr(5));let V=!0;g();const X=d++;return c.set(X,k),function(){if(V){if(p)throw new Error(xr(6));V=!1,g(),c.delete(X),o=null}}}function C(k){if(!rS(k))throw new Error(xr(7));if(typeof k.type>"u")throw new Error(xr(8));if(typeof k.type!="string")throw new Error(xr(17));if(p)throw new Error(xr(9));try{p=!0,i=r(i,k)}finally{p=!1}return(o=c).forEach(X=>{X()}),k}function O(k){if(typeof k!="function")throw new Error(xr(10));r=k,C({type:Cm.REPLACE})}function x(){const k=E;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(xr(11));function X(){const H=V;H.next&&H.next(b())}return X(),{unsubscribe:k(X)}},[QT](){return this}}}return C({type:Cm.INIT}),{dispatch:C,subscribe:E,getState:b,replaceReducer:O,[QT]:x}}function fV(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Cm.INIT})>"u")throw new Error(xr(12));if(typeof n(void 0,{type:Cm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xr(13))})}function hV(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const c=e[o];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let i;try{fV(n)}catch(o){i=o}return function(c={},d){if(i)throw i;let p=!1;const g={};for(let b=0;b<r.length;b++){const E=r[b],C=n[E],O=c[E],x=C(O,d);if(typeof x>"u")throw d&&d.type,new Error(xr(14));g[E]=x,p=p||x!==O}return p=p||r.length!==Object.keys(c).length,p?g:c}}function Am(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function dV(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(xr(15))};const c={getState:i.getState,dispatch:(p,...g)=>o(p,...g)},d=t.map(p=>p(c));return o=Am(...d)(i.dispatch),{...i,dispatch:o}}}function pV(t){return rS(t)&&"type"in t&&typeof t.type=="string"}var UI=Symbol.for("immer-nothing"),XT=Symbol.for("immer-draftable"),$i=Symbol.for("immer-state");function Vs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yf=Object.getPrototypeOf;function Bc(t){return!!t&&!!t[$i]}function mo(t){var e;return t?VI(t)||Array.isArray(t)||!!t[XT]||!!((e=t.constructor)!=null&&e[XT])||hy(t)||dy(t):!1}var gV=Object.prototype.constructor.toString();function VI(t){if(!t||typeof t!="object")return!1;const e=yf(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===gV}function Rm(t,e){fy(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function fy(t){const e=t[$i];return e?e.type_:Array.isArray(t)?1:hy(t)?2:dy(t)?3:0}function xb(t,e){return fy(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jI(t,e,n){const r=fy(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function mV(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function hy(t){return t instanceof Map}function dy(t){return t instanceof Set}function xc(t){return t.copy_||t.base_}function Pb(t,e){if(hy(t))return new Map(t);if(dy(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VI(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[$i];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const c=i[o],d=r[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[c]})}return Object.create(yf(t),r)}else{const r=yf(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function iS(t,e=!1){return py(t)||Bc(t)||!mo(t)||(fy(t)>1&&(t.set=t.add=t.clear=t.delete=yV),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>iS(r,!0))),t}function yV(){Vs(2)}function py(t){return Object.isFrozen(t)}var vV={};function zc(t){const e=vV[t];return e||Vs(0,t),e}var wd;function FI(){return wd}function bV(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function JT(t,e){e&&(zc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Mb(t){kb(t),t.drafts_.forEach(_V),t.drafts_=null}function kb(t){t===wd&&(wd=t.parent_)}function ZT(t){return wd=bV(wd,t)}function _V(t){const e=t[$i];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function eC(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[$i].modified_&&(Mb(e),Vs(4)),mo(t)&&(t=Om(e,t),e.parent_||Im(e,t)),e.patches_&&zc("Patches").generateReplacementPatches_(n[$i].base_,t,e.patches_,e.inversePatches_)):t=Om(e,n,[]),Mb(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==UI?t:void 0}function Om(t,e,n){if(py(e))return e;const r=e[$i];if(!r)return Rm(e,(i,o)=>tC(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Im(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,c=!1;r.type_===3&&(o=new Set(i),i.clear(),c=!0),Rm(o,(d,p)=>tC(t,r,i,d,p,n,c)),Im(t,i,!1),n&&t.patches_&&zc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function tC(t,e,n,r,i,o,c){if(Bc(i)){const d=o&&e&&e.type_!==3&&!xb(e.assigned_,r)?o.concat(r):void 0,p=Om(t,i,d);if(jI(n,r,p),Bc(p))t.canAutoFreeze_=!1;else return}else c&&n.add(i);if(mo(i)&&!py(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Om(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Im(t,i)}}function Im(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iS(e,n)}function SV(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:FI(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=sS;n&&(i=[r],o=Td);const{revoke:c,proxy:d}=Proxy.revocable(i,o);return r.draft_=d,r.revoke_=c,d}var sS={get(t,e){if(e===$i)return t;const n=xc(t);if(!xb(n,e))return EV(t,n,e);const r=n[e];return t.finalized_||!mo(r)?r:r===A0(t.base_,e)?(R0(t),t.copy_[e]=Nb(r,t)):r},has(t,e){return e in xc(t)},ownKeys(t){return Reflect.ownKeys(xc(t))},set(t,e,n){const r=BI(xc(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=A0(xc(t),e),o=i==null?void 0:i[$i];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(mV(n,i)&&(n!==void 0||xb(t.base_,e)))return!0;R0(t),Db(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return A0(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,R0(t),Db(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=xc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Vs(11)},getPrototypeOf(t){return yf(t.base_)},setPrototypeOf(){Vs(12)}},Td={};Rm(sS,(t,e)=>{Td[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Td.deleteProperty=function(t,e){return Td.set.call(this,t,e,void 0)};Td.set=function(t,e,n){return sS.set.call(this,t[0],e,n,t[0])};function A0(t,e){const n=t[$i];return(n?xc(n):t)[e]}function EV(t,e,n){var i;const r=BI(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function BI(t,e){if(!(e in t))return;let n=yf(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yf(n)}}function Db(t){t.modified_||(t.modified_=!0,t.parent_&&Db(t.parent_))}function R0(t){t.copy_||(t.copy_=Pb(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wV=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const c=this;return function(p=o,...g){return c.produce(p,b=>n.call(this,b,...g))}}typeof n!="function"&&Vs(6),r!==void 0&&typeof r!="function"&&Vs(7);let i;if(mo(e)){const o=ZT(this),c=Nb(e,void 0);let d=!0;try{i=n(c),d=!1}finally{d?Mb(o):kb(o)}return JT(o,r),eC(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===UI&&(i=void 0),this.autoFreeze_&&iS(i,!0),r){const o=[],c=[];zc("Patches").generateReplacementPatches_(e,i,o,c),r(o,c)}return i}else Vs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let r,i;return[this.produce(e,n,(c,d)=>{r=c,i=d}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){mo(t)||Vs(8),Bc(t)&&(t=TV(t));const e=ZT(this),n=Nb(t,void 0);return n[$i].isManual_=!0,kb(e),n}finishDraft(t,e){const n=t&&t[$i];(!n||!n.isManual_)&&Vs(9);const{scope_:r}=n;return JT(r,e),eC(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=zc("Patches").applyPatches_;return Bc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Nb(t,e){const n=hy(t)?zc("MapSet").proxyMap_(t,e):dy(t)?zc("MapSet").proxySet_(t,e):SV(t,e);return(e?e.scope_:FI()).drafts_.push(n),n}function TV(t){return Bc(t)||Vs(10,t),zI(t)}function zI(t){if(!mo(t)||py(t))return t;const e=t[$i];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Pb(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Pb(t,!0);return Rm(n,(r,i)=>{jI(n,r,zI(i))}),e&&(e.finalized_=!1),n}var Gi=new wV,HI=Gi.produce;Gi.produceWithPatches.bind(Gi);Gi.setAutoFreeze.bind(Gi);Gi.setUseStrictShallowCopy.bind(Gi);Gi.applyPatches.bind(Gi);Gi.createDraft.bind(Gi);Gi.finishDraft.bind(Gi);function qI(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var CV=qI(),AV=qI,RV=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Am:Am.apply(null,arguments)},OV=t=>t&&typeof t.match=="function";function ud(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(uo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>pV(r)&&r.type===t,n}var $I=class nd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,nd.prototype)}static get[Symbol.species](){return nd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new nd(...e[0].concat(this)):new nd(...e.concat(this))}};function nC(t){return mo(t)?HI(t,()=>{}):t}function _g(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function IV(t){return typeof t=="boolean"}var xV=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let c=new $I;return n&&(IV(n)?c.push(CV):c.push(AV(n.extraArgument))),c},PV="RTK_autoBatch",rC=t=>e=>{setTimeout(e,t)},MV=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,c=!1;const d=new Set,p=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:rC(10):t.type==="callback"?t.queueNotification:rC(t.timeout),g=()=>{c=!1,o&&(o=!1,d.forEach(b=>b()))};return Object.assign({},r,{subscribe(b){const E=()=>i&&b(),C=r.subscribe(E);return d.add(b),()=>{C(),d.delete(b)}},dispatch(b){var E;try{return i=!((E=b==null?void 0:b.meta)!=null&&E[PV]),o=!i,o&&(c||(c=!0,p(g))),r.dispatch(b)}finally{i=!0}}})},kV=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new $I(t);return r&&i.push(MV(typeof r=="object"?r:void 0)),i};function DV(t){const e=xV(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:c=void 0}=t||{};let d;if(typeof n=="function")d=n;else if(rS(n))d=hV(n);else throw new Error(uo(1));let p;typeof r=="function"?p=r(e):p=e();let g=Am;i&&(g=RV({trace:!1,...typeof i=="object"&&i}));const b=dV(...p),E=kV(b);let C=typeof c=="function"?c(E):E();const O=g(...C);return LI(d,o,O)}function GI(t){const e={},n=[];let r;const i={addCase(o,c){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(uo(28));if(d in e)throw new Error(uo(29));return e[d]=c,i},addMatcher(o,c){return n.push({matcher:o,reducer:c}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function NV(t){return typeof t=="function"}function LV(t,e){let[n,r,i]=GI(e),o;if(NV(t))o=()=>nC(t());else{const d=nC(t);o=()=>d}function c(d=o(),p){let g=[n[p.type],...r.filter(({matcher:b})=>b(p)).map(({reducer:b})=>b)];return g.filter(b=>!!b).length===0&&(g=[i]),g.reduce((b,E)=>{if(E)if(Bc(b)){const O=E(b,p);return O===void 0?b:O}else{if(mo(b))return HI(b,C=>E(C,p));{const C=E(b,p);if(C===void 0){if(b===null)return b;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return b},d)}return c.getInitialState=o,c}var UV=(t,e)=>OV(t)?t.match(e):t(e);function aS(...t){return e=>t.some(n=>UV(n,e))}function WI(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",r=e.indexOf(t.meta.requestStatus)>-1;return n&&r}function KI(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function YI(...t){return t.length===0?e=>WI(e,["rejected"]):KI(t)?aS(...t.map(e=>e.rejected)):YI()(t[0])}function QI(...t){return t.length===0?e=>WI(e,["fulfilled"]):KI(t)?aS(...t.map(e=>e.fulfilled)):QI()(t[0])}var VV="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",jV=(t=21)=>{let e="",n=t;for(;n--;)e+=VV[Math.random()*64|0];return e},FV=["name","message","stack","code"],O0=class{constructor(t,e){n0(this,"_type");this.payload=t,this.meta=e}},iC=class{constructor(t,e){n0(this,"_type");this.payload=t,this.meta=e}},BV=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of FV)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},sC="External signal was aborted",yo=(()=>{function t(e,n,r){const i=ud(e+"/fulfilled",(p,g,b,E)=>({payload:p,meta:{...E||{},arg:b,requestId:g,requestStatus:"fulfilled"}})),o=ud(e+"/pending",(p,g,b)=>({payload:void 0,meta:{...b||{},arg:g,requestId:p,requestStatus:"pending"}})),c=ud(e+"/rejected",(p,g,b,E,C)=>({payload:E,error:(r&&r.serializeError||BV)(p||"Rejected"),meta:{...C||{},arg:b,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(b,E,C)=>{const O=r!=null&&r.idGenerator?r.idGenerator(p):jV(),x=new AbortController;let N,k;function V(q){k=q,x.abort()}g&&(g.aborted?V(sC):g.addEventListener("abort",()=>V(sC),{once:!0}));const X=async function(){var W,$;let q;try{let F=(W=r==null?void 0:r.condition)==null?void 0:W.call(r,p,{getState:E,extra:C});if(HV(F)&&(F=await F),F===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const D=new Promise((L,G)=>{N=()=>{G({name:"AbortError",message:k||"Aborted"})},x.signal.addEventListener("abort",N)});b(o(O,p,($=r==null?void 0:r.getPendingMeta)==null?void 0:$.call(r,{requestId:O,arg:p},{getState:E,extra:C}))),q=await Promise.race([D,Promise.resolve(n(p,{dispatch:b,getState:E,extra:C,requestId:O,signal:x.signal,abort:V,rejectWithValue:(L,G)=>new O0(L,G),fulfillWithValue:(L,G)=>new iC(L,G)})).then(L=>{if(L instanceof O0)throw L;return L instanceof iC?i(L.payload,O,p,L.meta):i(L,O,p)})])}catch(F){q=F instanceof O0?c(null,O,p,F.payload,F.meta):c(F,O,p)}finally{N&&x.signal.removeEventListener("abort",N)}return r&&!r.dispatchConditionRejection&&c.match(q)&&q.meta.condition||b(q),q}();return Object.assign(X,{abort:V,requestId:O,arg:p,unwrap(){return X.then(zV)}})}}return Object.assign(d,{pending:o,rejected:c,fulfilled:i,settled:aS(c,i),typePrefix:e})}return t.withTypes=()=>t,t})();function zV(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function HV(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var qV=Symbol.for("rtk-slice-createasyncthunk");function $V(t,e){return`${t}/${e}`}function GV({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[qV];return function(i){const{name:o,reducerPath:c=o}=i;if(!o)throw new Error(uo(11));const d=(typeof i.reducers=="function"?i.reducers(YV()):i.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},b={addCase(H,W){const $=typeof H=="string"?H:H.type;if(!$)throw new Error(uo(12));if($ in g.sliceCaseReducersByType)throw new Error(uo(13));return g.sliceCaseReducersByType[$]=W,b},addMatcher(H,W){return g.sliceMatchers.push({matcher:H,reducer:W}),b},exposeAction(H,W){return g.actionCreators[H]=W,b},exposeCaseReducer(H,W){return g.sliceCaseReducersByName[H]=W,b}};p.forEach(H=>{const W=d[H],$={reducerName:H,type:$V(o,H),createNotation:typeof i.reducers=="function"};XV(W)?ZV($,W,b,e):QV($,W,b)});function E(){const[H={},W=[],$=void 0]=typeof i.extraReducers=="function"?GI(i.extraReducers):[i.extraReducers],F={...H,...g.sliceCaseReducersByType};return LV(i.initialState,D=>{for(let L in F)D.addCase(L,F[L]);for(let L of g.sliceMatchers)D.addMatcher(L.matcher,L.reducer);for(let L of W)D.addMatcher(L.matcher,L.reducer);$&&D.addDefaultCase($)})}const C=H=>H,O=new Map,x=new WeakMap;let N;function k(H,W){return N||(N=E()),N(H,W)}function V(){return N||(N=E()),N.getInitialState()}function X(H,W=!1){function $(D){let L=D[H];return typeof L>"u"&&W&&(L=_g(x,$,V)),L}function F(D=C){const L=_g(O,W,()=>new WeakMap);return _g(L,D,()=>{const G={};for(const[T,te]of Object.entries(i.selectors??{}))G[T]=WV(te,D,()=>_g(x,D,V),W);return G})}return{reducerPath:H,getSelectors:F,get selectors(){return F($)},selectSlice:$}}const q={name:o,reducer:k,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:V,...X(c),injectInto(H,{reducerPath:W,...$}={}){const F=W??c;return H.inject({reducerPath:F,reducer:k},$),{...q,...X(F,!0)}}};return q}}function WV(t,e,n,r){function i(o,...c){let d=e(o);return typeof d>"u"&&r&&(d=n()),t(d,...c)}return i.unwrapped=t,i}var KV=GV();function YV(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function QV({type:t,reducerName:e,createNotation:n},r,i){let o,c;if("reducer"in r){if(n&&!JV(r))throw new Error(uo(17));o=r.reducer,c=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,c?ud(t,c):ud(t))}function XV(t){return t._reducerDefinitionType==="asyncThunk"}function JV(t){return t._reducerDefinitionType==="reducerWithPrepare"}function ZV({type:t,reducerName:e},n,r,i){if(!i)throw new Error(uo(18));const{payloadCreator:o,fulfilled:c,pending:d,rejected:p,settled:g,options:b}=n,E=i(t,o,b);r.exposeAction(e,E),c&&r.addCase(E.fulfilled,c),d&&r.addCase(E.pending,d),p&&r.addCase(E.rejected,p),g&&r.addMatcher(E.settled,g),r.exposeCaseReducer(e,{fulfilled:c||Sg,pending:d||Sg,rejected:p||Sg,settled:g||Sg})}function Sg(){}function uo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const Eg=Object.freeze({INITIAL_STATE:"initialState",ASYNC_THUNK:"asyncThunk",REDUCERS:"reducers",EXTRA_REDUCERS:"extraReducers",SELECTORS:"selectors"}),oS=t=>{const{sliceName:e,sliceParts:n}=t,r=bg(n,Eg.INITIAL_STATE),i=KV({name:e,initialState:r,reducers:bg(n,Eg.REDUCERS),extraReducers(d){lV(d,n)}}),o={...i.actions,...bg(n,Eg.ASYNC_THUNK)},c={...bg(n,Eg.SELECTORS)};return{reducer:i.reducer,actions:o,selectors:c}},e9="growl",t9={growls:[]},n9={addGrowl:(t,e)=>{t.growls.push(e.payload)},removeGrowl:(t,e)=>{t.growls=t.growls.filter(n=>n.id!==e.payload)},clearAllGrowls:t=>{t.growls=[]}},r9={selectAllGrowls:t=>t.growls.growls},i9={initialState:t9,reducers:n9,selectors:r9},s9=Object.freeze(Object.defineProperty({__proto__:null,Growl:i9},Symbol.toStringTag,{value:"Module"})),Cd=oS({sliceName:e9,sliceParts:s9}),Yd="songs",vt=Object.freeze({IDLE:"idle",LOADING:"loading",SUCCEEDED:"succeeded",FAILED:"failed"});var a9="firebase",o9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il(a9,o9,"app");const l9={apiKey:"AIzaSyCrUUG-1lrbf5iZXLtswHQTa9H-7wb8bho",authDomain:"melo-chart.firebaseapp.com",projectId:"melo-chart",storageBucket:"melo-chart.firebasestorage.app",messagingSenderId:"218674893122",appId:"1:218674893122:web:5669423f50d704d8ad38db"},lS=EO(l9),gy=x3(lS),c9=async(t,e)=>{const{user:n}=await gL(gy,t,e);return n},u9=async()=>{await bL(gy)},f9=async(t,e)=>{const{user:n}=await pL(gy,t,e);return n},h9=Object.freeze(Object.defineProperty({__proto__:null,auth:gy,signIn:c9,signOut:u9,signUp:f9},Symbol.toStringTag,{value:"Module"}));var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xl,XI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,D){function L(){}L.prototype=D.prototype,F.D=D.prototype,F.prototype=new L,F.prototype.constructor=F,F.C=function(G,T,te){for(var K=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)K[ne-2]=arguments[ne];return D.prototype[T].apply(G,K)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,D,L){L||(L=0);var G=Array(16);if(typeof D=="string")for(var T=0;16>T;++T)G[T]=D.charCodeAt(L++)|D.charCodeAt(L++)<<8|D.charCodeAt(L++)<<16|D.charCodeAt(L++)<<24;else for(T=0;16>T;++T)G[T]=D[L++]|D[L++]<<8|D[L++]<<16|D[L++]<<24;D=F.g[0],L=F.g[1],T=F.g[2];var te=F.g[3],K=D+(te^L&(T^te))+G[0]+3614090360&4294967295;D=L+(K<<7&4294967295|K>>>25),K=te+(T^D&(L^T))+G[1]+3905402710&4294967295,te=D+(K<<12&4294967295|K>>>20),K=T+(L^te&(D^L))+G[2]+606105819&4294967295,T=te+(K<<17&4294967295|K>>>15),K=L+(D^T&(te^D))+G[3]+3250441966&4294967295,L=T+(K<<22&4294967295|K>>>10),K=D+(te^L&(T^te))+G[4]+4118548399&4294967295,D=L+(K<<7&4294967295|K>>>25),K=te+(T^D&(L^T))+G[5]+1200080426&4294967295,te=D+(K<<12&4294967295|K>>>20),K=T+(L^te&(D^L))+G[6]+2821735955&4294967295,T=te+(K<<17&4294967295|K>>>15),K=L+(D^T&(te^D))+G[7]+4249261313&4294967295,L=T+(K<<22&4294967295|K>>>10),K=D+(te^L&(T^te))+G[8]+1770035416&4294967295,D=L+(K<<7&4294967295|K>>>25),K=te+(T^D&(L^T))+G[9]+2336552879&4294967295,te=D+(K<<12&4294967295|K>>>20),K=T+(L^te&(D^L))+G[10]+4294925233&4294967295,T=te+(K<<17&4294967295|K>>>15),K=L+(D^T&(te^D))+G[11]+2304563134&4294967295,L=T+(K<<22&4294967295|K>>>10),K=D+(te^L&(T^te))+G[12]+1804603682&4294967295,D=L+(K<<7&4294967295|K>>>25),K=te+(T^D&(L^T))+G[13]+4254626195&4294967295,te=D+(K<<12&4294967295|K>>>20),K=T+(L^te&(D^L))+G[14]+2792965006&4294967295,T=te+(K<<17&4294967295|K>>>15),K=L+(D^T&(te^D))+G[15]+1236535329&4294967295,L=T+(K<<22&4294967295|K>>>10),K=D+(T^te&(L^T))+G[1]+4129170786&4294967295,D=L+(K<<5&4294967295|K>>>27),K=te+(L^T&(D^L))+G[6]+3225465664&4294967295,te=D+(K<<9&4294967295|K>>>23),K=T+(D^L&(te^D))+G[11]+643717713&4294967295,T=te+(K<<14&4294967295|K>>>18),K=L+(te^D&(T^te))+G[0]+3921069994&4294967295,L=T+(K<<20&4294967295|K>>>12),K=D+(T^te&(L^T))+G[5]+3593408605&4294967295,D=L+(K<<5&4294967295|K>>>27),K=te+(L^T&(D^L))+G[10]+38016083&4294967295,te=D+(K<<9&4294967295|K>>>23),K=T+(D^L&(te^D))+G[15]+3634488961&4294967295,T=te+(K<<14&4294967295|K>>>18),K=L+(te^D&(T^te))+G[4]+3889429448&4294967295,L=T+(K<<20&4294967295|K>>>12),K=D+(T^te&(L^T))+G[9]+568446438&4294967295,D=L+(K<<5&4294967295|K>>>27),K=te+(L^T&(D^L))+G[14]+3275163606&4294967295,te=D+(K<<9&4294967295|K>>>23),K=T+(D^L&(te^D))+G[3]+4107603335&4294967295,T=te+(K<<14&4294967295|K>>>18),K=L+(te^D&(T^te))+G[8]+1163531501&4294967295,L=T+(K<<20&4294967295|K>>>12),K=D+(T^te&(L^T))+G[13]+2850285829&4294967295,D=L+(K<<5&4294967295|K>>>27),K=te+(L^T&(D^L))+G[2]+4243563512&4294967295,te=D+(K<<9&4294967295|K>>>23),K=T+(D^L&(te^D))+G[7]+1735328473&4294967295,T=te+(K<<14&4294967295|K>>>18),K=L+(te^D&(T^te))+G[12]+2368359562&4294967295,L=T+(K<<20&4294967295|K>>>12),K=D+(L^T^te)+G[5]+4294588738&4294967295,D=L+(K<<4&4294967295|K>>>28),K=te+(D^L^T)+G[8]+2272392833&4294967295,te=D+(K<<11&4294967295|K>>>21),K=T+(te^D^L)+G[11]+1839030562&4294967295,T=te+(K<<16&4294967295|K>>>16),K=L+(T^te^D)+G[14]+4259657740&4294967295,L=T+(K<<23&4294967295|K>>>9),K=D+(L^T^te)+G[1]+2763975236&4294967295,D=L+(K<<4&4294967295|K>>>28),K=te+(D^L^T)+G[4]+1272893353&4294967295,te=D+(K<<11&4294967295|K>>>21),K=T+(te^D^L)+G[7]+4139469664&4294967295,T=te+(K<<16&4294967295|K>>>16),K=L+(T^te^D)+G[10]+3200236656&4294967295,L=T+(K<<23&4294967295|K>>>9),K=D+(L^T^te)+G[13]+681279174&4294967295,D=L+(K<<4&4294967295|K>>>28),K=te+(D^L^T)+G[0]+3936430074&4294967295,te=D+(K<<11&4294967295|K>>>21),K=T+(te^D^L)+G[3]+3572445317&4294967295,T=te+(K<<16&4294967295|K>>>16),K=L+(T^te^D)+G[6]+76029189&4294967295,L=T+(K<<23&4294967295|K>>>9),K=D+(L^T^te)+G[9]+3654602809&4294967295,D=L+(K<<4&4294967295|K>>>28),K=te+(D^L^T)+G[12]+3873151461&4294967295,te=D+(K<<11&4294967295|K>>>21),K=T+(te^D^L)+G[15]+530742520&4294967295,T=te+(K<<16&4294967295|K>>>16),K=L+(T^te^D)+G[2]+3299628645&4294967295,L=T+(K<<23&4294967295|K>>>9),K=D+(T^(L|~te))+G[0]+4096336452&4294967295,D=L+(K<<6&4294967295|K>>>26),K=te+(L^(D|~T))+G[7]+1126891415&4294967295,te=D+(K<<10&4294967295|K>>>22),K=T+(D^(te|~L))+G[14]+2878612391&4294967295,T=te+(K<<15&4294967295|K>>>17),K=L+(te^(T|~D))+G[5]+4237533241&4294967295,L=T+(K<<21&4294967295|K>>>11),K=D+(T^(L|~te))+G[12]+1700485571&4294967295,D=L+(K<<6&4294967295|K>>>26),K=te+(L^(D|~T))+G[3]+2399980690&4294967295,te=D+(K<<10&4294967295|K>>>22),K=T+(D^(te|~L))+G[10]+4293915773&4294967295,T=te+(K<<15&4294967295|K>>>17),K=L+(te^(T|~D))+G[1]+2240044497&4294967295,L=T+(K<<21&4294967295|K>>>11),K=D+(T^(L|~te))+G[8]+1873313359&4294967295,D=L+(K<<6&4294967295|K>>>26),K=te+(L^(D|~T))+G[15]+4264355552&4294967295,te=D+(K<<10&4294967295|K>>>22),K=T+(D^(te|~L))+G[6]+2734768916&4294967295,T=te+(K<<15&4294967295|K>>>17),K=L+(te^(T|~D))+G[13]+1309151649&4294967295,L=T+(K<<21&4294967295|K>>>11),K=D+(T^(L|~te))+G[4]+4149444226&4294967295,D=L+(K<<6&4294967295|K>>>26),K=te+(L^(D|~T))+G[11]+3174756917&4294967295,te=D+(K<<10&4294967295|K>>>22),K=T+(D^(te|~L))+G[2]+718787259&4294967295,T=te+(K<<15&4294967295|K>>>17),K=L+(te^(T|~D))+G[9]+3951481745&4294967295,F.g[0]=F.g[0]+D&4294967295,F.g[1]=F.g[1]+(T+(K<<21&4294967295|K>>>11))&4294967295,F.g[2]=F.g[2]+T&4294967295,F.g[3]=F.g[3]+te&4294967295}r.prototype.u=function(F,D){D===void 0&&(D=F.length);for(var L=D-this.blockSize,G=this.B,T=this.h,te=0;te<D;){if(T==0)for(;te<=L;)i(this,F,te),te+=this.blockSize;if(typeof F=="string"){for(;te<D;)if(G[T++]=F.charCodeAt(te++),T==this.blockSize){i(this,G),T=0;break}}else for(;te<D;)if(G[T++]=F[te++],T==this.blockSize){i(this,G),T=0;break}}this.h=T,this.o+=D},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var D=1;D<F.length-8;++D)F[D]=0;var L=8*this.o;for(D=F.length-8;D<F.length;++D)F[D]=L&255,L/=256;for(this.u(F),F=Array(16),D=L=0;4>D;++D)for(var G=0;32>G;G+=8)F[L++]=this.g[D]>>>G&255;return F};function o(F,D){var L=d;return Object.prototype.hasOwnProperty.call(L,F)?L[F]:L[F]=D(F)}function c(F,D){this.h=D;for(var L=[],G=!0,T=F.length-1;0<=T;T--){var te=F[T]|0;G&&te==D||(L[T]=te,G=!1)}this.g=L}var d={};function p(F){return-128<=F&&128>F?o(F,function(D){return new c([D|0],0>D?-1:0)}):new c([F|0],0>F?-1:0)}function g(F){if(isNaN(F)||!isFinite(F))return E;if(0>F)return k(g(-F));for(var D=[],L=1,G=0;F>=L;G++)D[G]=F/L|0,L*=4294967296;return new c(D,0)}function b(F,D){if(F.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(F.charAt(0)=="-")return k(b(F.substring(1),D));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=g(Math.pow(D,8)),G=E,T=0;T<F.length;T+=8){var te=Math.min(8,F.length-T),K=parseInt(F.substring(T,T+te),D);8>te?(te=g(Math.pow(D,te)),G=G.j(te).add(g(K))):(G=G.j(L),G=G.add(g(K)))}return G}var E=p(0),C=p(1),O=p(16777216);t=c.prototype,t.m=function(){if(N(this))return-k(this).m();for(var F=0,D=1,L=0;L<this.g.length;L++){var G=this.i(L);F+=(0<=G?G:4294967296+G)*D,D*=4294967296}return F},t.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(x(this))return"0";if(N(this))return"-"+k(this).toString(F);for(var D=g(Math.pow(F,6)),L=this,G="";;){var T=H(L,D).g;L=V(L,T.j(D));var te=((0<L.g.length?L.g[0]:L.h)>>>0).toString(F);if(L=T,x(L))return te+G;for(;6>te.length;)te="0"+te;G=te+G}},t.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function x(F){if(F.h!=0)return!1;for(var D=0;D<F.g.length;D++)if(F.g[D]!=0)return!1;return!0}function N(F){return F.h==-1}t.l=function(F){return F=V(this,F),N(F)?-1:x(F)?0:1};function k(F){for(var D=F.g.length,L=[],G=0;G<D;G++)L[G]=~F.g[G];return new c(L,~F.h).add(C)}t.abs=function(){return N(this)?k(this):this},t.add=function(F){for(var D=Math.max(this.g.length,F.g.length),L=[],G=0,T=0;T<=D;T++){var te=G+(this.i(T)&65535)+(F.i(T)&65535),K=(te>>>16)+(this.i(T)>>>16)+(F.i(T)>>>16);G=K>>>16,te&=65535,K&=65535,L[T]=K<<16|te}return new c(L,L[L.length-1]&-2147483648?-1:0)};function V(F,D){return F.add(k(D))}t.j=function(F){if(x(this)||x(F))return E;if(N(this))return N(F)?k(this).j(k(F)):k(k(this).j(F));if(N(F))return k(this.j(k(F)));if(0>this.l(O)&&0>F.l(O))return g(this.m()*F.m());for(var D=this.g.length+F.g.length,L=[],G=0;G<2*D;G++)L[G]=0;for(G=0;G<this.g.length;G++)for(var T=0;T<F.g.length;T++){var te=this.i(G)>>>16,K=this.i(G)&65535,ne=F.i(T)>>>16,Pe=F.i(T)&65535;L[2*G+2*T]+=K*Pe,X(L,2*G+2*T),L[2*G+2*T+1]+=te*Pe,X(L,2*G+2*T+1),L[2*G+2*T+1]+=K*ne,X(L,2*G+2*T+1),L[2*G+2*T+2]+=te*ne,X(L,2*G+2*T+2)}for(G=0;G<D;G++)L[G]=L[2*G+1]<<16|L[2*G];for(G=D;G<2*D;G++)L[G]=0;return new c(L,0)};function X(F,D){for(;(F[D]&65535)!=F[D];)F[D+1]+=F[D]>>>16,F[D]&=65535,D++}function q(F,D){this.g=F,this.h=D}function H(F,D){if(x(D))throw Error("division by zero");if(x(F))return new q(E,E);if(N(F))return D=H(k(F),D),new q(k(D.g),k(D.h));if(N(D))return D=H(F,k(D)),new q(k(D.g),D.h);if(30<F.g.length){if(N(F)||N(D))throw Error("slowDivide_ only works with positive integers.");for(var L=C,G=D;0>=G.l(F);)L=W(L),G=W(G);var T=$(L,1),te=$(G,1);for(G=$(G,2),L=$(L,2);!x(G);){var K=te.add(G);0>=K.l(F)&&(T=T.add(L),te=K),G=$(G,1),L=$(L,1)}return D=V(F,T.j(D)),new q(T,D)}for(T=E;0<=F.l(D);){for(L=Math.max(1,Math.floor(F.m()/D.m())),G=Math.ceil(Math.log(L)/Math.LN2),G=48>=G?1:Math.pow(2,G-48),te=g(L),K=te.j(D);N(K)||0<K.l(F);)L-=G,te=g(L),K=te.j(D);x(te)&&(te=C),T=T.add(te),F=V(F,K)}return new q(T,F)}t.A=function(F){return H(this,F).h},t.and=function(F){for(var D=Math.max(this.g.length,F.g.length),L=[],G=0;G<D;G++)L[G]=this.i(G)&F.i(G);return new c(L,this.h&F.h)},t.or=function(F){for(var D=Math.max(this.g.length,F.g.length),L=[],G=0;G<D;G++)L[G]=this.i(G)|F.i(G);return new c(L,this.h|F.h)},t.xor=function(F){for(var D=Math.max(this.g.length,F.g.length),L=[],G=0;G<D;G++)L[G]=this.i(G)^F.i(G);return new c(L,this.h^F.h)};function W(F){for(var D=F.g.length+1,L=[],G=0;G<D;G++)L[G]=F.i(G)<<1|F.i(G-1)>>>31;return new c(L,F.h)}function $(F,D){var L=D>>5;D%=32;for(var G=F.g.length-L,T=[],te=0;te<G;te++)T[te]=0<D?F.i(te+L)>>>D|F.i(te+L+1)<<32-D:F.i(te+L);return new c(T,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XI=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=b,xl=c}).apply(typeof aC<"u"?aC:typeof self<"u"?self:typeof window<"u"?window:{});var wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JI,rd,ZI,Kg,Lb,ex,tx,nx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,I){return y==Array.prototype||y==Object.prototype||(y[A]=I.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof wg=="object"&&wg];for(var A=0;A<y.length;++A){var I=y[A];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(y,A){if(A)e:{var I=r;y=y.split(".");for(var B=0;B<y.length-1;B++){var le=y[B];if(!(le in I))break e;I=I[le]}y=y[y.length-1],B=I[y],A=A(B),A!=B&&A!=null&&e(I,y,{configurable:!0,writable:!0,value:A})}}function o(y,A){y instanceof String&&(y+="");var I=0,B=!1,le={next:function(){if(!B&&I<y.length){var me=I++;return{value:A(me,y[me]),done:!1}}return B=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(y){return y||function(){return o(this,function(A,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function g(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function b(y,A,I){return y.call.apply(y.bind,arguments)}function E(y,A,I){if(!y)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,B),y.apply(A,le)}}return function(){return y.apply(A,arguments)}}function C(y,A,I){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:E,C.apply(null,arguments)}function O(y,A){var I=Array.prototype.slice.call(arguments,1);return function(){var B=I.slice();return B.push.apply(B,arguments),y.apply(this,B)}}function x(y,A){function I(){}I.prototype=A.prototype,y.aa=A.prototype,y.prototype=new I,y.prototype.constructor=y,y.Qb=function(B,le,me){for(var De=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)De[xt-2]=arguments[xt];return A.prototype[le].apply(B,De)}}function N(y){const A=y.length;if(0<A){const I=Array(A);for(let B=0;B<A;B++)I[B]=y[B];return I}return[]}function k(y,A){for(let I=1;I<arguments.length;I++){const B=arguments[I];if(p(B)){const le=y.length||0,me=B.length||0;y.length=le+me;for(let De=0;De<me;De++)y[le+De]=B[De]}else y.push(B)}}class V{constructor(A,I){this.i=A,this.j=I,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function X(y){return/^[\s\xa0]*$/.test(y)}function q(){var y=d.navigator;return y&&(y=y.userAgent)?y:""}function H(y){return H[" "](y),y}H[" "]=function(){};var W=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function $(y,A,I){for(const B in y)A.call(I,y[B],B,y)}function F(y,A){for(const I in y)A.call(void 0,y[I],I,y)}function D(y){const A={};for(const I in y)A[I]=y[I];return A}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(y,A){let I,B;for(let le=1;le<arguments.length;le++){B=arguments[le];for(I in B)y[I]=B[I];for(let me=0;me<L.length;me++)I=L[me],Object.prototype.hasOwnProperty.call(B,I)&&(y[I]=B[I])}}function T(y){var A=1;y=y.split(":");const I=[];for(;0<A&&y.length;)I.push(y.shift()),A--;return y.length&&I.push(y.join(":")),I}function te(y){d.setTimeout(()=>{throw y},0)}function K(){var y=Ue;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class ne{constructor(){this.h=this.g=null}add(A,I){const B=Pe.get();B.set(A,I),this.h?this.h.next=B:this.g=B,this.h=B}}var Pe=new V(()=>new J,y=>y.reset());class J{constructor(){this.next=this.g=this.h=null}set(A,I){this.h=A,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Ae=!1,Ue=new ne,Q=()=>{const y=d.Promise.resolve(void 0);oe=()=>{y.then(ge)}};var ge=()=>{for(var y;y=K();){try{y.h.call(y.g)}catch(I){te(I)}var A=Pe;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}Ae=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const I=()=>{};d.addEventListener("test",I,A),d.removeEventListener("test",I,A)}catch{}return y}();function qe(y,A){if(ve.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var I=this.type=y.type,B=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(W){e:{try{H(A.nodeName);var le=!0;break e}catch{}le=!1}le||(A=null)}}else I=="mouseover"?A=y.fromElement:I=="mouseout"&&(A=y.toElement);this.relatedTarget=A,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Le[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&qe.aa.h.call(this)}}x(qe,ve);var Le={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),gt=0;function An(y,A,I,B,le){this.listener=y,this.proxy=null,this.src=A,this.type=I,this.capture=!!B,this.ha=le,this.key=++gt,this.da=this.fa=!1}function Gt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function _n(y){this.src=y,this.g={},this.h=0}_n.prototype.add=function(y,A,I,B,le){var me=y.toString();y=this.g[me],y||(y=this.g[me]=[],this.h++);var De=Lr(y,A,B,le);return-1<De?(A=y[De],I||(A.fa=!1)):(A=new An(A,this.src,me,!!B,le),A.fa=I,y.push(A)),A};function Rn(y,A){var I=A.type;if(I in y.g){var B=y.g[I],le=Array.prototype.indexOf.call(B,A,void 0),me;(me=0<=le)&&Array.prototype.splice.call(B,le,1),me&&(Gt(A),y.g[I].length==0&&(delete y.g[I],y.h--))}}function Lr(y,A,I,B){for(var le=0;le<y.length;++le){var me=y[le];if(!me.da&&me.listener==A&&me.capture==!!I&&me.ha==B)return le}return-1}var Sn="closure_lm_"+(1e6*Math.random()|0),Ur={};function ms(y,A,I,B,le){if(Array.isArray(A)){for(var me=0;me<A.length;me++)ms(y,A[me],I,B,le);return null}return I=ys(I),y&&y[Ot]?y.K(A,I,g(B)?!!B.capture:!1,le):Ln(y,A,I,!1,B,le)}function Ln(y,A,I,B,le,me){if(!A)throw Error("Invalid event type");var De=g(le)?!!le.capture:!!le,xt=ei(y);if(xt||(y[Sn]=xt=new _n(y)),I=xt.add(A,I,B,De,me),I.proxy)return I;if(B=Er(),I.proxy=B,B.src=y,B.listener=I,y.addEventListener)ke||(le=De),le===void 0&&(le=!1),y.addEventListener(A.toString(),B,le);else if(y.attachEvent)y.attachEvent(Tt(A.toString()),B);else if(y.addListener&&y.removeListener)y.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Er(){function y(I){return A.call(y.src,y.listener,I)}const A=hr;return y}function er(y,A,I,B,le){if(Array.isArray(A))for(var me=0;me<A.length;me++)er(y,A[me],I,B,le);else B=g(B)?!!B.capture:!!B,I=ys(I),y&&y[Ot]?(y=y.i,A=String(A).toString(),A in y.g&&(me=y.g[A],I=Lr(me,I,B,le),-1<I&&(Gt(me[I]),Array.prototype.splice.call(me,I,1),me.length==0&&(delete y.g[A],y.h--)))):y&&(y=ei(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Lr(A,I,B,le)),(I=-1<y?A[y]:null)&&un(I))}function un(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[Ot])Rn(A.i,y);else{var I=y.type,B=y.proxy;A.removeEventListener?A.removeEventListener(I,B,y.capture):A.detachEvent?A.detachEvent(Tt(I),B):A.addListener&&A.removeListener&&A.removeListener(B),(I=ei(A))?(Rn(I,y),I.h==0&&(I.src=null,A[Sn]=null)):Gt(y)}}}function Tt(y){return y in Ur?Ur[y]:Ur[y]="on"+y}function hr(y,A){if(y.da)y=!0;else{A=new qe(A,this);var I=y.listener,B=y.ha||y.src;y.fa&&un(y),y=I.call(B,A)}return y}function ei(y){return y=y[Sn],y instanceof _n?y:null}var Ai="__closure_events_fn_"+(1e9*Math.random()>>>0);function ys(y){return typeof y=="function"?y:(y[Ai]||(y[Ai]=function(A){return y.handleEvent(A)}),y[Ai])}function jt(){ye.call(this),this.i=new _n(this),this.M=this,this.F=null}x(jt,ye),jt.prototype[Ot]=!0,jt.prototype.removeEventListener=function(y,A,I,B){er(this,y,A,I,B)};function nt(y,A){var I,B=y.F;if(B)for(I=[];B;B=B.F)I.push(B);if(y=y.M,B=A.type||A,typeof A=="string")A=new ve(A,y);else if(A instanceof ve)A.target=A.target||y;else{var le=A;A=new ve(B,y),G(A,le)}if(le=!0,I)for(var me=I.length-1;0<=me;me--){var De=A.g=I[me];le=Qt(De,B,!0,A)&&le}if(De=A.g=y,le=Qt(De,B,!0,A)&&le,le=Qt(De,B,!1,A)&&le,I)for(me=0;me<I.length;me++)De=A.g=I[me],le=Qt(De,B,!1,A)&&le}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var I=y.g[A],B=0;B<I.length;B++)Gt(I[B]);delete y.g[A],y.h--}}this.F=null},jt.prototype.K=function(y,A,I,B){return this.i.add(String(y),A,!1,I,B)},jt.prototype.L=function(y,A,I,B){return this.i.add(String(y),A,!0,I,B)};function Qt(y,A,I,B){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var le=!0,me=0;me<A.length;++me){var De=A[me];if(De&&!De.da&&De.capture==I){var xt=De.listener,jn=De.ha||De.src;De.fa&&Rn(y.i,De),le=xt.call(jn,B)!==!1&&le}}return le&&!B.defaultPrevented}function Ht(y,A,I){if(typeof y=="function")I&&(y=C(y,I));else if(y&&typeof y.handleEvent=="function")y=C(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(y,A||0)}function Ws(y){y.g=Ht(()=>{y.g=null,y.i&&(y.i=!1,Ws(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class ti extends ye{constructor(A,I){super(),this.m=A,this.l=I,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ws(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(y){ye.call(this),this.h=y,this.g={}}x(Ri,ye);var Oi=[];function ui(y){$(y.g,function(A,I){this.g.hasOwnProperty(I)&&un(A)},y),y.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),ui(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=d.JSON.stringify,Yi=d.JSON.parse,ni=class{stringify(y){return d.JSON.stringify(y,void 0)}parse(y){return d.JSON.parse(y,void 0)}};function Ii(){}Ii.prototype.h=null;function Qi(y){return y.h||(y.h=y.i())}function Xi(){}var rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fi(){ve.call(this,"d")}x(fi,ve);function vs(){ve.call(this,"c")}x(vs,ve);var Tr={},On=null;function Ji(){return On=On||new jt}Tr.La="serverreachability";function Ks(y){ve.call(this,Tr.La,y)}x(Ks,ve);function ee(y){const A=Ji();nt(A,new Ks(A))}Tr.STAT_EVENT="statevent";function ae(y,A){ve.call(this,Tr.STAT_EVENT,y),this.stat=A}x(ae,ve);function ce(y){const A=Ji();nt(A,new ae(A,y))}Tr.Ma="timingevent";function Te(y,A){ve.call(this,Tr.Ma,y),this.size=A}x(Te,ve);function Ie(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){y()},A)}function Fe(){this.g=!0}Fe.prototype.xa=function(){this.g=!1};function Je(y,A,I,B,le,me){y.info(function(){if(y.g)if(me)for(var De="",xt=me.split("&"),jn=0;jn<xt.length;jn++){var Pt=xt[jn].split("=");if(1<Pt.length){var $n=Pt[0];Pt=Pt[1];var Fn=$n.split("_");De=2<=Fn.length&&Fn[1]=="type"?De+($n+"="+Pt+"&"):De+($n+"=redacted&")}}else De=null;else De=me;return"XMLHTTP REQ ("+B+") [attempt "+le+"]: "+A+`
`+I+`
`+De})}function Be(y,A,I,B,le,me,De){y.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+le+"]: "+A+`
`+I+`
`+me+" "+De})}function $e(y,A,I,B){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+it(y,I)+(B?" "+B:"")})}function Ye(y,A){y.info(function(){return"TIMEOUT: "+A})}Fe.prototype.info=function(){};function it(y,A){if(!y.g)return A;if(!A)return null;try{var I=JSON.parse(A);if(I){for(y=0;y<I.length;y++)if(Array.isArray(I[y])){var B=I[y];if(!(2>B.length)){var le=B[1];if(Array.isArray(le)&&!(1>le.length)){var me=le[0];if(me!="noop"&&me!="stop"&&me!="close")for(var De=1;De<le.length;De++)le[De]=""}}}}return wr(I)}catch{return A}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},et={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wt;function Ut(){}x(Ut,Ii),Ut.prototype.g=function(){return new XMLHttpRequest},Ut.prototype.i=function(){return{}},wt=new Ut;function Ft(y,A,I,B){this.j=y,this.i=A,this.l=I,this.R=B||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var Ne={},hi={};function Un(y,A,I){y.L=1,y.v=fn(ii(A)),y.m=I,y.P=!0,tr(y,null)}function tr(y,A){y.F=Date.now(),Vr(y),y.A=ii(y.v);var I=y.A,B=y.R;Array.isArray(B)||(B=[String(B)]),Io(I.i,"t",B),y.C=0,I=y.j.J,y.h=new It,y.g=uu(y.j,I?A:null,!y.m),0<y.O&&(y.M=new ti(C(y.Y,y,y.g),y.O)),A=y.U,I=y.g,B=y.ca;var le="readystatechange";Array.isArray(le)||(le&&(Oi[0]=le.toString()),le=Oi);for(var me=0;me<le.length;me++){var De=ms(I,le[me],B||A.handleEvent,!1,A.h||A);if(!De)break;A.g[De.key]=De}A=y.H?D(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),ee(),Je(y.i,y.u,y.A,y.l,y.R,y.m)}Ft.prototype.ca=function(y){y=y.target;const A=this.M;A&&si(y)==3?A.j():this.Y(y)},Ft.prototype.Y=function(y){try{if(y==this.g)e:{const Fn=si(this.g);var A=this.g.Ba();const as=this.g.Z();if(!(3>Fn)&&(Fn!=3||this.g&&(this.h.h||this.g.oa()||su(this.g)))){this.J||Fn!=4||A==7||(A==8||0>=as?ee(3):ee(2)),Vn(this);var I=this.g.Z();this.X=I;t:if(Hn(this)){var B=su(this.g);y="";var le=B.length,me=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ht(this),nr(this);var De="";break t}this.h.i=new d.TextDecoder}for(A=0;A<le;A++)this.h.h=!0,y+=this.h.i.decode(B[A],{stream:!(me&&A==le-1)});B.length=0,this.h.g+=y,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=I==200,Be(this.i,this.u,this.A,this.l,this.R,Fn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var xt,jn=this.g;if((xt=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(xt)){var Pt=xt;break t}}Pt=null}if(I=Pt)$e(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,In(this,I);else{this.o=!1,this.s=3,ce(12),ht(this),nr(this);break e}}if(this.P){I=!0;let Gn;for(;!this.J&&this.C<De.length;)if(Gn=qt(this,De),Gn==hi){Fn==4&&(this.s=4,ce(14),I=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==Ne){this.s=4,ce(15),$e(this.i,this.l,De,"[Invalid Chunk]"),I=!1;break}else $e(this.i,this.l,Gn,null),In(this,Gn);if(Hn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fn!=4||De.length!=0||this.h.h||(this.s=1,ce(16),I=!1),this.o=this.o&&I,!I)$e(this.i,this.l,De,"[Invalid Chunked Response]"),ht(this),nr(this);else if(0<De.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),Hr($n),$n.M=!0,ce(11))}}else $e(this.i,this.l,De,null),In(this,De);Fn==4&&ht(this),this.o&&!this.J&&(Fn==4?sc(this.j,this):(this.o=!1,Vr(this)))}else Mo(this.g),I==400&&0<De.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),ht(this),nr(this)}}}catch{}finally{}};function Hn(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function qt(y,A){var I=y.C,B=A.indexOf(`
`,I);return B==-1?hi:(I=Number(A.substring(I,B)),isNaN(I)?Ne:(B+=1,B+I>A.length?hi:(A=A.slice(B,B+I),y.C=B+I,A)))}Ft.prototype.cancel=function(){this.J=!0,ht(this)};function Vr(y){y.S=Date.now()+y.I,Ys(y,y.I)}function Ys(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Ie(C(y.ba,y),A)}function Vn(y){y.B&&(d.clearTimeout(y.B),y.B=null)}Ft.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Ye(this.i,this.A),this.L!=2&&(ee(),ce(17)),ht(this),this.s=2,nr(this)):Ys(this,this.S-y)};function nr(y){y.j.G==0||y.J||sc(y.j,y)}function ht(y){Vn(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,ui(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function In(y,A){try{var I=y.j;if(I.G!=0&&(I.g==y||di(I.h,y))){if(!y.K&&di(I.h,y)&&I.G==3){try{var B=I.Da.g.parse(A)}catch{B=null}if(Array.isArray(B)&&B.length==3){var le=B;if(le[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<y.F)No(I),Do(I);else break e;ws(I),ce(18)}}else I.za=le[1],0<I.za-I.T&&37500>le[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ie(C(I.Za,I),6e3));if(1>=Xt(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ts(I,11)}else if((y.K||I.g==y)&&No(I),!X(A))for(le=I.Da.g.parse(A),A=0;A<le.length;A++){let Pt=le[A];if(I.T=Pt[0],Pt=Pt[1],I.G==2)if(Pt[0]=="c"){I.K=Pt[1],I.ia=Pt[2];const $n=Pt[3];$n!=null&&(I.la=$n,I.j.info("VER="+I.la));const Fn=Pt[4];Fn!=null&&(I.Aa=Fn,I.j.info("SVER="+I.Aa));const as=Pt[5];as!=null&&typeof as=="number"&&0<as&&(B=1.5*as,I.L=B,I.j.info("backChannelRequestTimeoutMs_="+B)),B=I;const Gn=y.g;if(Gn){const Ni=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var me=B.h;me.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Zi(me,me.h),me.h=null))}if(B.D){const Uo=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(B.ya=Uo,Jt(B.I,B.D,Uo))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-y.F,I.j.info("Handshake RTT: "+I.R+"ms")),B=I;var De=y;if(B.qa=cu(B,B.J?B.ia:null,B.W),De.K){rr(B.h,De);var xt=De,jn=B.L;jn&&(xt.I=jn),xt.B&&(Vn(xt),Vr(xt)),B.g=De}else ic(B);0<I.i.length&&La(I)}else Pt[0]!="stop"&&Pt[0]!="close"||Ts(I,7);else I.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?Ts(I,7):tc(I):Pt[0]!="noop"&&I.l&&I.l.ta(Pt),I.v=0)}}ee(4)}catch{}}var jr=class{constructor(y,A){this.g=y,this.map=A}};function Fr(y){this.l=y||10,d.PerformanceNavigationTiming?(y=d.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xi(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Xt(y){return y.h?1:y.g?y.g.size:0}function di(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function Zi(y,A){y.g?y.g.add(A):y.h=A}function rr(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}Fr.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Xl(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const I of y.g.values())A=A.concat(I.D);return A}return N(y.i)}function qf(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(p(y)){for(var A=[],I=y.length,B=0;B<I;B++)A.push(y[B]);return A}A=[],I=0;for(B in y)A[I++]=y[B];return A}function Ao(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(p(y)||typeof y=="string"){var A=[];y=y.length;for(var I=0;I<y;I++)A.push(I);return A}A=[],I=0;for(const B in y)A[I++]=B;return A}}}function ri(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(p(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var I=Ao(y),B=qf(y),le=B.length,me=0;me<le;me++)A.call(void 0,B[me],I&&I[me],y)}var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qs(y,A){if(y){y=y.split("&");for(var I=0;I<y.length;I++){var B=y[I].indexOf("="),le=null;if(0<=B){var me=y[I].substring(0,B);le=y[I].substring(B+1)}else me=y[I];A(me,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function xn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof xn){this.h=y.h,_s(this,y.j),this.o=y.o,this.g=y.g,Xs(this,y.s),this.l=y.l;var A=y.i,I=new es;I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),Pi(this,I),this.m=y.m}else y&&(A=String(y).match(bs))?(this.h=!1,_s(this,A[1]||"",!0),this.o=Ge(A[2]||""),this.g=Ge(A[3]||"",!0),Xs(this,A[4]),this.l=Ge(A[5]||"",!0),Pi(this,A[6]||"",!0),this.m=Ge(A[7]||"")):(this.h=!1,this.i=new es(null,this.h))}xn.prototype.toString=function(){var y=[],A=this.j;A&&y.push(Js(A,Jl,!0),":");var I=this.g;return(I||A=="file")&&(y.push("//"),(A=this.o)&&y.push(Js(A,Jl,!0),"@"),y.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&y.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&y.push("/"),y.push(Js(I,I.charAt(0)=="/"?$f:Ro,!0))),(I=this.i.toString())&&y.push("?",I),(I=this.m)&&y.push("#",Js(I,Oo)),y.join("")};function ii(y){return new xn(y)}function _s(y,A,I){y.j=I?Ge(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function Xs(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function Pi(y,A,I){A instanceof es?(y.i=A,Zl(y.i,y.h)):(I||(A=Js(A,ru)),y.i=new es(A,y.h))}function Jt(y,A,I){y.i.set(A,I)}function fn(y){return Jt(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Ge(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Js(y,A,I){return typeof y=="string"?(y=encodeURI(y).replace(A,ir),I&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function ir(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Jl=/[#\/\?@]/g,Ro=/[#\?:]/g,$f=/[#\?]/g,ru=/[#\?@]/g,Oo=/#/g;function es(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Br(y){y.g||(y.g=new Map,y.h=0,y.i&&Qs(y.i,function(A,I){y.add(decodeURIComponent(A.replace(/\+/g," ")),I)}))}t=es.prototype,t.add=function(y,A){Br(this),this.i=null,y=pi(this,y);var I=this.g.get(y);return I||this.g.set(y,I=[]),I.push(A),this.h+=1,this};function ts(y,A){Br(y),A=pi(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function Mi(y,A){return Br(y),A=pi(y,A),y.g.has(A)}t.forEach=function(y,A){Br(this),this.g.forEach(function(I,B){I.forEach(function(le){y.call(A,le,B,this)},this)},this)},t.na=function(){Br(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),I=[];for(let B=0;B<A.length;B++){const le=y[B];for(let me=0;me<le.length;me++)I.push(A[B])}return I},t.V=function(y){Br(this);let A=[];if(typeof y=="string")Mi(this,y)&&(A=A.concat(this.g.get(pi(this,y))));else{y=Array.from(this.g.values());for(let I=0;I<y.length;I++)A=A.concat(y[I])}return A},t.set=function(y,A){return Br(this),this.i=null,y=pi(this,y),Mi(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function Io(y,A,I){ts(y,A),0<I.length&&(y.i=null,y.g.set(pi(y,A),N(I)),y.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var I=0;I<A.length;I++){var B=A[I];const me=encodeURIComponent(String(B)),De=this.V(B);for(B=0;B<De.length;B++){var le=me;De[B]!==""&&(le+="="+encodeURIComponent(String(De[B]))),y.push(le)}}return this.i=y.join("&")};function pi(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function Zl(y,A){A&&!y.j&&(Br(y),y.i=null,y.g.forEach(function(I,B){var le=B.toLowerCase();B!=le&&(ts(this,B),Io(this,le,I))},y)),y.j=A}function ns(y,A){const I=new Fe;if(d.Image){const B=new Image;B.onload=O(sr,I,"TestLoadImage: loaded",!0,A,B),B.onerror=O(sr,I,"TestLoadImage: error",!1,A,B),B.onabort=O(sr,I,"TestLoadImage: abort",!1,A,B),B.ontimeout=O(sr,I,"TestLoadImage: timeout",!1,A,B),d.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=y}else A(!1)}function zr(y,A){const I=new Fe,B=new AbortController,le=setTimeout(()=>{B.abort(),sr(I,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:B.signal}).then(me=>{clearTimeout(le),me.ok?sr(I,"TestPingServer: ok",!0,A):sr(I,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(le),sr(I,"TestPingServer: error",!1,A)})}function sr(y,A,I,B,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),B(I)}catch{}}function gi(){this.g=new ni}function ki(y,A,I){const B=I||"";try{ri(y,function(le,me){let De=le;g(le)&&(De=wr(le)),A.push(B+me+"="+encodeURIComponent(De))})}catch(le){throw A.push(B+"type="+encodeURIComponent("_badmap")),le}}function Ss(y){this.l=y.Ub||null,this.j=y.eb||!1}x(Ss,Ii),Ss.prototype.g=function(){return new Es(this.l,this.j)},Ss.prototype.i=function(y){return function(){return y}}({});function Es(y,A){jt.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Es,jt),t=Es.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,is(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rs(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function rs(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?Di(this):is(this),this.readyState==3&&rs(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,Di(this))},t.Qa=function(y){this.g&&(this.response=y,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(y){y.readyState=4,y.l=null,y.j=null,y.v=null,is(y)}t.setRequestHeader=function(y,A){this.u.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var I=A.next();!I.done;)I=I.value,y.push(I[0]+": "+I[1]),I=A.next();return y.join(`\r
`)};function is(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ec(y){let A="";return $(y,function(I,B){A+=B,A+=":",A+=I,A+=`\r
`}),A}function qn(y,A,I){e:{for(B in I){var B=!1;break e}B=!0}B||(I=ec(I),typeof y=="string"?I!=null&&encodeURIComponent(String(I)):Jt(y,A,I))}function at(y){jt.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(at,jt);var xo=/^https?$/i,ka=["POST","PUT"];t=at.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,A,I,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wt.g(),this.v=this.o?Qi(this.o):Qi(wt),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(me){iu(this,me);return}if(y=I||"",I=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var le in B)I.set(le,B[le]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const me of B.keys())I.set(me,B.get(me));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(I.keys()).find(me=>me.toLowerCase()=="content-type"),le=d.FormData&&y instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ka,A,void 0))||B||le||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,De]of I)this.g.setRequestHeader(me,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dr(this),this.u=!0,this.g.send(y),this.u=!1}catch(me){iu(this,me)}};function iu(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Po(y),ss(y)}function Po(y){y.A||(y.A=!0,nt(y,"complete"),nt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,nt(this,"complete"),nt(this,"abort"),ss(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},t.bb=function(){Da(this)};function Da(y){if(y.h&&typeof c<"u"&&(!y.v[1]||si(y)!=4||y.Z()!=2)){if(y.u&&si(y)==4)Ht(y.Ea,0,y);else if(nt(y,"readystatechange"),si(y)==4){y.h=!1;try{const De=y.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var I;if(!(I=A)){var B;if(B=De===0){var le=String(y.D).match(bs)[1]||null;!le&&d.self&&d.self.location&&(le=d.self.location.protocol.slice(0,-1)),B=!xo.test(le?le.toLowerCase():"")}I=B}if(I)nt(y,"complete"),nt(y,"success");else{y.m=6;try{var me=2<si(y)?y.g.statusText:""}catch{me=""}y.l=me+" ["+y.Z()+"]",Po(y)}}finally{ss(y)}}}}function ss(y,A){if(y.g){dr(y);const I=y.g,B=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||nt(y,"ready");try{I.onreadystatechange=B}catch{}}}function dr(y){y.I&&(d.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function si(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Yi(A)}};function su(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Mo(y){const A={};y=(y.g&&2<=si(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<y.length;B++){if(X(y[B]))continue;var I=T(y[B]);const le=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const me=A[le]||[];A[le]=me,me.push(I)}F(A,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Na(y,A,I){return I&&I.internalChannelParams&&I.internalChannelParams[y]||A}function ko(y){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Na("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Na("baseRetryDelayMs",5e3,y),this.cb=Na("retryDelaySeedMs",1e4,y),this.Wa=Na("forwardChannelMaxRetries",2,y),this.wa=Na("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Fr(y&&y.concurrentRequestLimit),this.Da=new gi,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ko.prototype,t.la=8,t.G=1,t.connect=function(y,A,I,B){ce(0),this.W=y,this.H=A||{},I&&B!==void 0&&(this.H.OSID=I,this.H.OAID=B),this.F=this.X,this.I=cu(this,null,this.W),La(this)};function tc(y){if(au(y),y.G==3){var A=y.U++,I=ii(y.I);if(Jt(I,"SID",y.K),Jt(I,"RID",A),Jt(I,"TYPE","terminate"),Ua(y,I),A=new Ft(y,y.j,A),A.L=2,A.v=fn(ii(I)),I=!1,d.navigator&&d.navigator.sendBeacon)try{I=d.navigator.sendBeacon(A.v.toString(),"")}catch{}!I&&d.Image&&(new Image().src=A.v,I=!0),I||(A.g=uu(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Vr(A)}oc(y)}function Do(y){y.g&&(Hr(y),y.g.cancel(),y.g=null)}function au(y){Do(y),y.u&&(d.clearTimeout(y.u),y.u=null),No(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&d.clearTimeout(y.s),y.s=null)}function La(y){if(!xi(y.h)&&!y.s){y.s=!0;var A=y.Ga;oe||Q(),Ae||(oe(),Ae=!0),Ue.add(A,y),y.B=0}}function ou(y,A){return Xt(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Ie(C(y.Ga,y,A),ac(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const le=new Ft(this,this.j,y);let me=this.o;if(this.S&&(me?(me=D(me),G(me,this.S)):me=this.S),this.m!==null||this.O||(le.H=me,me=null),this.P)e:{for(var A=0,I=0;I<this.i.length;I++){t:{var B=this.i[I];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(A+=B,4096<A){A=I;break e}if(A===4096||I===this.i.length-1){A=I+1;break e}}A=1e3}else A=1e3;A=rc(this,le,A),I=ii(this.I),Jt(I,"RID",y),Jt(I,"CVER",22),this.D&&Jt(I,"X-HTTP-Session-Id",this.D),Ua(this,I),me&&(this.O?A="headers="+encodeURIComponent(String(ec(me)))+"&"+A:this.m&&qn(I,this.m,me)),Zi(this.h,le),this.Ua&&Jt(I,"TYPE","init"),this.P?(Jt(I,"$req",A),Jt(I,"SID","null"),le.T=!0,Un(le,I,null)):Un(le,I,A),this.G=2}}else this.G==3&&(y?nc(this,y):this.i.length==0||xi(this.h)||nc(this))};function nc(y,A){var I;A?I=A.l:I=y.U++;const B=ii(y.I);Jt(B,"SID",y.K),Jt(B,"RID",I),Jt(B,"AID",y.T),Ua(y,B),y.m&&y.o&&qn(B,y.m,y.o),I=new Ft(y,y.j,I,y.B+1),y.m===null&&(I.H=y.o),A&&(y.i=A.D.concat(y.i)),A=rc(y,I,1e3),I.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Zi(y.h,I),Un(I,B,A)}function Ua(y,A){y.H&&$(y.H,function(I,B){Jt(A,B,I)}),y.l&&ri({},function(I,B){Jt(A,B,I)})}function rc(y,A,I){I=Math.min(y.i.length,I);var B=y.l?C(y.l.Na,y.l,y):null;e:{var le=y.i;let me=-1;for(;;){const De=["count="+I];me==-1?0<I?(me=le[0].g,De.push("ofs="+me)):me=0:De.push("ofs="+me);let xt=!0;for(let jn=0;jn<I;jn++){let Pt=le[jn].g;const $n=le[jn].map;if(Pt-=me,0>Pt)me=Math.max(0,le[jn].g-100),xt=!1;else try{ki($n,De,"req"+Pt+"_")}catch{B&&B($n)}}if(xt){B=De.join("&");break e}}}return y=y.i.splice(0,I),A.D=y,B}function ic(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;oe||Q(),Ae||(oe(),Ae=!0),Ue.add(A,y),y.v=0}}function ws(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Ie(C(y.Fa,y),ac(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Ie(C(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Do(this),lu(this))};function Hr(y){y.A!=null&&(d.clearTimeout(y.A),y.A=null)}function lu(y){y.g=new Ft(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=ii(y.qa);Jt(A,"RID","rpc"),Jt(A,"SID",y.K),Jt(A,"AID",y.T),Jt(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&Jt(A,"TO",y.ja),Jt(A,"TYPE","xmlhttp"),Ua(y,A),y.m&&y.o&&qn(A,y.m,y.o),y.L&&(y.g.I=y.L);var I=y.g;y=y.ia,I.L=1,I.v=fn(ii(A)),I.m=null,I.P=!0,tr(I,y)}t.Za=function(){this.C!=null&&(this.C=null,Do(this),ws(this),ce(19))};function No(y){y.C!=null&&(d.clearTimeout(y.C),y.C=null)}function sc(y,A){var I=null;if(y.g==A){No(y),Hr(y),y.g=null;var B=2}else if(di(y.h,A))I=A.D,rr(y.h,A),B=1;else return;if(y.G!=0){if(A.o)if(B==1){I=A.m?A.m.length:0,A=Date.now()-A.F;var le=y.B;B=Ji(),nt(B,new Te(B,I)),La(y)}else ic(y);else if(le=A.s,le==3||le==0&&0<A.X||!(B==1&&ou(y,A)||B==2&&ws(y)))switch(I&&0<I.length&&(A=y.h,A.i=A.i.concat(I)),le){case 1:Ts(y,5);break;case 4:Ts(y,10);break;case 3:Ts(y,6);break;default:Ts(y,2)}}}function ac(y,A){let I=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(I*=2),I*A}function Ts(y,A){if(y.j.info("Error code "+A),A==2){var I=C(y.fb,y),B=y.Xa;const le=!B;B=new xn(B||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||_s(B,"https"),fn(B),le?ns(B.toString(),I):zr(B.toString(),I)}else ce(2);y.G=0,y.l&&y.l.sa(A),oc(y),au(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function oc(y){if(y.G=0,y.ka=[],y.l){const A=Xl(y.h);(A.length!=0||y.i.length!=0)&&(k(y.ka,A),k(y.ka,y.i),y.h.i.length=0,N(y.i),y.i.length=0),y.l.ra()}}function cu(y,A,I){var B=I instanceof xn?ii(I):new xn(I);if(B.g!="")A&&(B.g=A+"."+B.g),Xs(B,B.s);else{var le=d.location;B=le.protocol,A=A?A+"."+le.hostname:le.hostname,le=+le.port;var me=new xn(null);B&&_s(me,B),A&&(me.g=A),le&&Xs(me,le),I&&(me.l=I),B=me}return I=y.D,A=y.ya,I&&A&&Jt(B,I,A),Jt(B,"VER",y.la),Ua(y,B),B}function uu(y,A,I){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new at(new Ss({eb:I})):new at(y.pa),A.Ha(y.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}t=fu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Va(){}Va.prototype.g=function(y,A){return new Cr(y,A)};function Cr(y,A){jt.call(this),this.g=new ko(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!X(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!X(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new qr(this)}x(Cr,jt),Cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){tc(this.g)},Cr.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var I={};I.__data__=y,y=I}else this.u&&(I={},I.__data__=wr(y),y=I);A.i.push(new jr(A.Ya++,y)),A.G==3&&La(A)},Cr.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,Cr.aa.N.call(this)};function Lo(y){fi.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const I in A){y=I;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}x(Lo,fi);function lc(){vs.call(this),this.status=1}x(lc,vs);function qr(y){this.g=y}x(qr,fu),qr.prototype.ua=function(){nt(this.g,"a")},qr.prototype.ta=function(y){nt(this.g,new Lo(y))},qr.prototype.sa=function(y){nt(this.g,new lc)},qr.prototype.ra=function(){nt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,nx=function(){return new Va},tx=function(){return Ji()},ex=Tr,Lb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,Kg=We,et.COMPLETE="complete",ZI=et,Xi.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",jt.prototype.listen=jt.prototype.K,rd=Xi,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,JI=at}).apply(typeof wg<"u"?wg:typeof self<"u"?self:typeof window<"u"?window:{});const oC="@firebase/firestore",lC="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new N_("@firebase/firestore");function Zu(){return Hc.logLevel}function ze(t,...e){if(Hc.logLevel<=Nt.DEBUG){const n=e.map(cS);Hc.debug(`Firestore (${Df}): ${t}`,...n)}}function vo(t,...e){if(Hc.logLevel<=Nt.ERROR){const n=e.map(cS);Hc.error(`Firestore (${Df}): ${t}`,...n)}}function vf(t,...e){if(Hc.logLevel<=Nt.WARN){const n=e.map(cS);Hc.warn(`Firestore (${Df}): ${t}`,...n)}}function cS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rx(t,r,n)}function rx(t,e,n){let r=`FIRESTORE (${Df}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vo(r),new Error(r)}function nn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||rx(e,i,r)}function _t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends wo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qr.UNAUTHENTICATED))}shutdown(){}}class p9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g9{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nn(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let o=new fo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const p=o;e.enqueueRetryable(async()=>{await p.promise,await i(this.currentUser)})},d=p=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fo)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new ix(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new Qr(e)}}class m9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new m9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nn(this.o===void 0,3512);const r=o=>{o.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=b9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ct(t,e){return t<e?-1:t>e?1:0}function Ub(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ct(r,i);{const o=sx(),c=_9(o.encode(uC(t,n)),o.encode(uC(e,n)));return c!==0?c:Ct(r,i)}}n+=r>65535?2:1}return Ct(t.length,e.length)}function uC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function _9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ct(t[n],e[n]);return Ct(t.length,e.length)}function bf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=-62135596800,hC=1e6;class cr{static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hC);return new cr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fC)throw new He(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hC}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-fC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new cr(0,0))}static max(){return new yt(new cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="__name__";class pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ft(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ft(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=pa.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ct(e.length,n.length)}static compareSegments(e,n){const r=pa.isNumericId(e),i=pa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?pa.extractNumericId(e).compare(pa.extractNumericId(n)):Ub(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xl.fromString(e.substring(4,e.length-2))}}class pn extends pa{construct(e,n,r){return new pn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pn(n)}static emptyPath(){return new pn([])}}const S9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends pa{construct(e,n,r){return new kr(e,n,r)}static isValidIdentifier(e){return S9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vb}static keyField(){return new kr([Vb])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new He(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new He(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new He(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new He(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(n)}static emptyPath(){return new kr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(pn.fromString(e))}static fromName(e){return new rt(pn.fromString(e).popFirst(5))}static empty(){return new rt(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new pn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=-1;function E9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new cr(n+1,0):new cr(n,r));return new Nl(i,rt.empty(),e)}function w9(t){return new Nl(t.readTime,t.key,Ad)}class Nl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nl(yt.min(),rt.empty(),Ad)}static max(){return new Nl(yt.max(),rt.empty(),Ad)}}function T9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=rt.comparator(t.documentKey,e.documentKey),n!==0?n:Ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nf(t){if(t.code!==Re.FAILED_PRECONDITION||t.message!==C9)throw t;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Oe?n:Oe.resolve(n)}catch(n){return Oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.reject(n)}static resolve(e){return new Oe((n,r)=>{n(e)})}static reject(e){return new Oe((n,r)=>{r(e)})}static waitFor(e){return new Oe((n,r)=>{let i=0,o=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++o,c&&o===i&&n()},p=>r(p))}),c=!0,o===i&&n()})}static or(e){let n=Oe.resolve(!1);for(const r of e)n=n.next(i=>i?Oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Oe((r,i)=>{const o=e.length,c=new Array(o);let d=0;for(let p=0;p<o;p++){const g=p;n(e[g]).next(b=>{c[g]=b,++d,d===o&&r(c)},b=>i(b))}})}static doWhile(e,n){return new Oe((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function R9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}my.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=-1;function yy(t){return t==null}function xm(t){return t===0&&1/t==-1/0}function O9(t){return typeof t=="number"&&Number.isInteger(t)&&!xm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="";function I9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dC(e)),e=x9(t.get(n),e);return dC(e)}function x9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case ox:n+="";break;default:n+=o}}return n}function dC(t){return t+ox+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.comparator=e,this.root=n||Pr.EMPTY}insert(e,n){return new Cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tg(this.root,e,this.comparator,!0)}}class Tg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Pr.RED,this.left=i??Pr.EMPTY,this.right=o??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Pr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ft(27949);return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw ft(57766)}get value(){throw ft(16141)}get color(){throw ft(16727)}get left(){throw ft(29726)}get right(){throw ft(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gC(this.data.getIterator())}getIteratorFrom(e){return new gC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ur(this.comparator);return n.data=e,n}}class gC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.fields=e,e.sort(kr.comparator)}static empty(){return new Fs([])}unionWith(e){let n=new ur(kr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cx("Invalid base64 string: "+o):o}}(e);return new Nr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Nr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const P9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ll(t){if(nn(!!t,39018),typeof t=="string"){let e=0;const n=P9.exec(t);if(nn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ul(t){return typeof t=="string"?Nr.fromBase64String(t):Nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="server_timestamp",fx="__type__",hx="__previous_value__",dx="__local_write_time__";function fS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[fx])===null||n===void 0?void 0:n.stringValue)===ux}function vy(t){const e=t.mapValue.fields[hx];return fS(e)?vy(e):e}function Rd(t){const e=Ll(t.mapValue.fields[dx].timestampValue);return new cr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n,r,i,o,c,d,p,g,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=b}}const Pm="(default)";class Od{constructor(e,n){this.projectId=e,this.database=n||Pm}static empty(){return new Od("","")}get isDefaultDatabase(){return this.database===Pm}isEqual(e){return e instanceof Od&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__type__",k9="__max__",Cg={mapValue:{}},gx="__vector__",Mm="value";function Vl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fS(t)?4:N9(t)?9007199254740991:D9(t)?10:11:ft(28295,{value:t})}function Ia(t,e){if(t===e)return!0;const n=Vl(t);if(n!==Vl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rd(t).isEqual(Rd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Ll(i.timestampValue),d=Ll(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ul(i.bytesValue).isEqual(Ul(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return zn(i.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(i.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return zn(i.integerValue)===zn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=zn(i.doubleValue),d=zn(o.doubleValue);return c===d?xm(c)===xm(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return bf(t.arrayValue.values||[],e.arrayValue.values||[],Ia);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},d=o.mapValue.fields||{};if(pC(c)!==pC(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ia(c[p],d[p])))return!1;return!0}(t,e);default:return ft(52216,{left:t})}}function Id(t,e){return(t.values||[]).find(n=>Ia(n,e))!==void 0}function _f(t,e){if(t===e)return 0;const n=Vl(t),r=Vl(e);if(n!==r)return Ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(t.booleanValue,e.booleanValue);case 2:return function(o,c){const d=zn(o.integerValue||o.doubleValue),p=zn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(t,e);case 3:return mC(t.timestampValue,e.timestampValue);case 4:return mC(Rd(t),Rd(e));case 5:return Ub(t.stringValue,e.stringValue);case 6:return function(o,c){const d=Ul(o),p=Ul(c);return d.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const b=Ct(d[g],p[g]);if(b!==0)return b}return Ct(d.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const d=Ct(zn(o.latitude),zn(c.latitude));return d!==0?d:Ct(zn(o.longitude),zn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yC(t.arrayValue,e.arrayValue);case 10:return function(o,c){var d,p,g,b;const E=o.fields||{},C=c.fields||{},O=(d=E[Mm])===null||d===void 0?void 0:d.arrayValue,x=(p=C[Mm])===null||p===void 0?void 0:p.arrayValue,N=Ct(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((b=x==null?void 0:x.values)===null||b===void 0?void 0:b.length)||0);return N!==0?N:yC(O,x)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Cg.mapValue&&c===Cg.mapValue)return 0;if(o===Cg.mapValue)return 1;if(c===Cg.mapValue)return-1;const d=o.fields||{},p=Object.keys(d),g=c.fields||{},b=Object.keys(g);p.sort(),b.sort();for(let E=0;E<p.length&&E<b.length;++E){const C=Ub(p[E],b[E]);if(C!==0)return C;const O=_f(d[p[E]],g[b[E]]);if(O!==0)return O}return Ct(p.length,b.length)}(t.mapValue,e.mapValue);default:throw ft(23264,{Pe:n})}}function mC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ct(t,e);const n=Ll(t),r=Ll(e),i=Ct(n.seconds,r.seconds);return i!==0?i:Ct(n.nanos,r.nanos)}function yC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=_f(n[i],r[i]);if(o)return o}return Ct(n.length,r.length)}function Sf(t){return jb(t)}function jb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ll(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ul(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return rt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=jb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${jb(n.fields[c])}`;return i+"}"}(t.mapValue):ft(61005,{value:t})}function Yg(t){switch(Vl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vy(t);return e?16+Yg(e):16;case 5:return 2*t.stringValue.length;case 6:return Ul(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Yg(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Xc(r.fields,(o,c)=>{i+=o.length+Yg(c)}),i}(t.mapValue);default:throw ft(13486,{value:t})}}function vC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fb(t){return!!t&&"integerValue"in t}function hS(t){return!!t&&"arrayValue"in t}function bC(t){return!!t&&"nullValue"in t}function _C(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qg(t){return!!t&&"mapValue"in t}function D9(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[px])===null||n===void 0?void 0:n.stringValue)===gx}function fd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function N9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===k9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(n)}setAll(e){let n=kr.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const p=this.getFieldsMap(n);this.applyChanges(p,r,i),r={},i=[],n=d.popLast()}c?r[d.lastSegment()]=fd(c):i.push(d.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Qg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ia(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xc(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new gs(fd(this.value))}}function mx(t){const e=[];return Xc(t.fields,(n,r)=>{const i=new kr([n]);if(Qg(r)){const o=mx(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Fs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,i,o,c,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Xr(e,0,yt.min(),yt.min(),yt.min(),gs.empty(),0)}static newFoundDocument(e,n,r,i){return new Xr(e,1,n,yt.min(),r,i,0)}static newNoDocument(e,n){return new Xr(e,2,n,yt.min(),yt.min(),gs.empty(),0)}static newUnknownDocument(e,n){return new Xr(e,3,n,yt.min(),yt.min(),gs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.position=e,this.inclusive=n}}function SC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=rt.comparator(rt.fromName(c.referenceValue),n.key):r=_f(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function EC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ia(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function L9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{}class Jn extends yx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new V9(e,n,r):n==="array-contains"?new B9(e,r):n==="in"?new z9(e,r):n==="not-in"?new H9(e,r):n==="array-contains-any"?new q9(e,r):new Jn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new j9(e,r):new F9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_f(n,this.value)):n!==null&&Vl(this.value)===Vl(n)&&this.matchesComparison(_f(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zs extends yx{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new zs(e,n)}matches(e){return vx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function vx(t){return t.op==="and"}function bx(t){return U9(t)&&vx(t)}function U9(t){for(const e of t.filters)if(e instanceof zs)return!1;return!0}function Bb(t){if(t instanceof Jn)return t.field.canonicalString()+t.op.toString()+Sf(t.value);if(bx(t))return t.filters.map(e=>Bb(e)).join(",");{const e=t.filters.map(n=>Bb(n)).join(",");return`${t.op}(${e})`}}function _x(t,e){return t instanceof Jn?function(r,i){return i instanceof Jn&&r.op===i.op&&r.field.isEqual(i.field)&&Ia(r.value,i.value)}(t,e):t instanceof zs?function(r,i){return i instanceof zs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,d)=>o&&_x(c,i.filters[d]),!0):!1}(t,e):void ft(19439)}function Sx(t){return t instanceof Jn?function(n){return`${n.field.canonicalString()} ${n.op} ${Sf(n.value)}`}(t):t instanceof zs?function(n){return n.op.toString()+" {"+n.getFilters().map(Sx).join(" ,")+"}"}(t):"Filter"}class V9 extends Jn{constructor(e,n,r){super(e,n,r),this.key=rt.fromName(r.referenceValue)}matches(e){const n=rt.comparator(e.key,this.key);return this.matchesComparison(n)}}class j9 extends Jn{constructor(e,n){super(e,"in",n),this.keys=Ex("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class F9 extends Jn{constructor(e,n){super(e,"not-in",n),this.keys=Ex("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ex(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>rt.fromName(r.referenceValue))}class B9 extends Jn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hS(n)&&Id(n.arrayValue,this.value)}}class z9 extends Jn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Id(this.value.arrayValue,n)}}class H9 extends Jn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Id(this.value.arrayValue,n)}}class q9 extends Jn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Id(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n=null,r=[],i=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.Ie=null}}function wC(t,e=null,n=[],r=[],i=null,o=null,c=null){return new $9(t,e,n,r,i,o,c)}function dS(t){const e=_t(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sf(r)).join(",")),e.Ie=n}return e.Ie}function pS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_x(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EC(t.startAt,e.startAt)&&EC(t.endAt,e.endAt)}function zb(t){return rt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n=null,r=[],i=[],o=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function G9(t,e,n,r,i,o,c,d){return new Uf(t,e,n,r,i,o,c,d)}function gS(t){return new Uf(t)}function TC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wx(t){return t.collectionGroup!==null}function hd(t){const e=_t(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ur(kr.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new xd(o,r))}),n.has(kr.keyField().canonicalString())||e.Ee.push(new xd(kr.keyField(),r))}return e.Ee}function Ta(t){const e=_t(t);return e.de||(e.de=W9(e,hd(t))),e.de}function W9(t,e){if(t.limitType==="F")return wC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new xd(i.field,o)});const n=t.endAt?new km(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new km(t.startAt.position,t.startAt.inclusive):null;return wC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hb(t,e){const n=t.filters.concat([e]);return new Uf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qb(t,e,n){return new Uf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function by(t,e){return pS(Ta(t),Ta(e))&&t.limitType===e.limitType}function Tx(t){return`${dS(Ta(t))}|lt:${t.limitType}`}function ef(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Sx(i)).join(", ")}]`),yy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sf(i)).join(",")),`Target(${r})`}(Ta(t))}; limitType=${t.limitType})`}function _y(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):rt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of hd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,d,p){const g=SC(c,d,p);return c.inclusive?g<=0:g<0}(r.startAt,hd(r),i)||r.endAt&&!function(c,d,p){const g=SC(c,d,p);return c.inclusive?g>=0:g>0}(r.endAt,hd(r),i))}(t,e)}function K9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Cx(t){return(e,n)=>{let r=!1;for(const i of hd(t)){const o=Y9(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Y9(t,e,n){const r=t.field.isKeyField()?rt.comparator(e.key,n.key):function(o,c,d){const p=c.data.field(o),g=d.data.field(o);return p!==null&&g!==null?_f(p,g):ft(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ft(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xc(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return lx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=new Cn(rt.comparator);function bo(){return Q9}const Ax=new Cn(rt.comparator);function id(...t){let e=Ax;for(const n of t)e=e.insert(n.key,n);return e}function Rx(t){let e=Ax;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dc(){return dd()}function Ox(){return dd()}function dd(){return new Jc(t=>t.toString(),(t,e)=>t.isEqual(e))}const X9=new Cn(rt.comparator),J9=new ur(rt.comparator);function Lt(...t){let e=J9;for(const n of t)e=e.add(n);return e}const Z9=new ur(Ct);function e5(){return Z9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xm(e)?"-0":e}}function Ix(t){return{integerValue:""+t}}function t5(t,e){return O9(e)?Ix(e):mS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this._=void 0}}function n5(t,e,n){return t instanceof Dm?function(i,o){const c={fields:{[fx]:{stringValue:ux},[dx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fS(o)&&(o=vy(o)),o&&(c.fields[hx]=o),{mapValue:c}}(n,e):t instanceof Pd?Px(t,e):t instanceof Md?Mx(t,e):function(i,o){const c=xx(i,o),d=CC(c)+CC(i.Re);return Fb(c)&&Fb(i.Re)?Ix(d):mS(i.serializer,d)}(t,e)}function r5(t,e,n){return t instanceof Pd?Px(t,e):t instanceof Md?Mx(t,e):n}function xx(t,e){return t instanceof Nm?function(r){return Fb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Dm extends Sy{}class Pd extends Sy{constructor(e){super(),this.elements=e}}function Px(t,e){const n=kx(e);for(const r of t.elements)n.some(i=>Ia(i,r))||n.push(r);return{arrayValue:{values:n}}}class Md extends Sy{constructor(e){super(),this.elements=e}}function Mx(t,e){let n=kx(e);for(const r of t.elements)n=n.filter(i=>!Ia(i,r));return{arrayValue:{values:n}}}class Nm extends Sy{constructor(e,n){super(),this.serializer=e,this.Re=n}}function CC(t){return zn(t.integerValue||t.doubleValue)}function kx(t){return hS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Pd&&i instanceof Pd||r instanceof Md&&i instanceof Md?bf(r.elements,i.elements,Ia):r instanceof Nm&&i instanceof Nm?Ia(r.Re,i.Re):r instanceof Dm&&i instanceof Dm}(t.transform,e.transform)}class s5{constructor(e,n){this.version=e,this.transformResults=n}}class Ca{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ca}static exists(e){return new Ca(void 0,e)}static updateTime(e){return new Ca(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ey{}function Dx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yS(t.key,Ca.none()):new Qd(t.key,t.data,Ca.none());{const n=t.data,r=gs.empty();let i=new ur(kr.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Zc(t.key,r,new Fs(i.toArray()),Ca.none())}}function a5(t,e,n){t instanceof Qd?function(i,o,c){const d=i.value.clone(),p=RC(i.fieldTransforms,o,c.transformResults);d.setAll(p),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Zc?function(i,o,c){if(!Xg(i.precondition,o))return void o.convertToUnknownDocument(c.version);const d=RC(i.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(Nx(i)),p.setAll(d),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(t,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function pd(t,e,n,r){return t instanceof Qd?function(o,c,d,p){if(!Xg(o.precondition,c))return d;const g=o.value.clone(),b=OC(o.fieldTransforms,p,c);return g.setAll(b),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zc?function(o,c,d,p){if(!Xg(o.precondition,c))return d;const g=OC(o.fieldTransforms,p,c),b=c.data;return b.setAll(Nx(o)),b.setAll(g),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(t,e,n,r):function(o,c,d){return Xg(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function o5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=xx(r.transform,i||null);o!=null&&(n===null&&(n=gs.empty()),n.set(r.field,o))}return n||null}function AC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bf(r,i,(o,c)=>i5(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qd extends Ey{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zc extends Ey{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Nx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function RC(t,e,n){const r=new Map;nn(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,d=e.data.field(o.field);r.set(o.field,r5(c,d,n[i]))}return r}function OC(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,n5(o,c,e))}return r}class yS extends Ey{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l5 extends Ey{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&a5(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ox();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(i.key)?null:d;const p=Dx(c,d);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Lt())}isEqual(e){return this.batchId===e.batchId&&bf(this.mutations,e.mutations,(n,r)=>AC(n,r))&&bf(this.baseMutations,e.baseMutations,(n,r)=>AC(n,r))}}class vS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nn(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return X9}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new vS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn,zt;function h5(t){switch(t){case Re.OK:return ft(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return ft(15467,{code:t})}}function Lx(t){if(t===void 0)return vo("GRPC error has no .code"),Re.UNKNOWN;switch(t){case Qn.OK:return Re.OK;case Qn.CANCELLED:return Re.CANCELLED;case Qn.UNKNOWN:return Re.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return Re.INTERNAL;case Qn.UNAVAILABLE:return Re.UNAVAILABLE;case Qn.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Qn.NOT_FOUND:return Re.NOT_FOUND;case Qn.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Qn.ABORTED:return Re.ABORTED;case Qn.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Qn.DATA_LOSS:return Re.DATA_LOSS;default:return ft(39323,{code:t})}}(zt=Qn||(Qn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new xl([4294967295,4294967295],0);function IC(t){const e=sx().encode(t),n=new XI;return n.update(e),new Uint8Array(n.digest())}function xC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xl([n,r],0),new xl([i,o],0)]}class bS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sd(`Invalid padding: ${n}`);if(r<0)throw new sd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sd(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=xl.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(xl.fromNumber(r)));return i.compare(d5)===1&&(i=new xl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=IC(e),[r,i]=xC(n);for(let o=0;o<this.hashCount;o++){const c=this.we(r,i,o);if(!this.be(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new bS(o,i,n);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=IC(e),[r,i]=xC(n);for(let o=0;o<this.hashCount;o++){const c=this.we(r,i,o);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wy(yt.min(),i,new Cn(Ct),bo(),Lt())}}class Xd{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xd(r,n,Lt(),Lt(),Lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class Ux{constructor(e,n){this.targetId=e,this.Ce=n}}class Vx{constructor(e,n,r=Nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class PC{constructor(){this.Fe=0,this.Me=MC(),this.xe=Nr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Lt(),n=Lt(),r=Lt();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ft(38017,{changeType:o})}}),new Xd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=MC()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,nn(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class p5{constructor(e){this.ze=e,this.je=new Map,this.He=bo(),this.Je=Ag(),this.Ye=Ag(),this.Ze=new Cn(Ct)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ft(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const o=i.target;if(zb(o))if(r===0){const c=new rt(o.path);this.tt(n,c,Xr.newNoDocument(c,yt.min()))}else nn(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,d;try{c=Ul(r).toUint8Array()}catch(p){if(p instanceof cx)return vf("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new bS(c,i,o)}catch(p){return vf(p instanceof sd?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,o,null),i++)}),i}It(e){const n=new Map;this.je.forEach((o,c)=>{const d=this._t(c);if(d){if(o.current&&zb(d.target)){const p=new rt(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,Xr.newNoDocument(p,e))}o.Le&&(n.set(c,o.qe()),o.Qe())}});let r=Lt();this.Ye.forEach((o,c)=>{let d=!0;c.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(o))}),this.He.forEach((o,c)=>c.setReadTime(e));const i=new wy(e,n,this.Ze,this.He,r);return this.He=bo(),this.Je=Ag(),this.Ye=Ag(),this.Ze=new Cn(Ct),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new PC,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ur(Ct),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ur(Ct),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new PC),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ag(){return new Cn(rt.comparator)}function MC(){return new Cn(rt.comparator)}const g5={asc:"ASCENDING",desc:"DESCENDING"},m5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y5={and:"AND",or:"OR"};class v5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $b(t,e){return t.useProto3Json||yy(e)?e:{value:e}}function Lm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b5(t,e){return Lm(t,e.toTimestamp())}function Aa(t){return nn(!!t,49232),yt.fromTimestamp(function(n){const r=Ll(n);return new cr(r.seconds,r.nanos)}(t))}function _S(t,e){return Gb(t,e).canonicalString()}function Gb(t,e){const n=function(i){return new pn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Fx(t){const e=pn.fromString(t);return nn($x(e),10190,{key:e.toString()}),e}function Wb(t,e){return _S(t.databaseId,e.path)}function I0(t,e){const n=Fx(e);if(n.get(1)!==t.databaseId.projectId)throw new He(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new rt(zx(n))}function Bx(t,e){return _S(t.databaseId,e)}function _5(t){const e=Fx(t);return e.length===4?pn.emptyPath():zx(e)}function Kb(t){return new pn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zx(t){return nn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kC(t,e,n){return{name:Wb(t,e),fields:n.value.mapValue.fields}}function S5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ft(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,b){return g.useProto3Json?(nn(b===void 0||typeof b=="string",58123),Nr.fromBase64String(b||"")):(nn(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Nr.fromUint8Array(b||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const b=g.code===void 0?Re.UNKNOWN:Lx(g.code);return new He(b,g.message||"")}(c);n=new Vx(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=I0(t,r.document.name),o=Aa(r.document.updateTime),c=r.document.createTime?Aa(r.document.createTime):yt.min(),d=new gs({mapValue:{fields:r.document.fields}}),p=Xr.newFoundDocument(i,o,c,d),g=r.targetIds||[],b=r.removedTargetIds||[];n=new Jg(g,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=I0(t,r.document),o=r.readTime?Aa(r.readTime):yt.min(),c=Xr.newNoDocument(i,o),d=r.removedTargetIds||[];n=new Jg([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=I0(t,r.document),o=r.removedTargetIds||[];n=new Jg([],o,i,null)}else{if(!("filter"in e))return ft(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new f5(i,o),d=r.targetId;n=new Ux(d,c)}}return n}function E5(t,e){let n;if(e instanceof Qd)n={update:kC(t,e.key,e.value)};else if(e instanceof yS)n={delete:Wb(t,e.key)};else if(e instanceof Zc)n={update:kC(t,e.key,e.data),updateMask:P5(e.fieldMask)};else{if(!(e instanceof l5))return ft(16599,{ft:e.type});n={verify:Wb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof Dm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Pd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Md)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nm)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw ft(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:b5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ft(27497)}(t,e.precondition)),n}function w5(t,e){return t&&t.length>0?(nn(e!==void 0,14353),t.map(n=>function(i,o){let c=i.updateTime?Aa(i.updateTime):Aa(o);return c.isEqual(yt.min())&&(c=Aa(o)),new s5(c,i.transformResults||[])}(n,e))):[]}function T5(t,e){return{documents:[Bx(t,e.path)]}}function C5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bx(t,i);const o=function(g){if(g.length!==0)return qx(zs.create(g,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(b=>function(C){return{field:tf(C.field),direction:O5(C.dir)}}(b))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=$b(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:i}}function A5(t){let e=_5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nn(r===1,65062);const b=n.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];n.where&&(o=function(E){const C=Hx(E);return C instanceof zs&&bx(C)?C.getFilters():[C]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(C=>function(x){return new xd(nf(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(C))}(n.orderBy));let d=null;n.limit&&(d=function(E){let C;return C=typeof E=="object"?E.value:E,yy(C)?null:C}(n.limit));let p=null;n.startAt&&(p=function(E){const C=!!E.before,O=E.values||[];return new km(O,C)}(n.startAt));let g=null;return n.endAt&&(g=function(E){const C=!E.before,O=E.values||[];return new km(O,C)}(n.endAt)),G9(e,i,c,o,d,"F",p,g)}function R5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nf(n.unaryFilter.field);return Jn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=nf(n.unaryFilter.field);return Jn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nf(n.unaryFilter.field);return Jn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nf(n.unaryFilter.field);return Jn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ft(61313);default:return ft(60726)}}(t):t.fieldFilter!==void 0?function(n){return Jn.create(nf(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ft(58110);default:return ft(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zs.create(n.compositeFilter.filters.map(r=>Hx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ft(1026)}}(n.compositeFilter.op))}(t):ft(30097,{filter:t})}function O5(t){return g5[t]}function I5(t){return m5[t]}function x5(t){return y5[t]}function tf(t){return{fieldPath:t.canonicalString()}}function nf(t){return kr.fromServerFormat(t.fieldPath)}function qx(t){return t instanceof Jn?function(n){if(n.op==="=="){if(_C(n.value))return{unaryFilter:{field:tf(n.field),op:"IS_NAN"}};if(bC(n.value))return{unaryFilter:{field:tf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_C(n.value))return{unaryFilter:{field:tf(n.field),op:"IS_NOT_NAN"}};if(bC(n.value))return{unaryFilter:{field:tf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tf(n.field),op:I5(n.op),value:n.value}}}(t):t instanceof zs?function(n){const r=n.getFilters().map(i=>qx(i));return r.length===1?r[0]:{compositeFilter:{op:x5(n.op),filters:r}}}(t):ft(54877,{filter:t})}function P5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $x(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r,i,o=yt.min(),c=yt.min(),d=Nr.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.wt=e}}function k5(t){const e=A5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.Cn=new N5}addToCollectionParentIndex(e,n){return this.Cn.add(n),Oe.resolve()}getCollectionParents(e,n){return Oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Oe.resolve()}deleteFieldIndex(e,n){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,n){return Oe.resolve()}getDocumentsMatchingTarget(e,n){return Oe.resolve(null)}getIndexType(e,n){return Oe.resolve(0)}getFieldIndexes(e,n){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,n){return Oe.resolve(Nl.min())}getMinOffsetFromCollectionGroup(e,n){return Oe.resolve(Nl.min())}updateCollectionGroup(e,n,r){return Oe.resolve()}updateIndexEntries(e,n){return Oe.resolve()}}class N5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ur(pn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ur(pn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gx=41943040;class Ei{static withCacheSize(e){return new Ei(e,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(Gx,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ef(0)}static lr(){return new Ef(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="LruGarbageCollector",L5=1048576;function LC([t,e],[n,r]){const i=Ct(t,n);return i===0?Ct(e,r):i}class U5{constructor(e){this.Er=e,this.buffer=new ur(LC),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();LC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ze(NC,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lf(n)?ze(NC,"Ignoring IndexedDB error during garbage collection: ",n):await Nf(n)}await this.mr(3e5)})}}class j5{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Oe.resolve(my.le);const r=new U5(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(DC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DC):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,c,d,p,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,n))).next(E=>(o=E,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(g=Date.now(),Zu()<=Nt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${o} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-b}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}function F5(t,e){return new j5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.changes=new Jc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pd(r.mutation,i,Fs.empty(),cr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Lt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Lt()){const i=Dc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let c=id();return o.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Dc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Lt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,r,i){let o=bo();const c=dd(),d=function(){return dd()}();return n.forEach((p,g)=>{const b=r.get(g.key);i.has(g.key)&&(b===void 0||b.mutation instanceof Zc)?o=o.insert(g.key,g):b!==void 0?(c.set(g.key,b.mutation.getFieldMask()),pd(b.mutation,g,b.mutation.getFieldMask(),cr.now())):c.set(g.key,Fs.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((g,b)=>c.set(g,b)),n.forEach((g,b)=>{var E;return d.set(g,new z5(b,(E=c.get(g))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,n){const r=dd();let i=new Cn((c,d)=>c-d),o=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let b=r.get(p)||Fs.empty();b=d.applyToLocalView(g,b),r.set(p,b);const E=(i.get(d.batchId)||Lt()).add(p);i=i.insert(d.batchId,E)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,b=p.value,E=Ox();b.forEach(C=>{if(!o.has(C)){const O=Dx(n.get(C),r.get(C));O!==null&&E.set(C,O),o=o.add(C)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return Oe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Oe.resolve(Dc());let d=Ad,p=o;return c.next(g=>Oe.forEach(g,(b,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(b)?Oe.resolve():this.remoteDocumentCache.getEntry(e,b).next(C=>{p=p.insert(b,C)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,p,g,Lt())).next(b=>({batchId:d,changes:Rx(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new rt(n)).next(r=>{let i=id();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=id();return this.indexManager.getCollectionParents(e,o).next(d=>Oe.forEach(d,p=>{const g=function(E,C){return new Uf(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(b=>{b.forEach((E,C)=>{c=c.insert(E,C)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(c=>{o.forEach((p,g)=>{const b=g.getKey();c.get(b)===null&&(c=c.insert(b,Xr.newInvalidDocument(b)))});let d=id();return c.forEach((p,g)=>{const b=o.get(p);b!==void 0&&pd(b.mutation,g,Fs.empty(),cr.now()),_y(n,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return Oe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Aa(i.createTime)}}(n)),Oe.resolve()}getNamedQuery(e,n){return Oe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:k5(i.bundledQuery),readTime:Aa(i.readTime)}}(n)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.overlays=new Cn(rt.comparator),this.Qr=new Map}getOverlay(e,n){return Oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dc();return Oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),Oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),Oe.resolve()}getOverlaysForCollection(e,n,r){const i=Dc(),o=n.length+1,c=new rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Cn((g,b)=>g-b);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let b=o.get(g.largestBatchId);b===null&&(b=Dc(),o=o.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const d=Dc(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,b)=>d.set(g,b)),!(d.size()>=i)););return Oe.resolve(d)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new u5(n,r));let o=this.Qr.get(n);o===void 0&&(o=Lt(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.sessionToken=Nr.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.$r=new ur(br.Ur),this.Kr=new ur(br.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new br(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new br(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new rt(new pn([])),r=new br(n,e),i=new br(n,e+1),o=[];return this.Kr.forEachInRange([r,i],c=>{this.zr(c),o.push(c.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new rt(new pn([])),r=new br(n,e),i=new br(n,e+1);let o=Lt();return this.Kr.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new br(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class br{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return rt.comparator(e.key,n.key)||Ct(e.Zr,n.Zr)}static Wr(e,n){return Ct(e.Zr,n.Zr)||rt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ur(br.Ur)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new c5(o,n,r,i);this.mutationQueue.push(c);for(const d of i)this.Xr=this.Xr.add(new br(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Oe.resolve(c)}lookupMutationBatch(e,n){return Oe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),o=i<0?0:i;return Oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?uS:this.nr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new br(n,0),i=new br(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],c=>{const d=this.ei(c.Zr);o.push(d)}),Oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ur(Ct);return n.forEach(i=>{const o=new br(i,0),c=new br(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,c],d=>{r=r.add(d.Zr)})}),Oe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;rt.isDocumentKey(o)||(o=o.child(""));const c=new br(new rt(o),0);let d=new ur(Ct);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(d=d.add(p.Zr)),!0)},c),Oe.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nn(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Oe.forEach(n.mutations,i=>{const o=new br(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new br(n,0),i=this.Xr.firstAfterOrEqual(r);return Oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.ii=e,this.docs=function(){return new Cn(rt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Oe.resolve(r?r.document.mutableCopy():Xr.newInvalidDocument(n))}getEntries(e,n){let r=bo();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xr.newInvalidDocument(i))}),Oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=bo();const c=n.path,d=new rt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:b}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||T9(w9(b),r)<=0||(i.has(b.key)||_y(n,b))&&(o=o.insert(b.key,b.mutableCopy()))}return Oe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ft(9500)}si(e,n){return Oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Y5(this)}getSize(e){return Oe.resolve(this.size)}}class Y5 extends B5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),Oe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.persistence=e,this.oi=new Jc(n=>dS(n),pS),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this._i=0,this.ai=new SS,this.targetCount=0,this.ui=Ef.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),Oe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ef(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,Oe.resolve()}updateTargetData(e,n){return this.Tr(n),Oe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),Oe.waitFor(o).next(()=>i)}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return Oe.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),Oe.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),Oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),Oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return Oe.resolve(r)}containsKey(e,n){return Oe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.ci={},this.overlays={},this.li=new my(0),this.hi=!1,this.hi=!0,this.Pi=new G5,this.referenceDelegate=e(this),this.Ti=new Q5(this),this.indexManager=new D5,this.remoteDocumentCache=function(i){return new K5(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new M5(n),this.Ei=new q5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new W5(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){ze("MemoryPersistence","Starting transaction:",e);const i=new X5(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return Oe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class X5 extends A9{constructor(e){super(),this.currentSequenceNumber=e}}class ES{constructor(e){this.persistence=e,this.Vi=new SS,this.mi=null}static fi(e){return new ES(e)}get gi(){if(this.mi)return this.mi;throw ft(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),Oe.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),Oe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),Oe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.gi,r=>{const i=rt.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,yt.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return Oe.or([()=>Oe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Um{constructor(e,n){this.persistence=e,this.yi=new Jc(r=>I9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=F5(this,n)}static fi(e,n){return new Um(e,n)}di(){}Ai(e){return Oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return Oe.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?Oe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,c=>this.Dr(e,c,n).next(d=>{d||(r++,o.removeEntry(c,yt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),Oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Oe.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Oe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),Oe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yg(e.data.value)),n}Dr(e,n,r){return Oe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return Oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=Lt(),i=Lt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new wS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ZD()?8:R9(Jr())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ws(e,n).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new J5;return this.Ss(e,n,c).next(d=>{if(o.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(Zu()<=Nt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",ef(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Oe.resolve()):(Zu()<=Nt.DEBUG&&ze("QueryEngine","Query:",ef(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Zu()<=Nt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",ef(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ta(n))):Oe.resolve())}ws(e,n){if(TC(n))return Oe.resolve(null);let r=Ta(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qb(n,null,"F"),r=Ta(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Lt(...o);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const g=this.vs(n,d);return this.Cs(n,g,c,p.readTime)?this.ws(e,qb(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,r,i){return TC(n)||i.isEqual(yt.min())?Oe.resolve(null):this.ys.getDocuments(e,r).next(o=>{const c=this.vs(n,o);return this.Cs(n,c,r,i)?Oe.resolve(null):(Zu()<=Nt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ef(n)),this.Fs(e,c,n,E9(i,Ad)).next(d=>d))})}vs(e,n){let r=new ur(Cx(e));return n.forEach((i,o)=>{_y(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Zu()<=Nt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",ef(n)),this.ys.getDocumentsMatchingQuery(e,n,Nl.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="LocalStore",ej=3e8;class tj{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Cn(Ct),this.Os=new Jc(o=>dS(o),pS),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function nj(t,e,n,r){return new tj(t,e,n,r)}async function Kx(t,e){const n=_t(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],d=[];let p=Lt();for(const g of i){c.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}for(const g of o){d.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(r,p).next(g=>({ks:g,removedBatchIds:c,addedBatchIds:d}))})})}function rj(t,e){const n=_t(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,g,b){const E=g.batch,C=E.keys();let O=Oe.resolve();return C.forEach(x=>{O=O.next(()=>b.getEntry(p,x)).next(N=>{const k=g.docVersions.get(x);nn(k!==null,48541),N.version.compareTo(k)<0&&(E.applyToRemoteDocument(N,g),N.isValidDocument()&&(N.setReadTime(g.commitVersion),b.addEntry(N)))})}),O.next(()=>d.mutationQueue.removeMutationBatch(p,E))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Lt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yx(t){const e=_t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function ij(t,e){const n=_t(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const d=[];e.targetChanges.forEach((b,E)=>{const C=i.get(E);if(!C)return;d.push(n.Ti.removeMatchingKeys(o,b.removedDocuments,E).next(()=>n.Ti.addMatchingKeys(o,b.addedDocuments,E)));let O=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Nr.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,r)),i=i.insert(E,O),function(N,k,V){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=ej?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(C,O,b)&&d.push(n.Ti.updateTargetData(o,O))});let p=bo(),g=Lt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,b))}),d.push(sj(o,c,e.documentUpdates).next(b=>{p=b.qs,g=b.Qs})),!r.isEqual(yt.min())){const b=n.Ti.getLastRemoteSnapshotVersion(o).next(E=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(b)}return Oe.waitFor(d).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,p,g)).next(()=>p)}).then(o=>(n.xs=i,o))}function sj(t,e,n){let r=Lt(),i=Lt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=bo();return n.forEach((d,p)=>{const g=o.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(yt.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ze(TS,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{qs:c,Qs:i}})}function aj(t,e){const n=_t(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uS),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oj(t,e){const n=_t(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,Oe.resolve(i)):n.Ti.allocateTargetId(r).next(c=>(i=new Al(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Yb(t,e,n){const r=_t(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Lf(c))throw c;ze(TS,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function UC(t,e,n){const r=_t(t);let i=yt.min(),o=Lt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,b){const E=_t(p),C=E.Os.get(b);return C!==void 0?Oe.resolve(E.xs.get(C)):E.Ti.getTargetData(g,b)}(r,c,Ta(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{o=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,n?i:yt.min(),n?o:Lt())).next(d=>(lj(r,K9(e),d),{documents:d,$s:o})))}function lj(t,e,n){let r=t.Ns.get(e)||yt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class VC{constructor(){this.activeTargetIds=e5()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cj{constructor(){this.xo=new VC,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new VC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="ConnectivityMonitor";class FC{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ze(jC,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ze(jC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg=null;function Qb(){return Rg===null?Rg=function(){return 268435456+Math.round(2147483648*Math.random())}():Rg++,"0x"+Rg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="RestConnection",fj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Pm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){const c=Qb(),d=this.jo(e,n.toUriEncodedString());ze(x0,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,i,o);const{host:g}=new URL(d),b=If(g);return this.Jo(e,d,p,r,b).then(E=>(ze(x0,`Received RPC '${e}' ${c}: `,E),E),E=>{throw vf(x0,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E})}Yo(e,n,r,i,o,c){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Df}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){const r=fj[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="WebChannelConnection";class pj extends hj{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const c=Qb();return new Promise((d,p)=>{const g=new JI;g.setWithCredentials(!0),g.listenOnce(ZI.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Kg.NO_ERROR:const E=g.getResponseJson();ze(Kr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Kg.TIMEOUT:ze(Kr,`RPC '${e}' ${c} timed out`),p(new He(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Kg.HTTP_ERROR:const C=g.getStatus();if(ze(Kr,`RPC '${e}' ${c} failed with status:`,C,"response text:",g.getResponseText()),C>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const x=O==null?void 0:O.error;if(x&&x.status&&x.message){const N=function(V){const X=V.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(X)>=0?X:Re.UNKNOWN}(x.status);p(new He(N,x.message))}else p(new He(Re.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new He(Re.UNAVAILABLE,"Connection failed."));break;default:ft(9055,{h_:e,streamId:c,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{ze(Kr,`RPC '${e}' ${c} completed.`)}});const b=JSON.stringify(i);ze(Kr,`RPC '${e}' ${c} sending request:`,i),g.send(n,"POST",b,r,15)})}I_(e,n,r){const i=Qb(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=nx(),d=tx(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const b=o.join("");ze(Kr,`Creating RPC '${e}' stream ${i}: ${b}`,p);const E=c.createWebChannel(b,p);this.E_(E);let C=!1,O=!1;const x=new dj({Zo:k=>{O?ze(Kr,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(C||(ze(Kr,`Opening RPC '${e}' stream ${i} transport.`),E.open(),C=!0),ze(Kr,`RPC '${e}' stream ${i} sending:`,k),E.send(k))},Xo:()=>E.close()}),N=(k,V,X)=>{k.listen(V,q=>{try{X(q)}catch(H){setTimeout(()=>{throw H},0)}})};return N(E,rd.EventType.OPEN,()=>{O||(ze(Kr,`RPC '${e}' stream ${i} transport opened.`),x.__())}),N(E,rd.EventType.CLOSE,()=>{O||(O=!0,ze(Kr,`RPC '${e}' stream ${i} transport closed`),x.u_(),this.d_(E))}),N(E,rd.EventType.ERROR,k=>{O||(O=!0,vf(Kr,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),x.u_(new He(Re.UNAVAILABLE,"The operation could not be completed")))}),N(E,rd.EventType.MESSAGE,k=>{var V;if(!O){const X=k.data[0];nn(!!X,16349);const q=X,H=(q==null?void 0:q.error)||((V=q[0])===null||V===void 0?void 0:V.error);if(H){ze(Kr,`RPC '${e}' stream ${i} received error:`,H);const W=H.status;let $=function(L){const G=Qn[L];if(G!==void 0)return Lx(G)}(W),F=H.message;$===void 0&&($=Re.INTERNAL,F="Unknown error status: "+W+" with message "+H.message),O=!0,x.u_(new He($,F)),E.close()}else ze(Kr,`RPC '${e}' stream ${i} received:`,X),x.c_(X)}}),N(d,ex.STAT_EVENT,k=>{k.stat===Lb.PROXY?ze(Kr,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Lb.NOPROXY&&ze(Kr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function P0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){return new v5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="PersistentStream";class Xx{constructor(e,n,r,i,o,c,d,p){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Qx(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===Re.RESOURCE_EXHAUSTED?(vo(n.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{const i=new He(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ze(BC,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ze(BC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gj extends Xx{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=S5(this.serializer,e),r=function(o){if(!("targetChange"in o))return yt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?Aa(c.readTime):yt.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Kb(this.serializer),n.addTarget=function(o,c){let d;const p=c.target;if(d=zb(p)?{documents:T5(o,p)}:{query:C5(o,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=jx(o,c.resumeToken);const g=$b(o,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(yt.min())>0){d.readTime=Lm(o,c.snapshotVersion.toTimestamp());const g=$b(o,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const r=R5(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Kb(this.serializer),n.removeTarget=e,this.Q_(n)}}class mj extends Xx{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=w5(e.writeResults,e.commitTime),r=Aa(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Kb(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>E5(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{}class vj extends yj{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new He(Re.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.zo(e,Gb(n,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(Re.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,Gb(n,r),i,c,d,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new He(Re.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class bj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vo(n),this.ua=!1):ze("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="RemoteStore";class _j{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(c=>{r.enqueueAndForget(async()=>{eu(this)&&(ze(qc,"Restarting streams for network reachability change."),await async function(p){const g=_t(p);g.da.add(4),await Jd(g),g.Va.set("Unknown"),g.da.delete(4),await Cy(g)}(this))})}),this.Va=new bj(r,i)}}async function Cy(t){if(eu(t))for(const e of t.Aa)await e(!0)}async function Jd(t){for(const e of t.Aa)await e(!1)}function Jx(t,e){const n=_t(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),OS(n)?RS(n):Vf(n).N_()&&AS(n,e))}function CS(t,e){const n=_t(t),r=Vf(n);n.Ea.delete(e),r.N_()&&Zx(n,e),n.Ea.size===0&&(r.N_()?r.k_():eu(n)&&n.Va.set("Unknown"))}function AS(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vf(t).Z_(e)}function Zx(t,e){t.ma.Ke(e),Vf(t).X_(e)}function RS(t){t.ma=new p5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Vf(t).start(),t.Va.ca()}function OS(t){return eu(t)&&!Vf(t).O_()&&t.Ea.size>0}function eu(t){return _t(t).da.size===0}function e2(t){t.ma=void 0}async function Sj(t){t.Va.set("Online")}async function Ej(t){t.Ea.forEach((e,n)=>{AS(t,e)})}async function wj(t,e){e2(t),OS(t)?(t.Va.Pa(e),RS(t)):t.Va.set("Unknown")}async function Tj(t,e,n){if(t.Va.set("Online"),e instanceof Vx&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const d of o.targetIds)i.Ea.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ea.delete(d),i.ma.removeTarget(d))}(t,e)}catch(r){ze(qc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vm(t,r)}else if(e instanceof Jg?t.ma.Xe(e):e instanceof Ux?t.ma.ot(e):t.ma.nt(e),!n.isEqual(yt.min()))try{const r=await Yx(t.localStore);n.compareTo(r)>=0&&await function(o,c){const d=o.ma.It(c);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.Ea.get(g);b&&o.Ea.set(g,b.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,g)=>{const b=o.Ea.get(p);if(!b)return;o.Ea.set(p,b.withResumeToken(Nr.EMPTY_BYTE_STRING,b.snapshotVersion)),Zx(o,p);const E=new Al(b.target,p,g,b.sequenceNumber);AS(o,E)}),o.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(r){ze(qc,"Failed to raise snapshot:",r),await Vm(t,r)}}async function Vm(t,e,n){if(!Lf(e))throw e;t.da.add(1),await Jd(t),t.Va.set("Offline"),n||(n=()=>Yx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ze(qc,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Cy(t)})}function t2(t,e){return e().catch(n=>Vm(t,n,e))}async function Ay(t){const e=_t(t),n=jl(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:uS;for(;Cj(e);)try{const i=await aj(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,Aj(e,i)}catch(i){await Vm(e,i)}n2(e)&&r2(e)}function Cj(t){return eu(t)&&t.Ia.length<10}function Aj(t,e){t.Ia.push(e);const n=jl(t);n.N_()&&n.ea&&n.ta(e.mutations)}function n2(t){return eu(t)&&!jl(t).O_()&&t.Ia.length>0}function r2(t){jl(t).start()}async function Rj(t){jl(t).ia()}async function Oj(t){const e=jl(t);for(const n of t.Ia)e.ta(n.mutations)}async function Ij(t,e,n){const r=t.Ia.shift(),i=vS.from(r,e,n);await t2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ay(t)}async function xj(t,e){e&&jl(t).ea&&await async function(r,i){if(function(c){return h5(c)&&c!==Re.ABORTED}(i.code)){const o=r.Ia.shift();jl(r).L_(),await t2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ay(r)}}(t,e),n2(t)&&r2(t)}async function zC(t,e){const n=_t(t);n.asyncQueue.verifyOperationInProgress(),ze(qc,"RemoteStore received new credentials");const r=eu(n);n.da.add(3),await Jd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Cy(n)}async function Pj(t,e){const n=_t(t);e?(n.da.delete(2),await Cy(n)):e||(n.da.add(2),await Jd(n),n.Va.set("Unknown"))}function Vf(t){return t.fa||(t.fa=function(n,r,i){const o=_t(n);return o.oa(),new gj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:Sj.bind(null,t),n_:Ej.bind(null,t),i_:wj.bind(null,t),Y_:Tj.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),OS(t)?RS(t):t.Va.set("Unknown")):(await t.fa.stop(),e2(t))})),t.fa}function jl(t){return t.ga||(t.ga=function(n,r,i){const o=_t(n);return o.oa(),new mj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Rj.bind(null,t),i_:xj.bind(null,t),na:Oj.bind(null,t),ra:Ij.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Ay(t)):(await t.ga.stop(),t.Ia.length>0&&(ze(qc,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,d=new IS(e,n,c,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xS(t,e){if(vo("AsyncQueue",`${e}: ${t}`),Lf(t))return new He(Re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{static emptySet(e){return new hf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||rt.comparator(n.key,r.key):(n,r)=>rt.comparator(n.key,r.key),this.keyedMap=id(),this.sortedSet=new Cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.pa=new Cn(rt.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ft(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class wf{constructor(e,n,r,i,o,c,d,p,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new wf(e,n,hf.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&by(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class kj{constructor(){this.queries=qC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=_t(n),o=i.queries;i.queries=qC(),o.forEach((c,d)=>{for(const p of d.Sa)p.onError(r)})})(this,new He(Re.ABORTED,"Firestore shutting down"))}}function qC(){return new Jc(t=>Tx(t),by)}async function i2(t,e){const n=_t(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new Mj,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(i,!0);break;case 1:o.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const d=xS(c,`Initialization of query '${ef(e.query)}' failed`);return void e.onError(d)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&PS(n)}async function s2(t,e){const n=_t(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dj(t,e){const n=_t(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const d of c.Sa)d.Ma(i)&&(r=!0);c.ba=i}}r&&PS(n)}function Nj(t,e,n){const r=_t(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function PS(t){t.Ca.forEach(e=>{e.next()})}var Xb,$C;($C=Xb||(Xb={})).xa="default",$C.Cache="cache";class a2{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Xb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.key=e}}class l2{constructor(e){this.key=e}}class Lj{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Lt(),this.mutatedKeys=Lt(),this.Za=Cx(e),this.Xa=new hf(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new HC,i=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,d=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,E)=>{const C=i.get(b),O=_y(this.query,E)?E:null,x=!!C&&this.mutatedKeys.has(C.key),N=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let k=!1;C&&O?C.data.isEqual(O.data)?x!==N&&(r.track({type:3,doc:O}),k=!0):this.ru(C,O)||(r.track({type:2,doc:O}),k=!0,(p&&this.Za(O,p)>0||g&&this.Za(O,g)<0)&&(d=!0)):!C&&O?(r.track({type:0,doc:O}),k=!0):C&&!O&&(r.track({type:1,doc:C}),k=!0,(p||g)&&(d=!0)),k&&(O?(c=c.add(O),o=N?o.add(b):o.delete(b)):(c=c.delete(b),o=o.delete(b)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{Xa:c,nu:r,Cs:d,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((b,E)=>function(O,x){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft(20277,{Vt:k})}};return N(O)-N(x)}(b.type,E.type)||this.Za(b.doc,E.doc)),this.iu(r),i=i!=null&&i;const d=n&&!i?this.su():[],p=this.Ya.size===0&&this.current&&!i?1:0,g=p!==this.Ja;return this.Ja=p,c.length!==0||g?{snapshot:new wf(this.query,e.Xa,o,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new HC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Lt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new l2(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new o2(r))}),n}au(e){this.Ha=e.$s,this.Ya=Lt();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return wf.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const MS="SyncEngine";class Uj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Vj{constructor(e){this.key=e,this.cu=!1}}class jj{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Jc(d=>Tx(d),by),this.Pu=new Map,this.Tu=new Set,this.Iu=new Cn(rt.comparator),this.Eu=new Map,this.du=new SS,this.Au={},this.Ru=new Map,this.Vu=Ef.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Fj(t,e,n=!0){const r=p2(t);let i;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await c2(r,e,n,!0),i}async function Bj(t,e){const n=p2(t);await c2(n,e,!0,!1)}async function c2(t,e,n,r){const i=await oj(t.localStore,Ta(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await zj(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&Jx(t.remoteStore,i),d}async function zj(t,e,n,r,i){t.fu=(E,C,O)=>async function(N,k,V,X){let q=k.view.tu(V);q.Cs&&(q=await UC(N.localStore,k.query,!1).then(({documents:F})=>k.view.tu(F,q)));const H=X&&X.targetChanges.get(k.targetId),W=X&&X.targetMismatches.get(k.targetId)!=null,$=k.view.applyChanges(q,N.isPrimaryClient,H,W);return WC(N,k.targetId,$.ou),$.snapshot}(t,E,C,O);const o=await UC(t.localStore,e,!0),c=new Lj(e,o.$s),d=c.tu(o.documents),p=Xd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),g=c.applyChanges(d,t.isPrimaryClient,p);WC(t,n,g.ou);const b=new Uj(e,n,c);return t.hu.set(e,b),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),g.snapshot}async function Hj(t,e,n){const r=_t(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(c=>!by(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Yb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&CS(r.remoteStore,i.targetId),Jb(r,i.targetId)}).catch(Nf)):(Jb(r,i.targetId),await Yb(r.localStore,i.targetId,!0))}async function qj(t,e){const n=_t(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),CS(n.remoteStore,r.targetId))}async function $j(t,e,n){const r=Jj(t);try{const i=await function(c,d){const p=_t(c),g=cr.now(),b=d.reduce((O,x)=>O.add(x.key),Lt());let E,C;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let x=bo(),N=Lt();return p.Bs.getEntries(O,b).next(k=>{x=k,x.forEach((V,X)=>{X.isValidDocument()||(N=N.add(V))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,x)).next(k=>{E=k;const V=[];for(const X of d){const q=o5(X,E.get(X.key).overlayedDocument);q!=null&&V.push(new Zc(X.key,q,mx(q.value.mapValue),Ca.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,V,d)}).next(k=>{C=k;const V=k.applyToLocalDocumentSet(E,N);return p.documentOverlayCache.saveOverlays(O,k.batchId,V)})}).then(()=>({batchId:C.batchId,changes:Rx(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,d,p){let g=c.Au[c.currentUser.toKey()];g||(g=new Cn(Ct)),g=g.insert(d,p),c.Au[c.currentUser.toKey()]=g}(r,i.batchId,n),await Zd(r,i.changes),await Ay(r.remoteStore)}catch(i){const o=xS(i,"Failed to persist write");n.reject(o)}}async function u2(t,e){const n=_t(t);try{const r=await ij(n.localStore,e);e.targetChanges.forEach((i,o)=>{const c=n.Eu.get(o);c&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.cu=!0:i.modifiedDocuments.size>0?nn(c.cu,14607):i.removedDocuments.size>0&&(nn(c.cu,42227),c.cu=!1))}),await Zd(n,r,e)}catch(r){await Nf(r)}}function GC(t,e,n){const r=_t(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.hu.forEach((o,c)=>{const d=c.view.Fa(e);d.snapshot&&i.push(d.snapshot)}),function(c,d){const p=_t(c);p.onlineState=d;let g=!1;p.queries.forEach((b,E)=>{for(const C of E.Sa)C.Fa(d)&&(g=!0)}),g&&PS(p)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Gj(t,e,n){const r=_t(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let c=new Cn(rt.comparator);c=c.insert(o,Xr.newNoDocument(o,yt.min()));const d=Lt().add(o),p=new wy(yt.min(),new Map,new Cn(Ct),c,d);await u2(r,p),r.Iu=r.Iu.remove(o),r.Eu.delete(e),kS(r)}else await Yb(r.localStore,e,!1).then(()=>Jb(r,e,n)).catch(Nf)}async function Wj(t,e){const n=_t(t),r=e.batch.batchId;try{const i=await rj(n.localStore,e);h2(n,r,null),f2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zd(n,i)}catch(i){await Nf(i)}}async function Kj(t,e,n){const r=_t(t);try{const i=await function(c,d){const p=_t(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return p.mutationQueue.lookupMutationBatch(g,d).next(E=>(nn(E!==null,37113),b=E.keys(),p.mutationQueue.removeMutationBatch(g,E))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,b,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b)).next(()=>p.localDocuments.getDocuments(g,b))})}(r.localStore,e);h2(r,e,n),f2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zd(r,i)}catch(i){await Nf(i)}}function f2(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function h2(t,e,n){const r=_t(t);let i=r.Au[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Jb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||d2(t,r)})}function d2(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(CS(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),kS(t))}function WC(t,e,n){for(const r of n)r instanceof o2?(t.du.addReference(r.key,e),Yj(t,r)):r instanceof l2?(ze(MS,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||d2(t,r.key)):ft(19791,{pu:r})}function Yj(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(ze(MS,"New document in limbo: "+n),t.Tu.add(r),kS(t))}function kS(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new rt(pn.fromString(e)),r=t.Vu.next();t.Eu.set(r,new Vj(n)),t.Iu=t.Iu.insert(n,r),Jx(t.remoteStore,new Al(Ta(gS(n.path)),r,"TargetPurposeLimboResolution",my.le))}}async function Zd(t,e,n){const r=_t(t),i=[],o=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,p)=>{c.push(r.fu(p,e,n).then(g=>{var b;if((g||n)&&r.isPrimaryClient){const E=g?!g.fromCache:(b=n==null?void 0:n.targetChanges.get(p.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){i.push(g);const E=wS.Rs(p.targetId,g);o.push(E)}}))}),await Promise.all(c),r.lu.Y_(i),await async function(p,g){const b=_t(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Oe.forEach(g,C=>Oe.forEach(C.ds,O=>b.persistence.referenceDelegate.addReference(E,C.targetId,O)).next(()=>Oe.forEach(C.As,O=>b.persistence.referenceDelegate.removeReference(E,C.targetId,O)))))}catch(E){if(!Lf(E))throw E;ze(TS,"Failed to update sequence numbers: "+E)}for(const E of g){const C=E.targetId;if(!E.fromCache){const O=b.xs.get(C),x=O.snapshotVersion,N=O.withLastLimboFreeSnapshotVersion(x);b.xs=b.xs.insert(C,N)}}}(r.localStore,o))}async function Qj(t,e){const n=_t(t);if(!n.currentUser.isEqual(e)){ze(MS,"User change. New user:",e.toKey());const r=await Kx(n.localStore,e);n.currentUser=e,function(o,c){o.Ru.forEach(d=>{d.forEach(p=>{p.reject(new He(Re.CANCELLED,c))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zd(n,r.ks)}}function Xj(t,e){const n=_t(t),r=n.Eu.get(e);if(r&&r.cu)return Lt().add(r.key);{let i=Lt();const o=n.Pu.get(e);if(!o)return i;for(const c of o){const d=n.hu.get(c);i=i.unionWith(d.view.eu)}return i}}function p2(t){const e=_t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gj.bind(null,e),e.lu.Y_=Dj.bind(null,e.eventManager),e.lu.gu=Nj.bind(null,e.eventManager),e}function Jj(t){const e=_t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kj.bind(null,e),e}class jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ty(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return nj(this.persistence,new Z5,e.initialUser,this.serializer)}Su(e){return new Wx(ES.fi,this.serializer)}bu(e){return new cj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jm.provider={build:()=>new jm};class Zj extends jm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){nn(this.persistence.referenceDelegate instanceof Um,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new V5(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Ei.withCacheSize(this.cacheSizeBytes):Ei.DEFAULT;return new Wx(r=>Um.fi(r,n),this.serializer)}}class Zb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qj.bind(null,this.syncEngine),await Pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kj}()}createDatastore(e){const n=Ty(e.databaseInfo.databaseId),r=function(o){return new pj(o)}(e.databaseInfo);return function(o,c,d,p){return new vj(o,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,c,d){return new _j(r,i,o,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>GC(this.syncEngine,n,0),function(){return FC.C()?new FC:new uj}())}createSyncEngine(e,n){return function(i,o,c,d,p,g,b){const E=new jj(i,o,c,d,p,g);return b&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=_t(i);ze(qc,"RemoteStore shutting down."),o.da.add(5),await Jd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zb.provider={build:()=>new Zb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="FirestoreClient";class e8{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qr.UNAUTHENTICATED,this.clientId=ax.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{ze(Fl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ze(Fl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function M0(t,e){t.asyncQueue.verifyOperationInProgress(),ze(Fl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Kx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function KC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await t8(t);ze(Fl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zC(e.remoteStore,i)),t._onlineComponents=e}async function t8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ze(Fl,"Using user provided OfflineComponentProvider");try{await M0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;vf("Error using user provided cache. Falling back to memory cache: "+n),await M0(t,new jm)}}else ze(Fl,"Using default OfflineComponentProvider"),await M0(t,new Zj(void 0));return t._offlineComponents}async function m2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ze(Fl,"Using user provided OnlineComponentProvider"),await KC(t,t._uninitializedComponentsProvider._online)):(ze(Fl,"Using default OnlineComponentProvider"),await KC(t,new Zb))),t._onlineComponents}function n8(t){return m2(t).then(e=>e.syncEngine)}async function y2(t){const e=await m2(t),n=e.eventManager;return n.onListen=Fj.bind(null,e.syncEngine),n.onUnlisten=Hj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Bj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qj.bind(null,e.syncEngine),n}function r8(t,e,n={}){const r=new fo;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,d,p,g){const b=new g2({next:C=>{b.xu(),c.enqueueAndForget(()=>s2(o,E));const O=C.docs.has(d);!O&&C.fromCache?g.reject(new He(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&p&&p.source==="server"?g.reject(new He(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(C)},error:C=>g.reject(C)}),E=new a2(gS(d.path),b,{includeMetadataChanges:!0,Qa:!0});return i2(o,E)}(await y2(t),t.asyncQueue,e,n,r)),r.promise}function i8(t,e,n={}){const r=new fo;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,d,p,g){const b=new g2({next:C=>{b.xu(),c.enqueueAndForget(()=>s2(o,E)),C.fromCache&&p.source==="server"?g.reject(new He(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(C)},error:C=>g.reject(C)}),E=new a2(d,b,{includeMetadataChanges:!0,Qa:!0});return i2(o,E)}(await y2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t,e,n){if(!n)throw new He(Re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function s8(t,e,n,r){if(e===!0&&r===!0)throw new He(Re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function QC(t){if(!rt.isDocumentKey(t))throw new He(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XC(t){if(rt.isDocumentKey(t))throw new He(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ry(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ft(12329,{type:typeof t})}function Bl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ry(t);throw new He(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="firestore.googleapis.com",JC=!0;class ZC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_2,this.ssl=JC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:JC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Gx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L5)throw new He(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new He(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new He(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new He(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d9;switch(r.type){case"firstParty":return new y9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=YC.get(n);r&&(ze("ComponentProvider","Removing Datastore"),YC.delete(n),r.terminate())}(this),Promise.resolve()}}function a8(t,e,n,r={}){var i;t=Bl(t,Oy);const o=If(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),p=`${e}:${n}`;o&&(vO(`https://${p}`),bO("Firestore",!0)),c.host!==_2&&c.host!==p&&vf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:o,emulatorOptions:r});if(!Uc(g,d)&&(t._setSettings(g),r.mockUserToken)){let b,E;if(typeof r.mockUserToken=="string")b=r.mockUserToken,E=Qr.MOCK_USER;else{b=qD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new He(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Qr(C)}t._authCredentials=new p9(new ix(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tu(this.firestore,e,this._query)}}class wi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wi(this.firestore,e,this._key)}}class Pl extends tu{constructor(e,n,r){super(e,n,gS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wi(this.firestore,null,new rt(e))}withConverter(e){return new Pl(this.firestore,e,this._path)}}function jf(t,e,...n){if(t=ci(t),b2("collection","path",e),t instanceof Oy){const r=pn.fromString(e,...n);return XC(r),new Pl(t,null,r)}{if(!(t instanceof wi||t instanceof Pl))throw new He(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pn.fromString(e,...n));return XC(r),new Pl(t.firestore,null,r)}}function Ff(t,e,...n){if(t=ci(t),arguments.length===1&&(e=ax.newId()),b2("doc","path",e),t instanceof Oy){const r=pn.fromString(e,...n);return QC(r),new wi(t,null,new rt(r))}{if(!(t instanceof wi||t instanceof Pl))throw new He(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pn.fromString(e,...n));return QC(r),new wi(t.firestore,t instanceof Pl?t.converter:null,new rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="AsyncQueue";class tA{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Qx(this,"async_queue_retry"),this.rc=()=>{const r=P0();r&&ze(eA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=P0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=P0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new fo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Lf(e))throw e;ze(eA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,vo("INTERNAL UNHANDLED ERROR: ",nA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const i=IS.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&ft(47125,{cc:nA(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function nA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ep extends Oy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new tA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tA(e),this._firestoreClient=void 0,await e}}}function S2(t,e){const n=typeof t=="object"?t:wO(),r=typeof t=="string"?t:Pm,i=U_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=zD("firestore");o&&a8(i,...o)}return i}function DS(t){if(t._terminated)throw new He(Re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||o8(t),t._firestoreClient}function o8(t){var e,n,r;const i=t._freezeSettings(),o=function(d,p,g,b){return new M9(d,p,g,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,v2(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new e8(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tf(Nr.fromBase64String(e))}catch(n){throw new He(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tf(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function l8(){return new Iy(Vb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=/^__.*__$/;class u8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qd(e,this.data,n,this.fieldTransforms)}}function w2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft(40011,{Ic:t})}}class US{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new US(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Fm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(w2(this.Ic)&&c8.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class f8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ty(e)}bc(e,n,r,i=!1){return new US({Ic:e,methodName:n,wc:r,path:kr.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T2(t){const e=t._freezeSettings(),n=Ty(t._databaseId);return new f8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function h8(t,e,n,r,i,o={}){const c=t.bc(o.merge||o.mergeFields?2:0,e,n,i);R2("Data must be an object, but it was:",c,r);const d=C2(r,c);let p,g;if(o.merge)p=new Fs(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const b=[];for(const E of o.mergeFields){const C=p8(e,E,n);if(!c.contains(C))throw new He(Re.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);m8(b,C)||b.push(C)}p=new Fs(b),g=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,g=c.fieldTransforms;return new u8(new gs(d),p,g)}function d8(t,e,n,r=!1){return VS(n,t.bc(r?4:3,e))}function VS(t,e){if(A2(t=ci(t)))return R2("Unsupported field value:",e,t),C2(t,e);if(t instanceof E2)return function(r,i){if(!w2(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const d of r){let p=VS(d,i.fc(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ci(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=cr.fromDate(r);return{timestampValue:Lm(i.serializer,o)}}if(r instanceof cr){const o=new cr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lm(i.serializer,o)}}if(r instanceof NS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tf)return{bytesValue:jx(i.serializer,r._byteString)};if(r instanceof wi){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_S(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof LS)return function(c,d){return{mapValue:{fields:{[px]:{stringValue:gx},[Mm]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.gc("VectorValues must only contain numeric values.");return mS(d.serializer,g)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Ry(r)}`)}(t,e)}function C2(t,e){const n={};return lx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xc(t,(r,i)=>{const o=VS(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function A2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof cr||t instanceof NS||t instanceof Tf||t instanceof wi||t instanceof E2||t instanceof LS)}function R2(t,e,n){if(!A2(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ry(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function p8(t,e,n){if((e=ci(e))instanceof Iy)return e._internalPath;if(typeof e=="string")return O2(t,e);throw Fm("Field path arguments must be of type string or ",t,!1,void 0,n)}const g8=new RegExp("[~\\*/\\[\\]]");function O2(t,e,n){if(e.search(g8)>=0)throw Fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Iy(...e.split("."))._internalPath}catch{throw Fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fm(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new He(Re.INVALID_ARGUMENT,d+t+p)}function m8(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y8 extends I2{data(){return super.data()}}function xy(t,e){return typeof e=="string"?O2(t,e):e instanceof Iy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jS{}class x2 extends jS{}function P2(t,e,...n){let r=[];e instanceof jS&&r.push(e),r=r.concat(n),function(o){const c=o.filter(p=>p instanceof FS).length,d=o.filter(p=>p instanceof Py).length;if(c>1||c>0&&d>0)throw new He(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Py extends x2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Py(e,n,r)}_apply(e){const n=this._parse(e);return k2(e._query,n),new tu(e.firestore,e.converter,Hb(e._query,n))}_parse(e){const n=T2(e.firestore);return function(o,c,d,p,g,b,E){let C;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new He(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){sA(E,b);const x=[];for(const N of E)x.push(iA(p,o,N));C={arrayValue:{values:x}}}else C=iA(p,o,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||sA(E,b),C=d8(d,c,E,b==="in"||b==="not-in");return Jn.create(g,b,C)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function M2(t,e,n){const r=e,i=xy("where",t);return Py._create(i,r,n)}class FS extends jS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new FS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let c=i;const d=o.getFlattenedFilters();for(const p of d)k2(c,p),c=Hb(c,p)}(e._query,n),new tu(e.firestore,e.converter,Hb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class BS extends x2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new BS(e,n)}_apply(e){const n=function(i,o,c){if(i.startAt!==null)throw new He(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xd(o,c)}(e._query,this._field,this._direction);return new tu(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new Uf(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function rA(t,e="asc"){const n=e,r=xy("orderBy",t);return BS._create(r,n)}function iA(t,e,n){if(typeof(n=ci(n))=="string"){if(n==="")throw new He(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wx(e)&&n.indexOf("/")!==-1)throw new He(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pn.fromString(n));if(!rt.isDocumentKey(r))throw new He(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vC(t,new rt(r))}if(n instanceof wi)return vC(t,n._key);throw new He(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ry(n)}.`)}function sA(t,e){if(!Array.isArray(t)||t.length===0)throw new He(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k2(t,e){const n=function(i,o){for(const c of i)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class b8{convertValue(e,n="none"){switch(Vl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ul(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ft(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Mm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>zn(c.doubleValue));return new LS(o)}convertGeoPoint(e){return new NS(zn(e.latitude),zn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rd(e));default:return null}}convertTimestamp(e){const n=Ll(e);return new cr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pn.fromString(e);nn($x(r),9688,{name:e});const i=new Od(r.get(1),r.get(3)),o=new rt(r.popFirst(5));return i.isEqual(n)||vo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D2 extends I2{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zg extends D2{data(e={}){return super.data(e)}}class S8{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ad(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zg(this._firestore,this._userDataWriter,r.key,r,new ad(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(d=>{const p=new Zg(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ad(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const p=new Zg(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ad(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,b=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),b=c.indexOf(d.doc.key)),{type:E8(d.type),doc:p,oldIndex:g,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function E8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){t=Bl(t,wi);const e=Bl(t.firestore,ep);return r8(DS(e),t._key).then(n=>C8(e,t,n))}class N2 extends b8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tf(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,n)}}function Bf(t){t=Bl(t,tu);const e=Bl(t.firestore,ep),n=DS(e),r=new N2(e);return v8(t._query),i8(n,t._query).then(i=>new S8(e,r,t,i))}function My(t,e,n){t=Bl(t,wi);const r=Bl(t.firestore,ep),i=_8(t.converter,e);return L2(r,[h8(T2(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ca.none())])}function T8(t){return L2(Bl(t.firestore,ep),[new yS(t._key,Ca.none())])}function L2(t,e){return function(r,i){const o=new fo;return r.asyncQueue.enqueueAndForget(async()=>$j(await n8(r),i,o)),o.promise}(DS(t),e)}function C8(t,e,n){const r=n.docs.get(e._key),i=new N2(t);return new D2(t,i,e._key,r,new ad(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Df=i})(xf),mf(new Vc("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new ep(new g9(r.getProvider("auth-internal")),new v9(c,r.getProvider("app-check-internal")),function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new He(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Od(g.options.projectId,b)}(c,i),c);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),Il(oC,lC,e),Il(oC,lC,"esm2017")})();const ky=S2(lS),A8=async t=>(await My(Ff(ky,"songs",t.id),t),t),R8=async t=>(await T8(Ff(ky,"songs",t)),{id:t}),O8=async t=>{const e=jf(ky,"songs"),n=P2(e,M2("editors","array-contains",t),rA("owner","asc"),rA("title","asc")),i=(await Bf(n)).docs.map(p=>p.data()),o=i.reduce((p,g)=>[...p,...g.editors,g.owner],[]),c=await Wi.user.getUsersInUIDListAsMap(o);return i.map(p=>{const g=c[p.owner]||{},b=p.editors.map(E=>{const C=c[E]||null;return{value:E,label:`${C==null?void 0:C.username}#${C==null?void 0:C.tag}`}});return{...p,editorsData:b,ownerData:g}})},I8=async t=>{const{editorsData:e,...n}=t;return await My(Ff(ky,"songs",t.id),n),t},x8=Object.freeze(Object.defineProperty({__proto__:null,addSong:A8,deleteSong:R8,loadSongs:O8,saveSong:I8},Symbol.toStringTag,{value:"Module"})),Ir=[];for(let t=0;t<256;++t)Ir.push((t+256).toString(16).slice(1));function P8(t,e=0){return(Ir[t[e+0]]+Ir[t[e+1]]+Ir[t[e+2]]+Ir[t[e+3]]+"-"+Ir[t[e+4]]+Ir[t[e+5]]+"-"+Ir[t[e+6]]+Ir[t[e+7]]+"-"+Ir[t[e+8]]+Ir[t[e+9]]+"-"+Ir[t[e+10]]+Ir[t[e+11]]+Ir[t[e+12]]+Ir[t[e+13]]+Ir[t[e+14]]+Ir[t[e+15]]).toLowerCase()}let k0;const M8=new Uint8Array(16);function k8(){if(!k0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k0=crypto.getRandomValues.bind(crypto)}return k0(M8)}const D0={};function tp(t,e,n){let r;{const i=Date.now(),o=k8();D8(D0,i,o),r=N8(o,D0.msecs,D0.seq,e,n)}return P8(r)}function D8(t,e,n){return t.msecs??(t.msecs=-1/0),t.seq??(t.seq=0),e>t.msecs?(t.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],t.msecs=e):(t.seq=t.seq+1|0,t.seq===0&&t.msecs++),t}function N8(t,e,n,r,i=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!r)r=new Uint8Array(16),i=0;else if(i<0||i+16>r.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??(e=Date.now()),n??(n=t[6]*127<<24|t[7]<<16|t[8]<<8|t[9]),r[i++]=e/1099511627776&255,r[i++]=e/4294967296&255,r[i++]=e/16777216&255,r[i++]=e/65536&255,r[i++]=e/256&255,r[i++]=e&255,r[i++]=112|n>>>28&15,r[i++]=n>>>20&255,r[i++]=128|n>>>14&63,r[i++]=n>>>6&255,r[i++]=n<<2&255|t[10]&3,r[i++]=t[11],r[i++]=t[12],r[i++]=t[13],r[i++]=t[14],r[i++]=t[15],r}const zl=S2(lS),U2=async t=>{const{uid:e,tag:n,username:r}=t;await My(Ff(zl,"publicUsers",e),{uid:e,tag:n,username:r})},L8=async t=>{const{email:e,password:n,username:r}=t,{uid:i}=await Wi.auth.signUp(e,n),o=tp();await My(Ff(zl,"users",i),{uid:i,tag:o,username:r,email:e}),await U2({uid:i,tag:o,username:r})},U8=async()=>{const t=jf(zl,"publicUsers");return(await Bf(t)).docs.map(n=>n.data())},V8=async()=>{const t=jf(zl,"users");return(await Bf(t)).docs.map(n=>n.data())},j8=async t=>{if(!(t!=null&&t.length))return{};const e=jf(zl,"publicUsers"),n=P2(e,M2(l8(),"in",t));return(await Bf(n)).docs.reduce((i,o)=>({...i,[o.id]:o.data()}),{})},F8=async()=>{const t=jf(zl,"publicUsers");return(await Bf(t)).docs.map(n=>n.data())},V2=async t=>{const e=Ff(zl,"users",t),n=await w8(e);if(n.exists()){const r=await n.data(),i=jf(zl,"users",t,"songs"),c=(await Bf(i)).docs.map(d=>d.data());return{...r,songs:c}}return null},B8=async t=>{const{email:e,password:n}=t,r=await Wi.auth.signIn(e,n);return await V2(r.uid)},z8=Object.freeze(Object.defineProperty({__proto__:null,addPublicUser:U2,addUser:L8,getAllPublicUsers:U8,getAllUsers:V8,getUsersInUIDListAsMap:j8,loadPublicUsers:F8,loadUser:V2,signInUser:B8},Symbol.toStringTag,{value:"Module"})),Wi={auth:h9,song:x8,user:z8},H8=async t=>await Wi.song.addSong(t),q8=async t=>await Wi.song.deleteSong(t),$8=async t=>await Wi.song.loadSongs(t),G8=async t=>await Wi.song.saveSong(t),W8=async()=>await Wi.user.loadPublicUsers(),K8=async t=>{const{uid:e}=t;return await Wi.user.loadUser(e)},Y8=async t=>{const{email:e,password:n}=t;return await Wi.user.signInUser({email:e,password:n})},Q8=async()=>{await Wi.auth.signOut()},X8=async t=>{await Wi.user.addUser(t)},j2=t=>(t||"").replaceAll(/\s+/g," ").trim().split(" "),J8=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize),Z8=()=>tp(),eF=5e3,zS=Object.freeze({ERROR:"ERROR",INFO:"INFO",SUCCESS:"SUCCESS",WARN:"WARN"}),HS=(t,e,n)=>({id:Z8(),level:t,message:e,fixed:(n==null?void 0:n.fixed)??!0}),F2=t=>HS(zS.ERROR,t),B2=t=>HS(zS.SUCCESS,t,{fixed:!1}),tF=t=>HS(zS.WARN,t),e_=t=>e=>{e.fixed||setTimeout(()=>{t(Cd.actions.removeGrowl(e.id))},eF),t(Cd.actions.addGrowl(e))},z2=t=>t==vt.LOADING,nF=t=>{if(!Array.isArray(t))throw new Error("alphabeticallySortSongs: songs should be an array");return[...t].sort((e,n)=>{const r=e.title||"",i=n.title||"";return r.localeCompare(i)})},rF={addSongStatus:vt.IDLE,latestAddedSongId:null},em={addSong:yo(`${Yd}/addSong`,async t=>await H8(t))},iF={clearAddSongStatus:t=>{t.addSongStatus=vt.IDLE},clearLatestAddedSongId:t=>{t.latestAddedSongId=null}},sF=t=>{t.addCase(em.addSong.pending,e=>{e.addSongStatus=vt.LOADING}).addCase(em.addSong.fulfilled,(e,n)=>{e.addSongStatus=vt.SUCCEEDED,e.songs=nF([...e.songs,n.payload]),e.latestAddedSongId=n.payload.id}).addCase(em.addSong.rejected,e=>{e.addSongStatus=vt.FAILED})},aF={selectAddSongStatus:t=>t.songs.addSongStatus,selectLatestAddedSongId:t=>t.songs.latestAddedSongId},oF={asyncThunk:em,extraReducers:sF,initialState:rF,reducers:iF,selectors:aF},lF={deleteSongStatus:vt.IDLE},tm={deleteSong:yo(`${Yd}/deleteSong`,async t=>await q8(t))},cF={clearDeleteSongStatus:t=>{t.deleteSongStatus=vt.IDLE}},uF=t=>{t.addCase(tm.deleteSong.pending,e=>{e.deleteSongStatus=vt.LOADING}).addCase(tm.deleteSong.fulfilled,(e,n)=>{e.deleteSongStatus=vt.SUCCEEDED;const r=e.songs.findIndex(i=>i.id==n.payload.id);e.songs.splice(r,1)}).addCase(tm.deleteSong.rejected,e=>{e.deleteSongStatus=vt.FAILED})},fF={},hF={asyncThunk:tm,extraReducers:uF,initialState:lF,reducers:cF,selectors:fF},dF={songs:[],loadSongsStatus:vt.IDLE},nm={loadSongs:yo(`${Yd}/loadSongs`,async t=>await $8(t))},pF=t=>{t.addCase(nm.loadSongs.pending,e=>{e.loadSongsStatus=vt.LOADING}).addCase(nm.loadSongs.fulfilled,(e,n)=>{e.loadSongsStatus=vt.SUCCEEDED,e.songs=n.payload}).addCase(nm.loadSongs.rejected,e=>{e.loadSongsStatus=vt.FAILED})},gF={selectAllSongs:t=>t.songs.songs||[],selectSongById:t=>e=>e.songs.songs.find(n=>n.id===t),selectSongsStatus:t=>t.songs.songsStatus},mF={initialState:dF,asyncThunk:nm,extraReducers:pF,selectors:gF},yF={saveSongStatus:vt.IDLE},rm={saveSong:yo(`${Yd}/saveSong`,async t=>await G8(t))},vF={editSongTitle:(t,e)=>{const{payload:n}=e,r=t.songs.find(i=>i.id===n.id);r&&(r.title=n.title)},editSongEditors:(t,e)=>{const{payload:n}=e,r=t.songs.find(i=>i.id===n.id);r&&(r.editors=n.editors,r.editorsData=n.editorsData)},clearSaveSongStatus:t=>{t.saveSongStatus=vt.IDLE}},bF=t=>{t.addCase(rm.saveSong.pending,e=>{e.saveSongStatus=vt.LOADING}).addCase(rm.saveSong.fulfilled,(e,n)=>{e.saveSongStatus=vt.SUCCEEDED;const r=n.payload,i=e.songs.find(o=>o.id===r.id);i.notes=r.notes,i.editors=r.editors,i.editorsData=r.editorsData}).addCase(rm.saveSong.rejected,e=>{e.saveSongStatus=vt.FAILED})},_F={selectSaveSongStatus:t=>t.songs.saveSongStatus},SF={asyncThunk:rm,extraReducers:bF,initialState:yF,reducers:vF,selectors:_F},EF=Object.freeze(Object.defineProperty({__proto__:null,AddSong:oF,DeleteSong:hF,LoadSongs:mF,SaveSong:SF},Symbol.toStringTag,{value:"Module"})),Sr=oS({sliceName:Yd,sliceParts:EF}),Cf="user",wF={loggedUser:null,publicUsers:null,loggedUserStatus:vt.IDLE,publicUsersStatus:vt.IDLE,firebaseOnAuthStateChangedStatus:vt.IDLE},TF={completeFirebaseOnAuthStateChangedStatus:t=>{t.firebaseOnAuthStateChangedStatus=vt.SUCCEEDED}},Pc={loadUser:yo(`${Cf}/loadUser`,async t=>await K8(t)),loadPublicUsers:yo(`${Cf}/loadPublicUsers`,async()=>await W8())},CF=t=>{t.addCase(Pc.loadUser.pending,e=>{e.loggedUserStatus=vt.LOADING}).addCase(Pc.loadUser.fulfilled,(e,n)=>{e.loggedUserStatus=vt.SUCCEEDED,e.loggedUser=n.payload}).addCase(Pc.loadUser.rejected,e=>{e.loggedUserStatus=vt.FAILED}),t.addCase(Pc.loadPublicUsers.pending,e=>{e.publicUsersStatus=vt.LOADING}).addCase(Pc.loadPublicUsers.fulfilled,(e,n)=>{e.publicUsersStatus=vt.SUCCEEDED,e.publicUsers=n.payload}).addCase(Pc.loadPublicUsers.rejected,e=>{e.publicUsersStatus=vt.FAILED})},AF={selectLoggedUser:t=>t.users.loggedUser,selectPublicUsers:t=>t.users.publicUsers,isLoggedIn:t=>!!t.users.loggedUser,isLoginVerificationComplete:t=>t.users.loggedUser!=null||t.users.loggedUserStatus==vt.SUCCEEDED||t.users.loggedUserStatus==vt.FAILED,isFirebaseOnAuthStateChangedStatusComplete:t=>t.users.firebaseOnAuthStateChangedStatus!=vt.IDLE},RF={initialState:wF,reducers:TF,asyncThunk:Pc,extraReducers:CF,selectors:AF},OF={signInStatus:vt.IDLE},IF={},im={signInUser:yo(`${Cf}/signInUser`,async t=>await Y8(t))},xF=t=>{t.addCase(im.signInUser.pending,e=>{e.signInStatus=vt.LOADING}).addCase(im.signInUser.fulfilled,(e,n)=>{e.signInStatus=vt.SUCCEEDED,e.loggedUser=n.payload}).addCase(im.signInUser.rejected,e=>{e.signInStatus=vt.FAILED})},PF={},MF={initialState:OF,reducers:IF,asyncThunk:im,extraReducers:xF,selectors:PF},mt=t=>typeof t=="string",Gh=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},aA=t=>t==null?"":""+t,kF=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},DF=/###/g,oA=t=>t&&t.indexOf("###")>-1?t.replace(DF,"."):t,lA=t=>!t||mt(t),gd=(t,e,n)=>{const r=mt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(lA(t))return{};const o=oA(r[i]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++i}return lA(t)?{}:{obj:t,k:oA(r[i])}},cA=(t,e,n)=>{const{obj:r,k:i}=gd(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let o=e[e.length-1],c=e.slice(0,e.length-1),d=gd(t,c,Object);for(;d.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),d=gd(t,c,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${o}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${o}`]=n},NF=(t,e,n,r)=>{const{obj:i,k:o}=gd(t,e,Object);i[o]=i[o]||[],i[o].push(n)},Bm=(t,e)=>{const{obj:n,k:r}=gd(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},LF=(t,e,n)=>{const r=Bm(t,n);return r!==void 0?r:Bm(e,n)},H2=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?mt(t[r])||t[r]instanceof String||mt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):H2(t[r],e[r],n):t[r]=e[r]);return t},Hu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var UF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const VF=t=>mt(t)?t.replace(/[&<>"'\/]/g,e=>UF[e]):t;class jF{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const FF=[" ",",","?","!",";"],BF=new jF(20),zF=(t,e,n)=>{e=e||"",n=n||"";const r=FF.filter(c=>e.indexOf(c)<0&&n.indexOf(c)<0);if(r.length===0)return!0;const i=BF.getRegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!i.test(t);if(!o){const c=t.indexOf(n);c>0&&!i.test(t.substring(0,c))&&(o=!0)}return o},t_=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let c,d="";for(let p=o;p<r.length;++p)if(p!==o&&(d+=n),d+=r[p],c=i[d],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&p<r.length-1)continue;o+=p-o+1;break}i=c}return i},kd=t=>t==null?void 0:t.replace("_","-"),HF={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class zm{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||HF,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(mt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new zm(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new zm(this.logger,e)}}var va=new zm;class Dy{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i.apply(i,[e,...n])})}}class uA extends Dy{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var g,b;const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,c=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,n],r&&(Array.isArray(r)?d.push(...r):mt(r)&&o?d.push(...r.split(o)):d.push(r)));const p=Bm(this.data,d);return!p&&!n&&!r&&e.indexOf(".")>-1&&(e=d[0],n=d[1],r=d.slice(2).join(".")),p||!c||!mt(r)?p:t_((b=(g=this.data)==null?void 0:g[e])==null?void 0:b[n],r,o)}addResource(e,n,r,i,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let d=[e,n];r&&(d=d.concat(c?r.split(c):r)),e.indexOf(".")>-1&&(d=e.split("."),i=n,n=d[1]),this.addNamespaces(n),cA(this.data,d,i),o.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const o in r)(mt(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,o,c={silent:!1,skipCopy:!1}){let d=[e,n];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=n,n=d[1]),this.addNamespaces(n);let p=Bm(this.data,d)||{};c.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?H2(p,r,o):p={...p,...r},cA(this.data,d,p),c.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var q2={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(o=>{var c;e=((c=this.processors[o])==null?void 0:c.process(e,n,r,i))??e}),e}};const fA={},hA=t=>!mt(t)&&typeof t!="boolean"&&typeof t!="number";class Hm extends Dy{constructor(e,n={}){super(),kF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=va.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const c=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!zF(e,r,i);if(c&&!d){const p=e.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:e,namespaces:mt(o)?[o]:o};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(o=g.shift()),e=g.join(i)}return{key:e,namespaces:mt(o)?[o]:o}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:p}=this.extractFromKey(e[e.length-1],i),g=p[p.length-1];let b=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;b===void 0&&(b=":");const E=i.lng||this.language,C=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((E==null?void 0:E.toLowerCase())==="cimode")return C?o?{res:`${g}${b}${d}`,usedKey:d,exactUsedKey:d,usedLng:E,usedNS:g,usedParams:this.getUsedParamsDetails(i)}:`${g}${b}${d}`:o?{res:d,usedKey:d,exactUsedKey:d,usedLng:E,usedNS:g,usedParams:this.getUsedParamsDetails(i)}:d;const O=this.resolve(e,i);let x=O==null?void 0:O.res;const N=(O==null?void 0:O.usedKey)||d,k=(O==null?void 0:O.exactUsedKey)||d,V=["[object Number]","[object Function]","[object RegExp]"],X=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,H=i.count!==void 0&&!mt(i.count),W=Hm.hasDefaultValue(i),$=H?this.pluralResolver.getSuffix(E,i.count,i):"",F=i.ordinal&&H?this.pluralResolver.getSuffix(E,i.count,{ordinal:!1}):"",D=H&&!i.ordinal&&i.count===0,L=D&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${$}`]||i[`defaultValue${F}`]||i.defaultValue;let G=x;q&&!x&&W&&(G=L);const T=hA(G),te=Object.prototype.toString.apply(G);if(q&&G&&T&&V.indexOf(te)<0&&!(mt(X)&&Array.isArray(G))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const K=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,G,{...i,ns:p}):`key '${d} (${this.language})' returned an object instead of string.`;return o?(O.res=K,O.usedParams=this.getUsedParamsDetails(i),O):K}if(c){const K=Array.isArray(G),ne=K?[]:{},Pe=K?k:N;for(const J in G)if(Object.prototype.hasOwnProperty.call(G,J)){const oe=`${Pe}${c}${J}`;W&&!x?ne[J]=this.translate(oe,{...i,defaultValue:hA(L)?L[J]:void 0,joinArrays:!1,ns:p}):ne[J]=this.translate(oe,{...i,joinArrays:!1,ns:p}),ne[J]===oe&&(ne[J]=G[J])}x=ne}}else if(q&&mt(X)&&Array.isArray(x))x=x.join(X),x&&(x=this.extendTranslation(x,e,i,r));else{let K=!1,ne=!1;!this.isValidLookup(x)&&W&&(K=!0,x=L),this.isValidLookup(x)||(ne=!0,x=d);const J=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ne?void 0:x,oe=W&&L!==x&&this.options.updateMissing;if(ne||K||oe){if(this.logger.log(oe?"updateKey":"missingKey",E,g,d,oe?L:x),c){const ge=this.resolve(d,{...i,keySeparator:!1});ge&&ge.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ae=[];const Ue=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ue&&Ue[0])for(let ge=0;ge<Ue.length;ge++)Ae.push(Ue[ge]);else this.options.saveMissingTo==="all"?Ae=this.languageUtils.toResolveHierarchy(i.lng||this.language):Ae.push(i.lng||this.language);const Q=(ge,ye,ve)=>{var qe;const ke=W&&ve!==x?ve:J;this.options.missingKeyHandler?this.options.missingKeyHandler(ge,g,ye,ke,oe,i):(qe=this.backendConnector)!=null&&qe.saveMissing&&this.backendConnector.saveMissing(ge,g,ye,ke,oe,i),this.emit("missingKey",ge,g,ye,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?Ae.forEach(ge=>{const ye=this.pluralResolver.getSuffixes(ge,i);D&&i[`defaultValue${this.options.pluralSeparator}zero`]&&ye.indexOf(`${this.options.pluralSeparator}zero`)<0&&ye.push(`${this.options.pluralSeparator}zero`),ye.forEach(ve=>{Q([ge],d+ve,i[`defaultValue${ve}`]||L)})}):Q(Ae,d,L))}x=this.extendTranslation(x,e,i,O,r),ne&&x===d&&this.options.appendNamespaceToMissingKey&&(x=`${g}${b}${d}`),(ne||K)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}${b}${d}`:d,K?x:void 0,i))}return o?(O.res=x,O.usedParams=this.getUsedParamsDetails(i),O):x}extendTranslation(e,n,r,i,o){var p,g;if((p=this.i18nFormat)!=null&&p.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const b=mt(e)&&(((g=r==null?void 0:r.interpolation)==null?void 0:g.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let E;if(b){const O=e.match(this.interpolator.nestingRegexp);E=O&&O.length}let C=r.replace&&!mt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(C={...this.options.interpolation.defaultVariables,...C}),e=this.interpolator.interpolate(e,C,r.lng||this.language||i.usedLng,r),b){const O=e.match(this.interpolator.nestingRegexp),x=O&&O.length;E<x&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...O)=>(o==null?void 0:o[0])===O[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${O[0]} in key: ${n[0]}`),null):this.translate(...O,n),r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,d=mt(c)?[c]:c;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=q2.handle(d,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,o,c,d;return mt(e)&&(e=[e]),e.forEach(p=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(p,n),b=g.key;i=b;let E=g.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const C=n.count!==void 0&&!mt(n.count),O=C&&!n.ordinal&&n.count===0,x=n.context!==void 0&&(mt(n.context)||typeof n.context=="number")&&n.context!=="",N=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);E.forEach(k=>{var V,X;this.isValidLookup(r)||(d=k,!fA[`${N[0]}-${k}`]&&((V=this.utils)!=null&&V.hasLoadedNamespace)&&!((X=this.utils)!=null&&X.hasLoadedNamespace(d))&&(fA[`${N[0]}-${k}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(q=>{var $;if(this.isValidLookup(r))return;c=q;const H=[b];if(($=this.i18nFormat)!=null&&$.addLookupKeys)this.i18nFormat.addLookupKeys(H,b,q,k,n);else{let F;C&&(F=this.pluralResolver.getSuffix(q,n.count,n));const D=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(C&&(H.push(b+F),n.ordinal&&F.indexOf(L)===0&&H.push(b+F.replace(L,this.options.pluralSeparator)),O&&H.push(b+D)),x){const G=`${b}${this.options.contextSeparator}${n.context}`;H.push(G),C&&(H.push(G+F),n.ordinal&&F.indexOf(L)===0&&H.push(G+F.replace(L,this.options.pluralSeparator)),O&&H.push(G+D))}}let W;for(;W=H.pop();)this.isValidLookup(r)||(o=W,r=this.getResource(q,k,W,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:c,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!mt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class dA{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=va.create("languageUtils")}getScriptPartFromCode(e){if(e=kd(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=kd(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(mt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),mt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],o=c=>{c&&(this.isSupportedCode(c)?i.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return mt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):mt(e)&&o(this.formatLanguageCode(e)),r.forEach(c=>{i.indexOf(c)<0&&o(this.formatLanguageCode(c))}),i}}const pA={zero:0,one:1,two:2,few:3,many:4,other:5},gA={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class qF{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=va.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=kd(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),gA;if(!e.match(/-|_/))return gA;const p=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(p,n)}return this.pluralRulesCache[o]=c,c}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>pA[i]-pA[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const mA=(t,e,n,r=".",i=!0)=>{let o=LF(t,e,n);return!o&&i&&mt(n)&&(o=t_(t,n,r),o===void 0&&(o=t_(e,n,r))),o},N0=t=>t.replace(/\$/g,"$$$$");class $F{constructor(e={}){var n;this.logger=va.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:c,suffix:d,suffixEscaped:p,formatSeparator:g,unescapeSuffix:b,unescapePrefix:E,nestingPrefix:C,nestingPrefixEscaped:O,nestingSuffix:x,nestingSuffixEscaped:N,nestingOptionsSeparator:k,maxReplaces:V,alwaysFormat:X}=e.interpolation;this.escape=n!==void 0?n:VF,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Hu(o):c||"{{",this.suffix=d?Hu(d):p||"}}",this.formatSeparator=g||",",this.unescapePrefix=b?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=C?Hu(C):O||Hu("$t("),this.nestingSuffix=x?Hu(x):N||Hu(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=V||1e3,this.alwaysFormat=X!==void 0?X:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var O;let o,c,d;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=x=>{if(x.indexOf(this.formatSeparator)<0){const X=mA(n,p,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(X,void 0,r,{...i,...n,interpolationkey:x}):X}const N=x.split(this.formatSeparator),k=N.shift().trim(),V=N.join(this.formatSeparator).trim();return this.format(mA(n,p,k,this.options.keySeparator,this.options.ignoreJSONStructure),V,r,{...i,...n,interpolationkey:k})};this.resetRegExp();const b=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((O=i==null?void 0:i.interpolation)==null?void 0:O.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>N0(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?N0(this.escape(x)):N0(x)}].forEach(x=>{for(d=0;o=x.regex.exec(e);){const N=o[1].trim();if(c=g(N),c===void 0)if(typeof b=="function"){const V=b(e,o,i);c=mt(V)?V:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))c="";else if(E){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${e}`),c="";else!mt(c)&&!this.useRawValueToEscape&&(c=aA(c));const k=x.safeValue(c);if(e=e.replace(o[0],k),E?(x.regex.lastIndex+=c.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,o,c;const d=(p,g)=>{const b=this.nestingOptionsSeparator;if(p.indexOf(b)<0)return p;const E=p.split(new RegExp(`${b}[ ]*{`));let C=`{${E[1]}`;p=E[0],C=this.interpolate(C,c);const O=C.match(/'/g),x=C.match(/"/g);(((O==null?void 0:O.length)??0)%2===0&&!x||x.length%2!==0)&&(C=C.replace(/'/g,'"'));try{c=JSON.parse(C),g&&(c={...g,...c})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,N),`${p}${b}${C}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,p};for(;i=this.nestingRegexp.exec(e);){let p=[];c={...r},c=c.replace&&!mt(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const b=i[1].split(this.formatSeparator).map(E=>E.trim());i[1]=b.shift(),p=b,g=!0}if(o=n(d.call(this,i[1].trim(),c),c),o&&i[0]===e&&!mt(o))return o;mt(o)||(o=aA(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),g&&(o=p.reduce((b,E)=>this.format(b,E,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const GF=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(c=>{if(c){const[d,...p]=c.split(":"),g=p.join(":").trim().replace(/^'+|'+$/g,""),b=d.trim();n[b]||(n[b]=g),g==="false"&&(n[b]=!1),g==="true"&&(n[b]=!0),isNaN(g)||(n[b]=parseInt(g,10))}})}return{formatName:e,formatOptions:n}},yA=t=>{const e={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const c=r+JSON.stringify(o);let d=e[c];return d||(d=t(kd(r),i),e[c]=d),d(n)}},WF=t=>(e,n,r)=>t(kd(n),r)(e);class KF{constructor(e={}){this.logger=va.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?yA:WF;this.formats={number:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o});return d=>c.format(d)}),currency:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o,style:"currency"});return d=>c.format(d)}),datetime:r((i,o)=>{const c=new Intl.DateTimeFormat(i,{...o});return d=>c.format(d)}),relativetime:r((i,o)=>{const c=new Intl.RelativeTimeFormat(i,{...o});return d=>c.format(d,o.range||"day")}),list:r((i,o)=>{const c=new Intl.ListFormat(i,{...o});return d=>c.format(d)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=yA(n)}format(e,n,r,i={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(d=>d.indexOf(")")>-1)){const d=o.findIndex(p=>p.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,d)].join(this.formatSeparator)}return o.reduce((d,p)=>{var E;const{formatName:g,formatOptions:b}=GF(p);if(this.formats[g]){let C=d;try{const O=((E=i==null?void 0:i.formatParams)==null?void 0:E[i.interpolationkey])||{},x=O.locale||O.lng||i.locale||i.lng||r;C=this.formats[g](d,x,{...b,...i,...O})}catch(O){this.logger.warn(O)}return C}else this.logger.warn(`there was no format function for ${g}`);return d},e)}}const YF=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class QF extends Dy{constructor(e,n,r,i={}){var o,c;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=va.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(c=(o=this.backend)==null?void 0:o.init)==null||c.call(o,r,i.backend,i)}queueLoad(e,n,r,i){const o={},c={},d={},p={};return e.forEach(g=>{let b=!0;n.forEach(E=>{const C=`${g}|${E}`;!r.reload&&this.store.hasResourceBundle(g,E)?this.state[C]=2:this.state[C]<0||(this.state[C]===1?c[C]===void 0&&(c[C]=!0):(this.state[C]=1,b=!1,c[C]===void 0&&(c[C]=!0),o[C]===void 0&&(o[C]=!0),p[E]===void 0&&(p[E]=!0)))}),b||(d[g]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(p)}}loaded(e,n,r){const i=e.split("|"),o=i[0],c=i[1];n&&this.emit("failedLoading",o,c,n),!n&&r&&this.store.addResourceBundle(o,c,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const d={};this.queue.forEach(p=>{NF(p.loaded,[o],c),YF(p,e),n&&p.errors.push(n),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(g=>{d[g]||(d[g]={});const b=p.loaded[g];b.length&&b.forEach(E=>{d[g][E]===void 0&&(d[g][E]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(p=>!p.done)}read(e,n,r,i=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:o,callback:c});return}this.readingCalls++;const d=(g,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(g&&b&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,o*2,c)},o);return}c(g,b)},p=this.backend[r].bind(this.backend);if(p.length===2){try{const g=p(e,n);g&&typeof g.then=="function"?g.then(b=>d(null,b)).catch(d):d(null,g)}catch(g){d(g)}return}return p(e,n,d)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();mt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),mt(n)&&(n=[n]);const o=this.queueLoad(e,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(c,d)=>{c&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,c),!c&&d&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,d),this.loaded(e,c,d)})}saveMissing(e,n,r,i,o,c={},d=()=>{}){var p,g,b,E,C;if((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace&&!((E=(b=this.services)==null?void 0:b.utils)!=null&&E.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((C=this.backend)!=null&&C.create){const O={...c,isUpdate:o},x=this.backend.create.bind(this.backend);if(x.length<6)try{let N;x.length===5?N=x(e,n,r,i,O):N=x(e,n,r,i),N&&typeof N.then=="function"?N.then(k=>d(null,k)).catch(d):d(null,N)}catch(N){d(N)}else x(e,n,r,i,d,O)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const vA=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),mt(t[1])&&(e.defaultValue=t[1]),mt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),bA=t=>{var e,n;return mt(t.ns)&&(t.ns=[t.ns]),mt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),mt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Og=()=>{},XF=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Dd extends Dy{constructor(e={},n){if(super(),this.options=bA(e),this.services={},this.logger=va,this.modules={external:[]},XF(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(mt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=vA();this.options={...r,...this.options,...bA(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?va.init(i(this.modules.logger),this.options):va.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=KF;const b=new dA(this.options);this.store=new uA(this.options.resources,this.options);const E=this.services;E.logger=va,E.resourceStore=this.store,E.languageUtils=b,E.pluralResolver=new qF(b,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(E.formatter=i(g),E.formatter.init(E,this.options),this.options.interpolation.format=E.formatter.format.bind(E.formatter)),E.interpolator=new $F(this.options),E.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},E.backendConnector=new QF(i(this.modules.backend),E.resourceStore,E,this.options),E.backendConnector.on("*",(C,...O)=>{this.emit(C,...O)}),this.modules.languageDetector&&(E.languageDetector=i(this.modules.languageDetector),E.languageDetector.init&&E.languageDetector.init(E,this.options.detection,this.options)),this.modules.i18nFormat&&(E.i18nFormat=i(this.modules.i18nFormat),E.i18nFormat.init&&E.i18nFormat.init(this)),this.translator=new Hm(this.services,this.options),this.translator.on("*",(C,...O)=>{this.emit(C,...O)}),this.modules.external.forEach(C=>{C.init&&C.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Og),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=(...b)=>this.store[g](...b)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=(...b)=>(this.store[g](...b),this)});const d=Gh(),p=()=>{const g=(b,E)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(E),n(b,E)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),d}loadResources(e,n=Og){var o,c;let r=n;const i=mt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const d=[],p=g=>{if(!g||g==="cimode")return;this.services.languageUtils.toResolveHierarchy(g).forEach(E=>{E!=="cimode"&&d.indexOf(E)<0&&d.push(E)})};i?p(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>p(b)),(c=(o=this.options.preload)==null?void 0:o.forEach)==null||c.call(o,g=>p(g)),this.services.backendConnector.load(d,this.options.ns,g=>{!g&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(g)})}else r(null)}reloadResources(e,n,r){const i=Gh();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Og),this.services.backendConnector.reload(e,n,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&q2.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Gh();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},o=(d,p)=>{p?this.isLanguageChangingTo===e&&(i(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,r.resolve((...g)=>this.t(...g)),n&&n(d,(...g)=>this.t(...g))},c=d=>{var b,E;!e&&!d&&this.services.languageDetector&&(d=[]);const p=mt(d)?d:d&&d[0],g=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(mt(d)?[d]:d);g&&(this.language||i(g),this.translator.language||this.translator.changeLanguage(g),(E=(b=this.services.languageDetector)==null?void 0:b.cacheUserLanguage)==null||E.call(b,g)),this.loadResources(g,C=>{o(C,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,n,r){const i=(o,c,...d)=>{let p;typeof c!="object"?p=this.options.overloadTranslationOptionHandler([o,c].concat(d)):p={...c},p.lng=p.lng||i.lng,p.lngs=p.lngs||i.lngs,p.ns=p.ns||i.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||r||i.keyPrefix);const g=this.options.keySeparator||".";let b;return p.keyPrefix&&Array.isArray(o)?b=o.map(E=>`${p.keyPrefix}${g}${E}`):b=p.keyPrefix?`${p.keyPrefix}${g}${o}`:o,this.t(b,p)};return mt(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(d,p)=>{const g=this.services.backendConnector.state[`${d}|${p}`];return g===-1||g===0||g===2};if(n.precheck){const d=n.precheck(this,c);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,e)&&(!i||c(o,e)))}loadNamespaces(e,n){const r=Gh();return this.options.ns?(mt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Gh();mt(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(c=>i.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=i.concat(o),this.loadResources(c=>{r.resolve(),n&&n(c)}),r):(n&&n(),Promise.resolve())}dir(e){var i,o;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((o=this.services)==null?void 0:o.languageUtils)||new dA(vA());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Dd(e,n)}cloneInstance(e={},n=Og){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Dd(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(d=>{o[d]=this[d]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const d=Object.keys(this.store.data).reduce((p,g)=>(p[g]={...this.store.data[g]},p[g]=Object.keys(p[g]).reduce((b,E)=>(b[E]={...p[g][E]},b),p[g]),p),{});o.store=new uA(d,i),o.services.resourceStore=o.store}return o.translator=new Hm(o.services,i),o.translator.on("*",(d,...p)=>{o.emit(d,...p)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Zn=Dd.createInstance();Zn.createInstance=Dd.createInstance;Zn.createInstance;Zn.dir;Zn.init;Zn.loadResources;Zn.reloadResources;Zn.use;Zn.changeLanguage;Zn.getFixedT;Zn.t;Zn.exists;Zn.setDefaultNamespace;Zn.hasLoadedNamespace;Zn.loadNamespaces;Zn.loadLanguages;const{slice:JF,forEach:ZF}=[];function e7(t){return ZF.call(JF.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function t7(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const _A=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,n7=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let o=`${t}=${i}`;if(r.maxAge>0){const c=r.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(c)}`}if(r.domain){if(!_A.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!_A.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},SA={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=n7(t,e,i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var r7={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return SA.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=e;n&&typeof document<"u"&&SA.create(n,t,r,i,o)}},i7={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const c=i.substring(1).split("&");for(let d=0;d<c.length;d++){const p=c[d].indexOf("=");p>0&&c[d].substring(0,p)===e&&(n=c[d].substring(p+1))}}return n}},s7={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const c=o.substring(1);if(e){const d=c.split("&");for(let p=0;p<d.length;p++){const g=d[p].indexOf("=");g>0&&d[p].substring(0,g)===e&&(r=d[p].substring(g+1))}}if(r)return r;if(!r&&n>-1){const d=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?(i=d[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return r}};let qu=null;const EA=()=>{if(qu!==null)return qu;try{if(qu=typeof window<"u"&&window.localStorage!==null,!qu)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{qu=!1}return qu};var a7={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&EA())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&EA()&&window.localStorage.setItem(n,t)}};let $u=null;const wA=()=>{if($u!==null)return $u;try{if($u=typeof window<"u"&&window.sessionStorage!==null,!$u)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{$u=!1}return $u};var o7={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&wA())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&wA()&&window.sessionStorage.setItem(n,t)}},l7={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},c7={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},u7={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},f7={name:"subdomain",lookup(t){var i,o;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let $2=!1;try{document.cookie,$2=!0}catch{}const G2=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];$2||G2.splice(1,1);const h7=()=>({order:G2,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class W2{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=e7(n,this.options||{},h7()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(r7),this.addDetector(i7),this.addDetector(a7),this.addDetector(o7),this.addDetector(l7),this.addDetector(c7),this.addDetector(u7),this.addDetector(f7),this.addDetector(s7)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!t7(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}W2.type="languageDetector";function n_(t){"@babel/helpers - typeof";return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n_(t)}function K2(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":n_(XMLHttpRequest))==="object"}function d7(t){return!!t&&typeof t.then=="function"}function p7(t){return d7(t)?t:Promise.resolve(t)}const g7="modulepreload",m7=function(t){return"/melo-chart/"+t},TA={},y7=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(n.map(g=>{if(g=m7(g),g in TA)return;TA[g]=!0;const b=g.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const C=document.createElement("link");if(C.rel=b?"stylesheet":g7,b||(C.as="script"),C.crossOrigin="",C.href=g,p&&C.setAttribute("nonce",p),document.head.appendChild(C),b)return new Promise((O,x)=>{C.addEventListener("load",O),C.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function CA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CA(Object(n),!0).forEach(function(r){v7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v7(t,e,n){return(e=b7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b7(t){var e=_7(t,"string");return $c(e)=="symbol"?e:e+""}function _7(t,e){if($c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}var Hl=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Hl=global.fetch:typeof window<"u"&&window.fetch&&(Hl=window.fetch);var Nd;K2()&&(typeof global<"u"&&global.XMLHttpRequest?Nd=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Nd=window.XMLHttpRequest));var qm;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?qm=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(qm=window.ActiveXObject));typeof Hl!="function"&&(Hl=void 0);if(!Hl&&!Nd&&!qm)try{y7(()=>import("./browser-ponyfill--v0dNL2-.js").then(t=>t.b),[]).then(function(t){Hl=t.default}).catch(function(){})}catch{}var r_=function(e,n){if(n&&$c(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},RA=function(e,n,r,i){var o=function(p){if(!p.ok)return r(p.statusText||"Error",{status:p.status});p.text().then(function(g){r(null,{status:p.status,data:g})}).catch(r)};if(i){var c=i(e,n);if(c instanceof Promise){c.then(o).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(o).catch(r):Hl(e,n).then(o).catch(r)},OA=!1,S7=function(e,n,r,i){e.queryStringParams&&(n=r_(n,e.queryStringParams));var o=AA({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(o["Content-Type"]="application/json");var c=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,d=AA({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:o},OA?{}:c),p=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{RA(n,d,i,p)}catch(g){if(!c||Object.keys(c).length===0||!g.message||g.message.indexOf("not implemented")<0)return i(g);try{Object.keys(c).forEach(function(b){delete d[b]}),RA(n,d,i,p),OA=!0}catch(b){i(b)}}},E7=function(e,n,r,i){r&&$c(r)==="object"&&(r=r_("",r).slice(1)),e.queryStringParams&&(n=r_(n,e.queryStringParams));try{var o=Nd?new Nd:new qm("MSXML2.XMLHTTP.3.0");o.open(r?"POST":"GET",n,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,r&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var c=e.customHeaders;if(c=typeof c=="function"?c():c,c)for(var d in c)o.setRequestHeader(d,c[d]);o.onreadystatechange=function(){o.readyState>3&&i(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(r)}catch(p){console&&console.log(p)}},w7=function(e,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},Hl&&n.indexOf("file:")!==0)return S7(e,n,r,i);if(K2()||typeof ActiveXObject=="function")return E7(e,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function IA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(n),!0).forEach(function(r){Y2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q2(r.key),r)}}function A7(t,e,n){return e&&C7(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y2(t,e,n){return(e=Q2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q2(t){var e=R7(t,"string");return Af(e)=="symbol"?e:e+""}function R7(t,e){if(Af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O7=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return Y2({},r,i||"")},parseLoadPayload:function(n,r){},request:w7,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},X2=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};T7(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return A7(t,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=L0(L0(L0({},O7()),this.options||{}),i),this.allOptions=o,this.services&&this.options.reloadInterval){var c=setInterval(function(){return r.reload()},this.options.reloadInterval);Af(c)==="object"&&typeof c.unref=="function"&&c.unref()}}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,o,c){var d=this,p=this.options.loadPath;typeof this.options.loadPath=="function"&&(p=this.options.loadPath(n,i)),p=p7(p),p.then(function(g){if(!g)return c(null,{});var b=d.services.interpolator.interpolate(g,{lng:n.join("+"),ns:i.join("+")});d.loadUrl(b,c,r,o)})}},{key:"loadUrl",value:function(n,r,i,o){var c=this,d=typeof i=="string"?[i]:i,p=typeof o=="string"?[o]:o,g=this.options.parseLoadPayload(d,p);this.options.request(this.options,n,g,function(b,E){if(E&&(E.status>=500&&E.status<600||!E.status))return r("failed loading "+n+"; status code: "+E.status,!0);if(E&&E.status>=400&&E.status<500)return r("failed loading "+n+"; status code: "+E.status,!1);if(!E&&b&&b.message){var C=b.message.toLowerCase(),O=["failed","fetch","network","load"].find(function(k){return C.indexOf(k)>-1});if(O)return r("failed loading "+n+": "+b.message,!0)}if(b)return r(b,!1);var x,N;try{typeof E.data=="string"?x=c.options.parse(E.data,i,o):x=E.data}catch{N="failed parsing "+n+" to json"}if(N)return r(N,!1);r(null,x)})}},{key:"create",value:function(n,r,i,o,c){var d=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var p=this.options.parsePayload(r,i,o),g=0,b=[],E=[];n.forEach(function(C){var O=d.options.addPath;typeof d.options.addPath=="function"&&(O=d.options.addPath(C,r));var x=d.services.interpolator.interpolate(O,{lng:C,ns:r});d.options.request(d.options,x,p,function(N,k){g+=1,b.push(N),E.push(k),g===n.length&&typeof c=="function"&&c(b,E)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,o=r.languageUtils,c=r.logger,d=i.language;if(!(d&&d.toLowerCase()==="cimode")){var p=[],g=function(E){var C=o.toResolveHierarchy(E);C.forEach(function(O){p.indexOf(O)<0&&p.push(O)})};g(d),this.allOptions.preload&&this.allOptions.preload.forEach(function(b){return g(b)}),p.forEach(function(b){n.allOptions.ns.forEach(function(E){i.read(b,E,"read",null,null,function(C,O){C&&c.warn("loading namespace ".concat(E," for language ").concat(b," failed"),C),!C&&O&&c.log("loaded namespace ".concat(E," for language ").concat(b),O),i.loaded("".concat(b,"|").concat(E),C,O)})})})}}}])}();X2.type="backend";Zn.use(X2).use(W2).use(XU).init({lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1},backend:{loadPath:"/melo-chart/locales/{{lng}}/{{ns}}.json"}});const{t:I7}=Zn,x7={signOutStatus:vt.IDLE,signOutError:null},sm={signOutUser:yo(`${Cf}/signOut`,async()=>await Q8())},P7=t=>{t.addCase(sm.signOutUser.pending,e=>{e.signOutStatus=vt.LOADING}).addCase(sm.signOutUser.fulfilled,e=>{e.signOutStatus=vt.SUCCEEDED,e.loggedUser=null}).addCase(sm.signOutUser.rejected,(e,n)=>{e.signOutStatus=vt.FAILED,e.loggedUserError=I7(`error-message.sign-out-user.${n.error.code}`)})},M7={initialState:x7,asyncThunk:sm,extraReducers:P7},k7={signUpStatus:vt.IDLE},D7={},am={signUpUser:yo(`${Cf}/signUpUser`,async t=>await X8(t))},N7=t=>{t.addCase(am.signUpUser.pending,e=>{e.signUpStatus=vt.LOADING}).addCase(am.signUpUser.fulfilled,e=>{e.signUpStatus=vt.SUCCEEDED}).addCase(am.signUpUser.rejected,e=>{e.signUpStatus=vt.FAILED})},L7={},U7={initialState:k7,asyncThunk:am,reducers:D7,extraReducers:N7,selectors:L7},V7=Object.freeze(Object.defineProperty({__proto__:null,LoggedUser:RF,SignInUser:MF,SignOutUser:M7,SignUpUser:U7},Symbol.toStringTag,{value:"Module"})),Dr=oS({sliceName:Cf,sliceParts:V7}),j7=t=>{const{song:e}=t,{deleteSongDialogFnsRef:n}=t,{t:r}=Nn(),i=fr(Dr.selectors.selectLoggedUser);return e.owner!=(i==null?void 0:i.uid)?j.jsx(j.Fragment,{}):j.jsx(j.Fragment,{children:j.jsx(mn,{category:kn.DANGER,onClick:()=>{var o;return(o=n.current)==null?void 0:o.show()},children:r("Delete Song")})})},F7=M.memo(j7),B7="_NewNotesOption_1ax45_1",z7={NewNotesOption:B7},H7=t=>{const{notesFnsRef:e,songId:n}=t,{t:r}=Nn(),i=Hs(),{publish:o}=Kl("melo-chart-song-updates",p=>{if(i.connection.id!=p.connectionId){const{name:g,data:b}=p;if(b.id!=n)return;g=="update-chart-add-multiple-notes"&&c(b.qty)}}),c=M.useCallback(p=>{var g;(g=e.current)==null||g.addMultipleNotes(p)},[e]),d=M.useCallback(p=>{p.preventDefault();const g=+p.target.qty.value;c(g),o("update-chart-add-multiple-notes",{id:n,qty:g})},[c,o,n]);return j.jsxs("form",{className:z7.NewNotesOption,onSubmit:d,children:[j.jsx(Ra,{label:r("New Notes"),field:j.jsx(ho,{type:"number",name:"qty"})}),j.jsx(mn,{category:kn.PRIMARY,children:r("Add")})]})},q7=M.memo(H7),$7="_NewPitchesOption_1vsl8_1",G7={NewPitchesOption:$7},W7=t=>{const{notesFnsRef:e,songId:n}=t,{t:r}=Nn(),i=Hs(),{publish:o}=Kl("melo-chart-song-updates",p=>{if(i.connection.id!=p.connectionId){const{name:g,data:b}=p;if(b.id!=n)return;g=="update-chart-add-multiple-pitches"&&c(b.qty)}}),c=M.useCallback(p=>{var g;(g=e.current)==null||g.addMultiplePitches(p)},[e]),d=M.useCallback(p=>{p.preventDefault();const g=+p.target.qty.value;c(g),o("update-chart-add-multiple-pitches",{id:n,qty:g})},[c,o,n]);return j.jsxs("form",{className:G7.NewPitchesOption,onSubmit:d,children:[j.jsx(Ra,{label:r("New Pitches"),field:j.jsx(ho,{type:"number",name:"qty"})}),j.jsx(mn,{category:kn.PRIMARY,children:r("Add")})]})},K7=M.memo(W7),Y7="_ShareWithOption_c354n_1",Q7={ShareWithOption:Y7},X7=t=>{const{songId:e}=t,{t:n}=Nn(),r=qs(),i=fr(Sr.selectors.selectSongById(e)),o=Hs(),{publish:c}=Kl("melo-chart-song-updates",p=>{if(o.connection.id!=p.connectionId){const{name:g,data:b}=p;if(b.id!=e)return;g=="update-chart-shared-with"&&r(Sr.actions.editSongEditors({id:b.id,editors:b.editors,editorsData:b.editorsData}))}}),d=M.useCallback(async p=>{const g=p.map(C=>C.value),E={editors:[...new Set([i.owner,...g])],editorsData:p};r(Sr.actions.saveSong({...i,...E})),c("update-chart-shared-with",{id:e,...E})},[r,c,i,e]);return j.jsx("div",{className:Q7.ShareWithOption,children:j.jsx(Ra,{label:n("Shared With"),field:j.jsx(JY,{selectedOptions:i.editorsData,onChangeSelectedUsers:d})})})},J7=M.memo(X7),Z7="_TrimOptions_ti9xd_1",eB={TrimOptions:Z7},tB=t=>{const{notesFnsRef:e,songId:n}=t,{t:r}=Nn(),i=Hs(),{publish:o}=Kl("melo-chart-song-updates",b=>{if(i.connection.id!=b.connectionId){const{name:E,data:C}=b;if(C.id!=n)return;E=="update-chart-trim"&&p()}}),c=M.useCallback(()=>{var b;(b=e.current)==null||b.trimPitches()},[e]),d=M.useCallback(()=>{var b;(b=e.current)==null||b.removeEmptyNotesAtTheEnd()},[e]),p=M.useCallback(()=>{d(),c()},[d,c]),g=M.useCallback(()=>{p(),o("update-chart-trim",{id:n})},[o,n,p]);return j.jsx("div",{className:eB.TrimOptions,children:j.jsx(mn,{category:kn.DANGER,onClick:g,textOnly:!0,children:r("Trim Chart")})})},nB=M.memo(tB),rB="_ChartControllers_rba5f_1",iB="_Section_rba5f_7",Ig={ChartControllers:rB,Section:iB},sB=t=>{const{song:e}=t,{notesFnsRef:n,generateChartDialogFnsRef:r,deleteSongDialogFnsRef:i}=t,{t:o}=Nn();return j.jsxs("div",{className:Ig.ChartControllers,children:[j.jsxs("div",{className:Ig.Section,children:[j.jsx(q7,{notesFnsRef:n,songId:e.id}),j.jsx(K7,{notesFnsRef:n,songId:e.id}),j.jsx(nB,{notesFnsRef:n,songId:e.id})]}),j.jsx("div",{className:Ig.Section,children:j.jsx(J7,{songId:e.id})}),j.jsxs("div",{className:Ig.Section,children:[j.jsx(mn,{category:kn.DANGER,onClick:()=>{var c;return(c=r.current)==null?void 0:c.show()},children:o("Generate mapping with lyrics")}),j.jsx(F7,{song:e,deleteSongDialogFnsRef:i})]})]})},aB=M.memo(sB),oB="_Checkbox_5pzbe_1",lB={Checkbox:oB},cB=t=>{const{label:e,initialValue:n,className:r="",onChange:i}=t,[o,c]=M.useState(n);return M.useEffect(()=>{i(o)},[o,i]),j.jsxs("label",{className:`${lB.Checkbox} ${r}`,children:[j.jsx("input",{type:"checkbox",checked:o,onChange:()=>{c(d=>!d)}}),j.jsx("span",{children:e})]})},uB=M.memo(cB),fB=t=>{const{bodyContent:e,footerContent:n}=t,{t:r}=Nn();return j.jsx(np,{title:r("Confirmation"),bodyContent:e,footerContent:n})},J2=M.memo(fB),hB="_ContextMenu_ip4lh_1",dB="_ContextMenuItem_ip4lh_10",xA={ContextMenu:hB,ContextMenuItem:dB},pB=t=>{const{items:e,contextMenuFnsRef:n}=t,[r,i]=M.useState(null),o=M.useRef(null);return M.useImperativeHandle(n,()=>({setContextMenuData(c){i(c)}}),[]),M.useEffect(()=>{function c(d){o.current&&!o.current.contains(d.target)&&i(null)}return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[i,o]),r?j.jsx("div",{ref:o,className:xA.ContextMenu,style:{top:r==null?void 0:r.top,left:r==null?void 0:r.left},children:e.map(c=>j.jsx("span",{className:xA.ContextMenuItem,onClick:()=>{i(null),c.onClick(r)},"data-type":c.type,children:c.label},`item-${c.label}`))}):j.jsx(j.Fragment,{})},gB=M.memo(pB);var Z2=cO();const mB="_DialogHidden_z00rr_1",yB="_DialogUIBlocker_z00rr_5",vB="_Dialog_z00rr_1",bB="_DialogHeader_z00rr_36",_B="_DialogBody_z00rr_41",SB="_DialogFooter_z00rr_50",Gu={DialogHidden:mB,DialogUIBlocker:yB,Dialog:vB,DialogHeader:bB,DialogBody:_B,DialogFooter:SB},EB=t=>{const{show:e=!0,bodyContent:n,footerContent:r,title:i,size:o=""}=t;return M.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),Z2.createPortal(j.jsx("div",{className:`${Gu.DialogUIBlocker} ${e?"":Gu.DialogHidden}`,children:j.jsxs("div",{className:Gu.Dialog,"data-size":o,children:[j.jsx("div",{className:Gu.DialogHeader,children:j.jsx("h2",{children:i})}),j.jsx("div",{className:Gu.DialogBody,children:n}),j.jsx("div",{className:Gu.DialogFooter,children:r})]})}),document.body)},np=M.memo(EB),wB=Object.freeze({LARGE:"LARGE"}),TB=t=>{const{addSongDialogFnsRef:e}=t,{t:n}=Nn(),r=qs(),i=kf(),o=fr(Sr.selectors.selectAddSongStatus),c=fr(Sr.selectors.selectLatestAddedSongId),[d,p]=M.useState(!1);return M.useImperativeHandle(e,()=>({show(){p(!0)}})),M.useEffect(()=>{c!=null&&(r(Sr.actions.clearLatestAddedSongId()),i(`/chart?id=${c}`))},[o,r,c,i]),j.jsxs(j.Fragment,{children:[j.jsx(mn,{category:kn.SUCCESS,onClick:()=>p(!0),icon:j.jsx(hR,{}),children:n("Add Song")}),d?j.jsx(np,{title:n("Add Song"),bodyContent:j.jsx(GB,{}),footerContent:j.jsxs(j.Fragment,{children:[j.jsx(mn,{onClick:()=>p(!1),children:n("Close")}),j.jsx(mn,{category:kn.SUCCESS,form:"formAddSong",type:"submit",icon:j.jsx(hR,{}),children:n("Add")})]})}):j.jsx(j.Fragment,{})]})},CB=M.memo(TB),AB=t=>{const{song:e}=t,{configSongDialogFnsRef:n,notesFnsRef:r,generateChartDialogFnsRef:i,deleteSongDialogFnsRef:o}=t,{t:c}=Nn(),[d,p]=M.useState(!1);return M.useImperativeHandle(n,()=>({show(){p(!0)}})),j.jsx(np,{show:d,title:c("Configure Song"),bodyContent:j.jsx(j.Fragment,{children:j.jsx(aB,{song:e,notesFnsRef:r,generateChartDialogFnsRef:i,deleteSongDialogFnsRef:o})}),footerContent:j.jsx(j.Fragment,{children:j.jsx(mn,{onClick:()=>p(!1),children:c("Close")})})})},RB=M.memo(AB),OB=t=>{const{deleteSongDialogFnsRef:e,song:n}=t,{t:r}=Nn(),i=qs(),[o,c]=M.useState(!1);M.useImperativeHandle(e,()=>({show(){c(!0)}}));const d=M.useCallback(()=>{i(Sr.actions.deleteSong(n.id))},[i,n.id]);return o?j.jsx(j.Fragment,{children:j.jsx(J2,{bodyContent:j.jsxs(j.Fragment,{children:[j.jsx("p",{children:r("Are you sure you want to delete this song?")}),j.jsx("p",{children:r("This action cannot be undone")})]}),footerContent:j.jsxs(j.Fragment,{children:[j.jsx(mn,{category:kn.DANGER,onClick:d,children:r("Delete Song")}),j.jsx(mn,{category:kn.DEFAULT,onClick:()=>c(!1),children:r("Cancel")})]})})}):j.jsx(j.Fragment,{})},IB=M.memo(OB),xB=t=>{const{generateChartDialogFnsRef:e,songId:n}=t,{onAddWordsAsNotes:r}=t,{t:i}=Nn(),o=M.useRef(null),[c,d]=M.useState(!1);M.useImperativeHandle(e,()=>({show(){d(!0)}}));const p=Hs(),{publish:g}=Kl("melo-chart-song-updates",E=>{if(p.connection.id!=E.connectionId){const{name:C,data:O}=E;if(O.id!=n)return;C=="update-chart-generate-by-lyrics"&&r(O.lyrics)}}),b=M.useCallback(E=>{var O;if(!o.current)return;const C=(O=o.current)==null?void 0:O.value;r(C),g("update-chart-generate-by-lyrics",{id:n,lyrics:C}),E.target.value="",d(!1)},[r,g,n]);return c?j.jsx(np,{title:i("Generate mapping with lyrics"),bodyContent:j.jsx(Ra,{label:i("Song lyrics"),field:j.jsx(KP,{ref:o})}),footerContent:j.jsxs(j.Fragment,{children:[j.jsx(mn,{category:kn.DANGER,onClick:b,children:i("Generate")}),j.jsx(mn,{category:kn.DEFAULT,onClick:()=>d(!1),children:i("Cancel")})]})}):j.jsx(j.Fragment,{})},PB=M.memo(xB),MB="_TableContainer_lkaju_1",kB="_Table_lkaju_1",Wu={TableContainer:MB,Table:kB},DB=()=>{const{t}=Nn(),[e,n]=M.useState(!1);return j.jsxs(j.Fragment,{children:[j.jsx(mn,{category:kn.PRIMARY,onClick:()=>n(!0),icon:j.jsx(xq,{}),children:t("How to Use")}),e?j.jsx(np,{title:t("How to Use"),size:wB.LARGE,bodyContent:j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:Wu.TableContainer,children:[j.jsx("h3",{children:t("Notes")}),j.jsxs("table",{className:Wu.Table,children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("td",{children:t("Action")}),j.jsx("td",{children:t("How To Do")})]})}),j.jsxs("tbody",{children:[j.jsxs("tr",{children:[j.jsx("td",{children:t("Edit Note")}),j.jsx("td",{children:t("Click the note")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Break Word Into Notes")}),j.jsx("td",{children:t("Add spaces between letters and hit enter (or click outside)")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Change Note Pitch")}),j.jsx("td",{children:t("Click and hold the note, then drag it to the new position")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Add Note")}),j.jsx("td",{children:t("Right-click a note in the chart")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Remove Note")}),j.jsx("td",{children:t("Right-click a note in the chart")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Add Multiple Notes")}),j.jsx("td",{children:t('Click in "Configure Song" button')})]})]})]})]}),j.jsxs("div",{className:Wu.TableContainer,children:[j.jsx("h3",{children:t("Pitches")}),j.jsxs("table",{className:Wu.Table,children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("td",{children:t("Action")}),j.jsx("td",{children:t("How To Do")})]})}),j.jsxs("tbody",{children:[j.jsxs("tr",{children:[j.jsx("td",{children:t("Add Pitch")}),j.jsx("td",{children:t("Right-click a note in the chart")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Remove Pitch")}),j.jsx("td",{children:t("Right-click a note in the chart")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Add Multiple Pitches")}),j.jsx("td",{children:t('Click in "Configure Song" button')})]})]})]})]}),j.jsxs("div",{className:Wu.TableContainer,children:[j.jsx("h3",{children:t("Keyboard Shortcuts when Editing Note")}),j.jsxs("table",{className:Wu.Table,children:[j.jsx("thead",{children:j.jsxs("tr",{children:[j.jsx("td",{children:t("Action")}),j.jsx("td",{children:t("How To Do")})]})}),j.jsxs("tbody",{children:[j.jsxs("tr",{children:[j.jsx("td",{children:t("Save")}),j.jsx("td",{children:t("Enter")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Cancel")}),j.jsx("td",{children:t("Esc")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Navigate Notes")}),j.jsx("td",{children:t("Tab or Shift + Tab")})]}),j.jsxs("tr",{children:[j.jsx("td",{children:t("Navigate Pitches")}),j.jsx("td",{children:t("Arrow Up or Arrow Down")})]})]})]})]})]}),footerContent:j.jsx(j.Fragment,{children:j.jsx(mn,{onClick:()=>n(!1),children:t("Close")})})}):j.jsx(j.Fragment,{})]})},NB=M.memo(DB),LB=t=>{const{show:e,onConfirm:n,onCancel:r}=t,{t:i}=Nn();return e?j.jsx(J2,{bodyContent:j.jsxs(j.Fragment,{children:[j.jsx("p",{children:i("Are you sure you want to leave this page?")}),j.jsx("p",{children:i("Some unsaved changes will be lost")})]}),footerContent:j.jsxs(j.Fragment,{children:[j.jsx(mn,{category:kn.DANGER,onClick:n,children:i("Leave Page")}),j.jsx(mn,{category:kn.DEFAULT,onClick:r,children:i("Cancel")})]})}):j.jsx(j.Fragment,{})},UB=M.memo(LB),VB="_FieldWithLabel_15xa5_1",jB={FieldWithLabel:VB},FB=t=>{const{label:e,field:n}=t;return j.jsxs("label",{className:jB.FieldWithLabel,children:[j.jsx("span",{children:e}),n]})},Ra=M.memo(FB),BB=()=>{const t=qs(),e=e_(t);return{success:n=>e(B2(n)),error:n=>e(F2(n)),warn:n=>e(tF(n))}},zB=t=>{const{title:e,pitches:n,lyrics:r}=t,i=isNaN(n)?1:n,o=j2(r),c=r?[Ml(i),...o.map(d=>{const p=Ml(i);return p.chunks[0].text=d,p})]:Array.from({length:1},()=>Ml(i));return{id:tp(),title:e,notes:c}},HB="_FormAddSong_5y15a_1",qB="_FieldsContainer_5y15a_10",PA={FormAddSong:HB,FieldsContainer:qB},$B=()=>{const{t}=Nn(),e=qs(),n=fr(Dr.selectors.selectLoggedUser),r=fr(Sr.selectors.selectAddSongStatus),i=BB(),o=M.useCallback(async c=>{if(c.preventDefault(),z2(r))return;const d=c.target,p=d.title.value.trim(),g=d.pitches.value||1,b=d.lyrics.value||"";if(!p){i.error(t("Please, insert a song title"));return}const E=zB({title:p,pitches:g,lyrics:b});e(Sr.actions.addSong({...E,editors:[n.uid],owner:n.uid}))},[r,e,i,n,t]);return j.jsx("form",{id:"formAddSong",className:PA.FormAddSong,onSubmit:o,children:j.jsxs("div",{className:PA.FieldsContainer,children:[j.jsx(Ra,{label:t("Title"),field:j.jsx(ho,{type:"text",name:"title"})}),j.jsx(Ra,{label:t("Number of Pitches"),field:j.jsx(ho,{type:"number",name:"pitches"})}),j.jsx(Ra,{label:t("Song lyrics"),field:j.jsx(KP,{name:"lyrics"})})]})})},GB=M.memo($B),WB="_Growl_1g2zn_1",KB="_GrowlClose_1g2zn_31",MA={Growl:WB,GrowlClose:KB},YB=t=>{const{id:e,level:n,message:r}=t,i=qs(),o=M.useCallback(()=>{i(Cd.actions.removeGrowl(e))},[i,e]);return j.jsxs("div",{className:MA.Growl,"data-level":n,children:[j.jsx("button",{type:"button",className:MA.GrowlClose,onClick:o,children:"x"}),r]})},QB=M.memo(YB),XB="_GrowlContainer_io9n0_1",JB={GrowlContainer:XB},ZB=()=>{const t=fr(Cd.selectors.selectAllGrowls);return j.jsx("div",{className:JB.GrowlContainer,children:t.map(e=>j.jsx(QB,{...e},e.id))})},ez=M.memo(ZB);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const tz={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},nz={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},rz={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},iz={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},sz={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},az={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},oz={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},lz={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function cz(t,e,n){return(e=fz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kA(Object(n),!0).forEach(function(r){cz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fz(t){var e=uz(t,"string");return typeof e=="symbol"?e:e+""}const DA=()=>{};let qS={},eP={},tP=null,nP={mark:DA,measure:DA};try{typeof window<"u"&&(qS=window),typeof document<"u"&&(eP=document),typeof MutationObserver<"u"&&(tP=MutationObserver),typeof performance<"u"&&(nP=performance)}catch{}const{userAgent:NA=""}=qS.navigator||{},ql=qS,gn=eP,LA=tP,xg=nP;ql.document;const Co=!!gn.documentElement&&!!gn.head&&typeof gn.addEventListener=="function"&&typeof gn.createElement=="function",rP=~NA.indexOf("MSIE")||~NA.indexOf("Trident/");var hz=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,dz=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,iP={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},pz={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},sP=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Zr="classic",Ny="duotone",gz="sharp",mz="sharp-duotone",aP=[Zr,Ny,gz,mz],yz={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},vz={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},bz=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),_z={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Sz=["fak","fa-kit","fakd","fa-kit-duotone"],UA={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Ez=["kit"],wz={kit:{"fa-kit":"fak"}},Tz=["fak","fakd"],Cz={kit:{fak:"fa-kit"}},VA={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Pg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Az=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Rz=["fak","fa-kit","fakd","fa-kit-duotone"],Oz={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Iz={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},xz={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},i_={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Pz=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],s_=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...Az,...Pz],Mz=["solid","regular","light","thin","duotone","brands"],oP=[1,2,3,4,5,6,7,8,9,10],kz=oP.concat([11,12,13,14,15,16,17,18,19,20]),Dz=[...Object.keys(xz),...Mz,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Pg.GROUP,Pg.SWAP_OPACITY,Pg.PRIMARY,Pg.SECONDARY].concat(oP.map(t=>"".concat(t,"x"))).concat(kz.map(t=>"w-".concat(t))),Nz={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const _o="___FONT_AWESOME___",a_=16,lP="fa",cP="svg-inline--fa",Gc="data-fa-i2svg",o_="data-fa-pseudo-element",Lz="data-fa-pseudo-element-pending",$S="data-prefix",GS="data-icon",jA="fontawesome-i2svg",Uz="async",Vz=["HTML","HEAD","STYLE","SCRIPT"],uP=(()=>{try{return!0}catch{return!1}})();function rp(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[Zr]}})}const fP=xe({},iP);fP[Zr]=xe(xe(xe(xe({},{"fa-duotone":"duotone"}),iP[Zr]),UA.kit),UA["kit-duotone"]);const jz=rp(fP),l_=xe({},_z);l_[Zr]=xe(xe(xe(xe({},{duotone:"fad"}),l_[Zr]),VA.kit),VA["kit-duotone"]);const FA=rp(l_),c_=xe({},i_);c_[Zr]=xe(xe({},c_[Zr]),Cz.kit);const WS=rp(c_),u_=xe({},Iz);u_[Zr]=xe(xe({},u_[Zr]),wz.kit);rp(u_);const Fz=hz,hP="fa-layers-text",Bz=dz,zz=xe({},yz);rp(zz);const Hz=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],U0=pz,qz=[...Ez,...Dz],md=ql.FontAwesomeConfig||{};function $z(t){var e=gn.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Gz(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}gn&&typeof gn.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const i=Gz($z(n));i!=null&&(md[r]=i)});const dP={styleDefault:"solid",familyDefault:Zr,cssPrefix:lP,replacementClass:cP,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};md.familyPrefix&&(md.cssPrefix=md.familyPrefix);const Rf=xe(xe({},dP),md);Rf.autoReplaceSvg||(Rf.observeMutations=!1);const Qe={};Object.keys(dP).forEach(t=>{Object.defineProperty(Qe,t,{enumerable:!0,set:function(e){Rf[t]=e,yd.forEach(n=>n(Qe))},get:function(){return Rf[t]}})});Object.defineProperty(Qe,"familyPrefix",{enumerable:!0,set:function(t){Rf.cssPrefix=t,yd.forEach(e=>e(Qe))},get:function(){return Rf.cssPrefix}});ql.FontAwesomeConfig=Qe;const yd=[];function Wz(t){return yd.push(t),()=>{yd.splice(yd.indexOf(t),1)}}const bl=a_,ba={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Kz(t){if(!t||!Co)return;const e=gn.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=gn.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const o=n[i],c=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(c)>-1&&(r=o)}return gn.head.insertBefore(e,r),t}const Yz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ld(){let t=12,e="";for(;t-- >0;)e+=Yz[Math.random()*62|0];return e}function zf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function KS(t){return t.classList?zf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function pP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Qz(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(pP(t[n]),'" '),"").trim()}function Ly(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function YS(t){return t.size!==ba.size||t.x!==ba.x||t.y!==ba.y||t.rotate!==ba.rotate||t.flipX||t.flipY}function Xz(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),c="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),d="rotate(".concat(e.rotate," 0 0)"),p={transform:"".concat(o," ").concat(c," ").concat(d)},g={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:p,path:g}}function Jz(t){let{transform:e,width:n=a_,height:r=a_,startCentered:i=!1}=t,o="";return i&&rP?o+="translate(".concat(e.x/bl-n/2,"em, ").concat(e.y/bl-r/2,"em) "):i?o+="translate(calc(-50% + ".concat(e.x/bl,"em), calc(-50% + ").concat(e.y/bl,"em)) "):o+="translate(".concat(e.x/bl,"em, ").concat(e.y/bl,"em) "),o+="scale(".concat(e.size/bl*(e.flipX?-1:1),", ").concat(e.size/bl*(e.flipY?-1:1),") "),o+="rotate(".concat(e.rotate,"deg) "),o}var Zz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function gP(){const t=lP,e=cP,n=Qe.cssPrefix,r=Qe.replacementClass;let i=Zz;if(n!==t||r!==e){const o=new RegExp("\\.".concat(t,"\\-"),"g"),c=new RegExp("\\--".concat(t,"\\-"),"g"),d=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(n,"-")).replace(c,"--".concat(n,"-")).replace(d,".".concat(r))}return i}let BA=!1;function V0(){Qe.autoAddCss&&!BA&&(Kz(gP()),BA=!0)}var eH={mixout(){return{dom:{css:gP,insertCss:V0}}},hooks(){return{beforeDOMElementCreation(){V0()},beforeI2svg(){V0()}}}};const So=ql||{};So[_o]||(So[_o]={});So[_o].styles||(So[_o].styles={});So[_o].hooks||(So[_o].hooks={});So[_o].shims||(So[_o].shims=[]);var _a=So[_o];const mP=[],yP=function(){gn.removeEventListener("DOMContentLoaded",yP),$m=1,mP.map(t=>t())};let $m=!1;Co&&($m=(gn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(gn.readyState),$m||gn.addEventListener("DOMContentLoaded",yP));function tH(t){Co&&($m?setTimeout(t,0):mP.push(t))}function ip(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?pP(t):"<".concat(e," ").concat(Qz(n),">").concat(r.map(ip).join(""),"</").concat(e,">")}function zA(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var j0=function(e,n,r,i){var o=Object.keys(e),c=o.length,d=n,p,g,b;for(r===void 0?(p=1,b=e[o[0]]):(p=0,b=r);p<c;p++)g=o[p],b=d(b,e[g],g,e);return b};function nH(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function f_(t){const e=nH(t);return e.length===1?e[0].toString(16):null}function rH(t,e){const n=t.length;let r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function HA(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function h_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=HA(e);typeof _a.hooks.addPack=="function"&&!r?_a.hooks.addPack(t,HA(e)):_a.styles[t]=xe(xe({},_a.styles[t]||{}),i),t==="fas"&&h_("fa",e)}const{styles:Ud,shims:iH}=_a,vP=Object.keys(WS),sH=vP.reduce((t,e)=>(t[e]=Object.keys(WS[e]),t),{});let QS=null,bP={},_P={},SP={},EP={},wP={};function aH(t){return~qz.indexOf(t)}function oH(t,e){const n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!aH(i)?i:null}const TP=()=>{const t=r=>j0(Ud,(i,o,c)=>(i[c]=j0(o,r,{}),i),{});bP=t((r,i,o)=>(i[3]&&(r[i[3]]=o),i[2]&&i[2].filter(d=>typeof d=="number").forEach(d=>{r[d.toString(16)]=o}),r)),_P=t((r,i,o)=>(r[o]=o,i[2]&&i[2].filter(d=>typeof d=="string").forEach(d=>{r[d]=o}),r)),wP=t((r,i,o)=>{const c=i[2];return r[o]=o,c.forEach(d=>{r[d]=o}),r});const e="far"in Ud||Qe.autoFetchSvg,n=j0(iH,(r,i)=>{const o=i[0];let c=i[1];const d=i[2];return c==="far"&&!e&&(c="fas"),typeof o=="string"&&(r.names[o]={prefix:c,iconName:d}),typeof o=="number"&&(r.unicodes[o.toString(16)]={prefix:c,iconName:d}),r},{names:{},unicodes:{}});SP=n.names,EP=n.unicodes,QS=Uy(Qe.styleDefault,{family:Qe.familyDefault})};Wz(t=>{QS=Uy(t.styleDefault,{family:Qe.familyDefault})});TP();function XS(t,e){return(bP[t]||{})[e]}function lH(t,e){return(_P[t]||{})[e]}function Nc(t,e){return(wP[t]||{})[e]}function CP(t){return SP[t]||{prefix:null,iconName:null}}function cH(t){const e=EP[t],n=XS("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function $l(){return QS}const AP=()=>({prefix:null,iconName:null,rest:[]});function uH(t){let e=Zr;const n=vP.reduce((r,i)=>(r[i]="".concat(Qe.cssPrefix,"-").concat(i),r),{});return aP.forEach(r=>{(t.includes(n[r])||t.some(i=>sH[r].includes(i)))&&(e=r)}),e}function Uy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Zr}=e,r=jz[n][t];if(n===Ny&&!t)return"fad";const i=FA[n][t]||FA[n][r],o=t in _a.styles?t:null;return i||o||null}function fH(t){let e=[],n=null;return t.forEach(r=>{const i=oH(Qe.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function qA(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function Vy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const i=s_.concat(Rz),o=qA(t.filter(E=>i.includes(E))),c=qA(t.filter(E=>!s_.includes(E))),d=o.filter(E=>(r=E,!sP.includes(E))),[p=null]=d,g=uH(o),b=xe(xe({},fH(c)),{},{prefix:Uy(p,{family:g})});return xe(xe(xe({},b),gH({values:t,family:g,styles:Ud,config:Qe,canonical:b,givenPrefix:r})),hH(n,r,b))}function hH(t,e,n){let{prefix:r,iconName:i}=n;if(t||!r||!i)return{prefix:r,iconName:i};const o=e==="fa"?CP(i):{},c=Nc(r,i);return i=o.iconName||c||i,r=o.prefix||r,r==="far"&&!Ud.far&&Ud.fas&&!Qe.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const dH=aP.filter(t=>t!==Zr||t!==Ny),pH=Object.keys(i_).filter(t=>t!==Zr).map(t=>Object.keys(i_[t])).flat();function gH(t){const{values:e,family:n,canonical:r,givenPrefix:i="",styles:o={},config:c={}}=t,d=n===Ny,p=e.includes("fa-duotone")||e.includes("fad"),g=c.familyDefault==="duotone",b=r.prefix==="fad"||r.prefix==="fa-duotone";if(!d&&(p||g||b)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&dH.includes(n)&&(Object.keys(o).find(C=>pH.includes(C))||c.autoFetchSvg)){const C=bz.get(n).defaultShortPrefixId;r.prefix=C,r.iconName=Nc(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=$l()||"fas"),r}class mH{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(o=>{this.definitions[o]=xe(xe({},this.definitions[o]||{}),i[o]),h_(o,i[o]);const c=WS[Zr][o];c&&h_(c,i[o]),TP()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:o,iconName:c,icon:d}=r[i],p=d[2];e[o]||(e[o]={}),p.length>0&&p.forEach(g=>{typeof g=="string"&&(e[o][g]=d)}),e[o][c]=d}),e}}let $A=[],sf={};const df={},yH=Object.keys(df);function vH(t,e){let{mixoutsTo:n}=e;return $A=t,sf={},Object.keys(df).forEach(r=>{yH.indexOf(r)===-1&&delete df[r]}),$A.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(o=>{typeof i[o]=="function"&&(n[o]=i[o]),typeof i[o]=="object"&&Object.keys(i[o]).forEach(c=>{n[o]||(n[o]={}),n[o][c]=i[o][c]})}),r.hooks){const o=r.hooks();Object.keys(o).forEach(c=>{sf[c]||(sf[c]=[]),sf[c].push(o[c])})}r.provides&&r.provides(df)}),n}function d_(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(sf[t]||[]).forEach(c=>{e=c.apply(null,[e,...r])}),e}function Wc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(sf[t]||[]).forEach(o=>{o.apply(null,n)})}function Gl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return df[t]?df[t].apply(null,e):void 0}function p_(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||$l();if(e)return e=Nc(n,e)||e,zA(RP.definitions,n,e)||zA(_a.styles,n,e)}const RP=new mH,bH=()=>{Qe.autoReplaceSvg=!1,Qe.observeMutations=!1,Wc("noAuto")},_H={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Co?(Wc("beforeI2svg",t),Gl("pseudoElements2svg",t),Gl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Qe.autoReplaceSvg===!1&&(Qe.autoReplaceSvg=!0),Qe.observeMutations=!0,tH(()=>{EH({autoReplaceSvgRoot:e}),Wc("watch",t)})}},SH={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Nc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=Uy(t[0]);return{prefix:n,iconName:Nc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Qe.cssPrefix,"-"))>-1||t.match(Fz))){const e=Vy(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||$l(),iconName:Nc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=$l();return{prefix:e,iconName:Nc(e,t)||t}}}},Ki={noAuto:bH,config:Qe,dom:_H,parse:SH,library:RP,findIconDefinition:p_,toHtml:ip},EH=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=gn}=t;(Object.keys(_a.styles).length>0||Qe.autoFetchSvg)&&Co&&Qe.autoReplaceSvg&&Ki.dom.i2svg({node:e})};function jy(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>ip(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Co)return;const n=gn.createElement("div");return n.innerHTML=t.html,n.children}}),t}function wH(t){let{children:e,main:n,mask:r,attributes:i,styles:o,transform:c}=t;if(YS(c)&&n.found&&!r.found){const{width:d,height:p}=n,g={x:d/p/2,y:.5};i.style=Ly(xe(xe({},o),{},{"transform-origin":"".concat(g.x+c.x/16,"em ").concat(g.y+c.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function TH(t){let{prefix:e,iconName:n,children:r,attributes:i,symbol:o}=t;const c=o===!0?"".concat(e,"-").concat(Qe.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:xe(xe({},i),{},{id:c}),children:r}]}]}function JS(t){const{icons:{main:e,mask:n},prefix:r,iconName:i,transform:o,symbol:c,title:d,maskId:p,titleId:g,extra:b,watchable:E=!1}=t,{width:C,height:O}=n.found?n:e,x=Tz.includes(r),N=[Qe.replacementClass,i?"".concat(Qe.cssPrefix,"-").concat(i):""].filter(W=>b.classes.indexOf(W)===-1).filter(W=>W!==""||!!W).concat(b.classes).join(" ");let k={children:[],attributes:xe(xe({},b.attributes),{},{"data-prefix":r,"data-icon":i,class:N,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(C," ").concat(O)})};const V=x&&!~b.classes.indexOf("fa-fw")?{width:"".concat(C/O*16*.0625,"em")}:{};E&&(k.attributes[Gc]=""),d&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(g||Ld())},children:[d]}),delete k.attributes.title);const X=xe(xe({},k),{},{prefix:r,iconName:i,main:e,mask:n,maskId:p,transform:o,symbol:c,styles:xe(xe({},V),b.styles)}),{children:q,attributes:H}=n.found&&e.found?Gl("generateAbstractMask",X)||{children:[],attributes:{}}:Gl("generateAbstractIcon",X)||{children:[],attributes:{}};return X.children=q,X.attributes=H,c?TH(X):wH(X)}function GA(t){const{content:e,width:n,height:r,transform:i,title:o,extra:c,watchable:d=!1}=t,p=xe(xe(xe({},c.attributes),o?{title:o}:{}),{},{class:c.classes.join(" ")});d&&(p[Gc]="");const g=xe({},c.styles);YS(i)&&(g.transform=Jz({transform:i,startCentered:!0,width:n,height:r}),g["-webkit-transform"]=g.transform);const b=Ly(g);b.length>0&&(p.style=b);const E=[];return E.push({tag:"span",attributes:p,children:[e]}),o&&E.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),E}function CH(t){const{content:e,title:n,extra:r}=t,i=xe(xe(xe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=Ly(r.styles);o.length>0&&(i.style=o);const c=[];return c.push({tag:"span",attributes:i,children:[e]}),n&&c.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),c}const{styles:F0}=_a;function g_(t){const e=t[0],n=t[1],[r]=t.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Qe.cssPrefix,"-").concat(U0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Qe.cssPrefix,"-").concat(U0.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Qe.cssPrefix,"-").concat(U0.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:i}}const AH={found:!1,width:512,height:512};function RH(t,e){!uP&&!Qe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function m_(t,e){let n=e;return e==="fa"&&Qe.styleDefault!==null&&(e=$l()),new Promise((r,i)=>{if(n==="fa"){const o=CP(t)||{};t=o.iconName||t,e=o.prefix||e}if(t&&e&&F0[e]&&F0[e][t]){const o=F0[e][t];return r(g_(o))}RH(t,e),r(xe(xe({},AH),{},{icon:Qe.showMissingIcons&&t?Gl("missingIconAbstract")||{}:{}}))})}const WA=()=>{},y_=Qe.measurePerformance&&xg&&xg.mark&&xg.measure?xg:{mark:WA,measure:WA},od='FA "6.7.2"',OH=t=>(y_.mark("".concat(od," ").concat(t," begins")),()=>OP(t)),OP=t=>{y_.mark("".concat(od," ").concat(t," ends")),y_.measure("".concat(od," ").concat(t),"".concat(od," ").concat(t," begins"),"".concat(od," ").concat(t," ends"))};var ZS={begin:OH,end:OP};const om=()=>{};function KA(t){return typeof(t.getAttribute?t.getAttribute(Gc):null)=="string"}function IH(t){const e=t.getAttribute?t.getAttribute($S):null,n=t.getAttribute?t.getAttribute(GS):null;return e&&n}function xH(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Qe.replacementClass)}function PH(){return Qe.autoReplaceSvg===!0?lm.replace:lm[Qe.autoReplaceSvg]||lm.replace}function MH(t){return gn.createElementNS("http://www.w3.org/2000/svg",t)}function kH(t){return gn.createElement(t)}function IP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?MH:kH}=e;if(typeof t=="string")return gn.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(o){r.setAttribute(o,t.attributes[o])}),(t.children||[]).forEach(function(o){r.appendChild(IP(o,{ceFn:n}))}),r}function DH(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const lm={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(IP(n),e)}),e.getAttribute(Gc)===null&&Qe.keepOriginalSource){let n=gn.createComment(DH(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~KS(e).indexOf(Qe.replacementClass))return lm.replace(t);const r=new RegExp("".concat(Qe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const o=n[0].attributes.class.split(" ").reduce((c,d)=>(d===Qe.replacementClass||d.match(r)?c.toSvg.push(d):c.toNode.push(d),c),{toNode:[],toSvg:[]});n[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",o.toNode.join(" "))}const i=n.map(o=>ip(o)).join(`
`);e.setAttribute(Gc,""),e.innerHTML=i}};function YA(t){t()}function xP(t,e){const n=typeof e=="function"?e:om;if(t.length===0)n();else{let r=YA;Qe.mutateApproach===Uz&&(r=ql.requestAnimationFrame||YA),r(()=>{const i=PH(),o=ZS.begin("mutate");t.map(i),o(),n()})}}let eE=!1;function PP(){eE=!0}function v_(){eE=!1}let Gm=null;function QA(t){if(!LA||!Qe.observeMutations)return;const{treeCallback:e=om,nodeCallback:n=om,pseudoElementsCallback:r=om,observeMutationsRoot:i=gn}=t;Gm=new LA(o=>{if(eE)return;const c=$l();zf(o).forEach(d=>{if(d.type==="childList"&&d.addedNodes.length>0&&!KA(d.addedNodes[0])&&(Qe.searchPseudoElements&&r(d.target),e(d.target)),d.type==="attributes"&&d.target.parentNode&&Qe.searchPseudoElements&&r(d.target.parentNode),d.type==="attributes"&&KA(d.target)&&~Hz.indexOf(d.attributeName))if(d.attributeName==="class"&&IH(d.target)){const{prefix:p,iconName:g}=Vy(KS(d.target));d.target.setAttribute($S,p||c),g&&d.target.setAttribute(GS,g)}else xH(d.target)&&n(d.target)})}),Co&&Gm.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function NH(){Gm&&Gm.disconnect()}function LH(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,i)=>{const o=i.split(":"),c=o[0],d=o.slice(1);return c&&d.length>0&&(r[c]=d.join(":").trim()),r},{})),n}function UH(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let i=Vy(KS(t));return i.prefix||(i.prefix=$l()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=lH(i.prefix,t.innerText)||XS(i.prefix,f_(t.innerText))),!i.iconName&&Qe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function VH(t){const e=zf(t.attributes).reduce((i,o)=>(i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Qe.autoA11y&&(n?e["aria-labelledby"]="".concat(Qe.replacementClass,"-title-").concat(r||Ld()):(e["aria-hidden"]="true",e.focusable="false")),e}function jH(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ba,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function XA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=UH(t),o=VH(t),c=d_("parseNodeAttributes",{},t);let d=e.styleParser?LH(t):[];return xe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:ba,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:d,attributes:o}},c)}const{styles:FH}=_a;function MP(t){const e=Qe.autoReplaceSvg==="nest"?XA(t,{styleParser:!1}):XA(t);return~e.extra.classes.indexOf(hP)?Gl("generateLayersText",t,e):Gl("generateSvgReplacementMutation",t,e)}function BH(){return[...Sz,...s_]}function JA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Co)return Promise.resolve();const n=gn.documentElement.classList,r=b=>n.add("".concat(jA,"-").concat(b)),i=b=>n.remove("".concat(jA,"-").concat(b)),o=Qe.autoFetchSvg?BH():sP.concat(Object.keys(FH));o.includes("fa")||o.push("fa");const c=[".".concat(hP,":not([").concat(Gc,"])")].concat(o.map(b=>".".concat(b,":not([").concat(Gc,"])"))).join(", ");if(c.length===0)return Promise.resolve();let d=[];try{d=zf(t.querySelectorAll(c))}catch{}if(d.length>0)r("pending"),i("complete");else return Promise.resolve();const p=ZS.begin("onTree"),g=d.reduce((b,E)=>{try{const C=MP(E);C&&b.push(C)}catch(C){uP||C.name==="MissingIcon"&&console.error(C)}return b},[]);return new Promise((b,E)=>{Promise.all(g).then(C=>{xP(C,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),p(),b()})}).catch(C=>{p(),E(C)})})}function zH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;MP(t).then(n=>{n&&xP([n],e)})}function HH(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:p_(e||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:p_(i||{})),t(r,xe(xe({},n),{},{mask:i}))}}const qH=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=ba,symbol:r=!1,mask:i=null,maskId:o=null,title:c=null,titleId:d=null,classes:p=[],attributes:g={},styles:b={}}=e;if(!t)return;const{prefix:E,iconName:C,icon:O}=t;return jy(xe({type:"icon"},t),()=>(Wc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Qe.autoA11y&&(c?g["aria-labelledby"]="".concat(Qe.replacementClass,"-title-").concat(d||Ld()):(g["aria-hidden"]="true",g.focusable="false")),JS({icons:{main:g_(O),mask:i?g_(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:C,transform:xe(xe({},ba),n),symbol:r,title:c,maskId:o,titleId:d,extra:{attributes:g,styles:b,classes:p}})))};var $H={mixout(){return{icon:HH(qH)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=JA,t.nodeCallback=zH,t}}},provides(t){t.i2svg=function(e){const{node:n=gn,callback:r=()=>{}}=e;return JA(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:i,titleId:o,prefix:c,transform:d,symbol:p,mask:g,maskId:b,extra:E}=n;return new Promise((C,O)=>{Promise.all([m_(r,c),g.iconName?m_(g.iconName,g.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(x=>{let[N,k]=x;C([e,JS({icons:{main:N,mask:k},prefix:c,iconName:r,transform:d,symbol:p,maskId:b,title:i,titleId:o,extra:E,watchable:!0})])}).catch(O)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:i,transform:o,styles:c}=e;const d=Ly(c);d.length>0&&(r.style=d);let p;return YS(o)&&(p=Gl("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),n.push(p||i.icon),{children:n,attributes:r}}}},GH={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return jy({type:"layer"},()=>{Wc("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(i=>{Array.isArray(i)?i.map(o=>{r=r.concat(o.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Qe.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},WH={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:o={}}=e;return jy({type:"counter",content:t},()=>(Wc("beforeDOMElementCreation",{content:t,params:e}),CH({content:t.toString(),title:n,extra:{attributes:i,styles:o,classes:["".concat(Qe.cssPrefix,"-layers-counter"),...r]}})))}}}},KH={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=ba,title:r=null,classes:i=[],attributes:o={},styles:c={}}=e;return jy({type:"text",content:t},()=>(Wc("beforeDOMElementCreation",{content:t,params:e}),GA({content:t,transform:xe(xe({},ba),n),title:r,extra:{attributes:o,styles:c,classes:["".concat(Qe.cssPrefix,"-layers-text"),...i]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:i,extra:o}=n;let c=null,d=null;if(rP){const p=parseInt(getComputedStyle(e).fontSize,10),g=e.getBoundingClientRect();c=g.width/p,d=g.height/p}return Qe.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([e,GA({content:e.innerHTML,width:c,height:d,transform:i,title:r,extra:o,watchable:!0})])}}};const YH=new RegExp('"',"ug"),ZA=[1105920,1112319],eR=xe(xe(xe(xe({},{FontAwesome:{normal:"fas",400:"fas"}}),vz),Nz),Oz),b_=Object.keys(eR).reduce((t,e)=>(t[e.toLowerCase()]=eR[e],t),{}),QH=Object.keys(b_).reduce((t,e)=>{const n=b_[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function XH(t){const e=t.replace(YH,""),n=rH(e,0),r=n>=ZA[0]&&n<=ZA[1],i=e.length===2?e[0]===e[1]:!1;return{value:f_(i?e[0]:e),isSecondary:r||i}}function JH(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(b_[n]||{})[i]||QH[n]}function tR(t,e){const n="".concat(Lz).concat(e.replace(":","-"));return new Promise((r,i)=>{if(t.getAttribute(n)!==null)return r();const c=zf(t.children).filter(C=>C.getAttribute(o_)===e)[0],d=ql.getComputedStyle(t,e),p=d.getPropertyValue("font-family"),g=p.match(Bz),b=d.getPropertyValue("font-weight"),E=d.getPropertyValue("content");if(c&&!g)return t.removeChild(c),r();if(g&&E!=="none"&&E!==""){const C=d.getPropertyValue("content");let O=JH(p,b);const{value:x,isSecondary:N}=XH(C),k=g[0].startsWith("FontAwesome");let V=XS(O,x),X=V;if(k){const q=cH(x);q.iconName&&q.prefix&&(V=q.iconName,O=q.prefix)}if(V&&!N&&(!c||c.getAttribute($S)!==O||c.getAttribute(GS)!==X)){t.setAttribute(n,X),c&&t.removeChild(c);const q=jH(),{extra:H}=q;H.attributes[o_]=e,m_(V,O).then(W=>{const $=JS(xe(xe({},q),{},{icons:{main:W,mask:AP()},prefix:O,iconName:X,extra:H,watchable:!0})),F=gn.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(F,t.firstChild):t.appendChild(F),F.outerHTML=$.map(D=>ip(D)).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function ZH(t){return Promise.all([tR(t,"::before"),tR(t,"::after")])}function eq(t){return t.parentNode!==document.head&&!~Vz.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(o_)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function nR(t){if(Co)return new Promise((e,n)=>{const r=zf(t.querySelectorAll("*")).filter(eq).map(ZH),i=ZS.begin("searchPseudoElements");PP(),Promise.all(r).then(()=>{i(),v_(),e()}).catch(()=>{i(),v_(),n()})})}var tq={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=nR,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=gn}=e;Qe.searchPseudoElements&&nR(n)}}};let rR=!1;var nq={mixout(){return{dom:{unwatch(){PP(),rR=!0}}}},hooks(){return{bootstrap(){QA(d_("mutationObserverCallbacks",{}))},noAuto(){NH()},watch(t){const{observeMutationsRoot:e}=t;rR?v_():QA(d_("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const iR=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),o=i[0];let c=i.slice(1).join("-");if(o&&c==="h")return n.flipX=!0,n;if(o&&c==="v")return n.flipY=!0,n;if(c=parseFloat(c),isNaN(c))return n;switch(o){case"grow":n.size=n.size+c;break;case"shrink":n.size=n.size-c;break;case"left":n.x=n.x-c;break;case"right":n.x=n.x+c;break;case"up":n.y=n.y-c;break;case"down":n.y=n.y+c;break;case"rotate":n.rotate=n.rotate+c;break}return n},e)};var rq={mixout(){return{parse:{transform:t=>iR(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=iR(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:i,iconWidth:o}=e;const c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(r.x*32,", ").concat(r.y*32,") "),p="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),g="rotate(".concat(r.rotate," 0 0)"),b={transform:"".concat(d," ").concat(p," ").concat(g)},E={transform:"translate(".concat(o/2*-1," -256)")},C={outer:c,inner:b,path:E};return{tag:"g",attributes:xe({},C.outer),children:[{tag:"g",attributes:xe({},C.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:xe(xe({},n.icon.attributes),C.path)}]}]}}}};const B0={x:0,y:0,width:"100%",height:"100%"};function sR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function iq(t){return t.tag==="g"?t.children:[t]}var sq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?Vy(n.split(" ").map(i=>i.trim())):AP();return r.prefix||(r.prefix=$l()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:i,mask:o,maskId:c,transform:d}=e;const{width:p,icon:g}=i,{width:b,icon:E}=o,C=Xz({transform:d,containerWidth:b,iconWidth:p}),O={tag:"rect",attributes:xe(xe({},B0),{},{fill:"white"})},x=g.children?{children:g.children.map(sR)}:{},N={tag:"g",attributes:xe({},C.inner),children:[sR(xe({tag:g.tag,attributes:xe(xe({},g.attributes),C.path)},x))]},k={tag:"g",attributes:xe({},C.outer),children:[N]},V="mask-".concat(c||Ld()),X="clip-".concat(c||Ld()),q={tag:"mask",attributes:xe(xe({},B0),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[O,k]},H={tag:"defs",children:[{tag:"clipPath",attributes:{id:X},children:iq(E)},q]};return n.push(H,{tag:"rect",attributes:xe({fill:"currentColor","clip-path":"url(#".concat(X,")"),mask:"url(#".concat(V,")")},B0)}),{children:n,attributes:r}}}},aq={provides(t){let e=!1;ql.matchMedia&&(e=ql.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:xe(xe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const o=xe(xe({},i),{},{attributeName:"opacity"}),c={tag:"circle",attributes:xe(xe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||c.children.push({tag:"animate",attributes:xe(xe({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:xe(xe({},o),{},{values:"1;0;1;1;0;1;"})}),n.push(c),n.push({tag:"path",attributes:xe(xe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:xe(xe({},o),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:xe(xe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:xe(xe({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},oq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},lq=[eH,$H,GH,WH,KH,tq,nq,rq,sq,aq,oq];vH(lq,{mixoutsTo:Ki});Ki.noAuto;Ki.config;Ki.library;Ki.dom;const __=Ki.parse;Ki.findIconDefinition;Ki.toHtml;const cq=Ki.icon;Ki.layer;Ki.text;Ki.counter;var z0={exports:{}},H0,aR;function uq(){if(aR)return H0;aR=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return H0=t,H0}var q0,oR;function fq(){if(oR)return q0;oR=1;var t=uq();function e(){}function n(){}return n.resetWarningCache=e,q0=function(){function r(c,d,p,g,b,E){if(E!==t){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},q0}var lR;function hq(){return lR||(lR=1,z0.exports=fq()()),z0.exports}var dq=hq();const Dt=eO(dq);function cR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cR(Object(n),!0).forEach(function(r){af(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}function af(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gq(t,e){if(t==null)return{};var n=pq(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S_(t){return mq(t)||yq(t)||vq(t)||bq()}function mq(t){if(Array.isArray(t))return E_(t)}function yq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vq(t,e){if(t){if(typeof t=="string")return E_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(t,e)}}function E_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _q(t){var e,n=t.beat,r=t.fade,i=t.beatFade,o=t.bounce,c=t.shake,d=t.flash,p=t.spin,g=t.spinPulse,b=t.spinReverse,E=t.pulse,C=t.fixedWidth,O=t.inverse,x=t.border,N=t.listItem,k=t.flip,V=t.size,X=t.rotation,q=t.pull,H=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":c,"fa-flash":d,"fa-spin":p,"fa-spin-reverse":b,"fa-spin-pulse":g,"fa-pulse":E,"fa-fw":C,"fa-inverse":O,"fa-border":x,"fa-li":N,"fa-flip":k===!0,"fa-flip-horizontal":k==="horizontal"||k==="both","fa-flip-vertical":k==="vertical"||k==="both"},af(e,"fa-".concat(V),typeof V<"u"&&V!==null),af(e,"fa-rotate-".concat(X),typeof X<"u"&&X!==null&&X!==0),af(e,"fa-pull-".concat(q),typeof q<"u"&&q!==null),af(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(H).map(function(W){return H[W]?W:null}).filter(function(W){return W})}function Sq(t){return t=t-0,t===t}function kP(t){return Sq(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var Eq=["style"];function wq(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Tq(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=kP(n.slice(0,r)),o=n.slice(r+1).trim();return i.startsWith("webkit")?e[wq(i)]=o:e[i]=o,e},{})}function DP(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(p){return DP(t,p)}),i=Object.keys(e.attributes||{}).reduce(function(p,g){var b=e.attributes[g];switch(g){case"class":p.attrs.className=b,delete e.attributes.class;break;case"style":p.attrs.style=Tq(b);break;default:g.indexOf("aria-")===0||g.indexOf("data-")===0?p.attrs[g.toLowerCase()]=b:p.attrs[kP(g)]=b}return p},{attrs:{}}),o=n.style,c=o===void 0?{}:o,d=gq(n,Eq);return i.attrs.style=ga(ga({},i.attrs.style),c),t.apply(void 0,[e.tag,ga(ga({},i.attrs),d)].concat(S_(r)))}var NP=!1;try{NP=!0}catch{}function Cq(){if(!NP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function uR(t){if(t&&Wm(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(__.icon)return __.icon(t);if(t===null)return null;if(t&&Wm(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function $0(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?af({},t,e):{}}var fR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Pa=Wl.forwardRef(function(t,e){var n=ga(ga({},fR),t),r=n.icon,i=n.mask,o=n.symbol,c=n.className,d=n.title,p=n.titleId,g=n.maskId,b=uR(r),E=$0("classes",[].concat(S_(_q(n)),S_((c||"").split(" ")))),C=$0("transform",typeof n.transform=="string"?__.transform(n.transform):n.transform),O=$0("mask",uR(i)),x=cq(b,ga(ga(ga(ga({},E),C),O),{},{symbol:o,title:d,titleId:p,maskId:g}));if(!x)return Cq("Could not find icon",b),null;var N=x.abstract,k={ref:e};return Object.keys(n).forEach(function(V){fR.hasOwnProperty(V)||(k[V]=n[V])}),Aq(N[0],k)});Pa.displayName="FontAwesomeIcon";Pa.propTypes={beat:Dt.bool,border:Dt.bool,beatFade:Dt.bool,bounce:Dt.bool,className:Dt.string,fade:Dt.bool,flash:Dt.bool,mask:Dt.oneOfType([Dt.object,Dt.array,Dt.string]),maskId:Dt.string,fixedWidth:Dt.bool,inverse:Dt.bool,flip:Dt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Dt.oneOfType([Dt.object,Dt.array,Dt.string]),listItem:Dt.bool,pull:Dt.oneOf(["right","left"]),pulse:Dt.bool,rotation:Dt.oneOf([0,90,180,270]),shake:Dt.bool,size:Dt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Dt.bool,spinPulse:Dt.bool,spinReverse:Dt.bool,symbol:Dt.oneOfType([Dt.bool,Dt.string]),title:Dt.string,titleId:Dt.string,transform:Dt.oneOfType([Dt.string,Dt.object]),swapOpacity:Dt.bool};var Aq=DP.bind(null,Wl.createElement);const Rq=()=>j.jsx(Pa,{icon:tz}),Oq=M.memo(Rq),Iq=()=>j.jsx(Pa,{icon:rz}),xq=M.memo(Iq),Pq=()=>j.jsx(Pa,{icon:iz}),Mq=M.memo(Pq),kq=()=>j.jsx(Pa,{icon:oz}),Dq=M.memo(kq),Nq="_LoadingIcon_1jisw_6",Lq={LoadingIcon:Nq},Uq=t=>{const{size:e="1x"}=t;return j.jsx("span",{className:Lq.LoadingIcon,children:j.jsx(Pa,{icon:az,size:e})})},LP=M.memo(Uq),Vq="_MeloChartIcon_1muw1_1",jq={MeloChartIcon:Vq},Fq=()=>j.jsx("span",{className:jq.MeloChartIcon}),Bq=M.memo(Fq),zq=()=>j.jsx(Pa,{icon:sz}),hR=M.memo(zq),Hq=()=>j.jsx(Pa,{icon:nz}),qq=M.memo(Hq),$q=()=>j.jsx(Pa,{icon:lz}),Gq=M.memo($q),Wq="_Input_6v29l_1",Kq={Input:Wq},Yq=t=>j.jsx("input",{className:Kq.Input,...t}),ho=M.memo(Yq),Qq="_Link_8fn99_1",Xq={Link:Qq},Jq=t=>{const{children:e,...n}=t;return j.jsx(tS,{className:Xq.Link,...n,children:e})},w_=M.memo(Jq),tE=()=>({id:tp(),text:""}),Ml=t=>{const e=Array.from({length:t},()=>tE());return{id:tp(),chunks:e}},nu=t=>t[0].chunks.length,Zq=t=>{const{qty:e,setNotes:n}=t;n(r=>[...r,...Array.from({length:e},()=>Ml(nu(r)))])},e$=t=>{const{qty:e,setNotes:n}=t;n(r=>r.map(i=>{const o=[...i.chunks,...Array.from({length:e},()=>tE())];return{...i,chunks:o}}))},UP=t=>{const{noteIndex:e,setNotes:n}=t;n(r=>[...r.slice(0,e),Ml(nu(r)),...r.slice(e)])},VP=t=>{const{contextMenuData:e,setNotes:n}=t,{noteIndex:r}=e;UP({noteIndex:r+1,setNotes:n})},jP=t=>{const{contextMenuData:e,setNotes:n}=t,{noteIndex:r}=e;UP({noteIndex:r,setNotes:n})},FP=t=>{const{chunkIndex:e,setNotes:n}=t;n(r=>r.map(i=>{const o=[...i.chunks.slice(0,e),tE(),...i.chunks.slice(e)];return{...i,chunks:o}}))},BP=t=>{const{contextMenuData:e,setNotes:n}=t,{chunkIndex:r}=e;FP({chunkIndex:r+1,setNotes:n})},zP=t=>{const{contextMenuData:e,setNotes:n}=t,{chunkIndex:r}=e;FP({chunkIndex:r,setNotes:n})},t$=t=>{const{setNotes:e,songText:n}=t,r=j2(n);e(i=>{const o=nu(i);return[...i.slice(0,1),...r.map(c=>{const d=Ml(o);return d.chunks[0].text=c,d})]},[])},HP=t=>t.chunks.findIndex(e=>e.text),n$=t=>{const{setNotes:e}=t;e(n=>{let r=-1;for(let o=n.length-1;o>=0&&!n[o].chunks.reduce((d,p)=>d+p.text,"");o--)r=o;const i=r!=-1?n.slice(0,r):[...n];return i.length?[...i]:[...n]})},qP=t=>{const{contextMenuData:e,setNotes:n}=t,{noteIndex:r}=e;n(i=>r===0?[...i]:[...i.slice(0,r),...i.slice(r+1)])},$P=t=>{const{contextMenuData:e,setNotes:n}=t,{chunkIndex:r}=e;n(i=>i.map(o=>{if(o.chunks.length===1)return{...o};const c=[...o.chunks.slice(0,r),...o.chunks.slice(r+1)];return{...o,chunks:c}}))},GP=(t,e)=>t.reduce((n,r)=>n+r.chunks[e].text,""),r$=t=>{const{setNotes:e}=t;e(n=>{const r=s$(n),i=i$(r);return i[0].chunks.length?[...i]:[...n]})},i$=t=>{const e=nu(t);let n=-1;for(let r=e-1;r>=0&&!GP(t,r);r--)n=r;return n==-1?[...t]:t.map(r=>{const i=r.chunks.map((o,c)=>c>=n?null:o).filter(Boolean);return{...r,chunks:i}})},s$=t=>{const e=nu(t);let n=-1;for(let r=0;r<e&&!GP(t,r);r++)n=r;return n==-1?[...t]:t.map(r=>{const i=r.chunks.map((o,c)=>c>n?o:null).filter(Boolean);return{...r,chunks:i}})},a$=t=>e=>{const{text:n,noteIndex:r,chunkIndex:i}=e,o=n.trim(),c=!!o,p=o.indexOf(" ")!==-1?o.split(" "):[n];t(g=>{const b=nu(g),E=g[r],C=E.chunks.map((x,N)=>{const k=N==i,V=c?"":x.text;return{...x,text:k?p[0]:V}}),O=p.length>1?p.slice(1).map(x=>{const N=Ml(b);return N.chunks[i].text=x,N}):[];return[...g.slice(0,r),{...E,chunks:C},...O,...g.slice(r+1)]})},o$=t=>e=>{const{text:n,noteIndex:r,chunkIndex:i}=e,o=n.trim(),d=o.indexOf(" ")!==-1?o.split(" "):[n];t(p=>{const g=nu(p),b=p[r],E=b.chunks.map((O,x)=>{const N=x==i;return{...O,text:N?d[0]:O.text}}),C=d.length>1?d.slice(1).map(O=>{const x=Ml(g);return x.chunks[i].text=O,x}):[];return[...p.slice(0,r),{...b,chunks:E},...C,...p.slice(r+1)]})},l$=(t,e,n)=>{if(e==-1||n==-1)return!1;if(e<n)return!(t<=e||t>n);if(t==n)return!1;if(t<=e&&t>n)return!0},nE=t=>{const{noteIndex:e,chunkIndex:n}=t,r=document.querySelector(`[data-note-index="${e}"][data-chunk-index="${n}"]`);r&&r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))},c$=t=>{t.preventDefault()},u$=t=>{const{event:e,noteIndex:n,chunkIndex:r}=t;e.preventDefault(),nE({noteIndex:n,chunkIndex:r+1})},f$=t=>{const{event:e,noteIndex:n,chunkIndex:r}=t;e.preventDefault(),nE({noteIndex:n,chunkIndex:r-1})},h$=t=>{const{event:e}=t;e.target.blur()},d$=t=>{const{event:e,originalText:n,setEditInputValue:r}=t;r(n),setTimeout(()=>{e.target.blur()},0)},p$=t=>{const{event:e,noteIndex:n,chunkIndex:r}=t;e.preventDefault();const i=e.shiftKey?n-1:n+1;nE({noteIndex:i,chunkIndex:r})},g$=Object.freeze({Enter:h$,Tab:p$,ArrowUp:f$,ArrowDown:u$,Escape:d$}),m$="_NoteChunk_1p1e2_1",y$="_ChunkText_1p1e2_11",v$="_EmptyChunkText_1p1e2_168",b$="_HighlightDropZone_1p1e2_172",so={NoteChunk:m$,ChunkText:y$,EmptyChunkText:v$,HighlightDropZone:b$},Mg="drag-data-transfer-text",G0="drag-data-transfer-note-index",dR="drag-data-transfer-chunk-index",_$=t=>{const{chunk:e,note:n,text:r,chunkIndex:i,noteIndex:o,filledNoteIndex:c,hasRightBorder:d,isTheNoteDefinitionChunk:p=!1,onOpenContextMenu:g,onEditNoteChunkText:b,onEditNoteDefinitionChunkText:E,songId:C}=t,{t:O}=Nn(),x=Hs(),[N,k]=M.useState(!1),[V,X]=M.useState(r),{publish:q}=Kl("melo-chart-song-updates",J=>{if(x.connection.id!=J.connectionId){const{name:oe,data:Ae}=J;if(Ae.id!=C||Ae.noteIndex!=o||Ae.chunkIndex!=i)return;if(oe=="update-note-chunk-text"){te(Ae);return}if(oe=="update-note-chunk-position"){b(Ae);return}}}),H=M.useMemo(()=>i===0,[i]),W=M.useMemo(()=>i%12+1,[i]),$=M.useMemo(()=>!r||p,[p,r]),F=M.useMemo(()=>p?O("Click to define pitch"):`${O("Click to define note")}. ${O("Drag the note to move it")}`,[p,O]),D=M.useCallback(()=>{k(J=>!J)},[]),L=M.useCallback(J=>{if(J.preventDefault(),J.dataTransfer.getData("noteIndex")!=o)return;const Ue={text:J.dataTransfer.getData("text"),noteIndex:o,chunkIndex:i};b(Ue),q("update-note-chunk-position",{id:C,...Ue})},[i,o,b,q,C]),G=M.useCallback(J=>{J.dataTransfer.setData("text",r),J.dataTransfer.setData("noteIndex",o)},[o,r]),T=M.useCallback(J=>{if(p&&["Tab"].includes(J.key)){J.preventDefault();return}const oe=g$[J.key];oe&&oe({event:J,chunkIndex:i,noteIndex:o,originalText:r,setEditInputValue:X})},[i,p,o,r]),te=M.useCallback(J=>{(p?E:b)(J)},[p,b,E]);M.useEffect(()=>{X(r)},[r]);const K=M.useMemo(()=>`note-chunk-${n.id}-${e.id}`,[e.id,n.id]),ne=M.useMemo(()=>{const J=r===""?O("Pitch"):r,oe=c===-1&&r===""?O("Note"):r,Ae=p?J:oe;return j.jsx("span",{className:`${so.ChunkText} ${r?"":so.EmptyChunkText}`,children:Ae})},[c,p,O,r]),Pe=M.useRef(null);return M.useEffect(()=>{const J=Pe.current,oe=()=>{localStorage.setItem(Mg,r),localStorage.setItem(G0,o),localStorage.setItem(dR,i)},Ae=Q=>{if(!localStorage.getItem(Mg))return;Q.preventDefault();const ye=Q.touches[0],ke=document.elementFromPoint(ye.clientX,ye.clientY).closest(`.${so.NoteChunk}`);document.querySelectorAll(`.${so.HighlightDropZone}`).forEach(qe=>qe.classList.remove(so.HighlightDropZone)),ke&&ke.classList.add(so.HighlightDropZone)},Ue=Q=>{const ge=localStorage.getItem(Mg),ye=localStorage.getItem(G0),ve=localStorage.getItem(dR),ke=Q.changedTouches[0],Le=document.elementFromPoint(ke.clientX,ke.clientY).closest(`.${so.NoteChunk}`),Ot=Le.dataset.chunkIndex;if(!ge||ye!=o||ve==Ot)return;Q.preventDefault(),localStorage.removeItem(Mg),localStorage.removeItem(G0),Le.classList.remove(so.HighlightDropZone);const gt={text:ge,noteIndex:o,chunkIndex:Ot};b(gt),q("update-note-chunk-position",{id:C,...gt})};return J==null||J.addEventListener("touchstart",oe,{passive:!1}),J==null||J.addEventListener("touchmove",Ae,{passive:!1}),J==null||J.addEventListener("touchend",Ue,{passive:!1}),()=>{J==null||J.removeEventListener("touchstart",oe,{passive:!1}),J==null||J.removeEventListener("touchmove",Ae,{passive:!1}),J==null||J.removeEventListener("touchend",Ue,{passive:!1})}},[i,o,b,q,C,r]),j.jsx("div",{id:K,className:so.NoteChunk,ref:Pe,onContextMenu:J=>{J.preventDefault(),g({chunkIndex:i,noteIndex:o,top:J.pageY-window.scrollY,left:J.pageX-window.scrollX})},onClick:D,draggable:!$,onDragStart:G,onDrop:L,onDragOver:c$,"data-is-drag-disabled":$,"data-pitch-index":W,"data-has-bottom-border":!!r||p,"data-has-right-border":d||p,"data-has-left-border":p,"data-has-top-border":p&&H,"data-chunk-index":i,"data-note-index":o,title:F,children:N?j.jsx(ho,{autoFocus:!0,type:"text",name:"note-chunk-edit-input",value:V,onKeyDown:T,onChange:J=>X(J.target.value),onBlur:()=>{k(!1);const J={text:V,noteIndex:o,chunkIndex:i};te(J),q("update-note-chunk-text",{id:C,...J})}}):ne})},S$=M.memo(_$),E$="_Note_8s8tv_1",w$={Note:E$},T$=t=>{const{note:e,noteIndex:n,nextNoteNoteIndex:r,hasNextNote:i,isTheNoteDefinitionChunk:o,setNotes:c,contextMenuFnsRef:d,songId:p}=t,g=M.useCallback(C=>{var O;(O=d.current)==null||O.setContextMenuData(C)},[d]),b=M.useCallback(a$(c),[c]),E=M.useCallback(o$(c),[c]);return j.jsx("div",{className:w$.Note,children:e.chunks.map((C,O)=>{const x=HP(e),N=i?l$(O,x,r):!1;return j.jsx(S$,{note:e,chunk:C,chunkIndex:O,noteIndex:n,filledNoteIndex:x,text:C.text,hasRightBorder:N,isTheNoteDefinitionChunk:o,onOpenContextMenu:g,onEditNoteChunkText:b,onEditNoteDefinitionChunkText:E,songId:p},C.id)})})},pR=M.memo(T$),C$="_NotesContainer_1cc1b_1",A$="_ScaleContainer_1cc1b_12",R$="_ChartContainer_1cc1b_18",W0={NotesContainer:C$,ScaleContainer:A$,ChartContainer:R$},ds=Object.freeze({ADD_PITCH_ABOVE:"add-pitch-above",ADD_PITCH_BELOW:"add-pitch-below",ADD_NOTE_BEFORE:"add-note-before",ADD_NOTE_AFTER:"add-note-after",REMOVE_PITCH:"remove-pitch",REMOVE_NOTE:"remove-note"}),O$=Object.freeze({[ds.ADD_PITCH_ABOVE]:zP,[ds.ADD_PITCH_BELOW]:BP,[ds.ADD_NOTE_BEFORE]:jP,[ds.ADD_NOTE_AFTER]:VP,[ds.REMOVE_PITCH]:$P,[ds.REMOVE_NOTE]:qP}),I$=t=>{const{notes:e,notesFnsRef:n,songId:r}=t,{t:i}=Nn(),o=Hs(),[c,d]=M.useState(e),[p,g]=M.useState(!0),[b,E]=M.useState([1]),C=M.useRef(null),O=M.useRef(null),{publish:x}=Kl("melo-chart-song-updates",q=>{if(o.connection.id!=q.connectionId){const{name:H,data:W}=q;if(W.id!=r)return;(O$[H]||(()=>null))({contextMenuData:W.contextMenuData,setNotes:d})}}),N=M.useCallback((q,H)=>{x(q,{id:r,contextMenuData:H})},[x,r]),k=M.useMemo(()=>[{label:i("Add Pitch Above"),onClick:q=>{zP({contextMenuData:q,setNotes:d}),N(ds.ADD_PITCH_ABOVE,q)}},{label:i("Add Pitch Below"),onClick:q=>{BP({contextMenuData:q,setNotes:d}),N(ds.ADD_PITCH_BELOW,q)}},{label:i("Add Note Before"),onClick:q=>{jP({contextMenuData:q,setNotes:d}),N(ds.ADD_NOTE_BEFORE,q)}},{label:i("Add Note After"),onClick:q=>{VP({contextMenuData:q,setNotes:d}),N(ds.ADD_NOTE_AFTER,q)}},{label:i("Remove Pitch"),type:"danger",onClick:q=>{$P({contextMenuData:q,setNotes:d}),N(ds.REMOVE_PITCH,q)}},{label:i("Remove Note"),type:"danger",onClick:q=>{qP({contextMenuData:q,setNotes:d}),N(ds.REMOVE_NOTE,q)}}],[N,i]);M.useImperativeHandle(n,()=>({setWrapNotes(q){g(q)},getNotes(){return[...c]},addMultipleNotes(q){Zq({setNotes:d,qty:q})},addMultiplePitches(q){e$({setNotes:d,qty:q})},removeEmptyNotesAtTheEnd(){n$({setNotes:d})},trimPitches(){r$({setNotes:d})},addWordsAsNotes(q){t$({setNotes:d,songText:q})}}));const V=M.useCallback(()=>{var F,D,L,G;if(!((D=(F=O==null?void 0:O.current)==null?void 0:F.children)==null?void 0:D.length)){E([1]);return}const H=((L=O==null?void 0:O.current)==null?void 0:L.children[0].offsetHeight)+J8(2),W=(G=O==null?void 0:O.current)==null?void 0:G.offsetHeight,$=Math.ceil(W/H);if($>1){const T=Array($).fill().map((te,K)=>1+K);E(T);return}E([1])},[]);M.useEffect(()=>{V()},[V,p,c]),M.useEffect(()=>(window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)}),[V]);const X=c[0];return j.jsxs("div",{className:W0.ChartContainer,children:[j.jsx("div",{className:W0.ScaleContainer,children:b.map(q=>j.jsx(pR,{setNotes:d,note:X,noteIndex:q,hasNextNote:!0,nextNoteNoteIndex:1,contextMenuFnsRef:C,isTheNoteDefinitionChunk:!0,songId:r},`${X.id}-${q}`))}),j.jsxs("div",{ref:O,className:W0.NotesContainer,"data-wrap-notes":p,children:[c.map((q,H)=>{if(H==0)return null;const W=c.length>H+1,$=W?HP(c[H+1]):null;return j.jsx(pR,{setNotes:d,note:q,noteIndex:H,hasNextNote:W,nextNoteNoteIndex:$,contextMenuFnsRef:C,songId:r},q.id)}),j.jsx(gB,{items:k,contextMenuFnsRef:C})]})]})},x$=M.memo(I$),P$="_SaveChartOption_1tona_1",gR={SaveChartOption:P$},M$=t=>{const{songId:e,notesFnsRef:n}=t,{t:r}=Nn(),i=qs(),o=fr(Sr.selectors.selectSongById(e)),c=fr(Sr.selectors.selectSaveSongStatus),d=M.useCallback(async()=>{var b;const p=(b=n.current)==null?void 0:b.getNotes(),g=o.title;i(Sr.actions.saveSong({...o,title:g,notes:p}))},[i,n,o]);return j.jsx("div",{className:gR.SaveChartOption,children:j.jsxs(mn,{className:gR.SaveSongButton,onClick:d,category:kn.SUCCESS,icon:j.jsx(Mq,{}),children:[z2(c)?j.jsx(LP,{}):j.jsx(j.Fragment,{})," ",r("Save Changes")]})})},k$=M.memo(M$),D$="_SongTitle_rcztm_1",N$="_CheckboxContainer_rcztm_8",mR={SongTitle:D$,CheckboxContainer:N$},L$=t=>{const{id:e,title:n,notesFnsRef:r}=t,{t:i}=Nn(),o=qs(),c=Hs(),[d,p]=M.useState(!1),[g,b]=M.useState(n),{publish:E}=Kl("melo-chart-song-updates",k=>{if(c.connection.id!=k.connectionId){const{name:V,data:X}=k;V=="update-song-title"&&(b(X.title),o(Sr.actions.editSongTitle({id:X.id,title:X.title})))}}),C=M.useCallback(()=>{p(!0)},[]),O=M.useCallback(k=>{k.key==="Enter"&&k.target.blur()},[]),x=M.useCallback(()=>{p(!1),E("update-song-title",{id:e,title:g}),o(Sr.actions.editSongTitle({id:e,title:g}))},[o,e,E,g]),N=M.useCallback(k=>{var V;(V=r.current)==null||V.setWrapNotes(k)},[r]);return j.jsx(j.Fragment,{children:d?j.jsx(ho,{autoFocus:!0,type:"text",value:g,onChange:k=>b(k.target.value),onKeyDown:O,onBlur:x}):j.jsxs(j.Fragment,{children:[j.jsx("h2",{className:mR.SongTitle,onDoubleClick:C,children:g}),j.jsx(k$,{songId:e,notesFnsRef:r}),j.jsx(uB,{className:mR.CheckboxContainer,label:i("Break Chart"),initialValue:!0,onChange:N})]})})},U$=M.memo(L$),V$="_Song_6jqb9_1",j$="_SongTitleContainer_6jqb9_7",yR={Song:V$,SongTitleContainer:j$},F$=t=>{const{notesFnsRef:e,generateChartDialogFnsRef:n,song:r}=t,{t:i}=Nn(),o=M.useRef(null),c=M.useRef(null);return j.jsxs("div",{className:yR.Song,children:[j.jsx(NB,{}),j.jsx(mn,{category:kn.PRIMARY,onClick:()=>{var d;return(d=o.current)==null?void 0:d.show()},icon:j.jsx(Dq,{}),children:i("Configure Song")}),j.jsx("div",{className:yR.SongTitleContainer,children:j.jsx(U$,{id:r.id,title:r.title,notesFnsRef:e})}),j.jsx(x$,{songId:r.id,notes:r.notes,notesFnsRef:e}),j.jsx(RB,{song:r,configSongDialogFnsRef:o,generateChartDialogFnsRef:n,deleteSongDialogFnsRef:c,notesFnsRef:e}),j.jsx(IB,{deleteSongDialogFnsRef:c,song:r})]})},B$=M.memo(F$),z$="_Tag_19v7a_1",H$={Tag:z$},q$=t=>{const{username:e,tag:n}=t;return j.jsxs("span",{children:[e,j.jsxs("span",{className:H$.Tag,children:["#",n]})]})},T_=M.memo(q$),C_=Object.freeze({EMPTY_LIST_MESSAGE:"songs-list-empty-list-message",SONG:"songs-list-song-item"}),{t:vR}=Zn,$$=(t=[])=>{const e=t.reduce((n,r)=>({...n,[r.owner]:[...n[r.owner]||[],r]}),{});return t.length?Object.keys(e).map(n=>{const r=e[n];if(!(r!=null&&r.length))return j.jsx(j.Fragment,{});const{ownerData:i={username:vR("Unknown User"),tag:"0"}}=r[0]||{};return j.jsxs(M.Fragment,{children:[j.jsx("h3",{children:j.jsx(T_,{...i})}),WP(r),j.jsx("br",{})]},i.uid)}):j.jsx("li",{"data-testid":C_.EMPTY_LIST_MESSAGE,children:vR("No songs here")})},{t:G$}=Zn,WP=(t=[])=>t.length?t.map(e=>{if(!e.id||!e.title){const{notes:n,...r}=e;return console.warn(`renderSongs: Song not rendered because id and/or title was not defined. ${JSON.stringify(r)}`),j.jsx(j.Fragment,{})}return j.jsx("li",{"data-testid":C_.SONG,children:j.jsx(w_,{to:{pathname:"/chart",search:`?id=${e.id}`},children:e.title})},e.id)}):j.jsx("li",{"data-testid":C_.EMPTY_LIST_MESSAGE,children:G$("No songs here")}),W$="_SongListContainer_v77t5_1",K$="_SongList_v77t5_1",kg={SongListContainer:W$,SongList:K$},Y$=()=>{const{t}=Nn(),e=fr(Dr.selectors.selectLoggedUser),n=fr(Sr.selectors.selectAllSongs),r=M.useMemo(()=>n.filter(o=>o.owner==(e==null?void 0:e.uid)),[e==null?void 0:e.uid,n]),i=M.useMemo(()=>n.filter(o=>o.owner!=(e==null?void 0:e.uid)),[e==null?void 0:e.uid,n]);return j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:kg.SongListContainer,children:[j.jsx("h2",{children:t("My Songs")}),j.jsx("ul",{className:kg.SongList,children:WP(r)})]}),j.jsxs("div",{className:kg.SongListContainer,children:[j.jsx("h2",{children:t("Songs Shared With Me")}),j.jsx("ul",{className:kg.SongList,children:$$(i)})]})]})},Q$=M.memo(Y$),X$="_TextArea_e12px_1",J$={TextArea:X$},Z$=t=>j.jsx("textarea",{...t,className:J$.TextArea}),KP=M.memo(Z$);function ct(){return ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ct.apply(null,arguments)}function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function eG(t,e){if(Kc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YP(t){var e=eG(t,"string");return Kc(e)=="symbol"?e:e+""}function of(t,e,n){return(e=YP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bR(Object(n),!0).forEach(function(r){of(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YP(r.key),r)}}function nG(t,e,n){return e&&_R(t.prototype,e),n&&_R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A_(t,e){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},A_(t,e)}function rG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A_(t,e)}function Km(t){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Km(t)}function QP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QP=function(){return!!t})()}function iG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sG(t,e){if(e&&(Kc(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iG(t)}function aG(t){var e=QP();return function(){var n,r=Km(t);if(e){var i=Km(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sG(this,n)}}function R_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function oG(t){if(Array.isArray(t))return R_(t)}function lG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XP(t,e){if(t){if(typeof t=="string")return R_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R_(t,e):void 0}}function cG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rE(t){return oG(t)||lG(t)||XP(t)||cG()}function uG(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function fG(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var hG=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(fG(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=uG(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Yr="-ms-",Ym="-moz-",Kt="-webkit-",JP="comm",iE="rule",sE="decl",dG="@import",ZP="@keyframes",pG="@layer",gG=Math.abs,Fy=String.fromCharCode,mG=Object.assign;function yG(t,e){return Mr(t,0)^45?(((e<<2^Mr(t,0))<<2^Mr(t,1))<<2^Mr(t,2))<<2^Mr(t,3):0}function eM(t){return t.trim()}function vG(t,e){return(t=e.exec(t))?t[0]:t}function Yt(t,e,n){return t.replace(e,n)}function O_(t,e){return t.indexOf(e)}function Mr(t,e){return t.charCodeAt(e)|0}function Vd(t,e,n){return t.slice(e,n)}function ma(t){return t.length}function aE(t){return t.length}function Dg(t,e){return e.push(t),t}function bG(t,e){return t.map(e).join("")}var By=1,Of=1,tM=0,Ci=0,Xn=0,Hf="";function zy(t,e,n,r,i,o,c){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:By,column:Of,length:c,return:""}}function Wh(t,e){return mG(zy("",null,null,"",null,null,0),t,{length:-t.length},e)}function _G(){return Xn}function SG(){return Xn=Ci>0?Mr(Hf,--Ci):0,Of--,Xn===10&&(Of=1,By--),Xn}function qi(){return Xn=Ci<tM?Mr(Hf,Ci++):0,Of++,Xn===10&&(Of=1,By++),Xn}function Oa(){return Mr(Hf,Ci)}function cm(){return Ci}function sp(t,e){return Vd(Hf,t,e)}function jd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function nM(t){return By=Of=1,tM=ma(Hf=t),Ci=0,[]}function rM(t){return Hf="",t}function um(t){return eM(sp(Ci-1,I_(t===91?t+2:t===40?t+1:t)))}function EG(t){for(;(Xn=Oa())&&Xn<33;)qi();return jd(t)>2||jd(Xn)>3?"":" "}function wG(t,e){for(;--e&&qi()&&!(Xn<48||Xn>102||Xn>57&&Xn<65||Xn>70&&Xn<97););return sp(t,cm()+(e<6&&Oa()==32&&qi()==32))}function I_(t){for(;qi();)switch(Xn){case t:return Ci;case 34:case 39:t!==34&&t!==39&&I_(Xn);break;case 40:t===41&&I_(t);break;case 92:qi();break}return Ci}function TG(t,e){for(;qi()&&t+Xn!==57;)if(t+Xn===84&&Oa()===47)break;return"/*"+sp(e,Ci-1)+"*"+Fy(t===47?t:qi())}function CG(t){for(;!jd(Oa());)qi();return sp(t,Ci)}function AG(t){return rM(fm("",null,null,null,[""],t=nM(t),0,[0],t))}function fm(t,e,n,r,i,o,c,d,p){for(var g=0,b=0,E=c,C=0,O=0,x=0,N=1,k=1,V=1,X=0,q="",H=i,W=o,$=r,F=q;k;)switch(x=X,X=qi()){case 40:if(x!=108&&Mr(F,E-1)==58){O_(F+=Yt(um(X),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:F+=um(X);break;case 9:case 10:case 13:case 32:F+=EG(x);break;case 92:F+=wG(cm()-1,7);continue;case 47:switch(Oa()){case 42:case 47:Dg(RG(TG(qi(),cm()),e,n),p);break;default:F+="/"}break;case 123*N:d[g++]=ma(F)*V;case 125*N:case 59:case 0:switch(X){case 0:case 125:k=0;case 59+b:V==-1&&(F=Yt(F,/\f/g,"")),O>0&&ma(F)-E&&Dg(O>32?ER(F+";",r,n,E-1):ER(Yt(F," ","")+";",r,n,E-2),p);break;case 59:F+=";";default:if(Dg($=SR(F,e,n,g,b,i,d,q,H=[],W=[],E),o),X===123)if(b===0)fm(F,e,$,$,H,o,E,d,W);else switch(C===99&&Mr(F,3)===110?100:C){case 100:case 108:case 109:case 115:fm(t,$,$,r&&Dg(SR(t,$,$,0,0,i,d,q,i,H=[],E),W),i,W,E,d,r?H:W);break;default:fm(F,$,$,$,[""],W,0,d,W)}}g=b=O=0,N=V=1,q=F="",E=c;break;case 58:E=1+ma(F),O=x;default:if(N<1){if(X==123)--N;else if(X==125&&N++==0&&SG()==125)continue}switch(F+=Fy(X),X*N){case 38:V=b>0?1:(F+="\f",-1);break;case 44:d[g++]=(ma(F)-1)*V,V=1;break;case 64:Oa()===45&&(F+=um(qi())),C=Oa(),b=E=ma(q=F+=CG(cm())),X++;break;case 45:x===45&&ma(F)==2&&(N=0)}}return o}function SR(t,e,n,r,i,o,c,d,p,g,b){for(var E=i-1,C=i===0?o:[""],O=aE(C),x=0,N=0,k=0;x<r;++x)for(var V=0,X=Vd(t,E+1,E=gG(N=c[x])),q=t;V<O;++V)(q=eM(N>0?C[V]+" "+X:Yt(X,/&\f/g,C[V])))&&(p[k++]=q);return zy(t,e,n,i===0?iE:d,p,g,b)}function RG(t,e,n){return zy(t,e,n,JP,Fy(_G()),Vd(t,2,-2),0)}function ER(t,e,n,r){return zy(t,e,n,sE,Vd(t,0,r),Vd(t,r+1,-1),r)}function pf(t,e){for(var n="",r=aE(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function OG(t,e,n,r){switch(t.type){case pG:if(t.children.length)break;case dG:case sE:return t.return=t.return||t.value;case JP:return"";case ZP:return t.return=t.value+"{"+pf(t.children,r)+"}";case iE:t.value=t.props.join(",")}return ma(n=pf(t.children,r))?t.return=t.value+"{"+n+"}":""}function IG(t){var e=aE(t);return function(n,r,i,o){for(var c="",d=0;d<e;d++)c+=t[d](n,r,i,o)||"";return c}}function xG(t){return function(e){e.root||(e=e.return)&&t(e)}}function PG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var MG=function(e,n,r){for(var i=0,o=0;i=o,o=Oa(),i===38&&o===12&&(n[r]=1),!jd(o);)qi();return sp(e,Ci)},kG=function(e,n){var r=-1,i=44;do switch(jd(i)){case 0:i===38&&Oa()===12&&(n[r]=1),e[r]+=MG(Ci-1,n,r);break;case 2:e[r]+=um(i);break;case 4:if(i===44){e[++r]=Oa()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Fy(i)}while(i=qi());return e},DG=function(e,n){return rM(kG(nM(e),n))},wR=new WeakMap,NG=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!wR.get(r))&&!i){wR.set(e,!0);for(var o=[],c=DG(n,o),d=r.props,p=0,g=0;p<c.length;p++)for(var b=0;b<d.length;b++,g++)e.props[g]=o[p]?c[p].replace(/&\f/g,d[b]):d[b]+" "+c[p]}}},LG=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function iM(t,e){switch(yG(t,e)){case 5103:return Kt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Kt+t+Ym+t+Yr+t+t;case 6828:case 4268:return Kt+t+Yr+t+t;case 6165:return Kt+t+Yr+"flex-"+t+t;case 5187:return Kt+t+Yt(t,/(\w+).+(:[^]+)/,Kt+"box-$1$2"+Yr+"flex-$1$2")+t;case 5443:return Kt+t+Yr+"flex-item-"+Yt(t,/flex-|-self/,"")+t;case 4675:return Kt+t+Yr+"flex-line-pack"+Yt(t,/align-content|flex-|-self/,"")+t;case 5548:return Kt+t+Yr+Yt(t,"shrink","negative")+t;case 5292:return Kt+t+Yr+Yt(t,"basis","preferred-size")+t;case 6060:return Kt+"box-"+Yt(t,"-grow","")+Kt+t+Yr+Yt(t,"grow","positive")+t;case 4554:return Kt+Yt(t,/([^-])(transform)/g,"$1"+Kt+"$2")+t;case 6187:return Yt(Yt(Yt(t,/(zoom-|grab)/,Kt+"$1"),/(image-set)/,Kt+"$1"),t,"")+t;case 5495:case 3959:return Yt(t,/(image-set\([^]*)/,Kt+"$1$`$1");case 4968:return Yt(Yt(t,/(.+:)(flex-)?(.*)/,Kt+"box-pack:$3"+Yr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kt+t+t;case 4095:case 3583:case 4068:case 2532:return Yt(t,/(.+)-inline(.+)/,Kt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ma(t)-1-e>6)switch(Mr(t,e+1)){case 109:if(Mr(t,e+4)!==45)break;case 102:return Yt(t,/(.+:)(.+)-([^]+)/,"$1"+Kt+"$2-$3$1"+Ym+(Mr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~O_(t,"stretch")?iM(Yt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Mr(t,e+1)!==115)break;case 6444:switch(Mr(t,ma(t)-3-(~O_(t,"!important")&&10))){case 107:return Yt(t,":",":"+Kt)+t;case 101:return Yt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Kt+(Mr(t,14)===45?"inline-":"")+"box$3$1"+Kt+"$2$3$1"+Yr+"$2box$3")+t}break;case 5936:switch(Mr(t,e+11)){case 114:return Kt+t+Yr+Yt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Kt+t+Yr+Yt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Kt+t+Yr+Yt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Kt+t+Yr+t+t}return t}var UG=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case sE:e.return=iM(e.value,e.length);break;case ZP:return pf([Wh(e,{value:Yt(e.value,"@","@"+Kt)})],i);case iE:if(e.length)return bG(e.props,function(o){switch(vG(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pf([Wh(e,{props:[Yt(o,/:(read-\w+)/,":"+Ym+"$1")]})],i);case"::placeholder":return pf([Wh(e,{props:[Yt(o,/:(plac\w+)/,":"+Kt+"input-$1")]}),Wh(e,{props:[Yt(o,/:(plac\w+)/,":"+Ym+"$1")]}),Wh(e,{props:[Yt(o,/:(plac\w+)/,Yr+"input-$1")]})],i)}return""})}},VG=[UG],jG=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(N){var k=N.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var i=e.stylisPlugins||VG,o={},c,d=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(N){for(var k=N.getAttribute("data-emotion").split(" "),V=1;V<k.length;V++)o[k[V]]=!0;d.push(N)});var p,g=[NG,LG];{var b,E=[OG,xG(function(N){b.insert(N)})],C=IG(g.concat(i,E)),O=function(k){return pf(AG(k),C)};p=function(k,V,X,q){b=X,O(k?k+"{"+V.styles+"}":V.styles),q&&(x.inserted[V.name]=!0)}}var x={key:n,sheet:new hG({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:p};return x.sheet.hydrate(d),x},K0={exports:{}},tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function FG(){if(TR)return tn;TR=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,p=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,b=t?Symbol.for("react.forward_ref"):60112,E=t?Symbol.for("react.suspense"):60113,C=t?Symbol.for("react.suspense_list"):60120,O=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,N=t?Symbol.for("react.block"):60121,k=t?Symbol.for("react.fundamental"):60117,V=t?Symbol.for("react.responder"):60118,X=t?Symbol.for("react.scope"):60119;function q(W){if(typeof W=="object"&&W!==null){var $=W.$$typeof;switch($){case e:switch(W=W.type,W){case p:case g:case r:case o:case i:case E:return W;default:switch(W=W&&W.$$typeof,W){case d:case b:case x:case O:case c:return W;default:return $}}case n:return $}}}function H(W){return q(W)===g}return tn.AsyncMode=p,tn.ConcurrentMode=g,tn.ContextConsumer=d,tn.ContextProvider=c,tn.Element=e,tn.ForwardRef=b,tn.Fragment=r,tn.Lazy=x,tn.Memo=O,tn.Portal=n,tn.Profiler=o,tn.StrictMode=i,tn.Suspense=E,tn.isAsyncMode=function(W){return H(W)||q(W)===p},tn.isConcurrentMode=H,tn.isContextConsumer=function(W){return q(W)===d},tn.isContextProvider=function(W){return q(W)===c},tn.isElement=function(W){return typeof W=="object"&&W!==null&&W.$$typeof===e},tn.isForwardRef=function(W){return q(W)===b},tn.isFragment=function(W){return q(W)===r},tn.isLazy=function(W){return q(W)===x},tn.isMemo=function(W){return q(W)===O},tn.isPortal=function(W){return q(W)===n},tn.isProfiler=function(W){return q(W)===o},tn.isStrictMode=function(W){return q(W)===i},tn.isSuspense=function(W){return q(W)===E},tn.isValidElementType=function(W){return typeof W=="string"||typeof W=="function"||W===r||W===g||W===o||W===i||W===E||W===C||typeof W=="object"&&W!==null&&(W.$$typeof===x||W.$$typeof===O||W.$$typeof===c||W.$$typeof===d||W.$$typeof===b||W.$$typeof===k||W.$$typeof===V||W.$$typeof===X||W.$$typeof===N)},tn.typeOf=q,tn}var CR;function BG(){return CR||(CR=1,K0.exports=FG()),K0.exports}var Y0,AR;function zG(){if(AR)return Y0;AR=1;var t=BG(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=i;function c(x){return t.isMemo(x)?i:o[x.$$typeof]||e}var d=Object.defineProperty,p=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,b=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,C=Object.prototype;function O(x,N,k){if(typeof N!="string"){if(C){var V=E(N);V&&V!==C&&O(x,V,k)}var X=p(N);g&&(X=X.concat(g(N)));for(var q=c(x),H=c(N),W=0;W<X.length;++W){var $=X[W];if(!n[$]&&!(k&&k[$])&&!(H&&H[$])&&!(q&&q[$])){var F=b(N,$);try{d(x,$,F)}catch{}}}}return x}return Y0=O,Y0}zG();var HG=!0;function qG(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var sM=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||HG===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},$G=function(e,n,r){sM(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function GG(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var WG={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},KG=/[A-Z]|^ms/g,YG=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aM=function(e){return e.charCodeAt(1)===45},RR=function(e){return e!=null&&typeof e!="boolean"},Q0=PG(function(t){return aM(t)?t:t.replace(KG,"-$&").toLowerCase()}),OR=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(YG,function(r,i,o){return ya={name:i,styles:o,next:ya},i})}return WG[e]!==1&&!aM(e)&&typeof n=="number"&&n!==0?n+"px":n};function Fd(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return ya={name:i.name,styles:i.styles,next:ya},i.name;var o=n;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)ya={name:c.name,styles:c.styles,next:ya},c=c.next;var d=o.styles+";";return d}return QG(t,e,n)}case"function":{if(t!==void 0){var p=ya,g=n(t);return ya=p,Fd(t,e,g)}break}}var b=n;return b}function QG(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Fd(t,e,n[i])+";";else for(var o in n){var c=n[o];if(typeof c!="object"){var d=c;RR(d)&&(r+=Q0(o)+":"+OR(o,d)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&e==null)for(var p=0;p<c.length;p++)RR(c[p])&&(r+=Q0(o)+":"+OR(o,c[p])+";");else{var g=Fd(t,e,c);switch(o){case"animation":case"animationName":{r+=Q0(o)+":"+g+";";break}default:r+=o+"{"+g+"}"}}}return r}var IR=/label:\s*([^\s;{]+)\s*(;|$)/g,ya;function oM(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";ya=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Fd(n,e,o);else{var c=o;i+=c[0]}for(var d=1;d<t.length;d++)if(i+=Fd(n,e,t[d]),r){var p=o;i+=p[d]}IR.lastIndex=0;for(var g="",b;(b=IR.exec(i))!==null;)g+="-"+b[1];var E=GG(i)+g;return{name:E,styles:i,next:ya}}var XG=function(e){return e()},JG=Lw.useInsertionEffect?Lw.useInsertionEffect:!1,ZG=JG||XG,lM=M.createContext(typeof HTMLElement<"u"?jG({key:"css"}):null);lM.Provider;var eW=function(e){return M.forwardRef(function(n,r){var i=M.useContext(lM);return e(n,i,r)})},tW=M.createContext({}),oE={}.hasOwnProperty,x_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nW=function(e,n){var r={};for(var i in n)oE.call(n,i)&&(r[i]=n[i]);return r[x_]=e,r},rW=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return sM(n,r,i),ZG(function(){return $G(n,r,i)}),null},iW=eW(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[x_],o=[r],c="";typeof t.className=="string"?c=qG(e.registered,o,t.className):t.className!=null&&(c=t.className+" ");var d=oM(o,void 0,M.useContext(tW));c+=e.key+"-"+d.name;var p={};for(var g in t)oE.call(t,g)&&g!=="css"&&g!==x_&&(p[g]=t[g]);return p.className=c,n&&(p.ref=n),M.createElement(M.Fragment,null,M.createElement(rW,{cache:e,serialized:d,isStringTag:typeof i=="string"}),M.createElement(i,p))}),sW=iW,tt=function(e,n){var r=arguments;if(n==null||!oE.call(n,"css"))return M.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=sW,o[1]=nW(e,n);for(var c=2;c<i;c++)o[c]=r[c];return M.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(tt||(tt={}));function lE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return oM(e)}function aW(){var t=lE.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function oW(t){if(Array.isArray(t))return t}function lW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,c,d=[],p=!0,g=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=o.call(n)).done)&&(d.push(r.value),d.length!==e);p=!0);}catch(b){g=!0,i=b}finally{try{if(!p&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(g)throw i}}return d}}function cW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(t,e){return oW(t)||lW(t,e)||XP(t,e)||cW()}function uW(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ma(t,e){if(t==null)return{};var n,r,i=uW(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fW(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const hW=Math.min,dW=Math.max,Qm=Math.round,Ng=Math.floor,Xm=t=>({x:t,y:t});function pW(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Hy(){return typeof window<"u"}function cM(t){return fM(t)?(t.nodeName||"").toLowerCase():"#document"}function Eo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function uM(t){var e;return(e=(fM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fM(t){return Hy()?t instanceof Node||t instanceof Eo(t).Node:!1}function gW(t){return Hy()?t instanceof Element||t instanceof Eo(t).Element:!1}function cE(t){return Hy()?t instanceof HTMLElement||t instanceof Eo(t).HTMLElement:!1}function xR(t){return!Hy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Eo(t).ShadowRoot}const mW=new Set(["inline","contents"]);function hM(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=uE(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!mW.has(i)}function yW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vW=new Set(["html","body","#document"]);function bW(t){return vW.has(cM(t))}function uE(t){return Eo(t).getComputedStyle(t)}function _W(t){if(cM(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xR(t)&&t.host||uM(t);return xR(e)?e.host:e}function dM(t){const e=_W(t);return bW(e)?t.ownerDocument?t.ownerDocument.body:t.body:cE(e)&&hM(e)?e:dM(e)}function Jm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=dM(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),c=Eo(i);if(o){const d=P_(c);return e.concat(c,c.visualViewport||[],hM(i)?i:[],d&&n?Jm(d):[])}return e.concat(i,Jm(i,[],n))}function P_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SW(t){const e=uE(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=cE(t),o=i?t.offsetWidth:n,c=i?t.offsetHeight:r,d=Qm(n)!==o||Qm(r)!==c;return d&&(n=o,r=c),{width:n,height:r,$:d}}function fE(t){return gW(t)?t:t.contextElement}function PR(t){const e=fE(t);if(!cE(e))return Xm(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=SW(e);let c=(o?Qm(n.width):n.width)/r,d=(o?Qm(n.height):n.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const EW=Xm(0);function wW(t){const e=Eo(t);return!yW()||!e.visualViewport?EW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function TW(t,e,n){return!1}function MR(t,e,n,r){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),o=fE(t);let c=Xm(1);e&&(c=PR(t));const d=TW()?wW(o):Xm(0);let p=(i.left+d.x)/c.x,g=(i.top+d.y)/c.y,b=i.width/c.x,E=i.height/c.y;if(o){const C=Eo(o),O=r;let x=C,N=P_(x);for(;N&&r&&O!==x;){const k=PR(N),V=N.getBoundingClientRect(),X=uE(N),q=V.left+(N.clientLeft+parseFloat(X.paddingLeft))*k.x,H=V.top+(N.clientTop+parseFloat(X.paddingTop))*k.y;p*=k.x,g*=k.y,b*=k.x,E*=k.y,p+=q,g+=H,x=Eo(N),N=P_(x)}}return pW({width:b,height:E,x:p,y:g})}function pM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function CW(t,e){let n=null,r;const i=uM(t);function o(){var d;clearTimeout(r),(d=n)==null||d.disconnect(),n=null}function c(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),o();const g=t.getBoundingClientRect(),{left:b,top:E,width:C,height:O}=g;if(d||e(),!C||!O)return;const x=Ng(E),N=Ng(i.clientWidth-(b+C)),k=Ng(i.clientHeight-(E+O)),V=Ng(b),q={rootMargin:-x+"px "+-N+"px "+-k+"px "+-V+"px",threshold:dW(0,hW(1,p))||1};let H=!0;function W($){const F=$[0].intersectionRatio;if(F!==p){if(!H)return c();F?c(!1,F):r=setTimeout(()=>{c(!1,1e-7)},1e3)}F===1&&!pM(g,t.getBoundingClientRect())&&c(),H=!1}try{n=new IntersectionObserver(W,{...q,root:i.ownerDocument})}catch{n=new IntersectionObserver(W,q)}n.observe(t)}return c(!0),o}function AW(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,g=fE(t),b=i||o?[...g?Jm(g):[],...Jm(e)]:[];b.forEach(V=>{i&&V.addEventListener("scroll",n,{passive:!0}),o&&V.addEventListener("resize",n)});const E=g&&d?CW(g,n):null;let C=-1,O=null;c&&(O=new ResizeObserver(V=>{let[X]=V;X&&X.target===g&&O&&(O.unobserve(e),cancelAnimationFrame(C),C=requestAnimationFrame(()=>{var q;(q=O)==null||q.observe(e)})),n()}),g&&!p&&O.observe(g),O.observe(e));let x,N=p?MR(t):null;p&&k();function k(){const V=MR(t);N&&!pM(N,V)&&n(),N=V,x=requestAnimationFrame(k)}return n(),()=>{var V;b.forEach(X=>{i&&X.removeEventListener("scroll",n),o&&X.removeEventListener("resize",n)}),E==null||E(),(V=O)==null||V.disconnect(),O=null,p&&cancelAnimationFrame(x)}}var M_=M.useLayoutEffect,RW=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Zm=function(){};function OW(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function IW(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&t)for(var c in e)e.hasOwnProperty(c)&&e[c]&&o.push("".concat(OW(t,c)));return o.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var kR=function(e){return jW(e)?e.filter(Boolean):Kc(e)==="object"&&e!==null?[e]:[]},gM=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ma(e,RW);return Ze({},n)},Dn=function(e,n,r){var i=e.cx,o=e.getStyles,c=e.getClassNames,d=e.className;return{css:o(n,e),className:i(r??{},c(n,e),d)}};function xW(t,e,n){if(n){var r=n(t,e);if(typeof r=="string")return r}return t}function qy(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function PW(t){return qy(t)?window.innerHeight:t.clientHeight}function mM(t){return qy(t)?window.pageYOffset:t.scrollTop}function ey(t,e){if(qy(t)){window.scrollTo(0,e);return}t.scrollTop=e}function MW(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function kW(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function Lg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Zm,i=mM(t),o=e-i,c=10,d=0;function p(){d+=c;var g=kW(d,i,o,n);ey(t,g),d<n?window.requestAnimationFrame(p):r(t)}p()}function DR(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?ey(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&ey(t,Math.max(e.offsetTop-i,0))}function DW(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function NR(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function NW(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var yM=!1,LW={get passive(){return yM=!0}},Ug=typeof window<"u"?window:{};Ug.addEventListener&&Ug.removeEventListener&&(Ug.addEventListener("p",Zm,LW),Ug.removeEventListener("p",Zm,!1));var UW=yM;function VW(t){return t!=null}function jW(t){return Array.isArray(t)}function Vg(t,e,n){return t?e:n}var FW=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(c){var d=_r(c,1),p=d[0];return!r.includes(p)});return o.reduce(function(c,d){var p=_r(d,2),g=p[0],b=p[1];return c[g]=b,c},{})},BW=["children","innerProps"],zW=["children","innerProps"];function HW(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,c=t.isFixedPosition,d=t.controlHeight,p=MW(n),g={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return g;var b=p.getBoundingClientRect(),E=b.height,C=n.getBoundingClientRect(),O=C.bottom,x=C.height,N=C.top,k=n.offsetParent.getBoundingClientRect(),V=k.top,X=c?window.innerHeight:PW(p),q=mM(p),H=parseInt(getComputedStyle(n).marginBottom,10),W=parseInt(getComputedStyle(n).marginTop,10),$=V-W,F=X-N,D=$+q,L=E-q-N,G=O-X+q+H,T=q+N-W,te=160;switch(i){case"auto":case"bottom":if(F>=x)return{placement:"bottom",maxHeight:e};if(L>=x&&!c)return o&&Lg(p,G,te),{placement:"bottom",maxHeight:e};if(!c&&L>=r||c&&F>=r){o&&Lg(p,G,te);var K=c?F-H:L-H;return{placement:"bottom",maxHeight:K}}if(i==="auto"||c){var ne=e,Pe=c?$:D;return Pe>=r&&(ne=Math.min(Pe-H-d,e)),{placement:"top",maxHeight:ne}}if(i==="bottom")return o&&ey(p,G),{placement:"bottom",maxHeight:e};break;case"top":if($>=x)return{placement:"top",maxHeight:e};if(D>=x&&!c)return o&&Lg(p,T,te),{placement:"top",maxHeight:e};if(!c&&D>=r||c&&$>=r){var J=e;return(!c&&D>=r||c&&$>=r)&&(J=c?$-W:D-W),o&&Lg(p,T,te),{placement:"top",maxHeight:J}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function qW(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var vM=function(e){return e==="auto"?"bottom":e},$W=function(e,n){var r,i=e.placement,o=e.theme,c=o.borderRadius,d=o.spacing,p=o.colors;return Ze((r={label:"menu"},of(r,qW(i),"100%"),of(r,"position","absolute"),of(r,"width","100%"),of(r,"zIndex",1),r),n?{}:{backgroundColor:p.neutral0,borderRadius:c,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},bM=M.createContext(null),GW=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,c=e.menuPosition,d=e.menuShouldScrollIntoView,p=e.theme,g=M.useContext(bM)||{},b=g.setPortalPlacement,E=M.useRef(null),C=M.useState(i),O=_r(C,2),x=O[0],N=O[1],k=M.useState(null),V=_r(k,2),X=V[0],q=V[1],H=p.spacing.controlHeight;return M_(function(){var W=E.current;if(W){var $=c==="fixed",F=d&&!$,D=HW({maxHeight:i,menuEl:W,minHeight:r,placement:o,shouldScroll:F,isFixedPosition:$,controlHeight:H});N(D.maxHeight),q(D.placement),b==null||b(D.placement)}},[i,o,c,d,r,b,H]),n({ref:E,placerProps:Ze(Ze({},e),{},{placement:X||vM(o),maxHeight:x})})},WW=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return tt("div",ct({},Dn(e,"menu",{menu:!0}),{ref:r},i),n)},KW=WW,YW=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return Ze({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},QW=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return tt("div",ct({},Dn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),n)},_M=function(e,n){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return Ze({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},XW=_M,JW=_M,ZW=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,o=Ma(e,BW);return tt("div",ct({},Dn(Ze(Ze({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},eK=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,o=Ma(e,zW);return tt("div",ct({},Dn(Ze(Ze({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},tK=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},nK=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,c=e.menuPlacement,d=e.menuPosition,p=M.useRef(null),g=M.useRef(null),b=M.useState(vM(c)),E=_r(b,2),C=E[0],O=E[1],x=M.useMemo(function(){return{setPortalPlacement:O}},[]),N=M.useState(null),k=_r(N,2),V=k[0],X=k[1],q=M.useCallback(function(){if(i){var F=DW(i),D=d==="fixed"?0:window.pageYOffset,L=F[C]+D;(L!==(V==null?void 0:V.offset)||F.left!==(V==null?void 0:V.rect.left)||F.width!==(V==null?void 0:V.rect.width))&&X({offset:L,rect:F})}},[i,d,C,V==null?void 0:V.offset,V==null?void 0:V.rect.left,V==null?void 0:V.rect.width]);M_(function(){q()},[q]);var H=M.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&p.current&&(g.current=AW(i,p.current,q,{elementResize:"ResizeObserver"in window}))},[i,q]);M_(function(){H()},[H]);var W=M.useCallback(function(F){p.current=F,H()},[H]);if(!n&&d!=="fixed"||!V)return null;var $=tt("div",ct({ref:W},Dn(Ze(Ze({},e),{},{offset:V.offset,position:d,rect:V.rect}),"menuPortal",{"menu-portal":!0}),o),r);return tt(bM.Provider,{value:x},n?Z2.createPortal($,n):$)},rK=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},iK=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return tt("div",ct({},Dn(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),n)},sK=function(e,n){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,c=e.selectProps.controlShouldRenderValue;return Ze({alignItems:"center",display:i&&o&&c?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},aK=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return tt("div",ct({},Dn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),n)},oK=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},lK=function(e){var n=e.children,r=e.innerProps;return tt("div",ct({},Dn(e,"indicatorsContainer",{indicators:!0}),r),n)},LR,cK=["size"],uK=["innerProps","isRtl","size"],fK={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},SM=function(e){var n=e.size,r=Ma(e,cK);return tt("svg",ct({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:fK},r))},hE=function(e){return tt(SM,ct({size:20},e),tt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},EM=function(e){return tt(SM,ct({size:20},e),tt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},wM=function(e,n){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,c=i.colors;return Ze({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?c.neutral60:c.neutral20,padding:o*2,":hover":{color:r?c.neutral80:c.neutral40}})},hK=wM,dK=function(e){var n=e.children,r=e.innerProps;return tt("div",ct({},Dn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||tt(EM,null))},pK=wM,gK=function(e){var n=e.children,r=e.innerProps;return tt("div",ct({},Dn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||tt(hE,null))},mK=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,c=i.colors;return Ze({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?c.neutral10:c.neutral20,marginBottom:o*2,marginTop:o*2})},yK=function(e){var n=e.innerProps;return tt("span",ct({},n,Dn(e,"indicatorSeparator",{"indicator-separator":!0})))},vK=aW(LR||(LR=fW([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),bK=function(e,n){var r=e.isFocused,i=e.size,o=e.theme,c=o.colors,d=o.spacing.baseUnit;return Ze({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?c.neutral60:c.neutral20,padding:d*2})},X0=function(e){var n=e.delay,r=e.offset;return tt("span",{css:lE({animation:"".concat(vK," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},_K=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,o=i===void 0?4:i,c=Ma(e,uK);return tt("div",ct({},Dn(Ze(Ze({},c),{},{innerProps:n,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),tt(X0,{delay:0,offset:r}),tt(X0,{delay:160,offset:!0}),tt(X0,{delay:320,offset:!r}))},SK=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.theme,c=o.colors,d=o.borderRadius,p=o.spacing;return Ze({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:p.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?c.neutral5:c.neutral0,borderColor:r?c.neutral10:i?c.primary:c.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(c.primary):void 0,"&:hover":{borderColor:i?c.primary:c.neutral30}})},EK=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,c=e.innerProps,d=e.menuIsOpen;return tt("div",ct({ref:o},Dn(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":d}),c,{"aria-disabled":r||void 0}),n)},wK=EK,TK=["data"],CK=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},AK=function(e){var n=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,c=e.Heading,d=e.headingProps,p=e.innerProps,g=e.label,b=e.theme,E=e.selectProps;return tt("div",ct({},Dn(e,"group",{group:!0}),p),tt(c,ct({},d,{selectProps:E,theme:b,getStyles:i,getClassNames:o,cx:r}),g),tt("div",null,n))},RK=function(e,n){var r=e.theme,i=r.colors,o=r.spacing;return Ze({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},OK=function(e){var n=gM(e);n.data;var r=Ma(n,TK);return tt("div",ct({},Dn(e,"groupHeading",{"group-heading":!0}),r))},IK=AK,xK=["innerRef","isDisabled","isHidden","inputClassName"],PK=function(e,n){var r=e.isDisabled,i=e.value,o=e.theme,c=o.spacing,d=o.colors;return Ze(Ze({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},MK),n?{}:{margin:c.baseUnit/2,paddingBottom:c.baseUnit/2,paddingTop:c.baseUnit/2,color:d.neutral80})},TM={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},MK={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ze({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},TM)},kK=function(e){return Ze({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},TM)},DK=function(e){var n=e.cx,r=e.value,i=gM(e),o=i.innerRef,c=i.isDisabled,d=i.isHidden,p=i.inputClassName,g=Ma(i,xK);return tt("div",ct({},Dn(e,"input",{"input-container":!0}),{"data-value":r||""}),tt("input",ct({className:n({input:!0},p),ref:o,style:kK(d),disabled:c},g)))},NK=DK,LK=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,c=r.colors;return Ze({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:c.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},UK=function(e,n){var r=e.theme,i=r.borderRadius,o=r.colors,c=e.cropWithEllipsis;return Ze({overflow:"hidden",textOverflow:c||c===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},VK=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,c=r.colors,d=e.isFocused;return Ze({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:d?c.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:c.dangerLight,color:c.danger}})},CM=function(e){var n=e.children,r=e.innerProps;return tt("div",r,n)},jK=CM,FK=CM;function BK(t){var e=t.children,n=t.innerProps;return tt("div",ct({role:"button"},n),e||tt(hE,{size:14}))}var zK=function(e){var n=e.children,r=e.components,i=e.data,o=e.innerProps,c=e.isDisabled,d=e.removeProps,p=e.selectProps,g=r.Container,b=r.Label,E=r.Remove;return tt(g,{data:i,innerProps:Ze(Ze({},Dn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":c})),o),selectProps:p},tt(b,{data:i,innerProps:Ze({},Dn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:p},n),tt(E,{data:i,innerProps:Ze(Ze({},Dn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},d),selectProps:p}))},HK=zK,qK=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,c=e.theme,d=c.spacing,p=c.colors;return Ze({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?p.primary:i?p.primary25:"transparent",color:r?p.neutral20:o?p.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?p.primary:p.primary50}})},$K=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,c=e.innerRef,d=e.innerProps;return tt("div",ct({},Dn(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:c,"aria-disabled":r},d),n)},GK=$K,WK=function(e,n){var r=e.theme,i=r.spacing,o=r.colors;return Ze({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},KK=function(e){var n=e.children,r=e.innerProps;return tt("div",ct({},Dn(e,"placeholder",{placeholder:!0}),r),n)},YK=KK,QK=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing,c=i.colors;return Ze({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?c.neutral40:c.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},XK=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return tt("div",ct({},Dn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},JK=XK,ZK={ClearIndicator:gK,Control:wK,DropdownIndicator:dK,DownChevron:EM,CrossIcon:hE,Group:IK,GroupHeading:OK,IndicatorsContainer:lK,IndicatorSeparator:yK,Input:NK,LoadingIndicator:_K,Menu:KW,MenuList:QW,MenuPortal:nK,LoadingMessage:eK,NoOptionsMessage:ZW,MultiValue:HK,MultiValueContainer:jK,MultiValueLabel:FK,MultiValueRemove:BK,Option:GK,Placeholder:YK,SelectContainer:iK,SingleValue:JK,ValueContainer:aK},eY=function(e){return Ze(Ze({},ZK),e.components)},UR=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function tY(t,e){return!!(t===e||UR(t)&&UR(e))}function nY(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!tY(t[n],e[n]))return!1;return!0}function rY(t,e){e===void 0&&(e=nY);var n=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var c=t.apply(this,i);return n={lastResult:c,lastArgs:i,lastThis:this},c}return r.clear=function(){n=null},r}var iY={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},sY=function(e){return tt("span",ct({css:iY},e))},VR=sY,aY={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,o=e.context,c=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return c?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,c=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return c?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,o=e.label,c=o===void 0?"":o,d=e.selectValue,p=e.isDisabled,g=e.isSelected,b=e.isAppleDevice,E=function(N,k){return N&&N.length?"".concat(N.indexOf(k)+1," of ").concat(N.length):""};if(n==="value"&&d)return"value ".concat(c," focused, ").concat(E(d,r),".");if(n==="menu"&&b){var C=p?" disabled":"",O="".concat(g?" selected":"").concat(C);return"".concat(c).concat(O,", ").concat(E(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},oY=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,c=e.isFocused,d=e.selectValue,p=e.selectProps,g=e.id,b=e.isAppleDevice,E=p.ariaLiveMessages,C=p.getOptionLabel,O=p.inputValue,x=p.isMulti,N=p.isOptionDisabled,k=p.isSearchable,V=p.menuIsOpen,X=p.options,q=p.screenReaderStatus,H=p.tabSelectsValue,W=p.isLoading,$=p["aria-label"],F=p["aria-live"],D=M.useMemo(function(){return Ze(Ze({},aY),E||{})},[E]),L=M.useMemo(function(){var Pe="";if(n&&D.onChange){var J=n.option,oe=n.options,Ae=n.removedValue,Ue=n.removedValues,Q=n.value,ge=function(gt){return Array.isArray(gt)?null:gt},ye=Ae||J||ge(Q),ve=ye?C(ye):"",ke=oe||Ue||void 0,qe=ke?ke.map(C):[],Le=Ze({isDisabled:ye&&N(ye,d),label:ve,labels:qe},n);Pe=D.onChange(Le)}return Pe},[n,D,N,d,C]),G=M.useMemo(function(){var Pe="",J=r||i,oe=!!(r&&d&&d.includes(r));if(J&&D.onFocus){var Ae={focused:J,label:C(J),isDisabled:N(J,d),isSelected:oe,options:o,context:J===r?"menu":"value",selectValue:d,isAppleDevice:b};Pe=D.onFocus(Ae)}return Pe},[r,i,C,N,D,o,d,b]),T=M.useMemo(function(){var Pe="";if(V&&X.length&&!W&&D.onFilter){var J=q({count:o.length});Pe=D.onFilter({inputValue:O,resultsMessage:J})}return Pe},[o,O,V,D,X,q,W]),te=(n==null?void 0:n.action)==="initial-input-focus",K=M.useMemo(function(){var Pe="";if(D.guidance){var J=i?"value":V?"menu":"input";Pe=D.guidance({"aria-label":$,context:J,isDisabled:r&&N(r,d),isMulti:x,isSearchable:k,tabSelectsValue:H,isInitialFocus:te})}return Pe},[$,r,i,x,N,k,V,D,d,H,te]),ne=tt(M.Fragment,null,tt("span",{id:"aria-selection"},L),tt("span",{id:"aria-focused"},G),tt("span",{id:"aria-results"},T),tt("span",{id:"aria-guidance"},K));return tt(M.Fragment,null,tt(VR,{id:g},te&&ne),tt(VR,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},c&&!te&&ne))},lY=oY,k_=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],cY=new RegExp("["+k_.map(function(t){return t.letters}).join("")+"]","g"),AM={};for(var J0=0;J0<k_.length;J0++)for(var Z0=k_[J0],eb=0;eb<Z0.letters.length;eb++)AM[Z0.letters[eb]]=Z0.base;var RM=function(e){return e.replace(cY,function(n){return AM[n]})},uY=rY(RM),jR=function(e){return e.replace(/^\s+|\s+$/g,"")},fY=function(e){return"".concat(e.label," ").concat(e.value)},hY=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=Ze({ignoreCase:!0,ignoreAccents:!0,stringify:fY,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,c=i.ignoreAccents,d=i.stringify,p=i.trim,g=i.matchFrom,b=p?jR(r):r,E=p?jR(d(n)):d(n);return o&&(b=b.toLowerCase(),E=E.toLowerCase()),c&&(b=uY(b),E=RM(E)),g==="start"?E.substr(0,b.length)===b:E.indexOf(b)>-1}},dY=["innerRef"];function pY(t){var e=t.innerRef,n=Ma(t,dY),r=FW(n,"onExited","in","enter","exit","appear");return tt("input",ct({ref:e},r,{css:lE({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var gY=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function mY(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,o=t.onTopLeave,c=M.useRef(!1),d=M.useRef(!1),p=M.useRef(0),g=M.useRef(null),b=M.useCallback(function(k,V){if(g.current!==null){var X=g.current,q=X.scrollTop,H=X.scrollHeight,W=X.clientHeight,$=g.current,F=V>0,D=H-W-q,L=!1;D>V&&c.current&&(r&&r(k),c.current=!1),F&&d.current&&(o&&o(k),d.current=!1),F&&V>D?(n&&!c.current&&n(k),$.scrollTop=H,L=!0,c.current=!0):!F&&-V>q&&(i&&!d.current&&i(k),$.scrollTop=0,L=!0,d.current=!0),L&&gY(k)}},[n,r,i,o]),E=M.useCallback(function(k){b(k,k.deltaY)},[b]),C=M.useCallback(function(k){p.current=k.changedTouches[0].clientY},[]),O=M.useCallback(function(k){var V=p.current-k.changedTouches[0].clientY;b(k,V)},[b]),x=M.useCallback(function(k){if(k){var V=UW?{passive:!1}:!1;k.addEventListener("wheel",E,V),k.addEventListener("touchstart",C,V),k.addEventListener("touchmove",O,V)}},[O,C,E]),N=M.useCallback(function(k){k&&(k.removeEventListener("wheel",E,!1),k.removeEventListener("touchstart",C,!1),k.removeEventListener("touchmove",O,!1))},[O,C,E]);return M.useEffect(function(){if(e){var k=g.current;return x(k),function(){N(k)}}},[e,x,N]),function(k){g.current=k}}var FR=["boxSizing","height","overflow","paddingRight","position"],BR={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function zR(t){t.cancelable&&t.preventDefault()}function HR(t){t.stopPropagation()}function qR(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function $R(){return"ontouchstart"in window||navigator.maxTouchPoints}var GR=!!(typeof window<"u"&&window.document&&window.document.createElement),Kh=0,Ku={capture:!1,passive:!1};function yY(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=M.useRef({}),o=M.useRef(null),c=M.useCallback(function(p){if(GR){var g=document.body,b=g&&g.style;if(r&&FR.forEach(function(x){var N=b&&b[x];i.current[x]=N}),r&&Kh<1){var E=parseInt(i.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,O=window.innerWidth-C+E||0;Object.keys(BR).forEach(function(x){var N=BR[x];b&&(b[x]=N)}),b&&(b.paddingRight="".concat(O,"px"))}g&&$R()&&(g.addEventListener("touchmove",zR,Ku),p&&(p.addEventListener("touchstart",qR,Ku),p.addEventListener("touchmove",HR,Ku))),Kh+=1}},[r]),d=M.useCallback(function(p){if(GR){var g=document.body,b=g&&g.style;Kh=Math.max(Kh-1,0),r&&Kh<1&&FR.forEach(function(E){var C=i.current[E];b&&(b[E]=C)}),g&&$R()&&(g.removeEventListener("touchmove",zR,Ku),p&&(p.removeEventListener("touchstart",qR,Ku),p.removeEventListener("touchmove",HR,Ku)))}},[r]);return M.useEffect(function(){if(e){var p=o.current;return c(p),function(){d(p)}}},[e,c,d]),function(p){o.current=p}}var vY=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},bY={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function _Y(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,o=t.onBottomArrive,c=t.onBottomLeave,d=t.onTopArrive,p=t.onTopLeave,g=mY({isEnabled:i,onBottomArrive:o,onBottomLeave:c,onTopArrive:d,onTopLeave:p}),b=yY({isEnabled:n}),E=function(O){g(O),b(O)};return tt(M.Fragment,null,n&&tt("div",{onClick:vY,css:bY}),e(E))}var SY={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},EY=function(e){var n=e.name,r=e.onFocus;return tt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:SY,value:"",onChange:function(){}})},wY=EY;function dE(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function TY(){return dE(/^iPhone/i)}function OM(){return dE(/^Mac/i)}function CY(){return dE(/^iPad/i)||OM()&&navigator.maxTouchPoints>1}function AY(){return TY()||CY()}function RY(){return OM()||AY()}var OY=function(e){return e.label},IY=function(e){return e.label},xY=function(e){return e.value},PY=function(e){return!!e.isDisabled},MY={clearIndicator:pK,container:rK,control:SK,dropdownIndicator:hK,group:CK,groupHeading:RK,indicatorsContainer:oK,indicatorSeparator:mK,input:PK,loadingIndicator:bK,loadingMessage:JW,menu:$W,menuList:YW,menuPortal:tK,multiValue:LK,multiValueLabel:UK,multiValueRemove:VK,noOptionsMessage:XW,option:qK,placeholder:WK,singleValue:QK,valueContainer:sK},kY={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},DY=4,IM=4,NY=38,LY=IM*2,UY={baseUnit:IM,controlHeight:NY,menuGutter:LY},tb={borderRadius:DY,colors:kY,spacing:UY},VY={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:NR(),captureMenuScroll:!NR(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:hY(),formatGroupLabel:OY,getOptionLabel:IY,getOptionValue:xY,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:PY,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!NW(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function WR(t,e,n,r){var i=MM(t,e,n),o=kM(t,e,n),c=PM(t,e),d=ty(t,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:c,value:d,index:r}}function hm(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(c,d){return WR(t,c,e,d)}).filter(function(c){return YR(t,c)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=WR(t,n,e,r);return YR(t,o)?o:void 0}).filter(VW)}function xM(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,rE(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function KR(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,rE(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function jY(t,e){return xM(hm(t,e))}function YR(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,o=e.isSelected,c=e.label,d=e.value;return(!NM(t)||!o)&&DM(t,{label:c,value:d,data:i},r)}function FY(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var o=e.indexOf(n);if(o>-1)return n;if(i<e.length)return e[i]}return null}function BY(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var nb=function(e,n){var r,i=(r=e.find(function(o){return o.data===n}))===null||r===void 0?void 0:r.id;return i||null},PM=function(e,n){return e.getOptionLabel(n)},ty=function(e,n){return e.getOptionValue(n)};function MM(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function kM(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=ty(t,e);return n.some(function(i){return ty(t,i)===r})}function DM(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var NM=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},zY=1,LM=function(t){rG(n,t);var e=aG(n);function n(r){var i;if(tG(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(p){i.controlRef=p},i.focusedOptionRef=null,i.getFocusedOptionRef=function(p){i.focusedOptionRef=p},i.menuListRef=null,i.getMenuListRef=function(p){i.menuListRef=p},i.inputRef=null,i.getInputRef=function(p){i.inputRef=p},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(p,g){var b=i.props,E=b.onChange,C=b.name;g.name=C,i.ariaOnChange(p,g),E(p,g)},i.setValue=function(p,g,b){var E=i.props,C=E.closeMenuOnSelect,O=E.isMulti,x=E.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:x}),C&&(i.setState({inputIsHiddenAfterUpdate:!O}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(p,{action:g,option:b})},i.selectOption=function(p){var g=i.props,b=g.blurInputOnSelect,E=g.isMulti,C=g.name,O=i.state.selectValue,x=E&&i.isOptionSelected(p,O),N=i.isOptionDisabled(p,O);if(x){var k=i.getOptionValue(p);i.setValue(O.filter(function(V){return i.getOptionValue(V)!==k}),"deselect-option",p)}else if(!N)E?i.setValue([].concat(rE(O),[p]),"select-option",p):i.setValue(p,"select-option");else{i.ariaOnChange(p,{action:"select-option",option:p,name:C});return}b&&i.blurInput()},i.removeValue=function(p){var g=i.props.isMulti,b=i.state.selectValue,E=i.getOptionValue(p),C=b.filter(function(x){return i.getOptionValue(x)!==E}),O=Vg(g,C,C[0]||null);i.onChange(O,{action:"remove-value",removedValue:p}),i.focusInput()},i.clearValue=function(){var p=i.state.selectValue;i.onChange(Vg(i.props.isMulti,[],null),{action:"clear",removedValues:p})},i.popValue=function(){var p=i.props.isMulti,g=i.state.selectValue,b=g[g.length-1],E=g.slice(0,g.length-1),C=Vg(p,E,E[0]||null);b&&i.onChange(C,{action:"pop-value",removedValue:b})},i.getFocusedOptionId=function(p){return nb(i.state.focusableOptionsWithIds,p)},i.getFocusableOptionsWithIds=function(){return KR(hm(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var p=arguments.length,g=new Array(p),b=0;b<p;b++)g[b]=arguments[b];return IW.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(p){return PM(i.props,p)},i.getOptionValue=function(p){return ty(i.props,p)},i.getStyles=function(p,g){var b=i.props.unstyled,E=MY[p](g,b);E.boxSizing="border-box";var C=i.props.styles[p];return C?C(E,g):E},i.getClassNames=function(p,g){var b,E;return(b=(E=i.props.classNames)[p])===null||b===void 0?void 0:b.call(E,g)},i.getElementId=function(p){return"".concat(i.state.instancePrefix,"-").concat(p)},i.getComponents=function(){return eY(i.props)},i.buildCategorizedOptions=function(){return hm(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return xM(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(p,g){i.setState({ariaSelection:Ze({value:p},g)})},i.onMenuMouseDown=function(p){p.button===0&&(p.stopPropagation(),p.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(p){i.blockOptionHover=!1},i.onControlMouseDown=function(p){if(!p.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&p.preventDefault()}},i.onDropdownIndicatorMouseDown=function(p){if(!(p&&p.type==="mousedown"&&p.button!==0)&&!i.props.isDisabled){var g=i.props,b=g.isMulti,E=g.menuIsOpen;i.focusInput(),E?(i.setState({inputIsHiddenAfterUpdate:!b}),i.onMenuClose()):i.openMenu("first"),p.preventDefault()}},i.onClearIndicatorMouseDown=function(p){p&&p.type==="mousedown"&&p.button!==0||(i.clearValue(),p.preventDefault(),i.openAfterFocus=!1,p.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(p){typeof i.props.closeMenuOnScroll=="boolean"?p.target instanceof HTMLElement&&qy(p.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(p)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(p){var g=p.touches,b=g&&g.item(0);b&&(i.initialTouchX=b.clientX,i.initialTouchY=b.clientY,i.userIsDragging=!1)},i.onTouchMove=function(p){var g=p.touches,b=g&&g.item(0);if(b){var E=Math.abs(b.clientX-i.initialTouchX),C=Math.abs(b.clientY-i.initialTouchY),O=5;i.userIsDragging=E>O||C>O}},i.onTouchEnd=function(p){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(p.target)&&i.menuListRef&&!i.menuListRef.contains(p.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(p){i.userIsDragging||i.onControlMouseDown(p)},i.onClearIndicatorTouchEnd=function(p){i.userIsDragging||i.onClearIndicatorMouseDown(p)},i.onDropdownIndicatorTouchEnd=function(p){i.userIsDragging||i.onDropdownIndicatorMouseDown(p)},i.handleInputChange=function(p){var g=i.props.inputValue,b=p.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(b,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(p){i.props.onFocus&&i.props.onFocus(p),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(p){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(p),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(p){if(!(i.blockOptionHover||i.state.focusedOption===p)){var g=i.getFocusableOptions(),b=g.indexOf(p);i.setState({focusedOption:p,focusedOptionId:b>-1?i.getFocusedOptionId(p):null})}},i.shouldHideSelectedOptions=function(){return NM(i.props)},i.onValueInputFocus=function(p){p.preventDefault(),p.stopPropagation(),i.focus()},i.onKeyDown=function(p){var g=i.props,b=g.isMulti,E=g.backspaceRemovesValue,C=g.escapeClearsValue,O=g.inputValue,x=g.isClearable,N=g.isDisabled,k=g.menuIsOpen,V=g.onKeyDown,X=g.tabSelectsValue,q=g.openMenuOnFocus,H=i.state,W=H.focusedOption,$=H.focusedValue,F=H.selectValue;if(!N&&!(typeof V=="function"&&(V(p),p.defaultPrevented))){switch(i.blockOptionHover=!0,p.key){case"ArrowLeft":if(!b||O)return;i.focusValue("previous");break;case"ArrowRight":if(!b||O)return;i.focusValue("next");break;case"Delete":case"Backspace":if(O)return;if($)i.removeValue($);else{if(!E)return;b?i.popValue():x&&i.clearValue()}break;case"Tab":if(i.isComposing||p.shiftKey||!k||!X||!W||q&&i.isOptionSelected(W,F))return;i.selectOption(W);break;case"Enter":if(p.keyCode===229)break;if(k){if(!W||i.isComposing)return;i.selectOption(W);break}return;case"Escape":k?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:O}),i.onMenuClose()):x&&C&&i.clearValue();break;case" ":if(O)return;if(!k){i.openMenu("first");break}if(!W)return;i.selectOption(W);break;case"ArrowUp":k?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":k?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!k)return;i.focusOption("pageup");break;case"PageDown":if(!k)return;i.focusOption("pagedown");break;case"Home":if(!k)return;i.focusOption("first");break;case"End":if(!k)return;i.focusOption("last");break;default:return}p.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++zY),i.state.selectValue=kR(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),c=i.buildFocusableOptions(),d=c.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=c[d],i.state.focusedOptionId=nb(o,c[d])}return i}return nG(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&DR(this.menuListRef,this.focusedOptionRef),RY()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,d=o.menuIsOpen,p=this.state.isFocused;(p&&!c&&i.isDisabled||p&&d&&!i.menuIsOpen)&&this.focusInput(),p&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!p&&!c&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(DR(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,d=c.selectValue,p=c.isFocused,g=this.buildFocusableOptions(),b=i==="first"?0:g.length-1;if(!this.props.isMulti){var E=g.indexOf(d[0]);E>-1&&(b=E)}this.scrollToFocusedOptionOnUpdate=!(p&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[b],focusedOptionId:this.getFocusedOptionId(g[b])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,d=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var p=c.indexOf(d);d||(p=-1);var g=c.length-1,b=-1;if(c.length){switch(i){case"previous":p===0?b=0:p===-1?b=g:b=p-1;break;case"next":p>-1&&p<g&&(b=p+1);break}this.setState({inputIsHidden:b!==-1,focusedValue:c[b]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var p=0,g=d.indexOf(c);c||(g=-1),i==="up"?p=g>0?g-1:d.length-1:i==="down"?p=(g+1)%d.length:i==="pageup"?(p=g-o,p<0&&(p=0)):i==="pagedown"?(p=g+o,p>d.length-1&&(p=d.length-1)):i==="last"&&(p=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[p],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[p])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(tb):Ze(Ze({},tb),this.props.theme):tb}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,d=this.getClassNames,p=this.getValue,g=this.selectOption,b=this.setValue,E=this.props,C=E.isMulti,O=E.isRtl,x=E.options,N=this.hasValue();return{clearValue:i,cx:o,getStyles:c,getClassNames:d,getValue:p,hasValue:N,isMulti:C,isRtl:O,options:x,selectOption:g,selectProps:E,setValue:b,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return MM(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return kM(this.props,i,o)}},{key:"filterOption",value:function(i,o){return DM(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:d})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,d=i.inputId,p=i.inputValue,g=i.tabIndex,b=i.form,E=i.menuIsOpen,C=i.required,O=this.getComponents(),x=O.Input,N=this.state,k=N.inputIsHidden,V=N.ariaSelection,X=this.commonProps,q=d||this.getElementId("input"),H=Ze(Ze(Ze({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":C,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(V==null?void 0:V.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?M.createElement(x,ct({},X,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:q,innerRef:this.getInputRef,isDisabled:o,isHidden:k,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:b,type:"text",value:p},H)):M.createElement(pY,ct({id:q,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Zm,onFocus:this.onInputFocus,disabled:o,tabIndex:g,inputMode:"none",form:b,value:""},H))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,d=o.MultiValueContainer,p=o.MultiValueLabel,g=o.MultiValueRemove,b=o.SingleValue,E=o.Placeholder,C=this.commonProps,O=this.props,x=O.controlShouldRenderValue,N=O.isDisabled,k=O.isMulti,V=O.inputValue,X=O.placeholder,q=this.state,H=q.selectValue,W=q.focusedValue,$=q.isFocused;if(!this.hasValue()||!x)return V?null:M.createElement(E,ct({},C,{key:"placeholder",isDisabled:N,isFocused:$,innerProps:{id:this.getElementId("placeholder")}}),X);if(k)return H.map(function(D,L){var G=D===W,T="".concat(i.getOptionLabel(D),"-").concat(i.getOptionValue(D));return M.createElement(c,ct({},C,{components:{Container:d,Label:p,Remove:g},isFocused:G,isDisabled:N,key:T,index:L,removeProps:{onClick:function(){return i.removeValue(D)},onTouchEnd:function(){return i.removeValue(D)},onMouseDown:function(K){K.preventDefault()}},data:D}),i.formatOptionLabel(D,"value"))});if(V)return null;var F=H[0];return M.createElement(b,ct({},C,{data:F,isDisabled:N}),this.formatOptionLabel(F,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,c=this.commonProps,d=this.props,p=d.isDisabled,g=d.isLoading,b=this.state.isFocused;if(!this.isClearable()||!o||p||!this.hasValue()||g)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(o,ct({},c,{innerProps:E,isFocused:b}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,c=this.commonProps,d=this.props,p=d.isDisabled,g=d.isLoading,b=this.state.isFocused;if(!o||!g)return null;var E={"aria-hidden":"true"};return M.createElement(o,ct({},c,{innerProps:E,isDisabled:p,isFocused:b}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var d=this.commonProps,p=this.props.isDisabled,g=this.state.isFocused;return M.createElement(c,ct({},d,{isDisabled:p,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var c=this.commonProps,d=this.props.isDisabled,p=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(o,ct({},c,{innerProps:g,isDisabled:d,isFocused:p}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,d=o.GroupHeading,p=o.Menu,g=o.MenuList,b=o.MenuPortal,E=o.LoadingMessage,C=o.NoOptionsMessage,O=o.Option,x=this.commonProps,N=this.state.focusedOption,k=this.props,V=k.captureMenuScroll,X=k.inputValue,q=k.isLoading,H=k.loadingMessage,W=k.minMenuHeight,$=k.maxMenuHeight,F=k.menuIsOpen,D=k.menuPlacement,L=k.menuPosition,G=k.menuPortalTarget,T=k.menuShouldBlockScroll,te=k.menuShouldScrollIntoView,K=k.noOptionsMessage,ne=k.onMenuScrollToTop,Pe=k.onMenuScrollToBottom;if(!F)return null;var J=function(ve,ke){var qe=ve.type,Le=ve.data,Ot=ve.isDisabled,gt=ve.isSelected,An=ve.label,Gt=ve.value,_n=N===Le,Rn=Ot?void 0:function(){return i.onOptionHover(Le)},Lr=Ot?void 0:function(){return i.selectOption(Le)},Sn="".concat(i.getElementId("option"),"-").concat(ke),Ur={id:Sn,onClick:Lr,onMouseMove:Rn,onMouseOver:Rn,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:gt};return M.createElement(O,ct({},x,{innerProps:Ur,data:Le,isDisabled:Ot,isSelected:gt,key:Sn,label:An,type:qe,value:Gt,isFocused:_n,innerRef:_n?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(ve.data,"menu"))},oe;if(this.hasOptions())oe=this.getCategorizedOptions().map(function(ye){if(ye.type==="group"){var ve=ye.data,ke=ye.options,qe=ye.index,Le="".concat(i.getElementId("group"),"-").concat(qe),Ot="".concat(Le,"-heading");return M.createElement(c,ct({},x,{key:Le,data:ve,options:ke,Heading:d,headingProps:{id:Ot,data:ye.data},label:i.formatGroupLabel(ye.data)}),ye.options.map(function(gt){return J(gt,"".concat(qe,"-").concat(gt.index))}))}else if(ye.type==="option")return J(ye,"".concat(ye.index))});else if(q){var Ae=H({inputValue:X});if(Ae===null)return null;oe=M.createElement(E,x,Ae)}else{var Ue=K({inputValue:X});if(Ue===null)return null;oe=M.createElement(C,x,Ue)}var Q={minMenuHeight:W,maxMenuHeight:$,menuPlacement:D,menuPosition:L,menuShouldScrollIntoView:te},ge=M.createElement(GW,ct({},x,Q),function(ye){var ve=ye.ref,ke=ye.placerProps,qe=ke.placement,Le=ke.maxHeight;return M.createElement(p,ct({},x,Q,{innerRef:ve,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:q,placement:qe}),M.createElement(_Y,{captureEnabled:V,onTopArrive:ne,onBottomArrive:Pe,lockEnabled:T},function(Ot){return M.createElement(g,ct({},x,{innerRef:function(An){i.getMenuListRef(An),Ot(An)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:i.getElementId("listbox")},isLoading:q,maxHeight:Le,focusedOption:N}),oe)}))});return G||L==="fixed"?M.createElement(b,ct({},x,{appendTo:G,controlElement:this.controlRef,menuPlacement:D,menuPosition:L}),ge):ge}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,d=o.isDisabled,p=o.isMulti,g=o.name,b=o.required,E=this.state.selectValue;if(b&&!this.hasValue()&&!d)return M.createElement(wY,{name:g,onFocus:this.onValueInputFocus});if(!(!g||d))if(p)if(c){var C=E.map(function(N){return i.getOptionValue(N)}).join(c);return M.createElement("input",{name:g,type:"hidden",value:C})}else{var O=E.length>0?E.map(function(N,k){return M.createElement("input",{key:"i-".concat(k),name:g,type:"hidden",value:i.getOptionValue(N)})}):M.createElement("input",{name:g,type:"hidden",value:""});return M.createElement("div",null,O)}else{var x=E[0]?this.getOptionValue(E[0]):"";return M.createElement("input",{name:g,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,d=o.focusedOption,p=o.focusedValue,g=o.isFocused,b=o.selectValue,E=this.getFocusableOptions();return M.createElement(lY,ct({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:d,focusedValue:p,isFocused:g,selectValue:b,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,d=i.SelectContainer,p=i.ValueContainer,g=this.props,b=g.className,E=g.id,C=g.isDisabled,O=g.menuIsOpen,x=this.state.isFocused,N=this.commonProps=this.getCommonProps();return M.createElement(d,ct({},N,{className:b,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:C,isFocused:x}),this.renderLiveRegion(),M.createElement(o,ct({},N,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:C,isFocused:x,menuIsOpen:O}),M.createElement(p,ct({},N,{isDisabled:C}),this.renderPlaceholderOrValue(),this.renderInput()),M.createElement(c,ct({},N,{isDisabled:C}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,d=o.clearFocusValueOnUpdate,p=o.inputIsHiddenAfterUpdate,g=o.ariaSelection,b=o.isFocused,E=o.prevWasFocused,C=o.instancePrefix,O=i.options,x=i.value,N=i.menuIsOpen,k=i.inputValue,V=i.isMulti,X=kR(x),q={};if(c&&(x!==c.value||O!==c.options||N!==c.menuIsOpen||k!==c.inputValue)){var H=N?jY(i,X):[],W=N?KR(hm(i,X),"".concat(C,"-option")):[],$=d?FY(o,X):null,F=BY(o,H),D=nb(W,F);q={selectValue:X,focusedOption:F,focusedOptionId:D,focusableOptionsWithIds:W,focusedValue:$,clearFocusValueOnUpdate:!1}}var L=p!=null&&i!==c?{inputIsHidden:p,inputIsHiddenAfterUpdate:void 0}:{},G=g,T=b&&E;return b&&!T&&(G={value:Vg(V,X,X[0]||null),options:X,action:"initial-input-focus"},T=!E),(g==null?void 0:g.action)==="initial-input-focus"&&(G=null),Ze(Ze(Ze({},q),L),{},{prevProps:i,ariaSelection:G,prevWasFocused:T})}}]),n}(M.Component);LM.defaultProps=VY;var HY=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function qY(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,o=t.defaultValue,c=o===void 0?null:o,d=t.inputValue,p=t.menuIsOpen,g=t.onChange,b=t.onInputChange,E=t.onMenuClose,C=t.onMenuOpen,O=t.value,x=Ma(t,HY),N=M.useState(d!==void 0?d:n),k=_r(N,2),V=k[0],X=k[1],q=M.useState(p!==void 0?p:i),H=_r(q,2),W=H[0],$=H[1],F=M.useState(O!==void 0?O:c),D=_r(F,2),L=D[0],G=D[1],T=M.useCallback(function(Ae,Ue){typeof g=="function"&&g(Ae,Ue),G(Ae)},[g]),te=M.useCallback(function(Ae,Ue){var Q;typeof b=="function"&&(Q=b(Ae,Ue)),X(Q!==void 0?Q:Ae)},[b]),K=M.useCallback(function(){typeof C=="function"&&C(),$(!0)},[C]),ne=M.useCallback(function(){typeof E=="function"&&E(),$(!1)},[E]),Pe=d!==void 0?d:V,J=p!==void 0?p:W,oe=O!==void 0?O:L;return Ze(Ze({},x),{},{inputValue:Pe,menuIsOpen:J,onChange:T,onInputChange:te,onMenuClose:ne,onMenuOpen:K,value:oe})}var $Y=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function GY(t){var e=t.defaultOptions,n=e===void 0?!1:e,r=t.cacheOptions,i=r===void 0?!1:r,o=t.loadOptions;t.options;var c=t.isLoading,d=c===void 0?!1:c,p=t.onInputChange,g=t.filterOption,b=g===void 0?null:g,E=Ma(t,$Y),C=E.inputValue,O=M.useRef(void 0),x=M.useRef(!1),N=M.useState(Array.isArray(n)?n:void 0),k=_r(N,2),V=k[0],X=k[1],q=M.useState(typeof C<"u"?C:""),H=_r(q,2),W=H[0],$=H[1],F=M.useState(n===!0),D=_r(F,2),L=D[0],G=D[1],T=M.useState(void 0),te=_r(T,2),K=te[0],ne=te[1],Pe=M.useState([]),J=_r(Pe,2),oe=J[0],Ae=J[1],Ue=M.useState(!1),Q=_r(Ue,2),ge=Q[0],ye=Q[1],ve=M.useState({}),ke=_r(ve,2),qe=ke[0],Le=ke[1],Ot=M.useState(void 0),gt=_r(Ot,2),An=gt[0],Gt=gt[1],_n=M.useState(void 0),Rn=_r(_n,2),Lr=Rn[0],Sn=Rn[1];i!==Lr&&(Le({}),Sn(i)),n!==An&&(X(Array.isArray(n)?n:void 0),Gt(n)),M.useEffect(function(){return x.current=!0,function(){x.current=!1}},[]);var Ur=M.useCallback(function(Er,er){if(!o)return er();var un=o(Er,er);un&&typeof un.then=="function"&&un.then(er,function(){return er()})},[o]);M.useEffect(function(){n===!0&&Ur(W,function(Er){x.current&&(X(Er||[]),G(!!O.current))})},[]);var ms=M.useCallback(function(Er,er){var un=xW(Er,er,p);if(!un){O.current=void 0,$(""),ne(""),Ae([]),G(!1),ye(!1);return}if(i&&qe[un])$(un),ne(un),Ae(qe[un]),G(!1),ye(!1);else{var Tt=O.current={};$(un),G(!0),ye(!K),Ur(un,function(hr){x&&Tt===O.current&&(O.current=void 0,G(!1),ne(un),Ae(hr||[]),ye(!1),Le(hr?Ze(Ze({},qe),{},of({},un,hr)):qe))})}},[i,Ur,K,qe,p]),Ln=ge?[]:W&&K?oe:V||[];return Ze(Ze({},E),{},{options:Ln,isLoading:L||d,onInputChange:ms,filterOption:b})}var WY=M.forwardRef(function(t,e){var n=GY(t),r=qY(n);return M.createElement(LM,ct({ref:e},r))}),KY=WY;const YY="_UsersAutocomplete_1xkee_1",QY={UsersAutocomplete:YY},XY=t=>{const{onChangeSelectedUsers:e,selectedOptions:n}=t,r=fr(Dr.selectors.selectPublicUsers),i=M.useCallback(async(o,c)=>{const d=r.filter(p=>`${p.username}#${p.tag}`.toLowerCase().includes(o.toLowerCase())).map(p=>({value:p.uid,label:`${p.username}#${p.tag}`}));c(d)},[r]);return j.jsx("div",{className:QY.UsersAutocomplete,children:j.jsx(KY,{loadOptions:i,isMulti:!0,cacheOptions:!0,defaultOptions:!0,onChange:e,defaultValue:n})})},JY=M.memo(XY),ZY="_HeaderBar_jksty_1",eQ="_Header_jksty_1",tQ="_MenuOptionsExtraSmall_jksty_20",nQ="_MenuOptionsSmallOrBigger_jksty_29",rQ="_FlexVerticalCenterWithGap_jksty_41",iQ="_MenuOptionsContainer_jksty_47",sQ="_DivisorTop_jksty_58",aQ="_ContentContainer_jksty_69",ao={HeaderBar:ZY,Header:eQ,MenuOptionsExtraSmall:tQ,MenuOptionsSmallOrBigger:nQ,FlexVerticalCenterWithGap:rQ,MenuOptionsContainer:iQ,DivisorTop:sQ,ContentContainer:aQ},oQ=()=>{const{t}=Nn(),e=qs(),n=fr(Dr.selectors.isLoggedIn),r=fr(Dr.selectors.selectLoggedUser),[i,o]=M.useState(!1),c=M.useCallback(d=>{d.preventDefault(),e(Dr.actions.signOutUser())},[e]);return j.jsxs("div",{className:ao.HeaderBar,children:[j.jsxs("div",{className:ao.Header,children:[j.jsx(Bq,{}),j.jsx("h1",{children:"Melo Chart"}),n?j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:ao.MenuOptionsSmallOrBigger,children:[j.jsx("ul",{children:j.jsx("li",{children:j.jsx(w_,{to:{pathname:""},children:t("My songs")})})}),j.jsxs("div",{className:ao.FlexVerticalCenterWithGap,children:[j.jsx(T_,{username:r.username,tag:r.tag}),j.jsx(mn,{category:kn.DANGER,textOnly:!0,onClick:c,children:t("Sign Out")})]})]}),j.jsx("div",{className:ao.MenuOptionsExtraSmall,children:j.jsx(mn,{onClick:()=>o(d=>!d),children:j.jsx(Oq,{})})})]}):j.jsx(j.Fragment,{})]}),n&&i?j.jsxs("div",{className:ao.MenuOptionsContainer,children:[j.jsxs("ul",{children:[j.jsx("li",{children:j.jsx(w_,{to:{pathname:""},children:t("My songs")})}),j.jsx("li",{className:ao.DivisorTop,children:j.jsx(mn,{category:kn.DANGER,textOnly:!0,onClick:c,children:t("Sign Out")})})]}),j.jsx("div",{className:ao.DivisorTop,children:j.jsx(T_,{username:r.username,tag:r.tag})})]}):j.jsx(j.Fragment,{})]})},lQ=t=>{const{children:e}=t;return j.jsx("div",{className:ao.ContentContainer,children:e})},cQ=()=>j.jsxs(j.Fragment,{children:[j.jsx(ez,{}),j.jsx(oQ,{}),j.jsx(lQ,{children:j.jsx(nU,{})})]}),uQ=M.memo(cQ),fQ="_Chart_m1uz3_1",hQ={Chart:fQ},dQ=()=>{const t=M.useRef(null),e=M.useRef(null),[n]=nS(),r=n.get("id")||null,i=fr(Sr.selectors.selectSongById(r)),o=M.useCallback(p=>{var g;(g=t.current)==null||g.addWordsAsNotes(p)},[]),c=M.useCallback(()=>{var E;if(!i)return!1;const p=JSON.stringify(i.notes),g=((E=t.current)==null?void 0:E.getNotes())||[],b=JSON.stringify(g);return p!=b},[i,t]),d=K6(c);return j.jsxs("div",{className:hQ.Chart,children:[i?j.jsx(B$,{notesFnsRef:t,generateChartDialogFnsRef:e,song:i}):j.jsx(RI,{to:"/"}),j.jsx(UB,{show:d.state==="blocked",onConfirm:()=>d.proceed(),onCancel:()=>d.reset()}),j.jsx(PB,{generateChartDialogFnsRef:e,onAddWordsAsNotes:o,songId:i==null?void 0:i.id})]})},pQ=M.memo(dQ),gQ="_Home_1ni6n_1",mQ={Home:gQ},yQ=()=>j.jsxs("div",{className:mQ.Home,children:[j.jsx(CB,{}),j.jsx(Q$,{})]}),vQ=M.memo(yQ),bQ="_LoginContainer_162n2_1",_Q="_Login_162n2_1",QR={LoginContainer:bQ,Login:_Q},SQ=()=>{const{t}=Nn(),e=qs(),n=M.useRef(null),[r,i]=M.useState(!0),[o,c]=M.useState(""),[d,p]=M.useState(""),[g,b]=M.useState(""),E=M.useCallback(()=>{const x=n.current===document.activeElement;return o||x?o:d.split("@")[0]||""},[d,o]),C=M.useCallback(x=>{x.preventDefault(),e(Dr.actions.signInUser({email:d,password:g}))},[e,d,g]),O=M.useCallback(x=>{x.preventDefault(),e(Dr.actions.signUpUser({username:E(),email:d,password:g}))},[e,d,E,g]);return j.jsxs("div",{className:QR.LoginContainer,children:[j.jsxs("form",{className:QR.Login,onSubmit:r?C:O,children:[j.jsx("h2",{children:t(r?"Login":"Create an Account")}),j.jsx(Ra,{label:t("Email"),field:j.jsx(ho,{type:"text",name:"email",value:d,onChange:x=>p(x.target.value)})}),j.jsx(Ra,{label:t("Password"),field:j.jsx(ho,{type:"password",name:"password",value:g,onChange:x=>b(x.target.value)})}),r?j.jsx(j.Fragment,{}):j.jsx(Ra,{label:t("Username"),field:j.jsx(ho,{ref:n,type:"text",name:"username",value:E(),onChange:x=>c(x.target.value)})}),j.jsx(mn,{category:kn.SUCCESS,icon:r?j.jsx(qq,{}):j.jsx(Gq,{}),children:t(r?"Sign in":"Sign up")})]}),r?j.jsx(mn,{category:kn.PRIMARY,textOnly:!0,onClick:()=>i(!1),children:t("Don't have an account? Sign up")}):j.jsx(mn,{category:kn.PRIMARY,textOnly:!0,onClick:()=>i(!0),children:t("Go back")})]})},EQ=M.memo(SQ),wQ=t=>{const{children:e}=t,n=kf(),[r]=nS(),i=fr(Dr.selectors.isLoggedIn);return M.useEffect(()=>{if(i){const o=r.get("url")||"/";n(o,{replace:!0})}},[i,n,r]),e},XR=t=>{const{children:e}=t,n=kf(),r=xa(),[i]=nS(),o=fr(Dr.selectors.isLoggedIn),c=fr(Dr.selectors.isLoginVerificationComplete);return M.useEffect(()=>{if(!o){const d=r.pathname+r.search,p=c?"":`?url=${d}`;n(`/login${p}`,{replace:!0})}if(o){const d=i.get("url")||null;d&&n(d,{replace:!0})}},[o,c,r.pathname,r.search,n,i]),e},TQ=OU([{path:"/",element:j.jsx(uQ,{}),children:[{index:!0,element:j.jsx(XR,{children:j.jsx(vQ,{})})},{path:"login",element:j.jsx(wQ,{children:j.jsx(EQ,{})})},{path:"chart",element:j.jsx(XR,{children:j.jsx(pQ,{})})},{path:"*",element:j.jsx(RI,{to:"/"})}]}]),CQ=()=>j.jsx(Z6,{router:TQ}),AQ=()=>{const t=qs(),e=fr(Dr.selectors.selectLoggedUser);return M.useEffect(()=>{e!=null&&e.uid&&t(Sr.actions.loadSongs(e.uid))},[t,e==null?void 0:e.uid]),M.useEffect(()=>{vL(Wi.auth.auth,n=>{n&&(t(Dr.actions.loadUser(n)),t(Dr.actions.loadPublicUsers())),t(Dr.actions.completeFirebaseOnAuthStateChangedStatus())})},[t]),j.jsx(j.Fragment,{children:j.jsx(CQ,{})})},RQ=M.memo(AQ),JR={"user/signUpUser/rejected":{"auth/invalid-email":"Please, add a valid email","auth/email-already-in-use":"An account with that email already exists","auth/missing-password":"Please, insert a password with at least 6 characters","auth/weak-password":"Please, insert a password with at least 6 characters"},"user/signInUser/rejected":{"auth/invalid-email":"Invalid email and/or password","auth/missing-password":"Invalid email and/or password","auth/invalid-credential":"Invalid email and/or password"},"songs/saveSong/fulfilled":"Saved","songs/saveSong/rejected":{"permission-denied":"You don't have permission to save songs","auth/network-request-failed":"Network Error: Please, check your network connection"},"songs/addSong/rejected":{"permission-denied":"You don't have permission to add songs","auth/network-request-failed":"Network Error: Please, check your network connection"},"songs/deleteSong/rejected":{"permission-denied":"You don't have permission to delete songs","auth/network-request-failed":"Network Error: Please, check your network connection"}},{t:ZR}=Zn,OQ=t=>e=>n=>{var r;if(YI(n)){const i=(r=JR[n.type])==null?void 0:r[n.error.code],o=ZR(i)||n.error.message,c=e_(t.dispatch);console.error(n),c(F2(o))}else if(QI(n)){const i=JR[n.type],o=ZR(i);o&&e_(t.dispatch)(B2(o))}return e(n)},IQ=DV({reducer:{songs:Sr.reducer,users:Dr.reducer,growls:Cd.reducer},middleware:t=>t().concat(OQ)}),xQ=new Qk.Realtime({key:"R5lNsg.3UpEtw:VxjvDyNmQ3XZvqRur_fMM7K0OX3s86a98GW_cW3DNpg",clientId:"melo-chart-frontend"});pD.createRoot(document.getElementById("root")).render(j.jsx(M.StrictMode,{children:j.jsx(ID,{store:IQ,children:j.jsx(oD,{client:xQ,children:j.jsx(lD,{channelName:"melo-chart-song-updates",children:j.jsx(RQ,{})})})})}));export{yl as c,eO as g};
