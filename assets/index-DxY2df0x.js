var $D=Object.defineProperty;var GD=(t,e,n)=>e in t?$D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r0=(t,e,n)=>GD(t,typeof e!="symbol"?e+"":e,n);function WD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i0={exports:{}},Hh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function KD(){if(Mw)return Hh;Mw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:o}}return Hh.Fragment=e,Hh.jsx=n,Hh.jsxs=n,Hh}var Dw;function YD(){return Dw||(Dw=1,i0.exports=KD()),i0.exports}var F=YD(),Fg={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.14.0
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/var QD=Fg.exports,kw;function XD(){return kw||(kw=1,function(t,e){(function(n,r){t.exports=r()})(QD,()=>{var n={},r={exports:n},i=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,C=(u,f,m)=>f in u?i(u,f,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[f]=m,O=(u,f)=>{for(var m in f||(f={}))_.call(f,m)&&C(u,m,f[m]);if(g)for(var m of g(f))E.call(f,m)&&C(u,m,f[m]);return u},I=(u,f)=>o(u,d(f)),k=(u,f)=>{var m={};for(var b in u)_.call(u,b)&&f.indexOf(b)<0&&(m[b]=u[b]);if(u!=null&&g)for(var b of g(u))f.indexOf(b)<0&&E.call(u,b)&&(m[b]=u[b]);return m},D=(u,f)=>{for(var m in f)i(u,m,{get:f[m],enumerable:!0})},B=(u,f,m,b)=>{if(f&&typeof f=="object"||typeof f=="function")for(let w of p(f))!_.call(u,w)&&w!==m&&i(u,w,{get:()=>f[w],enumerable:!(b=c(f,w))||b.enumerable});return u},Y=u=>B(i({},"__esModule",{value:!0}),u),Q={};D(Q,{ErrorInfo:()=>ne,Realtime:()=>Ps,Rest:()=>mu,default:()=>Dp,makeProtocolMessageFromDeserialized:()=>Qf,msgpack:()=>Qa}),r.exports=Y(Q);var L=class{},G=typeof _l<"u"?_l:typeof window<"u"?window:self;function q(u,f){return`${u}`.padStart(f?3:2,"0")}function j(u){return L.Config.logTimestamps?function(f){const m=new Date;u(q(m.getHours())+":"+q(m.getMinutes())+":"+q(m.getSeconds())+"."+q(m.getMilliseconds(),1)+" "+f)}:function(f){u(f)}}var N=()=>{var u;let f,m;return typeof((u=G==null?void 0:G.console)==null?void 0:u.log)=="function"?(f=function(...b){console.log.apply(console,b)},m=console.warn?function(...b){console.warn.apply(console,b)}:f):f=m=function(){},[f,m].map(j)},U=class Qh{constructor(){this.deprecated=(f,m)=>{this.deprecationWarning(`${f} is deprecated and will be removed in a future version. ${m}`)},this.shouldLog=f=>f<=this.logLevel,this.setLog=(f,m)=>{f!==void 0&&(this.logLevel=f),m!==void 0&&(this.logHandler=this.logErrorHandler=m)},this.logLevel=Qh.defaultLogLevel,this.logHandler=Qh.defaultLogHandler,this.logErrorHandler=Qh.defaultLogErrorHandler}static initLogHandlers(){const[f,m]=N();this.defaultLogHandler=f,this.defaultLogErrorHandler=m,this.defaultLogger=new Qh}static logActionNoStrip(f,m,b,w){f.logAction(m,b,w)}logAction(f,m,b){this.shouldLog(f)&&(f===1?this.logErrorHandler:this.logHandler)("Ably: "+m+": "+b,f)}renamedClientOption(f,m){this.deprecationWarning(`The \`${f}\` client option has been renamed to \`${m}\`. Please update your code to use \`${m}\` instead. \`${f}\` will be removed in a future version.`)}renamedMethod(f,m,b){this.deprecationWarning(`\`${f}\`’s \`${m}\` method has been renamed to \`${b}\`. Please update your code to use \`${b}\` instead. \`${m}\` will be removed in a future version.`)}deprecationWarning(f){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${f}`,1)}};U.defaultLogLevel=1,U.LOG_NONE=0,U.LOG_ERROR=1,U.LOG_MAJOR=2,U.LOG_MINOR=3,U.LOG_MICRO=4,U.logAction=(u,f,m,b)=>{U.logActionNoStrip(u,f,m,b)};var $=U,T=$,ee={};D(ee,{Format:()=>ys,allSame:()=>Vr,allToLowerCase:()=>Ws,allToUpperCase:()=>ni,arrChooseN:()=>Bt,arrDeleteValue:()=>Ft,arrEquals:()=>Xi,arrIntersect:()=>mt,arrIntersectOb:()=>gn,arrPopRandomElement:()=>Un,arrWithoutValue:()=>mn,cheapRandStr:()=>Ri,containsValue:()=>Ue,copy:()=>Ce,createMissingPluginError:()=>Ji,dataSizeBytes:()=>ti,decodeBody:()=>Xt,encodeBody:()=>$t,ensureArray:()=>Le,forInOwnNonNullProperties:()=>wn,getBackoffCoefficient:()=>Oi,getGlobalObject:()=>Tr,getJitterCoefficient:()=>Ii,getRetryTime:()=>fi,inherits:()=>Be,inspectBody:()=>pr,inspectError:()=>Ct,intersect:()=>It,isEmpty:()=>pe,isErrorInfoOrPartialErrorInfo:()=>fn,isNil:()=>me,isObject:()=>K,keysArray:()=>On,matchDerivedChannel:()=>ri,mixin:()=>te,parseQueryString:()=>tr,prototypicalClone:()=>Ne,randomString:()=>vs,shallowClone:()=>ve,shallowEquals:()=>Qi,throwMissingPluginError:()=>sn,toBase64:()=>xi,toQueryString:()=>wr,valuesArray:()=>Ur,whenPromiseSettles:()=>rt,withTimeoutAsync:()=>hi});function W(u){let f="["+u.constructor.name;return u.message&&(f+=": "+u.message),u.statusCode&&(f+="; statusCode="+u.statusCode),u.code&&(f+="; code="+u.code),u.cause&&(f+="; cause="+Ct(u.cause)),u.href&&!(u.message&&u.message.indexOf("help.ably.io")>-1)&&(f+="; see "+u.href+" "),f+="]",f}var ne=class i_ extends Error{constructor(f,m,b,w){super(f),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,i_.prototype),this.code=m,this.statusCode=b,this.cause=w}toString(){return W(this)}static fromValues(f){const{message:m,code:b,statusCode:w}=f;if(typeof m!="string"||typeof b!="number"||typeof w!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+L.Config.inspect(f));const R=Object.assign(new i_(m,b,w),f);return R.code&&!R.href&&(R.href="https://help.ably.io/error/"+R.code),R}},Me=class s_ extends Error{constructor(f,m,b,w){super(f),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,s_.prototype),this.code=m,this.statusCode=b,this.cause=w}toString(){return W(this)}static fromValues(f){const{message:m,code:b,statusCode:w}=f;if(typeof m!="string"||!me(b)&&typeof b!="number"||!me(w)&&typeof w!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+L.Config.inspect(f));const R=Object.assign(new s_(m,b,w),f);return R.code&&!R.href&&(R.href="https://help.ably.io/error/"+R.code),R}};function ie(u){return Math.floor(Math.random()*u.length)}function te(u,...f){for(let m=0;m<f.length;m++){const b=f[m];if(!b)break;for(const w in b)Object.prototype.hasOwnProperty.call(b,w)&&(u[w]=b[w])}return u}function Ce(u){return te({},u)}function Le(u){return me(u)?[]:Array.isArray(u)?u:[u]}function K(u){return Object.prototype.toString.call(u)=="[object Object]"}function pe(u){for(const f in u)return!1;return!0}function me(u){return u==null}function ve(u){const f=new Object;for(const m in u)f[m]=u[m];return f}function Ne(u,f){class m{}m.prototype=u;const b=new m;return f&&te(b,f),b}var Be=function(u,f){if(L.Config.inherits){L.Config.inherits(u,f);return}u.super_=f,u.prototype=Ne(f.prototype,{constructor:u})};function Ue(u,f){for(const m in u)if(u[m]==f)return!0;return!1}function It(u,f){return Array.isArray(f)?mt(u,f):gn(u,f)}function mt(u,f){const m=[];for(let b=0;b<u.length;b++){const w=u[b];f.indexOf(w)!=-1&&m.push(w)}return m}function gn(u,f){const m=[];for(let b=0;b<u.length;b++){const w=u[b];w in f&&m.push(w)}return m}function Ft(u,f){const m=u.indexOf(f),b=m!=-1;return b&&u.splice(m,1),b}function mn(u,f){const m=u.slice();return Ft(m,f),m}function On(u,f){const m=[];for(const b in u)f&&!Object.prototype.hasOwnProperty.call(u,b)||m.push(b);return m}function Ur(u,f){const m=[];for(const b in u)f&&!Object.prototype.hasOwnProperty.call(u,b)||m.push(u[b]);return m}function wn(u,f){for(const m in u)Object.prototype.hasOwnProperty.call(u,m)&&u[m]&&f(m)}function Vr(u,f){if(u.length===0)return!0;const m=u[0][f];return u.every(function(b){return b[f]===m})}var ys=(u=>(u.msgpack="msgpack",u.json="json",u))(ys||{});function Un(u){return u.splice(ie(u),1)[0]}function wr(u){const f=[];if(u)for(const m in u)f.push(encodeURIComponent(m)+"="+encodeURIComponent(u[m]));return f.length?"?"+f.join("&"):""}function tr(u){let f;const m=/([^?&=]+)=?([^&]*)/g,b={};for(;f=m.exec(u);)b[decodeURIComponent(f[1])]=decodeURIComponent(f[2]);return b}function fn(u){return typeof u=="object"&&u!==null&&(u instanceof ne||u instanceof Me)}function Ct(u){var f,m;return u instanceof Error||((f=u==null?void 0:u.constructor)==null?void 0:f.name)==="ErrorInfo"||((m=u==null?void 0:u.constructor)==null?void 0:m.name)==="PartialErrorInfo"?u.toString():L.Config.inspect(u)}function pr(u){return L.BufferUtils.isBuffer(u)?u.toString():typeof u=="string"?u:L.Config.inspect(u)}function ti(u){if(L.BufferUtils.isBuffer(u))return L.BufferUtils.byteLength(u);if(typeof u=="string")return L.Config.stringByteSize(u);if(typeof u=="number")return 8;if(typeof u=="boolean")return 1;throw new Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof u}`)}function Ri(){return String(Math.random()).substr(2)}var vs=async u=>{const f=await L.Config.getRandomArrayBuffer(u);return L.BufferUtils.base64Encode(f)};function Bt(u,f){const m=Math.min(f,u.length),b=u.slice(),w=[];for(let R=0;R<m;R++)w.push(Un(b));return w}function rt(u,f){u.then(m=>{f==null||f(null,m)}).catch(m=>{f==null||f(m)})}function Xt(u,f,m){return m=="msgpack"?(f||sn("MsgPack"),f.decode(u)):JSON.parse(String(u))}function $t(u,f,m){return m=="msgpack"?(f||sn("MsgPack"),f.encode(u,!0)):JSON.stringify(u)}function Ws(u){return u.map(function(f){return f&&f.toLowerCase()})}function ni(u){return u.map(function(f){return f&&f.toUpperCase()})}function Oi(u){return Math.min((u+2)/3,2)}function Ii(){return 1-Math.random()*.2}function fi(u,f){return u*Oi(f)*Ii()}function Tr(){return typeof _l<"u"?_l:typeof window<"u"?window:self}function Qi(u,f){return Object.keys(u).every(m=>u[m]===f[m])&&Object.keys(f).every(m=>f[m]===u[m])}function ri(u){const f=/^(\[([^?]*)(?:(.*))\])?(.+)$/,m=u.match(f);if(!m||!m.length||m.length<5)throw new ne("regex match failed",400,40010);if(m[2])throw new ne(`cannot use a derived option with a ${m[2]} channel`,400,40010);return{qualifierParam:m[3]||"",channelName:m[4]}}function xi(u){const f=L.BufferUtils,m=f.utf8Encode(u);return f.base64Encode(m)}function Xi(u,f){return u.length===f.length&&u.every(function(m,b){return m===f[b]})}function Ji(u){return new ne(`${u} plugin not provided`,40019,400)}function sn(u){throw Ji(u)}async function hi(u,f=5e3,m="Timeout expired"){const b=new ne(m,5e4,500);return Promise.race([u,new Promise((w,R)=>setTimeout(()=>R(b),f))])}var _s="2.14.0",Cr="ably-js/"+_s,In={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:_s,protocolVersion:4,agent:Cr,getPort:Zi,getHttpScheme:Ks,getPrimaryDomainFromEndpoint:oe,getEndpointFallbackHosts:ce,getFallbackHosts:Ie,getHosts:Fe,checkHost:Ze,objectifyOptions:Ye,normaliseOptions:We,defaultGetHeaders:Ht,defaultPostHeaders:xt};function Zi(u,f){return f||u.tls?u.tlsPort:u.port}function Ks(u){return u.tls?"https://":"http://"}function Z(u){return u.includes(".")||u.includes("::")||u==="localhost"}function oe(u){return Z(u)?u:u.startsWith("nonprod:")?`${u.replace("nonprod:","")}.realtime.ably-nonprod.net`:`${u}.realtime.ably.net`}function ce(u){if(Z(u))return[];if(u.startsWith("nonprod:")){const f=u.replace("nonprod:","");return Te(f,"ably-realtime-nonprod.com")}return Te(u,"ably-realtime.com")}function Te(u,f){return["a","b","c","d","e"].map(m=>`${u}.${m}.fallback.${f}`)}function Ie(u){const f=u.fallbackHosts,m=typeof u.httpMaxRetryCount<"u"?u.httpMaxRetryCount:In.httpMaxRetryCount;return f?Bt(f,m):[]}function Fe(u){return[u.primaryDomain].concat(Ie(u))}function Ze(u){if(typeof u!="string")throw new ne("host must be a string; was a "+typeof u,4e4,400);if(!u.length)throw new ne("host must not be zero-length",4e4,400)}function He(u){const f={};for(const m in In.TIMEOUTS)f[m]=u[m]||In.TIMEOUTS[m];return f}function $e(u){let f=In.agent;if(u.agents)for(var m in u.agents)f+=" "+m+"/"+u.agents[m];return f}function Ye(u,f,m,b,w){if(u===void 0){const z=f?`${m} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${m} must be initialized with a client options object`;throw T.logAction(b,T.LOG_ERROR,`${m}()`,z),new Error(z)}let R;if(typeof u=="string")if(u.indexOf(":")==-1){if(!f){const z=`${m} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw T.logAction(b,T.LOG_ERROR,`${m}()`,z),new Error(z)}R={token:u}}else{if(!f){const z=`${m} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw T.logAction(b,T.LOG_ERROR,`${m}()`,z),new Error(z)}R={key:u}}else R=u;return w&&(R=I(O({},R),{plugins:O(O({},w),R.plugins)})),R}function st(u){if(u.endpoint&&(u.environment||u.restHost||u.realtimeHost))throw new ne("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(u.environment&&(u.restHost||u.realtimeHost))throw new ne("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}function We(u,f,m){const b=m??T.defaultLogger;u.environment&&b.deprecated("The `environment` client option","Use the `endpoint` client option instead."),u.restHost&&b.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),u.realtimeHost&&b.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),st(u),typeof u.recover=="function"&&u.closeOnUnload===!0&&(T.logAction(b,T.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),u.recover=void 0),"closeOnUnload"in u||(u.closeOnUnload=!u.recover),"queueMessages"in u||(u.queueMessages=!0);const w=u.endpoint||In.ENDPOINT;!u.fallbackHosts&&!u.restHost&&!u.realtimeHost&&!u.port&&!u.tlsPort&&(u.fallbackHosts=ce(u.environment||w));const R=u.environment&&`${u.environment}.realtime.ably.net`,X=u.restHost||u.realtimeHost||R||oe(w);(u.fallbackHosts||[]).concat(X).forEach(Ze),u.port=u.port||In.PORT,u.tlsPort=u.tlsPort||In.TLS_PORT,"tls"in u||(u.tls=!0);const fe=He(u);f?"useBinaryProtocol"in u?u.useBinaryProtocol=L.Config.supportsBinary&&u.useBinaryProtocol:u.useBinaryProtocol=L.Config.preferBinary:u.useBinaryProtocol=!1;const se={};u.clientId&&(se["X-Ably-ClientId"]=L.BufferUtils.base64Encode(L.BufferUtils.utf8Encode(u.clientId))),"idempotentRestPublishing"in u||(u.idempotentRestPublishing=!0);let be=null,Se=u.connectivityCheckUrl;if(u.connectivityCheckUrl){let[Ee,Ve]=u.connectivityCheckUrl.split("?");be=Ve?tr(Ve):{},Ee.indexOf("://")===-1&&(Ee="https://"+Ee),Se=Ee}let Pe=u.wsConnectivityCheckUrl;return Pe&&Pe.indexOf("://")===-1&&(Pe="wss://"+Pe),I(O({},u),{primaryDomain:X,maxMessageSize:u.maxMessageSize||In.maxMessageSize,timeouts:fe,connectivityCheckParams:be,connectivityCheckUrl:Se,wsConnectivityCheckUrl:Pe,headers:se})}function tt(u,f,m){const b=m||{};if(b.cipher){u||sn("Crypto");const w=u.getCipher(b.cipher,f);b.cipher=w.cipherParams,b.channelCipher=w.cipher}else"cipher"in b&&(b.cipher=void 0,b.channelCipher=null);return b}var Tt={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},Vt={format:"json",protocolVersion:In.protocolVersion};function Ht(u,{format:f=Vt.format,protocolVersion:m=Vt.protocolVersion}={}){return{accept:Tt[f],"X-Ably-Version":m.toString(),"Ably-Agent":$e(u)}}function xt(u,{format:f=Vt.format,protocolVersion:m=Vt.protocolVersion}={}){let b;return{accept:b=Tt[f],"content-type":b,"X-Ably-Version":m.toString(),"Ably-Agent":$e(u)}}var ke=In;function di(u){return Object.assign(In,u)}var Vn=class rO{constructor(f,m){this.logger=f,this.members=m||[]}call(f,m){for(const b of this.members)if(b)try{b(f,m)}catch(w){T.logAction(this.logger,T.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+w+"; stack = "+w.stack)}}push(...f){this.members.push(...f)}createPromise(){return new Promise((f,m)=>{this.push((b,w)=>{b?m(b):f(w)})})}resolveAll(f){this.call(null,f)}rejectAll(f){this.call(f)}static create(f,m){const b=new rO(f,m);return Object.assign((w,R)=>b.call(w,R),{push:w=>b.push(w),createPromise:()=>b.createPromise(),resolveAll:w=>b.resolveAll(w),rejectAll:w=>b.rejectAll(w)})}},nr=Vn,qn=(u=>(u.Get="get",u.Delete="delete",u.Post="post",u.Put="put",u.Patch="patch",u))(qn||{}),Gt=qn,jr=(u=>(u[u.Success=200]="Success",u[u.NoContent=204]="NoContent",u[u.BadRequest=400]="BadRequest",u[u.Unauthorized=401]="Unauthorized",u[u.Forbidden=403]="Forbidden",u[u.RequestTimeout=408]="RequestTimeout",u[u.InternalServerError=500]="InternalServerError",u))(jr||{});function Ys(u){return u>=200&&u<400}var jn=jr,rr=Math.pow(2,17);function dt(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function xn(u){return!!u.connection}function Fr(u){return fn(u)?(u.code||(u.statusCode===403?u.code=40300:(u.code=40170,u.statusCode=401)),u):new ne(Ct(u),u.code||40170,u.statusCode||401)}var Br=(u,f)=>{const m=L.BufferUtils,b=m.utf8Encode(u),w=m.utf8Encode(f),R=m.hmacSha256(b,w);return m.base64Encode(R)};function Pi(u){if(!u)return"";typeof u=="string"&&(u=JSON.parse(u));const f=Object.create(null),m=On(u,!0);if(!m)return"";m.sort();for(let b=0;b<m.length;b++)f[m[b]]=u[m[b]].sort();return JSON.stringify(f)}function Jt(u,f){if(u.authCallback)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with authCallback");else if(u.authUrl)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with authUrl");else if(u.key)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(u.tokenDetails)T.logAction(f,T.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const m="authOptions must include valid authentication parameters";throw T.logAction(f,T.LOG_ERROR,"Auth()",m),new Error(m)}}function pi(u){return"useTokenAuth"in u&&!u.useTokenAuth}function es(u){return u.useTokenAuth||!pi(u)&&(u.authCallback||u.authUrl||u.token||u.tokenDetails)}function ir(u){return!u.key&&!u.authCallback&&!u.authUrl}var Jl=0;function $f(){return Jl++}var Oo=class{constructor(u,f){if(this.authOptions={},this.client=u,this.tokenParams=f.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,es(f))ir(f)&&T.logAction(this.logger,T.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(f.defaultTokenParams,f),Jt(this.authOptions,this.logger);else{if(!f.key){const m="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw T.logAction(this.logger,T.LOG_ERROR,"Auth()",m),new ne(m,40160,401)}T.logAction(this.logger,T.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(f)}}get logger(){return this.client.logger}async authorize(u,f){if(f&&f.key&&this.authOptions.key!==f.key)throw new ne("Unable to update auth options with incompatible key",40102,401);try{let m=await this._forceNewToken(u??null,f??null);return xn(this.client)?new Promise((b,w)=>{this.client.connection.connectionManager.onAuthUpdated(m,(R,z)=>R?w(R):b(z))}):m}catch(m){throw this.client.connection&&m.statusCode===jn.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(m),m}}async _forceNewToken(u,f){this.tokenDetails=null,this._saveTokenOptions(u,f),Jt(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(u,f){const m=f||this.authOptions,b=u||Ce(this.tokenParams);let w,R=this.client;if(m.authCallback)T.logAction(this.logger,T.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),w=m.authCallback;else if(m.authUrl)T.logAction(this.logger,T.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),w=(X,fe)=>{const se=te({accept:"application/json, text/plain"},m.authHeaders),be=m.authMethod&&m.authMethod.toLowerCase()==="post";let Se;const Pe=m.authUrl.indexOf("?");Pe>-1&&(Se=tr(m.authUrl.slice(Pe)),m.authUrl=m.authUrl.slice(0,Pe),be||(m.authParams=te(Se,m.authParams)));const Ee=te({},m.authParams||{},X),Ve=je=>{var at,jt;let Kt=(at=je.body)!=null?at:null,tn=null;if(je.error)T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Ct(je.error));else{const lr=(jt=je.headers["content-type"])!=null?jt:null;Array.isArray(lr)?tn=lr.join(", "):tn=lr,T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+tn+"; body: "+pr(Kt))}if(je.error){fe(je.error,null);return}if(je.unpacked){fe(null,Kt);return}if(L.BufferUtils.isBuffer(Kt)&&(Kt=Kt.toString()),!tn){fe(new ne("authUrl response is missing a content-type header",40170,401),null);return}const pt=tn.indexOf("application/json")>-1,ci=tn.indexOf("text/plain")>-1||tn.indexOf("application/jwt")>-1;if(!pt&&!ci){fe(new ne("authUrl responded with unacceptable content-type "+tn+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(pt){if(Kt.length>rr){fe(new ne("authUrl response exceeded max permitted length",40170,401),null);return}try{Kt=JSON.parse(Kt)}catch(lr){fe(new ne("Unexpected error processing authURL response; err = "+lr.message,40170,401),null);return}}fe(null,Kt,tn)};if(T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+m.authUrl+"; Params: "+JSON.stringify(Ee)+"; method: "+(be?"POST":"GET")),be){const je=se||{};je["content-type"]="application/x-www-form-urlencoded";const at=wr(Ee).slice(1);rt(this.client.http.doUri(Gt.Post,m.authUrl,je,at,Se),(jt,Kt)=>Ve(jt||Kt))}else rt(this.client.http.doUri(Gt.Get,m.authUrl,se||{},null,Ee),(je,at)=>Ve(je||at))};else if(m.key)T.logAction(this.logger,T.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),w=(X,fe)=>{rt(this.createTokenRequest(X,m),(se,be)=>fe(se,be??null))};else{const X="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw T.logAction(this.logger,T.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new ne(X,40171,403)}"capability"in b&&(b.capability=Pi(b.capability));const z=(X,fe)=>{const se=X.keyName,be="/keys/"+se+"/requestToken",Se=function(Ee){return R.baseUri(Ee)+be},Pe=ke.defaultPostHeaders(this.client.options);m.requestHeaders&&te(Pe,m.requestHeaders),T.logAction(this.logger,T.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+be+"; Token params: "+JSON.stringify(X)),rt(this.client.http.do(Gt.Post,Se,Pe,JSON.stringify(X),null),(Ee,Ve)=>Ee?fe(Ee):fe(Ve.error,Ve.body,Ve.unpacked))};return new Promise((X,fe)=>{let se=!1,be=this.client.options.timeouts.realtimeRequestTimeout,Se=setTimeout(()=>{se=!0;const Pe="Token request callback timed out after "+be/1e3+" seconds";T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()",Pe),fe(new ne(Pe,40170,401))},be);w(b,(Pe,Ee,Ve)=>{if(se)return;if(clearTimeout(Se),Pe){T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Ct(Pe)),fe(Fr(Pe));return}if(typeof Ee=="string"){Ee.length===0?fe(new ne("Token string is empty",40170,401)):Ee.length>rr?fe(new ne("Token string exceeded max permitted length (was "+Ee.length+" bytes)",40170,401)):Ee==="undefined"||Ee==="null"?fe(new ne("Token string was literal null/undefined",40170,401)):Ee[0]==="{"&&!(Ve&&Ve.indexOf("application/jwt")>-1)?fe(new ne("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):X({token:Ee});return}if(typeof Ee!="object"||Ee===null){const at="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof Ee;T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()",at),fe(new ne(at,40170,401));return}const je=JSON.stringify(Ee).length;if(je>rr&&!m.suppressMaxLengthCheck){fe(new ne("Token request/details object exceeded max permitted stringified size (was "+je+" bytes)",40170,401));return}if("issued"in Ee){X(Ee);return}if(!("keyName"in Ee)){const at="Expected token request callback to call back with a token string, token request object, or token details object";T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()",at),fe(new ne(at,40170,401));return}z(Ee,(at,jt,Kt)=>{if(at){T.logAction(this.logger,T.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Ct(at)),fe(Fr(at));return}Kt||(jt=JSON.parse(jt)),T.logAction(this.logger,T.LOG_MINOR,"Auth.getToken()","token received"),X(jt)})})})}async createTokenRequest(u,f){f=f||this.authOptions,u=u||Ce(this.tokenParams);const m=f.key;if(!m)throw new ne("No key specified",40101,403);const b=m.split(":"),w=b[0],R=b[1];if(!R)throw new ne("Invalid key specified",40101,403);if(u.clientId==="")throw new ne("clientId can’t be an empty string",40012,400);"capability"in u&&(u.capability=Pi(u.capability));const z=te({keyName:w},u),X=u.clientId||"",fe=u.ttl||"",se=u.capability||"";z.timestamp||(z.timestamp=await this._getTimestamp(f&&f.queryTime));const be=z.nonce||(z.nonce=dt()),Se=z.timestamp,Pe=z.keyName+`
`+fe+`
`+se+`
`+X+`
`+Se+`
`+be+`
`;return z.mac=z.mac||Br(Pe,R),T.logAction(this.logger,T.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),z}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let u=await this._ensureValidAuthCredentials(!1);if(!u)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:u.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const u=await this._ensureValidAuthCredentials(!1);if(!u)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+xi(u.token)}}}_saveBasicOptions(u){this.method="basic",this.key=u.key,this.basicKey=xi(u.key),this.authOptions=u||{},"clientId"in u&&this._userSetClientId(u.clientId)}_saveTokenOptions(u,f){this.method="token",u&&(this.tokenParams=u),f&&(f.token&&(f.tokenDetails=typeof f.token=="string"?{token:f.token}:f.token),f.tokenDetails&&(this.tokenDetails=f.tokenDetails),"clientId"in f&&this._userSetClientId(f.clientId),this.authOptions=f)}async _ensureValidAuthCredentials(u){const f=this.tokenDetails;if(f){if(this._tokenClientIdMismatch(f.clientId))throw new ne("Mismatch between clientId in token ("+f.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!f.expires||f.expires>=this.client.getTimestampUsingOffset())return T.logAction(this.logger,T.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+f.expires),f;T.logAction(this.logger,T.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const m=(this.waitingForTokenRequest||(this.waitingForTokenRequest=nr.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!u)return m;const b=this.currentTokenRequestId=$f();let w,R=null;try{w=await this.requestToken(this.tokenParams,this.authOptions)}catch(X){R=X}if(this.currentTokenRequestId>b)return T.logAction(this.logger,T.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),m;this.currentTokenRequestId=null;const z=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,R?(z==null||z.rejectAll(R),m):(z==null||z.resolveAll(this.tokenDetails=w),m)}_userSetClientId(u){if(typeof u=="string"||u===null){if(u==="*")throw new ne('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const f=this._uncheckedSetClientId(u);if(f)throw f}}else throw new ne("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(u){if(this._tokenClientIdMismatch(u)){const f="Unexpected clientId mismatch: client has "+this.clientId+", requested "+u,m=new ne(f,40102,401);return T.logAction(this.logger,T.LOG_ERROR,"Auth._uncheckedSetClientId()",f),m}else return this.clientId=this.tokenParams.clientId=u,null}_tokenClientIdMismatch(u){return!!(this.clientId&&this.clientId!=="*"&&u&&u!=="*"&&this.clientId!==u)}static isTokenErr(u){return u.code&&u.code>=40140&&u.code<40150}revokeTokens(u,f){return this.client.rest.revokeTokens(u,f)}async _getTimestamp(u){return this.client.getTimestamp(u||!!this.authOptions.queryTime)}},ii=Oo;function bs(u){const f=[];if(u)for(const m in u)f.push(m+"="+u[m]);return f.join("&")}function Qs(u,f){return u+(f?"?":"")+bs(f)}function Pn(u,f,m,b,w){u.error?T.logActionNoStrip(w,T.LOG_MICRO,"Http."+f+"()","Received Error; "+Qs(m,b)+"; Error: "+Ct(u.error)):T.logActionNoStrip(w,T.LOG_MICRO,"Http."+f+"()","Received; "+Qs(m,b)+"; Headers: "+bs(u.headers)+"; StatusCode: "+u.statusCode+"; Body"+(L.BufferUtils.isBuffer(u.body)?" (Base64): "+L.BufferUtils.base64Encode(u.body):": "+u.body))}function si(u,f,m,b,w){w.shouldLog(T.LOG_MICRO)&&T.logActionNoStrip(w,T.LOG_MICRO,"Http."+u+"()","Sending; "+Qs(f,b)+"; Body"+(L.BufferUtils.isBuffer(m)?" (Base64): "+L.BufferUtils.base64Encode(m):": "+m))}var Ss=class{constructor(u){this.client=u,this.platformHttp=new L.Http(u),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var u,f;return(f=(u=this.client)==null?void 0:u.logger)!=null?f:T.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(u){const f=u.connection,m=f&&f.connectionManager.host;return m?[m].concat(ke.getFallbackHosts(u.options)):ke.getHosts(u.options)}async do(u,f,m,b,w){try{const R=this.client;if(!R)return{error:new ne("http.do called without client",5e4,500)};const z=typeof f=="function"?f:function(Se){return R.baseUri(Se)+f},X=R._currentFallback;if(X)if(X.validUntil>Date.now()){const Se=await this.doUri(u,z(X.host),m,b,w);return Se.error&&this.platformHttp.shouldFallback(Se.error)?(R._currentFallback=null,this.do(u,f,m,b,w)):Se}else R._currentFallback=null;const fe=this._getHosts(R);if(fe.length===1)return this.doUri(u,z(fe[0]),m,b,w);let se=null;const be=async(Se,Pe)=>{const Ee=Se.shift();se=se??new Date;const Ve=await this.doUri(u,z(Ee),m,b,w);return Ve.error&&this.platformHttp.shouldFallback(Ve.error)&&Se.length?Date.now()-se.getTime()>R.options.timeouts.httpMaxRetryDuration?{error:new ne(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${R.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:be(Se,!0):(Pe&&(R._currentFallback={host:Ee,validUntil:Date.now()+R.options.timeouts.fallbackRetryTimeout}),Ve)};return be(fe)}catch(R){return{error:new ne(`Unexpected error in Http.do: ${Ct(R)}`,500,5e4)}}}async doUri(u,f,m,b,w){try{si(u,f,b,w,this.logger);const R=await this.platformHttp.doUri(u,f,m,b,w);return this.logger.shouldLog(T.LOG_MICRO)&&Pn(R,u,f,w,this.logger),R}catch(R){return{error:new ne(`Unexpected error in Http.doUri: ${Ct(R)}`,500,5e4)}}}};function Xs(u,f,m,b){try{m.apply(f,b)}catch(w){T.logAction(u,T.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+w+"; stack = "+(w&&w.stack))}}function Mi(u,f,m){let b,w,R;for(let z=0;z<u.length;z++)if(b=u[z],m&&(b=b[m]),Array.isArray(b)){for(;(w=b.indexOf(f))!==-1;)b.splice(w,1);m&&b.length===0&&delete u[z][m]}else if(K(b))for(R in b)Object.prototype.hasOwnProperty.call(b,R)&&Array.isArray(b[R])&&Mi([b],f,R)}var Zt=class{constructor(u){this.logger=u,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...u){if(u.length===1){const f=u[0];if(typeof f=="function")this.any.push(f);else throw new Error("EventListener.on(): Invalid arguments: "+L.Config.inspect(u))}if(u.length===2){const[f,m]=u;if(typeof m!="function")throw new Error("EventListener.on(): Invalid arguments: "+L.Config.inspect(u));if(me(f))this.any.push(m);else if(Array.isArray(f))f.forEach(b=>{this.on(b,m)});else{if(typeof f!="string")throw new Error("EventListener.on(): Invalid arguments: "+L.Config.inspect(u));(this.events[f]||(this.events[f]=[])).push(m)}}}off(...u){if(u.length==0||me(u[0])&&me(u[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[f,m]=u;let b=null,w=null;if(u.length===1||!m)typeof f=="function"?b=f:w=f;else{if(typeof m!="function")throw new Error("EventEmitter.off(): invalid arguments:"+L.Config.inspect(u));[w,b]=[f,m]}if(b&&me(w)){Mi([this.any,this.events,this.anyOnce,this.eventsOnce],b);return}if(Array.isArray(w)){w.forEach(R=>{this.off(R,b)});return}if(typeof w!="string")throw new Error("EventEmitter.off(): invalid arguments:"+L.Config.inspect(u));b?Mi([this.events,this.eventsOnce],b,w):(delete this.events[w],delete this.eventsOnce[w])}listeners(u){if(u){const f=this.events[u]||[];return this.eventsOnce[u]&&Array.prototype.push.apply(f,this.eventsOnce[u]),f.length?f:null}return this.any.length?this.any:null}emit(u,...f){const m={event:u},b=[];this.anyOnce.length&&(Array.prototype.push.apply(b,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(b,this.any);const w=this.eventsOnce[u];w&&(Array.prototype.push.apply(b,w),delete this.eventsOnce[u]);const R=this.events[u];R&&Array.prototype.push.apply(b,R),b.forEach(z=>{Xs(this.logger,m,z,f)})}once(...u){const f=u.length;if(f===0||f===1&&typeof u[0]!="function"){const w=u[0];return new Promise(R=>{this.once(w,R)})}const[m,b]=u;if(u.length===1&&typeof m=="function")this.anyOnce.push(m);else if(me(m)){if(typeof b!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(u));this.anyOnce.push(b)}else if(Array.isArray(m)){const w=this,R=function(){const z=Array.prototype.slice.call(arguments);if(m.forEach(function(X){w.off(X,R)}),typeof b!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(u));b.apply(this,z)};m.forEach(function(z){w.on(z,R)})}else{if(typeof m!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(u));const w=this.eventsOnce[m]||(this.eventsOnce[m]=[]);if(b){if(typeof b!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(u));w.push(b)}}}async whenState(u,f){if(typeof u!="string"||typeof f!="string")throw new Error("whenState requires a valid state String argument");return u===f?null:this.once(u)}},hn=Zt,Ge={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},Js=[];Object.keys(Ge).forEach(function(u){Js[Ge[u]]=u});var sr={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},Zl=Object.keys(sr);sr.MODE_ALL=sr.PRESENCE|sr.PUBLISH|sr.SUBSCRIBE|sr.PRESENCE_SUBSCRIBE|sr.ANNOTATION_PUBLISH|sr.ANNOTATION_SUBSCRIBE|sr.OBJECT_SUBSCRIBE|sr.OBJECT_PUBLISH;var Io=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function Gf(u){return!u||!u.channelOptions?{channelOptions:u,plugins:{},baseEncodedPreviousPayload:void 0}:u}function iu(u,f,m){if(m&&m.cipher){u||sn("Crypto");const b=u.getCipher(m.cipher,f);return{cipher:b.cipherParams,channelCipher:b.cipher}}return m??{}}async function xo(u,f){const{data:m,encoding:b}=await ts(u.data,u.encoding,f);return u.data=m,u.encoding=b,u}async function ts(u,f,m){let b=m.channelCipher,w=u,R=f?f+"/":"";L.BufferUtils.isBuffer(w)||(w=L.BufferUtils.utf8Encode(String(w)),R=R+"utf-8/");const z=await b.encrypt(w);return R=R+"cipher+"+b.algorithm,{data:z,encoding:R}}async function Hr(u,f){const{data:m,encoding:b}=ns(u.data,u.encoding);return u.data=m,u.encoding=b,f!=null&&f.cipher?xo(u,f):u}function ns(u,f){if(typeof u=="string"||L.BufferUtils.isBuffer(u)||u===null||u===void 0)return{data:u,encoding:f};if(K(u)||Array.isArray(u))return{data:JSON.stringify(u),encoding:f?f+"/json":"json"};throw new ne("Data type is unsupported",40013,400)}async function Di(u,f){const{data:m,encoding:b,error:w}=await Po(u.data,u.encoding,f);if(u.data=m,u.encoding=b,w)throw w}async function Po(u,f,m){const b=Gf(m);let w=u,R=u,z=f,X;if(f){const fe=f.split("/");let se,be=fe.length,Se="";try{for(;(se=be)>0;){const Pe=fe[--be].match(/([-\w]+)(\+([\w-]+))?/);if(!Pe)break;switch(Se=Pe[1],Se){case"base64":R=L.BufferUtils.base64Decode(String(R)),se==fe.length&&(w=R);continue;case"utf-8":R=L.BufferUtils.utf8Decode(R);continue;case"json":R=JSON.parse(R);continue;case"cipher":if(b.channelOptions!=null&&b.channelOptions.cipher&&b.channelOptions.channelCipher){const Ee=Pe[3],Ve=b.channelOptions.channelCipher;if(Ee!=Ve.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");R=await Ve.decrypt(R);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!b.plugins||!b.plugins.vcdiff)throw new ne("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new ne("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let Ee=b.baseEncodedPreviousPayload;typeof Ee=="string"&&(Ee=L.BufferUtils.utf8Encode(Ee));const Ve=L.BufferUtils.toBuffer(Ee);R=L.BufferUtils.toBuffer(R),R=L.BufferUtils.arrayBufferViewToBuffer(b.plugins.vcdiff.decode(R,Ve)),w=R}catch(Ee){throw new ne("Vcdiff delta decode failed with "+Ee,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(Pe){const Ee=Pe;X=new ne(`Error processing the ${Se} encoding, decoder returned ‘${Ee.message}’`,Ee.code||40013,400)}finally{z=se<=0?null:fe.slice(0,se).join("/")}}return X?{error:X,data:R,encoding:z}:(b.baseEncodedPreviousPayload=w,{data:R,encoding:z})}function gi(...u){const f=u.length>0?"json":"msgpack",{data:m,encoding:b}=ec(this.data,this.encoding,f);return Object.assign({},this,{encoding:b,data:m})}function ec(u,f,m){return!u||!L.BufferUtils.isBuffer(u)?{data:u,encoding:f}:m==="msgpack"?{data:L.BufferUtils.toBuffer(u),encoding:f}:{data:L.BufferUtils.base64Encode(u),encoding:f?f+"/base64":"base64"}}var rs={encryptData:ts,encodeData:ns,encodeDataForWire:ec,decodeData:Po};function zr(u){const{id:f,connectionId:m,timestamp:b}=u;let w;switch(u.action){case Ge.MESSAGE:{w=u.messages;break}case Ge.PRESENCE:case Ge.SYNC:w=u.presence;break;case Ge.ANNOTATION:w=u.annotations;break;case Ge.OBJECT:case Ge.OBJECT_SYNC:w=u.state;break;default:throw new ne("Unexpected action "+u.action,4e4,400)}for(let R=0;R<w.length;R++){const z=w[R];z.connectionId||(z.connectionId=m),z.timestamp||(z.timestamp=b),f&&!z.id&&(z.id=f+":"+R)}}function ar(u,f){let m="["+f;for(const b in u)b==="data"?typeof u.data=="string"?m+="; data="+u.data:L.BufferUtils.isBuffer(u.data)?m+="; data (buffer)="+L.BufferUtils.base64Encode(u.data):typeof u.data<"u"&&(m+="; data (json)="+JSON.stringify(u.data)):b&&(b==="extras"||b==="operation")?m+="; "+b+"="+JSON.stringify(u[b]):b==="version"?m+="; version="+JSON.stringify(u[b]):b==="annotations"?m+="; annotations="+JSON.stringify(u[b]):u[b]!==void 0&&(m+="; "+b+"="+u[b]);return m+="]",m}var mi=class{},ki=class{constructor(u){this.Platform=L,this.ErrorInfo=ne,this.Logger=T,this.Defaults=ke,this.Utils=ee,this.EventEmitter=hn,this.MessageEncoding=rs;var f,m,b,w,R,z,X,fe,se,be;this._additionalHTTPRequestImplementations=(f=u.plugins)!=null?f:null,this.logger=new T,this.logger.setLog(u.logLevel,u.logHandler),T.logAction(this.logger,T.LOG_MICRO,"BaseClient()","initialized with clientOptions "+L.Config.inspect(u)),this._MsgPack=(b=(m=u.plugins)==null?void 0:m.MsgPack)!=null?b:null;const Se=this.options=ke.normaliseOptions(u,this._MsgPack,this.logger);if(Se.key){const Pe=Se.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!Pe){const Ee="invalid key parameter";throw T.logAction(this.logger,T.LOG_ERROR,"BaseClient()",Ee),new ne(Ee,40400,404)}Se.keyName=Pe[1],Se.keySecret=Pe[2]}if("clientId"in Se)if(typeof Se.clientId=="string"||Se.clientId===null){if(Se.clientId==="*")throw new ne('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new ne("clientId must be either a string or null",40012,400);T.logAction(this.logger,T.LOG_MINOR,"BaseClient()","started; version = "+ke.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new Ss(this),this.auth=new ii(this,Se),this._rest=(w=u.plugins)!=null&&w.Rest?new u.plugins.Rest(this):null,this._Crypto=(z=(R=u.plugins)==null?void 0:R.Crypto)!=null?z:null,this.__FilteredSubscriptions=(fe=(X=u.plugins)==null?void 0:X.MessageInteractions)!=null?fe:null,this._Annotations=(be=(se=u.plugins)==null?void 0:se.Annotations)!=null?be:null}get rest(){return this._rest||sn("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||sn("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var u;return(!((u=this.options.plugins)!=null&&u.Push)||!this.push.LocalDevice)&&sn("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(u){return ke.getHttpScheme(this.options)+u+":"+ke.getPort(this.options,!1)}async stats(u){return this.rest.stats(u)}async time(u){return this.rest.time(u)}async request(u,f,m,b,w,R){return this.rest.request(u,f,m,b,w,R)}batchPublish(u){return this.rest.batchPublish(u)}batchPresence(u){return this.rest.batchPresence(u)}setLog(u){this.logger.setLog(u.level,u.handler)}async getTimestamp(u){return!this.isTimeOffsetSet()&&u?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return this.serverTimeOffset!==null}};ki.Platform=L;var Es=ki,ws=class Qu{toJSON(){var f,m,b;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(f=this.push)==null?void 0:f.recipient,state:(m=this.push)==null?void 0:m.state,error:(b=this.push)==null?void 0:b.error}}}toString(){var f,m,b,w;let R="[DeviceDetails";return this.id&&(R+="; id="+this.id),this.platform&&(R+="; platform="+this.platform),this.formFactor&&(R+="; formFactor="+this.formFactor),this.clientId&&(R+="; clientId="+this.clientId),this.metadata&&(R+="; metadata="+this.metadata),this.deviceIdentityToken&&(R+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(f=this.push)!=null&&f.recipient&&(R+="; push.recipient="+JSON.stringify(this.push.recipient)),(m=this.push)!=null&&m.state&&(R+="; push.state="+this.push.state),(b=this.push)!=null&&b.error&&(R+="; push.error="+JSON.stringify(this.push.error)),(w=this.push)!=null&&w.metadata&&(R+="; push.metadata="+this.push.metadata),R+="]",R}static toRequestBody(f,m,b){return $t(f,m,b)}static fromResponseBody(f,m,b){return b&&(f=Xt(f,m,b)),Array.isArray(f)?Qu.fromValuesArray(f):Qu.fromValues(f)}static fromValues(f){return f.error=f.error&&ne.fromValues(f.error),Object.assign(new Qu,f)}static fromLocalDevice(f){return Object.assign(new Qu,f)}static fromValuesArray(f){const m=f.length,b=new Array(m);for(let w=0;w<m;w++)b[w]=Qu.fromValues(f[w]);return b}},is=ws;async function Ni(u,f,m,b){if(u.http.supportsAuthHeaders){const w=await u.auth.getAuthHeaders();return b(te(w,f),m)}else{const w=await u.auth.getAuthParams();return b(f,te(w,m))}}function ss(u,f,m){if(u.err&&!u.body)return{err:u.err};if(u.statusCode===jn.NoContent)return I(O({},u),{body:[],unpacked:!0});let b=u.body;if(!u.unpacked)try{b=Xt(b,f,m)}catch(X){return fn(X)?{err:X}:{err:new Me(Ct(X),null)}}if(!b)return{err:new Me("unenvelope(): Response body is missing",null)};const{statusCode:w,response:R,headers:z}=b;if(w===void 0)return I(O({},u),{body:b,unpacked:!0});if(w<200||w>=300){let X=R&&R.error||u.err;return X||(X=new Error("Error in unenveloping "+b),X.statusCode=w),{err:X,body:R,headers:z,unpacked:!0,statusCode:w}}return{err:u.err,body:R,headers:z,unpacked:!0,statusCode:w}}function tc(u,f,m,b,w){u.err?T.logAction(w,T.LOG_MICRO,"Resource."+f+"()","Received Error; "+Qs(m,b)+"; Error: "+Ct(u.err)):T.logAction(w,T.LOG_MICRO,"Resource."+f+"()","Received; "+Qs(m,b)+"; Headers: "+bs(u.headers)+"; StatusCode: "+u.statusCode+"; Body: "+(L.BufferUtils.isBuffer(u.body)?" (Base64): "+L.BufferUtils.base64Encode(u.body):": "+L.Config.inspect(u.body)))}var $n=class Xu{static async get(f,m,b,w,R,z){return Xu.do(Gt.Get,f,m,null,b,w,R,z??!1)}static async delete(f,m,b,w,R,z){return Xu.do(Gt.Delete,f,m,null,b,w,R,z)}static async post(f,m,b,w,R,z,X){return Xu.do(Gt.Post,f,m,b,w,R,z,X)}static async patch(f,m,b,w,R,z,X){return Xu.do(Gt.Patch,f,m,b,w,R,z,X)}static async put(f,m,b,w,R,z,X){return Xu.do(Gt.Put,f,m,b,w,R,z,X)}static async do(f,m,b,w,R,z,X,fe){X&&((z=z||{}).envelope=X);const se=m.logger;async function be(Pe,Ee){var Ve;if(se.shouldLog(T.LOG_MICRO)){let at=w;if(((Ve=Pe["content-type"])==null?void 0:Ve.indexOf("msgpack"))>0)try{m._MsgPack||sn("MsgPack"),at=m._MsgPack.decode(w)}catch(jt){T.logAction(se,T.LOG_MICRO,"Resource."+f+"()","Sending MsgPack Decoding Error: "+Ct(jt))}T.logAction(se,T.LOG_MICRO,"Resource."+f+"()","Sending; "+Qs(b,Ee)+"; Body: "+at)}const je=await m.http.do(f,b,Pe,w,Ee);return je.error&&ii.isTokenErr(je.error)?(await m.auth.authorize(null,null),Ni(m,Pe,Ee,be)):{err:je.error,body:je.body,headers:je.headers,unpacked:je.unpacked,statusCode:je.statusCode}}let Se=await Ni(m,R,z,be);if(X&&(Se=ss(Se,m._MsgPack,X)),se.shouldLog(T.LOG_MICRO)&&tc(Se,f,b,z,se),fe){if(Se.err)throw Se.err;{const Pe=O({},Se);return delete Pe.err,Pe}}return Se}},ot=$n;function Mo(u){const f=u.match(/^\.\/(\w+)\?(.*)$/);return f&&f[2]&&tr(f[2])}function Da(u){typeof u=="string"&&(u=u.split(","));const f={};for(let m=0;m<u.length;m++){const b=u[m].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(b){const w=Mo(b[1]);w&&(f[b[2]]=w)}}return f}function su(u,f,m){return!(m&&(f||typeof u.code=="number"))}var Do=class{constructor(u,f,m,b,w,R){this.client=u,this.path=f,this.headers=m,this.envelope=b??null,this.bodyHandler=w,this.useHttpPaginatedResponse=R||!1}get logger(){return this.client.logger}async get(u){const f=await ot.get(this.client,this.path,this.headers,u,this.envelope,!1);return this.handlePage(f)}async delete(u){const f=await ot.delete(this.client,this.path,this.headers,u,this.envelope,!1);return this.handlePage(f)}async post(u,f){const m=await ot.post(this.client,this.path,f,this.headers,u,this.envelope,!1);return this.handlePage(m)}async put(u,f){const m=await ot.put(this.client,this.path,f,this.headers,u,this.envelope,!1);return this.handlePage(m)}async patch(u,f){const m=await ot.patch(this.client,this.path,f,this.headers,u,this.envelope,!1);return this.handlePage(m)}async handlePage(u){if(u.err&&su(u.err,u.body,this.useHttpPaginatedResponse))throw T.logAction(this.logger,T.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Ct(u.err)),u.err;let f,m,b;try{f=u.statusCode==jn.NoContent?[]:await this.bodyHandler(u.body,u.headers||{},u.unpacked)}catch(w){throw u.err||w}return u.headers&&(m=u.headers.Link||u.headers.link)&&(b=Da(m)),this.useHttpPaginatedResponse?new as(this,f,u.headers||{},u.statusCode,b,u.err):new ka(this,f,b)}},ka=class{constructor(u,f,m){this.resource=u,this.items=f,this._relParams=m}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new ne("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new ne("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return this._relParams!=null&&"first"in this._relParams}hasCurrent(){return this._relParams!=null&&"current"in this._relParams}hasNext(){return this._relParams!=null&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(u){const f=this.resource,m=await ot.get(f.client,f.path,f.headers,u,f.envelope,!1);return f.handlePage(m)}},as=class extends ka{constructor(u,f,m,b,w,R){super(u,f,w),this.statusCode=b,this.success=b<300&&b>=200,this.headers=m,this.errorCode=R&&R.code,this.errorMessage=R&&R.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},gr=Do,ai=class Xh{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let f="[PushChannelSubscription";return this.channel&&(f+="; channel="+this.channel),this.deviceId&&(f+="; deviceId="+this.deviceId),this.clientId&&(f+="; clientId="+this.clientId),f+="]",f}static fromResponseBody(f,m,b){return b&&(f=Xt(f,m,b)),Array.isArray(f)?Xh.fromValuesArray(f):Xh.fromValues(f)}static fromValues(f){return Object.assign(new Xh,f)}static fromValuesArray(f){const m=f.length,b=new Array(m);for(let w=0;w<m;w++)b[w]=Xh.fromValues(f[w]);return b}};ai.toRequestBody=$t;var au=ai,ko=au,Na=class{constructor(u){var f;this.client=u,this.admin=new No(u),L.Config.push&&((f=u.options.plugins)!=null&&f.Push)&&(this.stateMachine=new u.options.plugins.Push.ActivationStateMachine(u),this.LocalDevice=u.options.plugins.Push.localDeviceFactory(is))}async activate(u,f){await new Promise((m,b)=>{var w;if(!((w=this.client.options.plugins)!=null&&w.Push)){b(Ji("Push"));return}if(!this.stateMachine){b(new ne("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){b(new ne("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=R=>{if(R){b(R);return}m()},this.stateMachine.updateFailedCallback=f,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,u))})}async deactivate(u){await new Promise((f,m)=>{var b;if(!((b=this.client.options.plugins)!=null&&b.Push)){m(Ji("Push"));return}if(!this.stateMachine){m(new ne("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){m(new ne("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=w=>{if(w){m(w);return}f()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,u))})}},No=class{constructor(u){this.client=u,this.deviceRegistrations=new nc(u),this.channelSubscriptions=new Lo(u)}async publish(u,f){const m=this.client,b=m.options.useBinaryProtocol?"msgpack":"json",w=ke.defaultPostHeaders(m.options,{format:b}),R={},z=te({recipient:u},f);te(w,m.options.headers),m.options.pushFullWait&&te(R,{fullWait:"true"});const X=$t(z,m._MsgPack,b);await ot.post(m,"/push/publish",X,w,R,null,!0)}},nc=class{constructor(u){this.client=u}async save(u){const f=this.client,m=is.fromValues(u),b=f.options.useBinaryProtocol?"msgpack":"json",w=ke.defaultPostHeaders(f.options,{format:b}),R={};te(w,f.options.headers),f.options.pushFullWait&&te(R,{fullWait:"true"});const z=$t(m,f._MsgPack,b),X=await ot.put(f,"/push/deviceRegistrations/"+encodeURIComponent(u.id),z,w,R,null,!0);return is.fromResponseBody(X.body,f._MsgPack,X.unpacked?void 0:b)}async get(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",b=ke.defaultGetHeaders(f.options,{format:m}),w=u.id||u;if(typeof w!="string"||!w.length)throw new ne("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);te(b,f.options.headers);const R=await ot.get(f,"/push/deviceRegistrations/"+encodeURIComponent(w),b,{},null,!0);return is.fromResponseBody(R.body,f._MsgPack,R.unpacked?void 0:m)}async list(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",b=this.client.http.supportsLinkHeaders?void 0:m,w=ke.defaultGetHeaders(f.options,{format:m});return te(w,f.options.headers),new gr(f,"/push/deviceRegistrations",w,b,async function(R,z,X){return is.fromResponseBody(R,f._MsgPack,X?void 0:m)}).get(u)}async remove(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",b=ke.defaultGetHeaders(f.options,{format:m}),w={},R=u.id||u;if(typeof R!="string"||!R.length)throw new ne("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);te(b,f.options.headers),f.options.pushFullWait&&te(w,{fullWait:"true"}),await ot.delete(f,"/push/deviceRegistrations/"+encodeURIComponent(R),b,w,null,!0)}async removeWhere(u){const f=this.client,m=f.options.useBinaryProtocol?"msgpack":"json",b=ke.defaultGetHeaders(f.options,{format:m});te(b,f.options.headers),f.options.pushFullWait&&te(u,{fullWait:"true"}),await ot.delete(f,"/push/deviceRegistrations",b,u,null,!0)}},Lo=class iO{constructor(f){this.remove=iO.prototype.removeWhere,this.client=f}async save(f){const m=this.client,b=ko.fromValues(f),w=m.options.useBinaryProtocol?"msgpack":"json",R=ke.defaultPostHeaders(m.options,{format:w}),z={};te(R,m.options.headers),m.options.pushFullWait&&te(z,{fullWait:"true"});const X=$t(b,m._MsgPack,w),fe=await ot.post(m,"/push/channelSubscriptions",X,R,z,null,!0);return ko.fromResponseBody(fe.body,m._MsgPack,fe.unpacked?void 0:w)}async list(f){const m=this.client,b=m.options.useBinaryProtocol?"msgpack":"json",w=this.client.http.supportsLinkHeaders?void 0:b,R=ke.defaultGetHeaders(m.options,{format:b});return te(R,m.options.headers),new gr(m,"/push/channelSubscriptions",R,w,async function(z,X,fe){return ko.fromResponseBody(z,m._MsgPack,fe?void 0:b)}).get(f)}async removeWhere(f){const m=this.client,b=m.options.useBinaryProtocol?"msgpack":"json",w=ke.defaultGetHeaders(m.options,{format:b});te(w,m.options.headers),m.options.pushFullWait&&te(f,{fullWait:"true"}),await ot.delete(m,"/push/channelSubscriptions",w,f,null,!0)}async listChannels(f){const m=this.client,b=m.options.useBinaryProtocol?"msgpack":"json",w=this.client.http.supportsLinkHeaders?void 0:b,R=ke.defaultGetHeaders(m.options,{format:b});return te(R,m.options.headers),m.options.pushFullWait&&te(f,{fullWait:"true"}),new gr(m,"/push/channels",R,w,async function(z,X,fe){const se=!fe&&b?Xt(z,m._MsgPack,b):z;for(let be=0;be<se.length;be++)se[be]=String(se[be]);return se}).get(f)}},ou=Na,La=["absent","present","enter","leave","update"];async function lu(u,f,m,b){const w=iu(f,u,b??null);return Ts.fromValues(m).decode(w,u)}async function rc(u,f,m,b){return Promise.all(m.map(function(w){return lu(u,f,w,b)}))}async function Ua(u,f){return Ts.fromValues(u).decode(f.channelOptions,f.logger)}async function ic(u,f){return Promise.all(u.map(function(m){return Ua(m,f)}))}var sc=class Jh extends mi{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const f=this.id.split(":");return{connectionId:f[0],msgSerial:parseInt(f[1],10),index:parseInt(f[2],10)}}async encode(f){const m=Object.assign(new Ts,this,{action:La.indexOf(this.action||"present")});return Hr(m,f)}static fromValues(f){return Object.assign(new Jh,f)}static fromValuesArray(f){return f.map(m=>Jh.fromValues(m))}static fromData(f){return f instanceof Jh?f:Jh.fromValues({data:f})}toString(){return ar(this,"PresenceMessage")}},Ts=class a_ extends mi{toJSON(...f){return gi.call(this,...f)}static fromValues(f){return Object.assign(new a_,f)}static fromValuesArray(f){return f.map(m=>a_.fromValues(m))}async decode(f,m){const b=Object.assign(new sc,I(O({},this),{action:La[this.action]}));try{await Di(b,f)}catch(w){T.logAction(m,T.LOG_ERROR,"WirePresenceMessage.decode()",Ct(w))}return b}toString(){return ar(this,"WirePresenceMessage")}},qr=sc,cu=class{constructor(u){this.channel=u}get logger(){return this.channel.logger}async get(u){T.logAction(this.logger,T.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const f=this.channel.client,m=f.options.useBinaryProtocol?"msgpack":"json",b=this.channel.client.http.supportsLinkHeaders?void 0:m,w=ke.defaultGetHeaders(f.options,{format:m});return te(w,f.options.headers),new gr(f,this.channel.client.rest.presenceMixin.basePath(this),w,b,async(R,z,X)=>{const fe=X?R:Xt(R,f._MsgPack,m);return ic(fe,this.channel)}).get(u)}async history(u){return T.logAction(this.logger,T.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,u)}},Uo=cu,ac=["message.create","message.update","message.delete","meta","message.summary"];function oc(u){return ac[u||0]||"unknown"}function Cs(u){let f=0;return u.name&&(f+=u.name.length),u.clientId&&(f+=u.clientId.length),u.extras&&(f+=JSON.stringify(u.extras).length),u.data&&(f+=ti(u.data)),f}async function lc(u,f,m,b){const w=iu(f,u,b??null);return $r.fromValues(m).decode(w,u)}async function uu(u,f,m,b){return Promise.all(m.map(function(w){return lc(u,f,w,b)}))}async function fu(u,f){return $r.fromValues(u).decode(f.channelOptions,f.logger)}async function hu(u,f){return Promise.all(u.map(function(m){return fu(m,f)}))}async function Va(u,f){return Promise.all(u.map(m=>m.encode(f)))}var Ar=$t;function Vo(u){let f,m=0;for(let b=0;b<u.length;b++)f=u[b],m+=f.size||(f.size=Cs(f));return m}var cc=class o_ extends mi{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(const[f,m]of Object.entries(this.annotations.summary))if(f.endsWith(":distinct.v1")||f.endsWith(":unique.v1")||f.endsWith(":multiple.v1"))for(const[,b]of Object.entries(m))b.clipped||(b.clipped=!1);else f.endsWith(":flag.v1")&&(m.clipped||(m.clipped=!1))}async encode(f){const m=Object.assign(new $r,this,{action:ac.indexOf(this.action||"message.create")});return Hr(m,f)}static fromValues(f){return Object.assign(new o_,f)}static fromValuesArray(f){return f.map(m=>o_.fromValues(m))}toString(){return ar(this,"Message")}},$r=class l_ extends mi{toJSON(...f){return gi.call(this,...f)}static fromValues(f){return Object.assign(new l_,f)}static fromValuesArray(f){return f.map(m=>l_.fromValues(m))}async decodeWithErr(f,m){const b=Object.assign(new cc,I(O({},this),{action:oc(this.action)}));let w;try{await Di(b,f)}catch(R){T.logAction(m,T.LOG_ERROR,"WireMessage.decode()",Ct(R)),w=R}return b.expandFields(),{decoded:b,err:w}}async decode(f,m){const{decoded:b}=await this.decodeWithErr(f,m);return b}toString(){return ar(this,"WireMessage")}},y=cc,A=9;function x(u){return u.every(function(f){return!f.id})}var H=class{constructor(u,f,m){this._annotations=null;var b,w;T.logAction(u.logger,T.LOG_MINOR,"RestChannel()","started; name = "+f),this.name=f,this.client=u,this.presence=new Uo(this),this.channelOptions=tt((b=u._Crypto)!=null?b:null,this.logger,m),(w=u.options.plugins)!=null&&w.Push&&(this._push=new u.options.plugins.Push.PushChannel(this)),u._Annotations&&(this._annotations=new u._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||sn("Annotations"),this._annotations}get push(){return this._push||sn("Push"),this._push}get logger(){return this.client.logger}setOptions(u){var f;this.channelOptions=tt((f=this.client._Crypto)!=null?f:null,this.logger,u)}async history(u){return T.logAction(this.logger,T.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,u)}async publish(...u){const f=u[0],m=u[1];let b,w;if(typeof f=="string"||f===null)b=[y.fromValues({name:f,data:m})],w=u[2];else if(K(f))b=[y.fromValues(f)],w=u[1];else if(Array.isArray(f))b=y.fromValuesArray(f),w=u[1];else throw new ne("The single-argument form of publish() expects a message object or an array of message objects",40013,400);w||(w={});const R=this.client,z=R.options,X=z.useBinaryProtocol?"msgpack":"json",fe=R.options.idempotentRestPublishing,se=ke.defaultPostHeaders(R.options,{format:X});if(te(se,z.headers),fe&&x(b)){const Ee=await vs(A);b.forEach(function(Ve,je){Ve.id=Ee+":"+je.toString()})}const be=await Va(b,this.channelOptions),Se=Vo(be),Pe=z.maxMessageSize;if(Se>Pe)throw new ne(`Maximum size of messages that can be published at once exceeded (was ${Se} bytes; limit is ${Pe} bytes)`,40009,400);await this._publish(Ar(be,R._MsgPack,X),se,w)}async _publish(u,f,m){await ot.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",u,f,m,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},le=H,ye=class sO{constructor(f){this.entries=f&&f.entries||void 0,this.schema=f&&f.schema||void 0,this.appId=f&&f.appId||void 0,this.inProgress=f&&f.inProgress||void 0,this.unit=f&&f.unit||void 0,this.intervalId=f&&f.intervalId||void 0}static fromValues(f){return new sO(f)}},De=ye,Pt=class{static basePath(u){return"/channels/"+encodeURIComponent(u.name)}static history(u,f){const m=u.client,b=m.options.useBinaryProtocol?"msgpack":"json",w=u.client.http.supportsLinkHeaders?void 0:b,R=ke.defaultGetHeaders(m.options,{format:b});return te(R,m.options.headers),new gr(m,this.basePath(u)+"/messages",R,w,async function(z,X,fe){const se=fe?z:Xt(z,m._MsgPack,b);return hu(se,u)}).get(f)}static async status(u){const f=u.client.options.useBinaryProtocol?"msgpack":"json",m=ke.defaultPostHeaders(u.client.options,{format:f});return(await ot.get(u.client,this.basePath(u),m,{},f,!0)).body}},Fn=class{static basePath(u){return Pt.basePath(u.channel)+"/presence"}static async history(u,f){const m=u.channel.client,b=m.options.useBinaryProtocol?"msgpack":"json",w=u.channel.client.http.supportsLinkHeaders?void 0:b,R=ke.defaultGetHeaders(m.options,{format:b});return te(R,m.options.headers),new gr(m,this.basePath(u)+"/history",R,w,async(z,X,fe)=>{const se=fe?z:Xt(z,m._MsgPack,b);return ic(se,u.channel)}).get(f)}},Mt=class{constructor(u){this.channelMixin=Pt,this.presenceMixin=Fn,this.Resource=ot,this.PaginatedResource=gr,this.DeviceDetails=is,this.PushChannelSubscription=ko,this.client=u,this.channels=new Gn(this.client),this.push=new ou(this.client)}async stats(u){const f=ke.defaultGetHeaders(this.client.options),m=this.client.options.useBinaryProtocol?"msgpack":"json",b=this.client.http.supportsLinkHeaders?void 0:m;return te(f,this.client.options.headers),new gr(this.client,"/stats",f,b,function(w,R,z){const X=z?w:JSON.parse(w);for(let fe=0;fe<X.length;fe++)X[fe]=De.fromValues(X[fe]);return X}).get(u)}async time(u){const f=ke.defaultGetHeaders(this.client.options);this.client.options.headers&&te(f,this.client.options.headers);const m=X=>this.client.baseUri(X)+"/time";let{error:b,body:w,unpacked:R}=await this.client.http.do(Gt.Get,m,f,null,u);if(b)throw b;R||(w=JSON.parse(w));const z=w[0];if(!z)throw new ne("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=z-Date.now(),z}async request(u,f,m,b,w,R){var z;const[X,fe,se]=this.client.options.useBinaryProtocol?(this.client._MsgPack||sn("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],be=this.client.http.supportsLinkHeaders?void 0:se;b=b||{};const Se=u.toLowerCase(),Pe=Se=="get"?ke.defaultGetHeaders(this.client.options,{format:se,protocolVersion:m}):ke.defaultPostHeaders(this.client.options,{format:se,protocolVersion:m});typeof w!="string"&&(w=(z=X(w))!=null?z:null),te(Pe,this.client.options.headers),R&&te(Pe,R);const Ee=new gr(this.client,f,Pe,be,async function(Ve,je,at){return Le(at?Ve:fe(Ve))},!0);if(!L.Http.methods.includes(Se))throw new ne("Unsupported method "+Se,40500,405);return L.Http.methodsWithBody.includes(Se)?Ee[Se](b,w):Ee[Se](b)}async batchPublish(u){let f,m;Array.isArray(u)?(f=u,m=!1):(f=[u],m=!0);const b=this.client.options.useBinaryProtocol?"msgpack":"json",w=ke.defaultPostHeaders(this.client.options,{format:b});this.client.options.headers&&te(w,this.client.options.headers);const R=$t(f,this.client._MsgPack,b),z=await ot.post(this.client,"/messages",R,w,{},null,!0),X=z.unpacked?z.body:Xt(z.body,this.client._MsgPack,b);return m?X[0]:X}async batchPresence(u){const f=this.client.options.useBinaryProtocol?"msgpack":"json",m=ke.defaultPostHeaders(this.client.options,{format:f});this.client.options.headers&&te(m,this.client.options.headers);const b=u.join(","),w=await ot.get(this.client,"/presence",m,{channels:b},null,!0);return w.unpacked?w.body:Xt(w.body,this.client._MsgPack,f)}async revokeTokens(u,f){if(es(this.client.options))throw new ne("Cannot revoke tokens when using token auth",40162,401);const m=this.client.options.keyName;let b=f??{};const w=O({targets:u.map(se=>`${se.type}:${se.value}`)},b),R=this.client.options.useBinaryProtocol?"msgpack":"json",z=ke.defaultPostHeaders(this.client.options,{format:R});this.client.options.headers&&te(z,this.client.options.headers);const X=$t(w,this.client._MsgPack,R),fe=await ot.post(this.client,`/keys/${m}/revokeTokens`,X,z,{},null,!0);return fe.unpacked?fe.body:Xt(fe.body,this.client._MsgPack,R)}},Gn=class{constructor(u){this.client=u,this.all=Object.create(null)}get(u,f){u=String(u);let m=this.all[u];return m?f&&m.setOptions(f):this.all[u]=m=new le(this.client,u,f),m}release(u){delete this.all[String(u)]}},Bn=class extends Es{constructor(u){super(ke.objectifyOptions(u,!1,"BaseRest",T.defaultLogger,{Rest:Mt}))}},os={Rest:Mt},Wn=class extends y{static async fromEncoded(u,f){return lc(T.defaultLogger,L.Crypto,u,f)}static async fromEncodedArray(u,f){return uu(T.defaultLogger,L.Crypto,u,f)}static fromValues(u){return y.fromValues(u)}},Li=class extends qr{static async fromEncoded(u,f){return lu(T.defaultLogger,L.Crypto,u,f)}static async fromEncodedArray(u,f){return rc(T.defaultLogger,L.Crypto,u,f)}static fromValues(u){return qr.fromValues(u)}},jo=["annotation.create","annotation.delete"];async function uc(u,f,m){return ja.fromValues(f).decode(m||{},u)}async function op(u,f,m){return Promise.all(f.map(function(b){return uc(u,b,m)}))}async function lp(u,f){return ja.fromValues(u).decode(f.channelOptions,f.logger)}async function Wf(u,f){return Promise.all(u.map(function(m){return lp(m,f)}))}var du=class c_ extends mi{async encode(){const f=Object.assign(new ja,this,{action:jo.indexOf(this.action||"annotation.create")});return Hr(f,{})}static fromValues(f){return Object.assign(new c_,f)}static fromValuesArray(f){return f.map(m=>c_.fromValues(m))}toString(){return ar(this,"Annotation")}},ja=class u_ extends mi{toJSON(...f){return gi.call(this,...f)}static fromValues(f){return Object.assign(new u_,f)}static fromValuesArray(f){return f.map(m=>u_.fromValues(m))}async decode(f,m){const b=Object.assign(new du,I(O({},this),{action:jo[this.action]}));try{await Di(b,f)}catch(w){T.logAction(m,T.LOG_ERROR,"WireAnnotation.decode()",Ct(w))}return b}toString(){return ar(this,"WireAnnotation")}},Fo=du,Kf=class extends Fo{static async fromEncoded(u,f){return uc(T.defaultLogger,u,f)}static async fromEncodedArray(u,f){return op(T.defaultLogger,u,f)}static fromValues(u){return Fo.fromValues(u)}};function cp(u){let f;switch(typeof u){case"string":f=u;break;case"object":f=u.serial;break}if(!f||typeof f!="string")throw new ne("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return f}function up(u,f){const m=cp(u);if(!f||typeof f!="object")throw new ne("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const b=Fo.fromValues(f);return b.messageSerial=m,b.action||(b.action="annotation.create"),b}function fp(u,f){return u.client.rest.channelMixin.basePath(u)+"/messages/"+encodeURIComponent(f)+"/annotations"}var Gy=class{constructor(u){this.channel=u}async publish(u,f){const m=up(u,f),b=await m.encode(),w=this.channel.client,R=w.options,z=R.useBinaryProtocol?"msgpack":"json",X=ke.defaultPostHeaders(w.options,{format:z}),fe={};te(X,w.options.headers);const se=$t([b],w._MsgPack,z);await ot.post(w,fp(this.channel,m.messageSerial),se,X,fe,null,!0)}async delete(u,f){return f.action="annotation.delete",this.publish(u,f)}async get(u,f){const m=this.channel.client,b=cp(u),w=m.options.useBinaryProtocol?"msgpack":"json",R=m.http.supportsLinkHeaders?void 0:w,z=ke.defaultGetHeaders(m.options,{format:w});return te(z,m.options.headers),new gr(m,fp(this.channel,b),z,R,async(X,fe,se)=>{const be=se?X:Xt(X,m._MsgPack,w);return Wf(be,this.channel)}).get(f)}},Yf=Gy,oi=$t;function Zs(u){const f=[];if(u)for(let m=0;m<u.length;m++)f.push(u[m].toString());return"[ "+f.join(", ")+" ]"}function hp(u,f,m,b,w,R){const z=Xt(u,f,R);return pu(z,m,b,w)}function pu(u,f,m,b){let w;u.error&&(w=ne.fromValues(u.error));let R;u.messages&&(R=$r.fromValuesArray(u.messages));let z;f&&u.presence&&(z=f.WirePresenceMessage.fromValuesArray(u.presence));let X;m&&u.annotations&&(X=m.WireAnnotation.fromValuesArray(u.annotations));let fe;return b&&u.state&&(fe=b.WireObjectMessage.fromValuesArray(u.state,ee,rs)),Object.assign(new Xf,I(O({},u),{presence:z,messages:R,annotations:X,state:fe,error:w}))}function Qf(u){return f=>{var m;return pu(f,{WirePresenceMessage:Ts},{WireAnnotation:ja},(m=u==null?void 0:u.ObjectsPlugin)!=null?m:null)}}function Gr(u){return Object.assign(new Xf,u)}function fc(u,f,m,b){let w="[ProtocolMessage";u.action!==void 0&&(w+="; action="+Js[u.action]||u.action);const R=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let z;for(let X=0;X<R.length;X++)z=R[X],u[z]!==void 0&&(w+="; "+z+"="+u[z]);if(u.messages&&(w+="; messages="+Zs($r.fromValuesArray(u.messages))),u.presence&&f&&(w+="; presence="+Zs(f.WirePresenceMessage.fromValuesArray(u.presence))),u.annotations&&m&&(w+="; annotations="+Zs(m.WireAnnotation.fromValuesArray(u.annotations))),u.state&&b&&(w+="; state="+Zs(b.WireObjectMessage.fromValuesArray(u.state,ee,rs))),u.error&&(w+="; error="+ne.fromValues(u.error).toString()),u.auth&&u.auth.accessToken&&(w+="; token="+u.auth.accessToken),u.flags&&(w+="; flags="+Zl.filter(u.hasFlag).join(",")),u.params){let X="";wn(u.params,function(fe){X.length>0&&(X+="; "),X+=fe+"="+u.params[fe]}),X.length>0&&(w+="; params=["+X+"]")}return w+="]",w}var Xf=class{constructor(){this.hasFlag=u=>(this.flags&sr[u])>0}setFlag(u){return this.flags=this.flags|sr[u]}getMode(){return(this.flags||0)&sr.MODE_ALL}encodeModesToFlags(u){u.forEach(f=>this.setFlag(f))}decodeModesFromFlags(){const u=[];return Io.forEach(f=>{this.hasFlag(f)&&u.push(f)}),u.length>0?u:void 0}},Bo=Xf,Jf=class{constructor(u,f,m,b,w){this.previous=u,this.current=f,f==="attached"&&(this.resumed=m,this.hasBacklog=b),w&&(this.reason=w)}},Fa=Jf,gu=function(){};function dp(u){if(u&&"params"in u&&!K(u.params))return new ne("options.params must be an object",4e4,400);if(u&&"modes"in u){if(!Array.isArray(u.modes))return new ne("options.modes must be an array",4e4,400);for(let f=0;f<u.modes.length;f++){const m=u.modes[f];if(!m||typeof m!="string"||!Io.includes(String.prototype.toUpperCase.call(m)))return new ne("Invalid channel mode: "+m,4e4,400)}}}var Ba=class f_ extends hn{constructor(f,m,b){var w,R,z;super(f.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(X){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const fe=this.client.rest.channelMixin;if(X&&X.untilAttach){if(this.state!=="attached")throw new ne("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new ne("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete X.untilAttach,X.from_serial=this.properties.attachSerial}return fe.history(this,X)},this.whenState=X=>hn.prototype.whenState.call(this,X,this.state),T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel()","started; name = "+m),this.name=m,this.channelOptions=tt((w=f._Crypto)!=null?w:null,this.logger,b),this.client=f,this._presence=f._RealtimePresence?new f._RealtimePresence.RealtimePresence(this):null,f._Annotations&&(this._annotations=new f._Annotations.RealtimeAnnotations(this)),this.connectionManager=f.connection.connectionManager,this.state="initialized",this.subscriptions=new hn(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(b),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:f.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new hn(this.logger),(R=f.options.plugins)!=null&&R.Push&&(this._push=new f.options.plugins.Push.PushChannel(this)),(z=f.options.plugins)!=null&&z.Objects&&(this._objects=new f.options.plugins.Objects.Objects(this))}get presence(){return this._presence||sn("RealtimePresence"),this._presence}get annotations(){return this._annotations||sn("Annotations"),this._annotations}get push(){return this._push||sn("Push"),this._push}get objects(){return this._objects||sn("Objects"),this._objects}invalidStateError(){return new ne("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(f){return f=Array.prototype.slice.call(f),typeof f[0]=="function"&&f.unshift(null),f}async setOptions(f){var m;const b=this.channelOptions,w=dp(f);if(w)throw w;if(this.channelOptions=tt((m=this.client._Crypto)!=null?m:null,this.logger,f),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(f,b))return this.attachImpl(),new Promise((R,z)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(X){switch(this.event){case"update":case"attached":R();break;default:z(X.reason)}})})}_shouldReattachToSetOptions(f,m){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(f!=null&&f.params){const b=Ha(f.params),w=Ha(m.params);if(Object.keys(b).length!==Object.keys(w).length||!Qi(w,b))return!0}return!!(f!=null&&f.modes&&(!m.modes||!Xi(f.modes,m.modes)))}async publish(...f){let m;if(f.length==1)if(K(f[0]))m=[y.fromValues(f[0])];else if(Array.isArray(f[0]))m=y.fromValuesArray(f[0]);else throw new ne("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else m=[y.fromValues({name:f[0],data:f[1]})];const w=this.client.options.maxMessageSize,R=await Va(m,this.channelOptions),z=Vo(R);if(z>w)throw new ne(`Maximum size of messages that can be published at once exceeded (was ${z} bytes; limit is ${w} bytes)`,40009,400);this.throwIfUnpublishableState(),T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+R.length);const X=Gr({action:Ge.MESSAGE,channel:this.name,messages:R});return this.sendMessage(X)}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(this.state==="failed"||this.state==="suspended")throw this.invalidStateError()}onEvent(f){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const m=this.subscriptions;for(let b=0;b<f.length;b++){const w=f[b];m.emit(w.name,w)}}async attach(){return this.state==="attached"?null:new Promise((f,m)=>{this._attach(!1,null,(b,w)=>b?m(b):f(w))})}_attach(f,m,b){b||(b=R=>{R&&T.logAction(this.logger,T.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+R.toString())});const w=this.connectionManager;if(!w.activeState()){b(w.getError());return}(this.state!=="attaching"||f)&&this.requestState("attaching",m),this.once(function(R){switch(this.event){case"attached":b==null||b(null,R);break;case"detached":case"suspended":case"failed":b==null||b(R.reason||w.getError()||new ne("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":b==null||b(new ne("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const f=Gr({action:Ge.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&f.encodeModesToFlags(ni(this.channelOptions.modes)),this._attachResume&&f.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(f.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(f).catch(gu)}async detach(){const f=this.connectionManager;if(!f.activeState())throw f.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new ne("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((m,b)=>{this.once(function(w){switch(this.event){case"detached":m();break;case"attached":case"suspended":case"failed":b(w.reason||f.getError()||new ne("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":b(new ne("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const f=Gr({action:Ge.DETACH,channel:this.name});this.sendMessage(f).catch(gu)}async subscribe(...f){const[m,b]=f_.processListenerArgs(f);if(this.state==="failed")throw ne.fromValues(this.invalidStateError());return m&&typeof m=="object"&&!Array.isArray(m)?this.client._FilteredSubscriptions.subscribeFilter(this,m,b):this.subscriptions.on(m,b),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...f){var m;const[b,w]=f_.processListenerArgs(f);if(typeof b=="object"&&!w||(m=this.filteredSubscriptions)!=null&&m.has(w)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,b,w).forEach(R=>this.subscriptions.off(R));return}this.subscriptions.off(b,w)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new Me("Unable to sync to channel; not attached",4e4)}const f=this.connectionManager;if(!f.activeState())throw f.getError();const m=Gr({action:Ge.SYNC,channel:this.name});this.syncChannelSerial&&(m.channelSerial=this.syncChannelSerial),f.send(m)}async sendMessage(f){return new Promise((m,b)=>{this.connectionManager.send(f,this.client.options.queueMessages,w=>{w?b(w):m()})})}async sendPresence(f){const m=Gr({action:Ge.PRESENCE,channel:this.name,presence:f});return this.sendMessage(m)}sendState(f){const m=Gr({action:Ge.OBJECT,channel:this.name,state:f});return this.sendMessage(m)}async processMessage(f){(f.action===Ge.ATTACHED||f.action===Ge.MESSAGE||f.action===Ge.PRESENCE||f.action===Ge.OBJECT||f.action===Ge.ANNOTATION)&&this.setChannelSerial(f.channelSerial);let m,b=!1;switch(f.action){case Ge.ATTACHED:{this.properties.attachSerial=f.channelSerial,this._mode=f.getMode(),this.params=f.params||{};const w=f.decodeModesFromFlags();this.modes=w&&Ws(w)||void 0;const R=f.hasFlag("RESUMED"),z=f.hasFlag("HAS_PRESENCE"),X=f.hasFlag("HAS_BACKLOG"),fe=f.hasFlag("HAS_OBJECTS");if(this.state==="attached"){R||(this._presence&&this._presence.onAttached(z),this._objects&&this._objects.onAttached(fe));const se=new Fa(this.state,this.state,R,X,f.error);this._allChannelChanges.emit("update",se),(!R||this.channelOptions.updateOnAttached)&&this.emit("update",se)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",f.error,R,z,X,fe);break}case Ge.DETACHED:{const w=f.error?ne.fromValues(f.error):new ne("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",w):this.state==="attaching"?this.notifyState("suspended",w):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",w);break}case Ge.SYNC:if(b=!0,m=this.syncChannelSerial=f.channelSerial,!f.presence)break;case Ge.PRESENCE:{if(!f.presence)break;zr(f);const w=this.channelOptions;if(this._presence){const R=await Promise.all(f.presence.map(z=>z.decode(w,this.logger)));this._presence.setPresence(R,b,m)}break}case Ge.OBJECT:case Ge.OBJECT_SYNC:{if(!this._objects||!f.state)return;zr(f);const w=this.client.connection.connectionManager.getActiveTransportFormat(),R=f.state.map(z=>z.decode(this.client,w));f.action===Ge.OBJECT?this._objects.handleObjectMessages(R):this._objects.handleObjectSyncMessages(R,f.channelSerial);break}case Ge.MESSAGE:{if(this.state!=="attached"){T.logAction(this.logger,T.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+f.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}zr(f);const w=f.messages,R=w[0],z=w[w.length-1];if(R.extras&&R.extras.delta&&R.extras.delta.from!==this._lastPayload.messageId){const fe='Delta message decode failure - previous message not available for message "'+f.id+'" on this channel "'+this.name+'".';T.logAction(this.logger,T.LOG_ERROR,"RealtimeChannel.processMessage()",fe),this._startDecodeFailureRecovery(new ne(fe,40018,400));break}let X=[];for(let fe=0;fe<w.length;fe++){const{decoded:se,err:be}=await w[fe].decodeWithErr(this._decodingContext,this.logger);if(X[fe]=se,be)switch(be.code){case 40018:this._startDecodeFailureRecovery(be);return;case 40019:case 40021:this.notifyState("failed",be);return}}this._lastPayload.messageId=z.id,this._lastPayload.protocolMessageChannelSerial=f.channelSerial,this.onEvent(X);break}case Ge.ANNOTATION:{zr(f);const w=this.channelOptions;if(this._annotations){const R=await Promise.all((f.annotations||[]).map(z=>z.decode(w,this.logger)));this._annotations._processIncoming(R)}break}case Ge.ERROR:{const w=f.error;w&&w.code==80016?this.checkPendingState():this.notifyState("failed",ne.fromValues(w));break}default:T.logAction(this.logger,T.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+f.action+")")}}_startDecodeFailureRecovery(f){this._lastPayload.decodeFailureRecoveryInProgress||(T.logAction(this.logger,T.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,f,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(f,m,b,w,R,z){if(T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+f),this.clearStateTimer(),["detached","suspended","failed"].includes(f)&&(this.properties.channelSerial=null),f===this.state)return;this._presence&&this._presence.actOnChannelState(f,w,m),this._objects&&this._objects.actOnChannelState(f,z),f==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),m&&(this.errorReason=m);const X=new Fa(this.state,f,b,R,m),fe='Channel state for channel "'+this.name+'"',se=f+(m?"; reason: "+m:"");f==="failed"?T.logAction(this.logger,T.LOG_ERROR,fe,se):T.logAction(this.logger,T.LOG_MAJOR,fe,se),f!=="attaching"&&f!=="suspended"&&(this.retryCount=0),f==="attached"&&this.onAttached(),f==="attached"?this._attachResume=!0:(f==="detaching"||f==="failed")&&(this._attachResume=!1),this.state=f,this._allChannelChanges.emit(f,X),this.emit(f,X)}requestState(f,m){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+f),this.notifyState(f,m),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const f=new ne("Channel attach timed out",90007,408);this.notifyState("suspended",f);break}case"detaching":{const f=new ne("Channel detach timed out",90007,408);this.notifyState("attached",f);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const f=this.stateTimer;f&&(clearTimeout(f),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const f=fi(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},f)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const f=this.state;return f==="initialized"||f==="detached"||f==="failed"?null:new ne("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+f,90001,400)}setChannelSerial(f){T.logAction(this.logger,T.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+f+"; previous = "+this.properties.channelSerial),f&&(this.properties.channelSerial=f)}async status(){return this.client.rest.channelMixin.status(this)}};function Ha(u){const f=u||{},{agent:m}=f;return k(f,["agent"])}var za=Ba,pp=class{constructor(u){this.channel=u,this.logger=u.logger,this.subscriptions=new hn(this.logger)}async publish(u,f){const m=this.channel.name,b=up(u,f),w=await b.encode();this.channel.throwIfUnpublishableState(),T.logAction(this.logger,T.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+m+", sending annotation with messageSerial = "+b.messageSerial+", type = "+b.type);const R=Gr({action:Ge.ANNOTATION,channel:m,annotations:[w]});return this.channel.sendMessage(R)}async delete(u,f){return f.action="annotation.delete",this.publish(u,f)}async subscribe(...u){const f=za.processListenerArgs(u),m=f[0],b=f[1],w=this.channel;if(w.state==="failed")throw ne.fromValues(w.invalidStateError());if(this.subscriptions.on(m,b),this.channel.channelOptions.attachOnSubscribe!==!1&&await w.attach(),(this.channel.state==="attached"&&this.channel._mode&sr.ANNOTATION_SUBSCRIBE)===0)throw new ne("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...u){const f=za.processListenerArgs(u),m=f[0],b=f[1];this.subscriptions.off(m,b)}_processIncoming(u){for(const f of u)this.subscriptions.emit(f.type||"",f)}async get(u,f){return Yf.prototype.get.call(this,u,f)}},ea=pp,ta=class Bg extends Bn{constructor(f){var m,b;if(!Bg._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(ke.objectifyOptions(f,!0,"Rest",T.defaultLogger,I(O({},os),{Crypto:(m=Bg.Crypto)!=null?m:void 0,MsgPack:(b=Bg._MsgPack)!=null?b:void 0,Annotations:{Annotation:Fo,WireAnnotation:ja,RealtimeAnnotations:ea,RestAnnotations:Yf}})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(f){this._Crypto=f}};ta._Crypto=null,ta.Message=Wn,ta.PresenceMessage=Li,ta.Annotation=Kf,ta._MsgPack=null,ta._Http=Ss;var mu=ta,gp=class extends hn{constructor(u){super(u),this.messages=[]}count(){return this.messages.length}push(u){this.messages.push(u)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(u){this.messages.push.apply(this.messages,u)}prepend(u){this.messages.unshift.apply(this.messages,u)}completeMessages(u,f,m){T.logAction(this.logger,T.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+u+"; count = "+f),m=m||null;const b=this.messages;if(b.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const w=b[0];if(w){const R=w.message.msgSerial,z=u+f;if(z>R){const X=b.splice(0,z-R);for(const fe of X)fe.callback(m)}b.length==0&&this.emit("idle")}}completeAllMessages(u){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,u)}resetSendAttempted(){for(let u of this.messages)u.sendAttempted=!1}clear(){T.logAction(this.logger,T.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},mp=gp,yp=class{constructor(u,f){this.message=u,this.callback=f,this.merged=!1;const m=u.action;this.sendAttempted=!1,this.ackRequired=typeof m=="number"&&[Ge.MESSAGE,Ge.PRESENCE,Ge.ANNOTATION,Ge.OBJECT].includes(m)}},Wy=class extends hn{constructor(u){super(u.logger),this.transport=u,this.messageQueue=new mp(this.logger),u.on("ack",(f,m)=>{this.onAck(f,m)}),u.on("nack",(f,m,b)=>{this.onNack(f,m,b)})}onAck(u,f){T.logAction(this.logger,T.LOG_MICRO,"Protocol.onAck()","serial = "+u+"; count = "+f),this.messageQueue.completeMessages(u,f)}onNack(u,f,m){T.logAction(this.logger,T.LOG_ERROR,"Protocol.onNack()","serial = "+u+"; count = "+f+"; err = "+Ct(m)),m||(m=new ne("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(u,f,m)}onceIdle(u){const f=this.messageQueue;if(f.count()===0){u();return}f.once("idle",u)}send(u){u.ackRequired&&this.messageQueue.push(u),this.logger.shouldLog(T.LOG_MICRO)&&T.logActionNoStrip(this.logger,T.LOG_MICRO,"Protocol.send()","sending msg; "+fc(u.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._objectsPlugin)),u.sendAttempted=!0,this.transport.send(u.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const u=this.transport;this.onceIdle(function(){u.disconnect()})}},vp=Wy,_p=class{constructor(u,f,m,b){this.previous=u,this.current=f,m&&(this.retryIn=m),b&&(this.reason=b)}},Ho=_p,Kn={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},bp={disconnected:()=>ne.fromValues({statusCode:400,code:Kn.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>ne.fromValues({statusCode:400,code:Kn.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>ne.fromValues({statusCode:400,code:Kn.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>ne.fromValues({statusCode:400,code:Kn.CLOSING,message:"Connection closing"}),closed:()=>ne.fromValues({statusCode:400,code:Kn.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>ne.fromValues({statusCode:500,code:Kn.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>ne.fromValues({statusCode:500,code:Kn.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function yi(u){return!u.statusCode||!u.code||u.statusCode>=500?!0:Object.values(Kn).includes(u.code)}var Yn=bp,zo=Gr({action:Ge.CLOSE}),Zf=Gr({action:Ge.DISCONNECT}),yu=class extends hn{constructor(u,f,m,b){super(u.logger),b&&(m.format=void 0,m.heartbeats=!0),this.connectionManager=u,this.auth=f,this.params=m,this.timeouts=m.options.timeouts,this.format=m.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Yn.closed())}disconnect(u){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",u||Yn.disconnected())}fail(u){this.isConnected&&this.requestDisconnect(),this.finish("failed",u||Yn.failed())}finish(u,f){var m;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((m=this.idleTimer)!=null?m:void 0),this.idleTimer=null,this.emit(u,f),this.dispose())}onProtocolMessage(u){switch(this.logger.shouldLog(T.LOG_MICRO)&&T.logActionNoStrip(this.logger,T.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+fc(u,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),u.action){case Ge.HEARTBEAT:T.logActionNoStrip(this.logger,T.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",u.id);break;case Ge.CONNECTED:this.onConnect(u),this.emit("connected",u.error,u.connectionId,u.connectionDetails,u);break;case Ge.CLOSED:this.onClose(u);break;case Ge.DISCONNECTED:this.onDisconnect(u);break;case Ge.ACK:this.emit("ack",u.msgSerial,u.count);break;case Ge.NACK:this.emit("nack",u.msgSerial,u.count,u.error);break;case Ge.SYNC:this.connectionManager.onChannelMessage(u,this);break;case Ge.ACTIVATE:break;case Ge.AUTH:rt(this.auth.authorize(),f=>{f&&T.logAction(this.logger,T.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Ct(f))});break;case Ge.ERROR:if(T.logAction(this.logger,T.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+L.Config.inspect(u.error)+(u.channel?", channel: "+u.channel:"")),u.channel===void 0){this.onFatalError(u);break}this.connectionManager.onChannelMessage(u,this);break;default:this.connectionManager.onChannelMessage(u,this)}}onConnect(u){if(this.isConnected=!0,!u.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const f=u.connectionDetails.maxIdleInterval;f&&(this.maxIdleInterval=f+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(u){const f=u&&u.error;T.logAction(this.logger,T.LOG_MINOR,"Transport.onDisconnect()","err = "+Ct(f)),this.finish("disconnected",f)}onFatalError(u){const f=u&&u.error;T.logAction(this.logger,T.LOG_MINOR,"Transport.onFatalError()","err = "+Ct(f)),this.finish("failed",f)}onClose(u){const f=u&&u.error;T.logAction(this.logger,T.LOG_MINOR,"Transport.onClose()","err = "+Ct(f)),this.finish("closed",f)}requestClose(){T.logAction(this.logger,T.LOG_MINOR,"Transport.requestClose()",""),this.send(zo)}requestDisconnect(){T.logAction(this.logger,T.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Zf)}ping(u){const f={action:Ge.HEARTBEAT};u&&(f.id=u),this.send(Gr(f))}dispose(){T.logAction(this.logger,T.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(u){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},u))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const u=Date.now()-this.lastActivity,f=this.maxIdleInterval-u;if(f<=0){const m="No activity seen from realtime in "+u+"ms; assuming connection has dropped";T.logAction(this.logger,T.LOG_ERROR,"Transport.onIdleTimerExpire()",m),this.disconnect(new ne(m,80003,408))}else this.setIdleTimer(f+100)}static tryConnect(u,f,m,b,w){const R=new u(f,m,b);let z;const X=function(se){clearTimeout(z),w({event:this.event,error:se})},fe=f.options.timeouts.realtimeRequestTimeout;return z=setTimeout(()=>{R.off(["preconnect","disconnected","failed"]),R.dispose(),X.call({event:"disconnected"},new ne("Timeout waiting for transport to indicate itself viable",5e4,500))},fe),R.on(["failed","disconnected"],X),R.on("preconnect",function(){T.logAction(f.logger,T.LOG_MINOR,"Transport.tryConnect()","viable transport "+R),clearTimeout(z),R.off(["failed","disconnected"],X),w(null,R)}),R.connect(),R}static isAvailable(){throw new ne("isAvailable not implemented for transport",5e4,500)}},As=yu,mr;(u=>{u.WebSocket="web_socket",u.Comet="comet",u.XhrPolling="xhr_polling"})(mr||(mr={}));var qo=typeof _l<"u"?_l:typeof window<"u"?window:self,vu=()=>{var u;return typeof L.WebStorage<"u"&&((u=L.WebStorage)==null?void 0:u.localSupported)},na=()=>{var u;return typeof L.WebStorage<"u"&&((u=L.WebStorage)==null?void 0:u.sessionSupported)},qa=function(){},eh="ably-transport-preference";function li(u,f,m){let b;if(u.channel!==f.channel||(b=u.action)!==Ge.PRESENCE&&b!==Ge.MESSAGE||b!==f.action)return!1;const w=b===Ge.PRESENCE?"presence":"messages",R=u[w].concat(f[w]);return Vo(R)>m||!Vr(R,"clientId")||!R.every(function(X){return!X.id})?!1:(u[w]=R,!0)}function hc(u){try{return JSON.parse(u)}catch{return null}}var Rs=class{constructor(u,f,m,b){this.options=u,this.host=f,this.mode=m,this.connectionKey=b,this.format=u.useBinaryProtocol?"msgpack":"json"}getConnectParams(u){const f=u?Ce(u):{},m=this.options;switch(this.mode){case"resume":f.resume=this.connectionKey;break;case"recover":{const b=hc(m.recover);b&&(f.recover=b.connectionKey);break}}return m.clientId!==void 0&&(f.clientId=m.clientId),m.echoMessages===!1&&(f.echo="false"),this.format!==void 0&&(f.format=this.format),this.stream!==void 0&&(f.stream=this.stream),this.heartbeats!==void 0&&(f.heartbeats=this.heartbeats),f.v=ke.protocolVersion,f.agent=$e(this.options),m.transportParams!==void 0&&te(f,m.transportParams),f}toString(){let u="[mode="+this.mode;return this.host&&(u+=",host="+this.host),this.connectionKey&&(u+=",connectionKey="+this.connectionKey),this.format&&(u+=",format="+this.format),u+="]",u}},Sp=class aO extends hn{constructor(f,m){super(f.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=f,this.initTransports(),this.options=m;const b=m.timeouts,w=b.webSocketConnectTimeout+b.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:w,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:b.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:b.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:b.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new mp(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=b.connectionStateTtl,this.maxIdleInterval=null,this.transports=It(m.transports||ke.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(mr.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(mr.XhrPolling)?this.baseTransport=mr.XhrPolling:this.transports.includes(mr.Comet)&&(this.baseTransport=mr.Comet),this.domains=ke.getHosts(m),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,T.logAction(this.logger,T.LOG_MINOR,"Realtime.ConnectionManager()","started"),T.logAction(this.logger,T.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(m.transports||ke.defaultTransports)+"]"),T.logAction(this.logger,T.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),T.logAction(this.logger,T.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const z="no requested transports available";throw T.logAction(this.logger,T.LOG_ERROR,"realtime.ConnectionManager()",z),new Error(z)}const R=L.Config.addEventListener;R&&(na()&&typeof m.recover=="function"&&R("beforeunload",this.persistConnection.bind(this)),m.closeOnUnload===!0&&R("beforeunload",()=>{T.logAction(this.logger,T.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),R("online",()=>{var z;this.state==this.states.disconnected||this.state==this.states.suspended?(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((z=this.pendingTransport)==null||z.off(),this.disconnectAllTransports(),this.startConnect())}),R("offline",()=>{this.state==this.states.connected&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(f){const m={supportedTransports:{}};return this.initTransports(f,m),m.supportedTransports}static initTransports(f,m){const b=O(O({},L.Transports.bundledImplementations),f);[mr.WebSocket,...L.Transports.order].forEach(w=>{const R=b[w];R&&R.isAvailable()&&(m.supportedTransports[w]=R)})}initTransports(){aO.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(f,m){return new Rs(this.options,f,m,this.connectionKey)}getTransportParams(f){(b=>{if(this.connectionKey){b("resume");return}if(typeof this.options.recover=="string"){b("recover");return}const w=this.options.recover,R=this.getSessionRecoverData(),z=this.sessionRecoveryName();if(R&&typeof w=="function"){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+z+")"),w(R,X=>{X?(this.options.recover=R.recoveryKey,b("recover")):b("clean")});return}b("clean")})(b=>{const w=this.createTransportParams(null,b);if(b==="recover"){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const R=hc(this.options.recover);R&&(this.msgSerial=R.msgSerial)}else T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+w.toString());f(w)})}tryATransport(f,m,b){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+m),this.proposedTransport=As.tryConnect(this.supportedTransports[m],this,this.realtime.auth,f,(w,R)=>{const z=this.state;if(z==this.states.closing||z==this.states.closed||z==this.states.failed){R&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+z.state+" while we were attempting the transport; closing "+R),R.close()),b(!0);return}if(w){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+m+" "+w.event+", err: "+w.error.toString()),ii.isTokenErr(w.error)&&!(this.errorReason&&ii.isTokenErr(this.errorReason))?(this.errorReason=w.error,rt(this.realtime.auth._forceNewToken(null,null),X=>{if(X){this.actOnErrorFromAuthorize(X);return}this.tryATransport(f,m,b)})):w.event==="failed"?(this.notifyState({state:"failed",error:w.error}),b(!0)):w.event==="disconnected"&&(yi(w.error)?b(!1):(this.notifyState({state:this.states.connecting.failState,error:w.error}),b(!0)));return}T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+m+"; setting pending"),this.setTransportPending(R,f),b(null,R)})}setTransportPending(f,m){const b=m.mode;T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+f+"; mode = "+b),this.pendingTransport=f,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),f.once("connected",(R,z,X)=>{this.activateTransport(R,f,z,X),b==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const w=this;f.on(["disconnected","closed","failed"],function(R){w.deactivateTransport(f,this.event,R)}),this.emit("transport.pending",f)}activateTransport(f,m,b,w){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+m),f&&T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+f),b&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+b),w&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(w)),this.persistTransportPreference(m);const R=this.state,z=this.states.connected.state;if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+R.state),R.state==this.states.closing.state||R.state==this.states.closed.state||R.state==this.states.failed.state)return T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),m.disconnect(),!1;if(delete this.pendingTransport,!m.isConnected)return T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+m+" since it appears to no longer be connected"),!1;const X=this.activeProtocol;this.activeProtocol=new vp(m),this.host=m.params.host;const fe=w.connectionKey;if(fe&&this.connectionKey!=fe&&this.setConnection(b,w,!!f),this.onConnectionDetailsUpdate(w,m),L.Config.nextTick(()=>{m.on("connected",(se,be,Se)=>{this.onConnectionDetailsUpdate(Se,m),this.emit("update",new Ho(z,z,null,se))})}),R.state===this.states.connected.state?f&&(this.errorReason=this.realtime.connection.errorReason=f,this.emit("update",new Ho(z,z,null,f))):(this.notifyState({state:"connected",error:f}),this.errorReason=this.realtime.connection.errorReason=f||null),this.emit("transport.active",m),X)if(X.messageQueue.count()>0&&T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+X.transport.shortName+", new one is "+m.shortName+") finishing with "+X.messageQueue.count()+" messages still pending"),X.transport===m){const se="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+m.shortName+"; stack = "+new Error().stack;T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.activateTransport()",se)}else X.finish();return!0}deactivateTransport(f,m,b){const w=this.activeProtocol,R=w&&w.getTransport()===f,z=f===this.pendingTransport,X=this.noTransportsScheduledForActivation();if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+f),T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+m+(R?"; was active":z?"; was pending":"")+(X?"":"; another transport is scheduled for activation")),b&&b.message&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+b.message),R&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(w.getPendingMessages()),w.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",f),R&&X||R&&m==="failed"||m==="closed"||w===null&&z){if(m==="disconnected"&&b&&b.statusCode>500&&this.domains.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:m,error:b,retryImmediately:!0});return}const fe=m==="failed"&&ii.isTokenErr(b)?"disconnected":m;this.notifyState({state:fe,error:b});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(f,m,b){const w=this.connectionId;(w&&w!==f||!w&&b)&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==f&&T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=f,this.realtime.connection.key=this.connectionKey=m.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const f=Date.now()-this.lastActivity;f>this.connectionStateTtl+this.maxIdleInterval&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+f+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(na()){const f=this.createRecoveryKey();f&&this.setSessionRecoverData({recoveryKey:f,disconnectedAt:Date.now(),location:qo.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var f;return(f=this.activeProtocol)==null?void 0:f.getTransport().format}getError(){if(this.errorReason){const f=Me.fromValues(this.errorReason);return f.cause=this.errorReason,f}return this.getStateError()}getStateError(){var f,m;return(m=(f=Yn)[this.state.state])==null?void 0:m.call(f)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(f){const m="Connection state",b=f.current+(f.reason?"; reason: "+f.reason:"");f.current==="failed"?T.logAction(this.logger,T.LOG_ERROR,m,b):T.logAction(this.logger,T.LOG_MAJOR,m,b),T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+f.current+"; reason = "+(f.reason&&f.reason.message));const w=this.state=this.states[f.current];f.reason&&(this.errorReason=f.reason,this.realtime.connection.errorReason=f.reason),(w.terminal||w.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",f)}startTransitionTimer(f){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+f.state),this.transitionTimer&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager "+f.state+" timer expired","requesting new state: "+f.failState),this.notifyState({state:f.failState}))},f.retryDelay)}cancelTransitionTimer(){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(f){f!=="disconnected"&&f!=="suspended"&&f!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(f){this.retryTimer=setTimeout(()=>{T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},f)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{T.logAction(this.logger,T.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&rt(this.realtime.http.checkConnectivity(),(f,m)=>{f||!m?(T.logAction(this.logger,T.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new ne("Unable to connect (network unreachable)",80003,404)})):T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(f){this.webSocketGiveUpTimer=setTimeout(()=>{var m,b;this.wsCheckResult||(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(m=this.proposedTransport)==null||m.dispose(),(b=this.pendingTransport)==null||b.dispose(),this.connectBase(f,++this.connectCounter)):T.logAction(this.logger,T.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(f){var m,b;const w=f.state,R=w==="disconnected"&&(this.state===this.states.connected||f.retryImmediately||this.state===this.states.connecting&&f.error&&ii.isTokenErr(f.error)&&!(this.errorReason&&ii.isTokenErr(this.errorReason)));if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+w+(R?"; will retry connection immediately":"")),w==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(f.state),(w==="suspended"||w==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const z=this.states[f.state];let X=z.retryDelay;z.state==="disconnected"&&(this.disconnectedRetryCount++,X=fi(z.retryDelay,this.disconnectedRetryCount));const fe=new Ho(this.state.state,z.state,X,f.error||((b=(m=Yn)[z.state])==null?void 0:b.call(m)));if(R){const se=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},be=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;be&&be<1e3?(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+be+"ms ago, waiting another "+(1e3-be)+"ms before trying again"),setTimeout(se,1e3-be)):L.Config.nextTick(se)}else(w==="disconnected"||w==="suspended")&&this.startRetryTimer(X);(w==="disconnected"&&!R||w==="suspended"||z.terminal)&&L.Config.nextTick(()=>{this.disconnectAllTransports()}),w=="connected"&&!this.activeProtocol&&T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(fe),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(w,fe.reason),this.failQueuedMessages(fe.reason))}requestState(f){var m,b;const w=f.state;if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+w+"; current state: "+this.state.state),w==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(w),w=="connecting"&&this.state.state=="connected")||w=="closing"&&this.state.state=="closed")return;const R=this.states[w],z=new Ho(this.state.state,R.state,null,f.error||((b=(m=Yn)[R.state])==null?void 0:b.call(m)));this.enactStateChange(z),w=="connecting"&&L.Config.nextTick(()=>{this.startConnect()}),w=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const f=this.realtime.auth,m=++this.connectCounter,b=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(w=>{if(w.mode==="recover"&&w.options.recover){const R=hc(w.options.recover);R&&this.realtime.channels.recoverChannels(R.channelSerials)}m===this.connectCounter&&this.connectImpl(w,m)})};if(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),f.method==="basic")b();else{const w=R=>{m===this.connectCounter&&(R?this.actOnErrorFromAuthorize(R):b())};this.errorReason&&ii.isTokenErr(this.errorReason)?rt(f._forceNewToken(null,null),w):rt(f._ensureValidAuthCredentials(!1),w)}}connectImpl(f,m){const b=this.state.state;if(b!==this.states.connecting.state){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+b);return}const w=this.getTransportPreference();w&&w===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(f,++this.connectCounter))}).catch(qa),w&&w===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(f,m):this.connectWs(f,m)}connectWs(f,m){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(f),this.tryTransportWithFallbacks("web_socket",f,!0,m,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(f,m){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,f,!1,m,()=>!0):this.notifyState({state:"disconnected",error:new ne("No transports left to try",8e4,404)})}tryTransportWithFallbacks(f,m,b,w,R){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",f);const z=Se=>{this.notifyState({state:this.states.connecting.failState,error:Se})},X=this.domains.slice(),fe=(Se,Pe)=>{if(w===this.connectCounter){if(!R()){Pe&&Pe.dispose();return}!Pe&&!Se&&be()}},se=X.shift();if(!se){z(new ne("Unable to connect (no available host)",80003,404));return}m.host=se;const be=()=>{if(!X.length){z(new ne("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){z(new Me("Internal error: Http.checkConnectivity not set",null,500));return}rt(this.realtime.http.checkConnectivity(),(Se,Pe)=>{if(w===this.connectCounter&&R()){if(Se){z(Se);return}if(!Pe){z(new ne("Unable to connect (network unreachable)",80003,404));return}m.host=Un(X),this.tryATransport(m,f,fe)}})};if(this.forceFallbackHost&&X.length){this.forceFallbackHost=!1,be();return}this.tryATransport(m,f,fe)}closeImpl(){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(f,m){var b;switch(this.state.state){case"connected":{T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const w=(b=this.activeProtocol)==null?void 0:b.getTransport();w&&w.onAuthUpdated&&w.onAuthUpdated(f);const R=Gr({action:Ge.AUTH,auth:{accessToken:f.token}});this.send(R);const z=()=>{this.off(X),m(null,f)},X=fe=>{fe.current==="failed"&&(this.off(z),this.off(X),m(fe.reason||this.getStateError()))};this.once("connectiondetails",z),this.on("connectionstate",X);break}case"connecting":T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const w=R=>{switch(R.current){case"connected":this.off(w),m(null,f);break;case"failed":case"closed":case"suspended":this.off(w),m(R.reason||this.getStateError());break}};this.on("connectionstate",w),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(f,m,b){b=b||qa;const w=this.state;if(w.sendEvents){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new yp(f,b));return}if(!(m&&w.queueEvents)){const z="rejecting event, queueEvent was "+m+", state was "+w.state;T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.send()",z),b(this.errorReason||new ne(z,9e4,400));return}this.logger.shouldLog(T.LOG_MICRO)&&T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+fc(f,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._objectsPlugin)),this.queue(f,b)}sendImpl(f){const m=f.message;f.ackRequired&&!f.sendAttempted&&(m.msgSerial=this.msgSerial++);try{this.activeProtocol.send(f)}catch(b){T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+b.stack)}}queue(f,m){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.queue()","queueing event");const b=this.queuedMessages.last(),w=this.options.maxMessageSize;b&&!b.sendAttempted&&li(b.message,f,w)?(b.merged||(b.callback=nr.create(this.logger,[b.callback]),b.merged=!0),b.callback.push(m)):this.queuedMessages.push(new yp(f,m))}sendQueuedMessages(){T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let f;for(;f=this.queuedMessages.shift();)this.sendImpl(f)}queuePendingMessages(f){f&&f.length&&(T.logAction(this.logger,T.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+f.length+" pending messages"),this.queuedMessages.prepend(f))}failQueuedMessages(f){const m=this.queuedMessages.count();m>0&&(T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+m+" queued messages, err = "+Ct(f)),this.queuedMessages.completeAllMessages(f))}onChannelMessage(f,m){this.pendingChannelMessagesState.queue.push({message:f,transport:m}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const f=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(f.message).catch(m=>{T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",m)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(f){await this.realtime.channels.processChannelMessage(f)}async ping(){var f;if(this.state.state!=="connected")throw new ne("Unable to ping service; not connected",4e4,400);const m=(f=this.activeProtocol)==null?void 0:f.getTransport();if(!m)throw this.getStateError();T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.ping()","transport = "+m);const b=Date.now(),w=Ri();return hi(new Promise(R=>{const z=X=>{X===w&&(m.off("heartbeat",z),R(Date.now()-b))};m.on("heartbeat",z),m.ping(w)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(f){this.activeProtocol.getTransport().fail(f)}getTransportPreference(){var f,m;return this.transportPreference||vu()&&((m=(f=L.WebStorage)==null?void 0:f.get)==null?void 0:m.call(f,eh))}persistTransportPreference(f){var m,b;this.transportPreference=f.shortName,vu()&&((b=(m=L.WebStorage)==null?void 0:m.set)==null||b.call(m,eh,f.shortName))}unpersistTransportPreference(){var f,m;this.transportPreference=null,vu()&&((m=(f=L.WebStorage)==null?void 0:f.remove)==null||m.call(f,eh))}actOnErrorFromAuthorize(f){if(f.code===40171)this.notifyState({state:"failed",error:f});else if(f.code===40102)this.notifyState({state:"failed",error:f});else if(f.statusCode===jn.Forbidden){const m="Client configured authentication provider returned 403; failing the connection";T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",m),this.notifyState({state:"failed",error:new ne(m,80019,403,f)})}else{const m="Client configured authentication provider request failed";T.logAction(this.logger,T.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",m),this.notifyState({state:this.state.failState,error:new ne(m,80019,401,f)})}}onConnectionDetailsUpdate(f,m){if(!f)return;this.connectionDetails=f,f.maxMessageSize&&(this.options.maxMessageSize=f.maxMessageSize);const b=f.clientId;if(b){const R=this.realtime.auth._uncheckedSetClientId(b);if(R){T.logAction(this.logger,T.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",R.message),m.fail(R);return}}const w=f.connectionStateTtl;w&&(this.connectionStateTtl=w),this.maxIdleInterval=f.maxIdleInterval,this.emit("connectiondetails",f)}checkWsConnectivity(){const f=this.options.wsConnectivityCheckUrl||ke.wsConnectivityCheckUrl,m=new L.Config.WebSocket(f);return new Promise((b,w)=>{let R=!1;m.onopen=()=>{R||(R=!0,b(),m.close())},m.onclose=m.onerror=()=>{R||(R=!0,w())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var f,m;return na()&&((m=(f=L.WebStorage)==null?void 0:f.getSession)==null?void 0:m.call(f,this.sessionRecoveryName()))}setSessionRecoverData(f){var m,b;return na()&&((b=(m=L.WebStorage)==null?void 0:m.setSession)==null?void 0:b.call(m,this.sessionRecoveryName(),f))}clearSessionRecoverData(){var f,m;return na()&&((m=(f=L.WebStorage)==null?void 0:f.removeSession)==null?void 0:m.call(f,this.sessionRecoveryName()))}},dc=Sp,$a=class extends hn{constructor(u,f){super(u.logger),this.whenState=m=>hn.prototype.whenState.call(this,m,this.state),this.ably=u,this.connectionManager=new dc(u,f),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",m=>{const b=this.state=m.current;L.Config.nextTick(()=>{this.emit(b,m)})}),this.connectionManager.on("update",m=>{L.Config.nextTick(()=>{this.emit("update",m)})})}connect(){T.logAction(this.logger,T.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return T.logAction(this.logger,T.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){T.logAction(this.logger,T.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},th=$a,_u=class oO extends Es{constructor(f){var m,b,w,R;if(super(ke.objectifyOptions(f,!1,"BaseRealtime",T.defaultLogger)),T.logAction(this.logger,T.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new ne(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=oO.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(b=(m=this.options.plugins)==null?void 0:m.RealtimePresence)!=null?b:null,this._objectsPlugin=(R=(w=this.options.plugins)==null?void 0:w.Objects)!=null?R:null,this.connection=new th(this,this.options),this._channels=new Go(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(f){const m={};return f!=null&&f.WebSocketTransport&&(m[mr.WebSocket]=f.WebSocketTransport),f!=null&&f.XHRPolling&&(m[mr.XhrPolling]=f.XHRPolling),m}get channels(){return this._channels}connect(){T.logAction(this.logger,T.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){T.logAction(this.logger,T.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};_u.EventEmitter=hn;var $o=_u,Go=class extends hn{constructor(u){super(u.logger),this.realtime=u,this.all=Object.create(null),u.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let u={};for(const f of On(this.all,!0)){const m=this.all[f];m.properties.channelSerial&&(u[f]=m.properties.channelSerial)}return u}recoverChannels(u){for(const f of On(u,!0)){const m=this.get(f);m.properties.channelSerial=u[f]}}async processChannelMessage(u){const f=u.channel;if(f===void 0){T.logAction(this.logger,T.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+u.action);return}const m=this.all[f];if(!m){T.logAction(this.logger,T.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+f);return}await m.processMessage(u)}onTransportActive(){for(const u in this.all){const f=this.all[u];f.state==="attaching"||f.state==="detaching"?f.checkPendingState():f.state==="suspended"?f._attach(!1,null):f.state==="attached"&&f.requestState("attaching")}}propogateConnectionInterruption(u,f){const m={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},b=["attaching","attached","detaching","suspended"],w=m[u];for(const R in this.all){const z=this.all[R];b.includes(z.state)&&z.notifyState(w,f)}}get(u,f){u=String(u);let m=this.all[u];if(!m)m=this.all[u]=new za(this.realtime,u,f);else if(f){if(m._shouldReattachToSetOptions(f,m.channelOptions))throw new ne("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);m.setOptions(f)}return m}getDerived(u,f,m){if(f.filter){const b=xi(f.filter),w=ri(u);u=`[filter=${b}${w.qualifierParam}]${w.channelName}`}return this.get(u,m)}release(u){u=String(u);const f=this.all[u];if(!f)return;const m=f.getReleaseErr();if(m)throw m;delete this.all[u]}},bu=$o;function Su(u,f){if(u.isSynthesized()||f.isSynthesized())return u.timestamp>=f.timestamp;const m=u.parseId(),b=f.parseId();return m.msgSerial===b.msgSerial?m.index>b.index:m.msgSerial>b.msgSerial}var Wr=class extends hn{constructor(u,f,m=Su){super(u.logger),this.presence=u,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=f,this.newerThan=m}get(u){return this.map[u]}getClient(u){const f=this.map,m=[];for(const b in f){const w=f[b];w.clientId==u&&w.action!="absent"&&m.push(w)}return m}list(u){const f=this.map,m=u&&u.clientId,b=u&&u.connectionId,w=[];for(const R in f){const z=f[R];z.action!=="absent"&&(m&&m!=z.clientId||b&&b!=z.connectionId||w.push(z))}return w}put(u){(u.action==="enter"||u.action==="update")&&(u=qr.fromValues(u),u.action="present");const f=this.map,m=this.memberKey(u);this.residualMembers&&delete this.residualMembers[m];const b=f[m];return b&&!this.newerThan(u,b)?!1:(f[m]=u,!0)}values(){const u=this.map,f=[];for(const m in u){const b=u[m];b.action!="absent"&&f.push(b)}return f}remove(u){const f=this.map,m=this.memberKey(u),b=f[m];return b&&!this.newerThan(u,b)?!1:(this.syncInProgress?(u=qr.fromValues(u),u.action="absent",f[m]=u):delete f[m],!!b)}startSync(){const u=this.map,f=this.syncInProgress;T.logAction(this.logger,T.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),this.syncInProgress||(this.residualMembers=Ce(u),this.setInProgress(!0))}endSync(){const u=this.map,f=this.syncInProgress;if(T.logAction(this.logger,T.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),f){for(const m in u)u[m].action==="absent"&&delete u[m];this.presence._synthesizeLeaves(Ur(this.residualMembers));for(const m in this.residualMembers)delete u[m];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(u){const f=this.syncInProgress;if(T.logAction(this.logger,T.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),!f){u();return}this.once("sync",u)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(u){T.logAction(this.logger,T.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+u),this.syncInProgress=u,this.presence.syncComplete=!u}};function vi(u){return u.channel.client.auth.clientId}function Os(u){const f=u.channel.client,m=f.auth.clientId;return(!m||m==="*")&&f.connection.state==="connected"}function Is(u,f,m){switch(u.state){case"attached":case"suspended":m();break;case"initialized":case"detached":case"detaching":case"attaching":rt(u.attach(),function(b){b?f(b):m()});break;default:f(ne.fromValues(u.invalidStateError()))}}var xs=class extends hn{constructor(u){super(u.logger),this.channel=u,this.syncComplete=!1,this.members=new Wr(this,f=>f.clientId+":"+f.connectionId),this._myMembers=new Wr(this,f=>f.clientId),this.subscriptions=new hn(this.logger),this.pendingPresence=[]}async enter(u){if(Os(this))throw new ne("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,u,"enter")}async update(u){if(Os(this))throw new ne("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,u,"update")}async enterClient(u,f){return this._enterOrUpdateClient(void 0,u,f,"enter")}async updateClient(u,f){return this._enterOrUpdateClient(void 0,u,f,"update")}async _enterOrUpdateClient(u,f,m,b){const w=this.channel;if(!w.connectionManager.activeState())throw w.connectionManager.getError();T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence."+b+"Client()","channel = "+w.name+", id = "+u+", client = "+(f||"(implicit) "+vi(this)));const R=qr.fromData(m);R.action=b,u&&(R.id=u),f&&(R.clientId=f);const z=await R.encode(w.channelOptions);switch(w.state){case"attached":return w.sendPresence([z]);case"initialized":case"detached":w.attach();case"attaching":return new Promise((X,fe)=>{this.pendingPresence.push({presence:z,callback:se=>se?fe(se):X()})});default:{const X=new Me("Unable to "+b+" presence channel while in "+w.state+" state",90001);throw X.code=90001,X}}}async leave(u){if(Os(this))throw new ne("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,u)}async leaveClient(u,f){const m=this.channel;if(!m.connectionManager.activeState())throw m.connectionManager.getError();T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+u);const b=qr.fromData(f);b.action="leave",u&&(b.clientId=u);const w=await b.encode(m.channelOptions);switch(m.state){case"attached":return m.sendPresence([w]);case"attaching":return new Promise((R,z)=>{this.pendingPresence.push({presence:w,callback:X=>X?z(X):R()})});case"initialized":case"failed":throw new Me("Unable to leave presence channel (incompatible state)",90001);default:throw m.invalidStateError()}}async get(u){const f=!u||("waitForSync"in u?u.waitForSync:!0);return new Promise((m,b)=>{function w(R){m(u?R.list(u):R.values())}if(this.channel.state==="suspended"){f?b(ne.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):w(this.members);return}Is(this.channel,R=>b(R),()=>{const R=this.members;f?R.waitSync(function(){w(R)}):w(R)})})}async history(u){T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const f=this.channel.client.rest.presenceMixin;if(u&&u.untilAttach)if(this.channel.state==="attached")delete u.untilAttach,u.from_serial=this.channel.properties.attachSerial;else throw new ne("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return f.history(this,u)}setPresence(u,f,m){T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+u.length+" participants; syncChannelSerial = "+m);let b,w;const R=this.members,z=this._myMembers,X=[],fe=this.channel.connectionManager.connectionId;f&&(this.members.startSync(),m&&(w=m.match(/^[\w-]+:(.*)$/))&&(b=w[1]));for(let se of u)switch(se.action){case"leave":R.remove(se)&&X.push(se),se.connectionId===fe&&!se.isSynthesized()&&z.remove(se);break;case"enter":case"present":case"update":R.put(se)&&X.push(se),se.connectionId===fe&&z.put(se);break}f&&!b&&(R.endSync(),this.channel.syncChannelSerial=null);for(let se=0;se<X.length;se++){const be=X[se];this.subscriptions.emit(be.action,be)}}onAttached(u){T.logAction(this.logger,T.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+u),u?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const f=this.pendingPresence,m=f.length;if(m){this.pendingPresence=[];const b=[],w=nr.create(this.logger);T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence.onAttached","sending "+m+" queued presence messages");for(let R=0;R<m;R++){const z=f[R];b.push(z.presence),w.push(z.callback)}this.channel.sendPresence(b).then(()=>w()).catch(R=>w(R))}}actOnChannelState(u,f,m){switch(u){case"attached":this.onAttached(f);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(m);break}}failPendingPresence(u){if(this.pendingPresence.length){T.logAction(this.logger,T.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Ct(u));for(let f=0;f<this.pendingPresence.length;f++)try{this.pendingPresence[f].callback(u)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const u=this._myMembers,f=this.channel.connectionManager.connectionId;for(const m in u.map){const b=u.map[m];T.logAction(this.logger,T.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+b.clientId+'" into the presence set');const w=b.connectionId===f?b.id:void 0;this._enterOrUpdateClient(w,b.clientId,b.data,"enter").catch(R=>{const z=new ne("Presence auto re-enter failed",91004,400,R);T.logAction(this.logger,T.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Ct(R));const X=new Fa(this.channel.state,this.channel.state,!0,!1,z);this.channel.emit("update",X)})}}_synthesizeLeaves(u){const f=this.subscriptions;u.forEach(function(m){const b=qr.fromValues({action:"leave",connectionId:m.connectionId,clientId:m.clientId,data:m.data,encoding:m.encoding,timestamp:Date.now()});f.emit("leave",b)})}async subscribe(...u){const f=za.processListenerArgs(u),m=f[0],b=f[1],w=this.channel;if(w.state==="failed")throw ne.fromValues(w.invalidStateError());this.subscriptions.on(m,b),w.channelOptions.attachOnSubscribe!==!1&&await w.attach()}unsubscribe(...u){const f=za.processListenerArgs(u),m=f[0],b=f[1];this.subscriptions.off(m,b)}},Ga=xs,Ep=mr.WebSocket;function nh(u){return!!u.on}var rh=class extends As{constructor(u,f,m){super(u,f,m),this.shortName=Ep,m.heartbeats=L.Config.useProtocolHeartbeats,this.wsHost=m.host}static isAvailable(){return!!L.Config.WebSocket}createWebSocket(u,f){return this.uri=u+wr(f),new L.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.connect()","starting"),As.prototype.connect.call(this);const u=this,f=this.params,m=f.options,w=(m.tls?"wss://":"ws://")+this.wsHost+":"+ke.getPort(m)+"/";T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.connect()","uri: "+w),rt(this.auth.getAuthParams(),function(R,z){if(u.isDisposed)return;let X="";for(const se in z)X+=" "+se+": "+z[se]+";";if(T.logAction(u.logger,T.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+X+" err: "+R),R){u.disconnect(R);return}const fe=f.getConnectParams(z);try{const se=u.wsConnection=u.createWebSocket(w,fe);se.binaryType=L.Config.binaryType,se.onopen=function(){u.onWsOpen()},se.onclose=function(be){u.onWsClose(be)},se.onmessage=function(be){u.onWsData(be.data)},se.onerror=function(be){u.onWsError(be)},nh(se)&&se.on("ping",function(){u.onActivity()})}catch(se){T.logAction(u.logger,T.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(se.stack||se.message)),u.disconnect(se)}})}send(u){const f=this.wsConnection;if(!f){T.logAction(this.logger,T.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{f.send(oi(u,this.connectionManager.realtime._MsgPack,this.params.format))}catch(m){const b="Exception from ws connection when trying to send: "+Ct(m);T.logAction(this.logger,T.LOG_ERROR,"WebSocketTransport.send()",b),this.finish("disconnected",new ne(b,5e4,500))}}onWsData(u){T.logAction(this.logger,T.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+u.length+"; type = "+typeof u);try{this.onProtocolMessage(hp(u,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin,this.format))}catch(f){T.logAction(this.logger,T.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+f.stack)}}onWsOpen(){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(u){let f,m;if(typeof u=="object"?(m=u.code,f=u.wasClean||m===1e3):(m=u,f=m==1e3),delete this.wsConnection,f){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const b=new ne("Websocket closed",80003,400);this.finish("disconnected",b)}else{const b="Unclean disconnection of WebSocket ; code = "+m,w=new ne(b,80003,400);T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onWsClose()",b),this.finish("disconnected",w)}this.emit("disposed")}onWsError(u){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+u.message),L.Config.nextTick(()=>{this.disconnect(Error(u.message))})}dispose(){T.logAction(this.logger,T.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const u=this.wsConnection;u&&(u.onmessage=function(){},delete this.wsConnection,L.Config.nextTick(()=>{if(T.logAction(this.logger,T.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!u)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");u.close()}))}},yr=rh,bn=class{static subscribeFilter(u,f,m){const b=w=>{var R,z,X,fe,se,be;const Se={name:w.name,refTimeserial:(z=(R=w.extras)==null?void 0:R.ref)==null?void 0:z.timeserial,refType:(fe=(X=w.extras)==null?void 0:X.ref)==null?void 0:fe.type,isRef:!!((be=(se=w.extras)==null?void 0:se.ref)!=null&&be.timeserial),clientId:w.clientId};Object.entries(f).find(([Pe,Ee])=>Ee!==void 0?Se[Pe]!==Ee:!1)||m(w)};this.addFilteredSubscription(u,f,m,b),u.subscriptions.on(b)}static addFilteredSubscription(u,f,m,b){var w;if(u.filteredSubscriptions||(u.filteredSubscriptions=new Map),u.filteredSubscriptions.has(m)){const R=u.filteredSubscriptions.get(m);R.set(f,((w=R==null?void 0:R.get(f))==null?void 0:w.concat(b))||[b])}else u.filteredSubscriptions.set(m,new Map([[f,[b]]]))}static getAndDeleteFilteredSubscriptions(u,f,m){if(!u.filteredSubscriptions)return[];if(!m&&f)return Array.from(u.filteredSubscriptions.entries()).map(([R,z])=>{var X;let fe=z.get(f);return z.delete(f),z.size===0&&((X=u.filteredSubscriptions)==null||X.delete(R)),fe}).reduce((R,z)=>z?R.concat(...z):R,[]);if(!m||!u.filteredSubscriptions.has(m))return[];const b=u.filteredSubscriptions.get(m);if(!f){const R=Array.from(b.values()).reduce((z,X)=>z.concat(...X),[]);return u.filteredSubscriptions.delete(m),R}let w=b.get(f);return b.delete(f),w||[]}},bt=class h_ extends bu{constructor(f){var m;const b=h_._MsgPack;if(!b)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(ke.objectifyOptions(f,!0,"Realtime",T.defaultLogger,I(O({},os),{Crypto:(m=h_.Crypto)!=null?m:void 0,MsgPack:b,RealtimePresence:{RealtimePresence:Ga,PresenceMessage:qr,WirePresenceMessage:Ts},Annotations:{Annotation:Fo,WireAnnotation:ja,RealtimeAnnotations:ea,RestAnnotations:Yf},WebSocketTransport:yr,MessageInteractions:bn})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(f){this._Crypto=f}};bt.Utils=ee,bt.ConnectionManager=dc,bt.ProtocolMessage=Bo,bt._Crypto=null,bt.Message=Wn,bt.PresenceMessage=Li,bt.Annotation=Kf,bt._MsgPack=null,bt._Http=Ss,bt._PresenceMap=Wr,bt._MessageEncoding=rs;var Ps=bt,_i=Uint8Array,Wa=Uint32Array,Ms=Math.pow,ih=new Wa(8),sh=[],Ds=new Wa(64);function Wo(u){return(u-(u|0))*Ms(2,32)|0}for(var Ko=2,ks=0;ks<64;){for(pc=!0,ls=2;ls<=Ko/2;ls++)Ko%ls===0&&(pc=!1);pc&&(ks<8&&(ih[ks]=Wo(Ms(Ko,1/2))),sh[ks]=Wo(Ms(Ko,1/3)),ks++),Ko++}var pc,ls,Ns=!!new _i(new Wa([1]).buffer)[0];function cs(u){return Ns?u>>>24|(u>>>16&255)<<8|(u&65280)<<8|u<<24:u}function Qn(u,f){return u>>>f|u<<32-f}function Yo(u){var f=ih.slice(),m=u.length,b=m*8,w=512-(b+64)%512-1+b+65,R=new _i(w/8),z=new Wa(R.buffer);R.set(u,0),R[m]=128,z[z.length-1]=cs(b);for(var X,fe=0;fe<w/32;fe+=16){var se=f.slice();for(X=0;X<64;X++){var be;if(X<16)be=cs(z[fe+X]);else{var Se=Ds[X-15],Pe=Ds[X-2];be=Ds[X-7]+Ds[X-16]+(Qn(Se,7)^Qn(Se,18)^Se>>>3)+(Qn(Pe,17)^Qn(Pe,19)^Pe>>>10)}Ds[X]=be|=0;for(var Ee=(Qn(se[4],6)^Qn(se[4],11)^Qn(se[4],25))+(se[4]&se[5]^~se[4]&se[6])+se[7]+be+sh[X],Ve=(Qn(se[0],2)^Qn(se[0],13)^Qn(se[0],22))+(se[0]&se[1]^se[2]&(se[0]^se[1])),je=7;je>0;je--)se[je]=se[je-1];se[0]=Ee+Ve|0,se[4]=se[4]+Ee|0}for(X=0;X<8;X++)f[X]=f[X]+se[X]|0}return new _i(new Wa(f.map(function(at){return cs(at)})).buffer)}function ah(u,f){if(u.length>64&&(u=Yo(u)),u.length<64){const X=new Uint8Array(64);X.set(u,0),u=X}for(var m=new Uint8Array(64),b=new Uint8Array(64),w=0;w<64;w++)m[w]=54^u[w],b[w]=92^u[w];var R=new Uint8Array(f.length+64);R.set(m,0),R.set(f,64);var z=new Uint8Array(96);return z.set(b,0),z.set(Yo(R),64),Yo(z)}var gc=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(u){let f="";const m=this.base64CharSet,b=u.byteLength,w=b%3,R=b-w;let z,X,fe,se,be;for(let Se=0;Se<R;Se=Se+3)be=u[Se]<<16|u[Se+1]<<8|u[Se+2],z=(be&16515072)>>18,X=(be&258048)>>12,fe=(be&4032)>>6,se=be&63,f+=m[z]+m[X]+m[fe]+m[se];return w==1?(be=u[R],z=(be&252)>>2,X=(be&3)<<4,f+=m[z]+m[X]+"=="):w==2&&(be=u[R]<<8|u[R+1],z=(be&64512)>>10,X=(be&1008)>>4,fe=(be&15)<<2,f+=m[z]+m[X]+m[fe]+"="),f}base64ToArrayBuffer(u){const f=atob==null?void 0:atob(u),m=f.length,b=new Uint8Array(m);for(let w=0;w<m;w++){const R=f.charCodeAt(w);b[w]=R}return this.toArrayBuffer(b)}isBuffer(u){return u instanceof ArrayBuffer||ArrayBuffer.isView(u)}toBuffer(u){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(u instanceof ArrayBuffer)return new Uint8Array(u);if(ArrayBuffer.isView(u))return new Uint8Array(this.toArrayBuffer(u));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(u){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(u instanceof ArrayBuffer)return u;if(ArrayBuffer.isView(u))return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(u){return this.uint8ViewToBase64(this.toBuffer(u))}base64UrlEncode(u){return this.base64Encode(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(u){if(ArrayBuffer&&L.Config.atob)return this.base64ToArrayBuffer(u);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(u){return this.toBuffer(u).reduce((m,b)=>m+b.toString(16).padStart(2,"0"),"")}hexDecode(u){if(u.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const f=new Uint8Array(u.length/2);for(let m=0;m<f.length;m++)f[m]=parseInt(u.slice(2*m,2*(m+1)),16);return this.toArrayBuffer(f)}utf8Encode(u){if(L.Config.TextEncoder){const f=new L.Config.TextEncoder().encode(u);return this.toArrayBuffer(f)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(u){if(!this.isBuffer(u))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(u);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(u,f){if(!u||!f)return!1;const m=this.toArrayBuffer(u),b=this.toArrayBuffer(f);if(m.byteLength!=b.byteLength)return!1;const w=new Uint8Array(m),R=new Uint8Array(b);for(var z=0;z<w.length;z++)if(w[z]!=R[z])return!1;return!0}byteLength(u){return u instanceof ArrayBuffer||ArrayBuffer.isView(u)?u.byteLength:-1}arrayBufferViewToBuffer(u){return this.toArrayBuffer(u)}concat(u){const f=u.reduce((w,R)=>w+R.byteLength,0),m=new Uint8Array(f);let b=0;for(const w of u){const R=this.toBuffer(w);m.set(R,b),b+=R.byteLength}return m.buffer}sha256(u){const f=Yo(this.toBuffer(u));return this.toArrayBuffer(f)}hmacSha256(u,f){const m=ah(this.toBuffer(f),this.toBuffer(u));return this.toArrayBuffer(m)}},mc=new gc,Ka=function(u,f){var m="aes",b=256,w="cbc",R=16;function z(Pe){if(Pe.algorithm==="aes"&&Pe.mode==="cbc"){if(Pe.keyLength===128||Pe.keyLength===256)return;throw new Error("Unsupported key length "+Pe.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function X(Pe){return Pe.replace("_","/").replace("-","+")}function fe(Pe){return Pe instanceof se}class se{constructor(Ee,Ve,je,at){this.algorithm=Ee,this.keyLength=Ve,this.mode=je,this.key=at}}class be{static getDefaultParams(Ee){var Ve;if(!Ee.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof Ee.key=="string"?Ve=f.toArrayBuffer(f.base64Decode(X(Ee.key))):Ee.key instanceof ArrayBuffer?Ve=Ee.key:Ve=f.toArrayBuffer(Ee.key);var je=Ee.algorithm||m,at=Ve.byteLength*8,jt=Ee.mode||w,Kt=new se(je,at,jt,Ve);if(Ee.keyLength&&Ee.keyLength!==Kt.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+Ee.keyLength+" was specified, but the key actually has length "+Kt.keyLength);return z(Kt),Kt}static async generateRandomKey(Ee){try{return u.getRandomArrayBuffer((Ee||b)/8)}catch(Ve){throw new ne("Failed to generate random key: "+Ve.message,400,5e4,Ve)}}static getCipher(Ee,Ve){var je,at=fe(Ee)?Ee:this.getDefaultParams(Ee);return{cipherParams:at,cipher:new Se(at,(je=Ee.iv)!=null?je:null,Ve)}}}be.CipherParams=se;class Se{constructor(Ee,Ve,je){if(this.logger=je,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=Ee.algorithm+"-"+String(Ee.keyLength)+"-"+Ee.mode,this.webCryptoAlgorithm=Ee.algorithm+"-"+Ee.mode,this.key=f.toArrayBuffer(Ee.key),this.iv=Ve?f.toArrayBuffer(Ve):null}concat(Ee,Ve){const je=new ArrayBuffer(Ee.byteLength+Ve.byteLength),at=new DataView(je),jt=new DataView(f.toArrayBuffer(Ee));for(let tn=0;tn<jt.byteLength;tn++)at.setInt8(tn,jt.getInt8(tn));const Kt=new DataView(f.toArrayBuffer(Ve));for(let tn=0;tn<Kt.byteLength;tn++)at.setInt8(jt.byteLength+tn,Kt.getInt8(tn));return je}async encrypt(Ee){T.logAction(this.logger,T.LOG_MICRO,"CBCCipher.encrypt()","");const Ve=await this.getIv(),je=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),at=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:Ve},je,Ee);return this.concat(Ve,at)}async decrypt(Ee){T.logAction(this.logger,T.LOG_MICRO,"CBCCipher.decrypt()","");const Ve=f.toArrayBuffer(Ee),je=Ve.slice(0,R),at=Ve.slice(R),jt=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:je},jt,at)}async getIv(){if(this.iv){var Ee=this.iv;return this.iv=null,Ee}const Ve=await u.getRandomArrayBuffer(R);return f.toArrayBuffer(Ve)}}return be},or=(u=>(u[u.REQ_SEND=0]="REQ_SEND",u[u.REQ_RECV=1]="REQ_RECV",u[u.REQ_RECV_POLL=2]="REQ_RECV_POLL",u[u.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",u))(or||{}),bi=or;function oh(){return new ne("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var yc,wp=(yc=class{constructor(u){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var f;this.client=u??null;const m=(u==null?void 0:u.options.connectivityCheckUrl)||ke.connectivityCheckUrl,b=(f=u==null?void 0:u.options.connectivityCheckParams)!=null?f:null,w=!(u!=null&&u.options.connectivityCheckUrl),R=O(O({},wp.bundledRequestImplementations),u==null?void 0:u._additionalHTTPRequestImplementations),z=R.XHRRequest,X=R.FetchRequest,fe=!!(z||X);if(!fe)throw oh();L.Config.xhrSupported&&z?(this.supportsAuthHeaders=!0,this.Request=async function(se,be,Se,Pe,Ee){return new Promise(Ve=>{var je;const at=z.createRequest(be,Se,Pe,Ee,bi.REQ_SEND,(je=u&&u.options.timeouts)!=null?je:null,this.logger,se);at.once("complete",(jt,Kt,tn,pt,ci)=>Ve({error:jt,body:Kt,headers:tn,unpacked:pt,statusCode:ci})),at.exec()})},u!=null&&u.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var se;T.logAction(this.logger,T.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+m);const be=await this.doUri(Gt.Get,m,null,null,b);let Se=!1;return w?Se=!be.error&&((se=be.body)==null?void 0:se.replace(/\n/,""))=="yes":Se=!be.error&&Ys(be.statusCode),T.logAction(this.logger,T.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+Se),Se}):L.Config.fetchSupported&&X?(this.supportsAuthHeaders=!0,this.Request=async(se,be,Se,Pe,Ee)=>X(se,u??null,be,Se,Pe,Ee),u!=null&&u.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var se;T.logAction(this.logger,T.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+m);const be=await this.doUri(Gt.Get,m,null,null,null),Se=!be.error&&((se=be.body)==null?void 0:se.replace(/\n/,""))=="yes";return T.logAction(this.logger,T.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+Se),Se}):this.Request=async()=>({error:fe?new Me("no supported HTTP transports available",null,400):oh()})}get logger(){var u,f;return(f=(u=this.client)==null?void 0:u.logger)!=null?f:T.defaultLogger}async doUri(u,f,m,b,w){return this.Request?this.Request(u,f,m,w,b):{error:new Me("Request invoked before assigned to",null,500)}}shouldFallback(u){const f=u.statusCode;return f===408&&!u.code||f===400&&!u.code||f>=500&&f<=504}},yc.methods=[Gt.Get,Gt.Delete,Gt.Post,Gt.Put,Gt.Patch],yc.methodsWithoutBody=[Gt.Get,Gt.Delete],yc.methodsWithBody=[Gt.Post,Gt.Put,Gt.Patch],yc),Tp=wp,dn="ablyjs-storage-test",ra=typeof _l<"u"?_l:typeof window<"u"?window:self,vc=class{constructor(){try{ra.sessionStorage.setItem(dn,dn),ra.sessionStorage.removeItem(dn),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{ra.localStorage.setItem(dn,dn),ra.localStorage.removeItem(dn),this.localSupported=!0}catch{this.localSupported=!1}}get(u){return this._get(u,!1)}getSession(u){return this._get(u,!0)}remove(u){return this._remove(u,!1)}removeSession(u){return this._remove(u,!0)}set(u,f,m){return this._set(u,f,m,!1)}setSession(u,f,m){return this._set(u,f,m,!0)}_set(u,f,m,b){const w={value:f};return m&&(w.expires=Date.now()+m),this.storageInterface(b).setItem(u,JSON.stringify(w))}_get(u,f){if(f&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!f&&!this.localSupported)throw new Error("Local Storage not supported");const m=this.storageInterface(f).getItem(u);if(!m)return null;const b=JSON.parse(m);return b.expires&&b.expires<Date.now()?(this.storageInterface(f).removeItem(u),null):b.value}_remove(u,f){return this.storageInterface(f).removeItem(u)}storageInterface(u){return u?ra.sessionStorage:ra.localStorage}},Qo=new vc,Sn=Tr(),Xo=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!Xo&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function Jo(){const u=Sn.location;return!Sn.WebSocket||!u||!u.origin||u.origin.indexOf("http")>-1}function Ky(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var Cp=Sn.navigator&&Sn.navigator.userAgent.toString(),Yy=Sn.location&&Sn.location.href,Ap={agent:"browser",logTimestamps:!0,userAgent:Cp,currentUrl:Yy,binaryType:"arraybuffer",WebSocket:Sn.WebSocket,fetchSupported:!!Sn.fetch,xhrSupported:Sn.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:Jo(),useProtocolHeartbeats:!0,supportsBinary:!!Sn.TextDecoder,preferBinary:!1,ArrayBuffer:Sn.ArrayBuffer,atob:Sn.atob,nextTick:typeof Sn.queueMicrotask=="function"?u=>Sn.queueMicrotask(u):u=>Promise.resolve().then(u),addEventListener:Sn.addEventListener,inspect:JSON.stringify,stringByteSize:function(u){return Sn.TextDecoder&&new Sn.TextEncoder().encode(u).length||u.length},TextEncoder:Sn.TextEncoder,TextDecoder:Sn.TextDecoder,getRandomArrayBuffer:async function(u){const f=new Uint8Array(u);return Sn.crypto.getRandomValues(f),f.buffer},isWebworker:Ky(),push:{platform:"browser",formFactor:"desktop",storage:Qo}},ia=Ap;function lh(u){const f=[80015,80017,80030];return u.code?ii.isTokenErr(u)?!1:f.includes(u.code)?!0:u.code>=4e4&&u.code<5e4:!1}function Zo(u){return lh(u)?[Gr({action:Ge.ERROR,error:u})]:[Gr({action:Ge.DISCONNECTED,error:u})]}var Rp=class extends As{constructor(u,f,m){super(u,f,m,!0),this.onAuthUpdated=b=>{this.authParams={access_token:b.token}},this.stream="stream"in m?m.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.connect()","starting"),As.prototype.connect.call(this);const u=this.params,f=u.options,m=u.host||f.primaryDomain,b=ke.getPort(f),w=f.tls?"https://":"http://";this.baseUri=w+m+":"+b+"/comet/";const R=this.baseUri+"connect";T.logAction(this.logger,T.LOG_MINOR,"CometTransport.connect()","uri: "+R),rt(this.auth.getAuthParams(),(z,X)=>{if(z){this.disconnect(z);return}if(this.isDisposed)return;this.authParams=X;const fe=this.params.getConnectParams(X);"stream"in fe&&(this.stream=fe.stream),T.logAction(this.logger,T.LOG_MINOR,"CometTransport.connect()","connectParams:"+wr(fe));let se=!1;const be=this.recvRequest=this.createRequest(R,null,fe,null,this.stream?bi.REQ_RECV_STREAM:bi.REQ_RECV);be.on("data",Se=>{this.recvRequest&&(se||(se=!0,this.emit("preconnect")),this.onData(Se))}),be.on("complete",Se=>{if(this.recvRequest||(Se=Se||new ne("Request cancelled",80003,400)),this.recvRequest=null,!se&&!Se&&(se=!0,this.emit("preconnect")),this.onActivity(),Se){Se.code?this.onData(Zo(Se)):this.disconnect(Se);return}L.Config.nextTick(()=>{this.recv()})}),be.exec()})}requestClose(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(u){const f=u?this.closeUri:this.disconnectUri;if(f){const m=this.createRequest(f,null,this.authParams,null,bi.REQ_SEND);m.on("complete",b=>{b&&(T.logAction(this.logger,T.LOG_ERROR,"CometTransport.request"+(u?"Close()":"Disconnect()"),"request returned err = "+Ct(b)),this.finish("disconnected",b))}),m.exec()}}dispose(){T.logAction(this.logger,T.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(T.logAction(this.logger,T.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Yn.disconnected()),L.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(u){var f;if(this.isDisposed)return;const m=(f=u.connectionDetails)==null?void 0:f.connectionKey;As.prototype.onConnect.call(this,u);const b=this.baseUri+m;T.logAction(this.logger,T.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+b),this.sendUri=b+"/send",this.recvUri=b+"/recv",this.closeUri=b+"/close",this.disconnectUri=b+"/disconnect"}send(u){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(u);return}const f=this.pendingItems||[];f.push(u),this.pendingItems=null,this.sendItems(f)}sendAnyPending(){const u=this.pendingItems;u&&(this.pendingItems=null,this.sendItems(u))}sendItems(u){const f=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(u),bi.REQ_SEND);f.on("complete",(m,b)=>{if(m&&T.logAction(this.logger,T.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Ct(m)),this.sendRequest=null,m){m.code?this.onData(Zo(m)):this.disconnect(m);return}b&&this.onData(b),this.pendingItems&&L.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),f.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const u=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?bi.REQ_RECV_STREAM:bi.REQ_RECV_POLL);u.on("data",f=>{this.onData(f)}),u.on("complete",f=>{if(this.recvRequest=null,this.onActivity(),f){f.code?this.onData(Zo(f)):this.disconnect(f);return}L.Config.nextTick(()=>{this.recv()})}),u.exec()}onData(u){try{const f=this.decodeResponse(u);if(f&&f.length)for(let m=0;m<f.length;m++)this.onProtocolMessage(pu(f[m],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin))}catch(f){T.logAction(this.logger,T.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+f.stack)}}encodeRequest(u){return JSON.stringify(u)}decodeResponse(u){return typeof u=="string"?JSON.parse(u):u}},_c=Rp;function Op(u,f){return Ws(On(f)).includes("x-ably-errorcode")}function Eu(u,f){if(Op(u,f))return u.error&&ne.fromValues(u.error)}var ch=function(){},Ip=0,bc={};function xp(u,f){return u.getResponseHeader&&u.getResponseHeader(f)}function Sc(u){return u.getResponseHeader&&(u.getResponseHeader("transfer-encoding")||!u.getResponseHeader("content-length"))}function Pp(u){const f=u.getAllResponseHeaders().trim().split(`\r
`),m={};for(let b=0;b<f.length;b++){const w=f[b].split(":").map(R=>R.trim());m[w[0].toLowerCase()]=w[1]}return m}var Mp=class lO extends hn{constructor(f,m,b,w,R,z,X,fe){super(X),b=b||{},b.rnd=Ri(),this.uri=f+wr(b),this.headers=m||{},this.body=w,this.method=fe?fe.toUpperCase():me(w)?"GET":"POST",this.requestMode=R,this.timeouts=z,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Ip),bc[this.id]=this}static createRequest(f,m,b,w,R,z,X,fe){const se=z||ke.TIMEOUTS;return new lO(f,m,Ce(b),w,R,se,X,fe)}complete(f,m,b,w,R){this.requestComplete||(this.requestComplete=!0,!f&&m&&this.emit("data",m),this.emit("complete",f,m,b,w,R),this.dispose())}abort(){this.dispose()}exec(){let f=this.headers;const m=this.requestMode==bi.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,b=this.timer=setTimeout(()=>{this.timedOut=!0,R.abort()},m),w=this.method,R=this.xhr=new XMLHttpRequest,z=f.accept;let X=this.body,fe="text";z?z.indexOf("application/x-msgpack")===0&&(fe="arraybuffer"):f.accept="application/json",X&&(f["content-type"]||(f["content-type"]="application/json")).indexOf("application/json")>-1&&typeof X!="string"&&(X=JSON.stringify(X)),R.open(w,this.uri,!0),R.responseType=fe,"authorization"in f&&(R.withCredentials=!0);for(const pt in f)R.setRequestHeader(pt,f[pt]);const se=(pt,ci,lr,nl)=>{var Xa;let Cc=ci+" (event type: "+pt.type+")";(Xa=this==null?void 0:this.xhr)!=null&&Xa.statusText&&(Cc+=", current statusText is "+this.xhr.statusText),T.logAction(this.logger,T.LOG_ERROR,"Request.on"+pt.type+"()",Cc),this.complete(new Me(Cc,lr,nl))};R.onerror=pt=>{se(pt,"XHR error occurred",null,400)},R.onabort=pt=>{this.timedOut?se(pt,"Request aborted due to request timeout expiring",null,408):se(pt,"Request cancelled",null,400)},R.ontimeout=pt=>{se(pt,"Request timed out",null,408)};let be,Se,Pe,Ee=0,Ve=!1;const je=()=>{if(clearTimeout(b),Pe=Se<400,Se==204){this.complete(null,null,null,null,Se);return}be=this.requestMode==bi.REQ_RECV_STREAM&&Pe&&Sc(R)},at=()=>{let pt;try{const lr=xp(R,"content-type");if(lr?lr.indexOf("application/json")>=0:R.responseType=="text"){const Xa=R.responseType==="arraybuffer"?L.BufferUtils.utf8Decode(R.response):String(R.responseText);Xa.length?pt=JSON.parse(Xa):pt=Xa,Ve=!0}else pt=R.response;pt.response!==void 0?(Se=pt.statusCode,Pe=Se<400,f=pt.headers,pt=pt.response):f=Pp(R)}catch(lr){this.complete(new Me("Malformed response body from server: "+lr.message,null,400));return}if(Pe||Array.isArray(pt)){this.complete(null,pt,f,Ve,Se);return}let ci=Eu(pt,f);ci||(ci=new Me("Error response received from server: "+Se+" body was: "+L.Config.inspect(pt),null,Se)),this.complete(ci,pt,f,Ve,Se)};function jt(){const pt=R.responseText,ci=pt.length-1;let lr,nl;for(;Ee<ci&&(lr=pt.indexOf(`
`,Ee))>-1;)nl=pt.slice(Ee,lr),Ee=lr+1,Kt(nl)}const Kt=pt=>{try{pt=JSON.parse(pt)}catch(ci){this.complete(new Me("Malformed response body from server: "+ci.message,null,400));return}this.emit("data",pt)},tn=()=>{jt(),this.streamComplete=!0,L.Config.nextTick(()=>{this.complete()})};R.onreadystatechange=()=>{const pt=R.readyState;pt<3||R.status!==0&&(Se===void 0&&(Se=R.status,je()),pt==3&&be?jt():pt==4&&(be?tn():at()))},R.send(X)}dispose(){const f=this.xhr;if(f){f.onreadystatechange=f.onerror=f.onabort=f.ontimeout=ch,this.xhr=null;const m=this.timer;m&&(clearTimeout(m),this.timer=null),this.requestComplete||f.abort()}delete bc[this.id]}},Ls=Mp,wu=mr.XhrPolling,uh=class extends _c{constructor(u,f,m){super(u,f,m),this.shortName=wu,m.stream=!1,this.shortName=wu}static isAvailable(){return!!(L.Config.xhrSupported&&L.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(u,f,m,b,w){return Ls.createRequest(u,f,m,b,w,this.timeouts,this.logger)}},sa=uh,aa=["xhr_polling"],Ec={order:aa,bundledImplementations:{web_socket:yr,xhr_polling:sa}},fh=Ec,hh={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[mr.XhrPolling,mr.WebSocket]},wc=hh;function Tc(u){if(u===void 0)return"undefined";let f,m;if(u instanceof ArrayBuffer?(m="ArrayBuffer",f=new DataView(u)):u instanceof DataView&&(m="DataView",f=u),!f)return JSON.stringify(u);const b=[];for(let w=0;w<u.byteLength;w++){if(w>20){b.push("...");break}let R=f.getUint8(w).toString(16);R.length===1&&(R="0"+R),b.push(R)}return"<"+m+" "+b.join(" ")+">"}function el(u,f,m){for(let b=0,w=m.length;b<w;b++){const R=m.charCodeAt(b);if(R<128){u.setUint8(f++,R>>>0&127|0);continue}if(R<2048){u.setUint8(f++,R>>>6&31|192),u.setUint8(f++,R>>>0&63|128);continue}if(R<65536){u.setUint8(f++,R>>>12&15|224),u.setUint8(f++,R>>>6&63|128),u.setUint8(f++,R>>>0&63|128);continue}if(R<1114112){u.setUint8(f++,R>>>18&7|240),u.setUint8(f++,R>>>12&63|128),u.setUint8(f++,R>>>6&63|128),u.setUint8(f++,R>>>0&63|128);continue}throw new Error("bad codepoint "+R)}}function dh(u,f,m){let b="";for(let w=f,R=f+m;w<R;w++){const z=u.getUint8(w);if((z&128)===0){b+=String.fromCharCode(z);continue}if((z&224)===192){b+=String.fromCharCode((z&15)<<6|u.getUint8(++w)&63);continue}if((z&240)===224){b+=String.fromCharCode((z&15)<<12|(u.getUint8(++w)&63)<<6|(u.getUint8(++w)&63)<<0);continue}if((z&248)===240){b+=String.fromCharCode((z&7)<<18|(u.getUint8(++w)&63)<<12|(u.getUint8(++w)&63)<<6|(u.getUint8(++w)&63)<<0);continue}throw new Error("Invalid byte "+z.toString(16))}return b}function oa(u){let f=0;for(let m=0,b=u.length;m<b;m++){const w=u.charCodeAt(m);if(w<128){f+=1;continue}if(w<2048){f+=2;continue}if(w<65536){f+=3;continue}if(w<1114112){f+=4;continue}throw new Error("bad codepoint "+w)}return f}function Tu(u,f){const m=ca(u,f);if(m===0)return;const b=new ArrayBuffer(m),w=new DataView(b);return Ui(u,w,0,f),b}var Cu=65536*65536,Au=1/Cu;function ph(u,f){return f=f||0,u.getInt32(f)*Cu+u.getUint32(f+4)}function la(u,f){return f=f||0,u.getUint32(f)*Cu+u.getUint32(f+4)}function Et(u,f,m){m<9223372036854776e3?(u.setInt32(f,Math.floor(m*Au)),u.setInt32(f+4,m&-1)):(u.setUint32(f,2147483647),u.setUint32(f+4,2147483647))}function en(u,f,m){m<18446744073709552e3?(u.setUint32(f,Math.floor(m*Au)),u.setInt32(f+4,m&-1)):(u.setUint32(f,4294967295),u.setUint32(f+4,4294967295))}var Mn=class{constructor(u,f){this.map=m=>{const b={};for(let w=0;w<m;w++){const R=this.parse();b[R]=this.parse()}return b},this.bin=m=>{const b=new ArrayBuffer(m);return new Uint8Array(b).set(new Uint8Array(this.view.buffer,this.offset,m),0),this.offset+=m,b},this.buf=this.bin,this.str=m=>{const b=dh(this.view,this.offset,m);return this.offset+=m,b},this.array=m=>{const b=new Array(m);for(let w=0;w<m;w++)b[w]=this.parse();return b},this.ext=m=>(this.offset+=m,{type:this.view.getInt8(this.offset),data:this.buf(m)}),this.parse=()=>{const m=this.view.getUint8(this.offset);let b,w;if((m&128)===0)return this.offset++,m;if((m&240)===128)return w=m&15,this.offset++,this.map(w);if((m&240)===144)return w=m&15,this.offset++,this.array(w);if((m&224)===160)return w=m&31,this.offset++,this.str(w);if((m&224)===224)return b=this.view.getInt8(this.offset),this.offset++,b;switch(m){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return w=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(w);case 197:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(w);case 198:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(w);case 199:return w=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(w);case 200:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(w);case 201:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(w);case 202:return b=this.view.getFloat32(this.offset+1),this.offset+=5,b;case 203:return b=this.view.getFloat64(this.offset+1),this.offset+=9,b;case 204:return b=this.view.getUint8(this.offset+1),this.offset+=2,b;case 205:return b=this.view.getUint16(this.offset+1),this.offset+=3,b;case 206:return b=this.view.getUint32(this.offset+1),this.offset+=5,b;case 207:return b=la(this.view,this.offset+1),this.offset+=9,b;case 208:return b=this.view.getInt8(this.offset+1),this.offset+=2,b;case 209:return b=this.view.getInt16(this.offset+1),this.offset+=3,b;case 210:return b=this.view.getInt32(this.offset+1),this.offset+=5,b;case 211:return b=ph(this.view,this.offset+1),this.offset+=9,b;case 212:return w=1,this.offset++,this.ext(w);case 213:return w=2,this.offset++,this.ext(w);case 214:return w=4,this.offset++,this.ext(w);case 215:return w=8,this.offset++,this.ext(w);case 216:return w=16,this.offset++,this.ext(w);case 217:return w=this.view.getUint8(this.offset+1),this.offset+=2,this.str(w);case 218:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.str(w);case 219:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.str(w);case 220:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.array(w);case 221:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.array(w);case 222:return w=this.view.getUint16(this.offset+1),this.offset+=3,this.map(w);case 223:return w=this.view.getUint32(this.offset+1),this.offset+=5,this.map(w)}throw new Error("Unknown type 0x"+m.toString(16))},this.offset=f||0,this.view=u}};function Ru(u){const f=new DataView(u),m=new Mn(f),b=m.parse();if(m.offset!==u.byteLength)throw new Error(u.byteLength-m.offset+" trailing bytes");return b}function Ya(u,f){return Object.keys(u).filter(function(m){const b=u[m],w=typeof b;return(!f||b!=null)&&(w!=="function"||!!b.toJSON)})}function Ui(u,f,m,b){const w=typeof u;if(typeof u=="string"){const R=oa(u);if(R<32)return f.setUint8(m,R|160),el(f,m+1,u),1+R;if(R<256)return f.setUint8(m,217),f.setUint8(m+1,R),el(f,m+2,u),2+R;if(R<65536)return f.setUint8(m,218),f.setUint16(m+1,R),el(f,m+3,u),3+R;if(R<4294967296)return f.setUint8(m,219),f.setUint32(m+1,R),el(f,m+5,u),5+R}if(ArrayBuffer.isView&&ArrayBuffer.isView(u)&&(u=u.buffer),u instanceof ArrayBuffer){const R=u.byteLength;if(R<256)return f.setUint8(m,196),f.setUint8(m+1,R),new Uint8Array(f.buffer).set(new Uint8Array(u),m+2),2+R;if(R<65536)return f.setUint8(m,197),f.setUint16(m+1,R),new Uint8Array(f.buffer).set(new Uint8Array(u),m+3),3+R;if(R<4294967296)return f.setUint8(m,198),f.setUint32(m+1,R),new Uint8Array(f.buffer).set(new Uint8Array(u),m+5),5+R}if(typeof u=="number"){if(Math.floor(u)!==u)return f.setUint8(m,203),f.setFloat64(m+1,u),9;if(u>=0){if(u<128)return f.setUint8(m,u),1;if(u<256)return f.setUint8(m,204),f.setUint8(m+1,u),2;if(u<65536)return f.setUint8(m,205),f.setUint16(m+1,u),3;if(u<4294967296)return f.setUint8(m,206),f.setUint32(m+1,u),5;if(u<18446744073709552e3)return f.setUint8(m,207),en(f,m+1,u),9;throw new Error("Number too big 0x"+u.toString(16))}if(u>=-32)return f.setInt8(m,u),1;if(u>=-128)return f.setUint8(m,208),f.setInt8(m+1,u),2;if(u>=-32768)return f.setUint8(m,209),f.setInt16(m+1,u),3;if(u>=-2147483648)return f.setUint8(m,210),f.setInt32(m+1,u),5;if(u>=-9223372036854776e3)return f.setUint8(m,211),Et(f,m+1,u),9;throw new Error("Number too small -0x"+(-u).toString(16).substr(1))}if(w==="undefined")return b?0:(f.setUint8(m,212),f.setUint8(m+1,0),f.setUint8(m+2,0),3);if(u===null)return b?0:(f.setUint8(m,192),1);if(w==="boolean")return f.setUint8(m,u?195:194),1;if(typeof u.toJSON=="function")return Ui(u.toJSON(),f,m,b);if(w==="object"){let R,z=0,X;const fe=Array.isArray(u);if(fe?R=u.length:(X=Ya(u,b),R=X.length),R<16?(f.setUint8(m,R|(fe?144:128)),z=1):R<65536?(f.setUint8(m,fe?220:222),f.setUint16(m+1,R),z=3):R<4294967296&&(f.setUint8(m,fe?221:223),f.setUint32(m+1,R),z=5),fe)for(let se=0;se<R;se++)z+=Ui(u[se],f,m+z,b);else if(X)for(let se=0;se<R;se++){const be=X[se];z+=Ui(be,f,m+z),z+=Ui(u[be],f,m+z,b)}return z}if(w==="function")return 0;throw new Error("Unknown type "+w)}function ca(u,f){const m=typeof u;if(m==="string"){const b=oa(u);if(b<32)return 1+b;if(b<256)return 2+b;if(b<65536)return 3+b;if(b<4294967296)return 5+b}if(ArrayBuffer.isView&&ArrayBuffer.isView(u)&&(u=u.buffer),u instanceof ArrayBuffer){const b=u.byteLength;if(b<256)return 2+b;if(b<65536)return 3+b;if(b<4294967296)return 5+b}if(typeof u=="number"){if(Math.floor(u)!==u)return 9;if(u>=0){if(u<128)return 1;if(u<256)return 2;if(u<65536)return 3;if(u<4294967296)return 5;if(u<18446744073709552e3)return 9;throw new Error("Number too big 0x"+u.toString(16))}if(u>=-32)return 1;if(u>=-128)return 2;if(u>=-32768)return 3;if(u>=-2147483648)return 5;if(u>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+u.toString(16).substr(1))}if(m==="boolean")return 1;if(u===null)return f?0:1;if(u===void 0)return f?0:3;if(typeof u.toJSON=="function")return ca(u.toJSON(),f);if(m==="object"){let b,w=0;if(Array.isArray(u)){b=u.length;for(let R=0;R<b;R++)w+=ca(u[R],f)}else{const R=Ya(u,f);b=R.length;for(let z=0;z<b;z++){const X=R[z];w+=ca(X)+ca(u[X],f)}}if(b<16)return 1+w;if(b<65536)return 3+w;if(b<4294967296)return 5+w;throw new Error("Array or object too long 0x"+b.toString(16))}if(m==="function")return 0;throw new Error("Unknown type "+m)}var Qa={encode:Tu,decode:Ru,inspect:Tc,utf8Write:el,utf8Read:dh,utf8ByteCount:oa};function tl(u,f){return!!f.get("x-ably-errorcode")}function Qy(u,f){if(tl(u,f))return u.error&&ne.fromValues(u.error)}function Tn(u){const f={};return u.forEach((m,b)=>{f[b]=m}),f}async function gh(u,f,m,b,w,R){const z=new Headers(b||{}),X=u?u.toUpperCase():me(R)?"GET":"POST",fe=new AbortController;let se;const be=new Promise(Ee=>{se=setTimeout(()=>{fe.abort(),Ee({error:new Me("Request timed out",null,408)})},f?f.options.timeouts.httpRequestTimeout:ke.TIMEOUTS.httpRequestTimeout)}),Se={method:X,headers:z,body:R,signal:fe.signal};L.Config.isWebworker||(Se.credentials=z.has("authorization")?"include":"same-origin");const Pe=(async()=>{try{const Ee=new URLSearchParams(w||{});Ee.set("rnd",Ri());const Ve=m+"?"+Ee,je=await Tr().fetch(Ve,Se);if(clearTimeout(se),je.status==204)return{error:null,statusCode:je.status};const at=je.headers.get("Content-Type");let jt;at&&at.indexOf("application/x-msgpack")>-1?jt=await je.arrayBuffer():at&&at.indexOf("application/json")>-1?jt=await je.json():jt=await je.text();const Kt=!!at&&at.indexOf("application/x-msgpack")===-1,tn=Tn(je.headers);return je.ok?{error:null,body:jt,headers:tn,unpacked:Kt,statusCode:je.status}:{error:Qy(jt,je.headers)||new Me("Error response received from server: "+je.status+" body was: "+L.Config.inspect(jt),null,je.status),body:jt,headers:tn,unpacked:Kt,statusCode:je.status}}catch(Ee){return clearTimeout(se),{error:Ee}}})();return Promise.race([be,Pe])}var mh={XHRRequest:Ls,FetchRequest:gh},yh=Ka(ia,mc);L.Crypto=yh,L.BufferUtils=mc,L.Http=Tp,L.Config=ia,L.Transports=fh,L.WebStorage=Qo;for(const u of[mu,Ps])u.Crypto=yh,u._MsgPack=Qa;Tp.bundledRequestImplementations=mh,T.initLogHandlers(),L.Defaults=di(wc),L.Config.agent&&(L.Defaults.agent+=" "+L.Config.agent);var Dp={ErrorInfo:ne,Rest:mu,Realtime:Ps,msgpack:Qa,makeProtocolMessageFromDeserialized:Qf};if(typeof r.exports=="object"&&typeof n=="object"){var Xy=(u,f,m,b)=>{if(f&&typeof f=="object"||typeof f=="function")for(let w of Object.getOwnPropertyNames(f))!Object.prototype.hasOwnProperty.call(u,w)&&w!==m&&Object.defineProperty(u,w,{get:()=>f[w],enumerable:!(b=Object.getOwnPropertyDescriptor(f,w))||b.enumerable});return u};r.exports=Xy(r.exports,n)}return r.exports})}(Fg)),Fg.exports}var JD=XD();const ZD="2.14.0";function ek(t){return Object.assign(Object.assign({},t),{params:Object.assign(Object.assign({},t==null?void 0:t.params),{agent:`react-hooks/${ZD}`}),attachOnSubscribe:!1})}var s0={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function tk(){if(Nw)return wt;Nw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function C(K){return K===null||typeof K!="object"?null:(K=E&&K[E]||K["@@iterator"],typeof K=="function"?K:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function D(K,pe,me){this.props=K,this.context=pe,this.refs=k,this.updater=me||O}D.prototype.isReactComponent={},D.prototype.setState=function(K,pe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,pe,"setState")},D.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function B(){}B.prototype=D.prototype;function Y(K,pe,me){this.props=K,this.context=pe,this.refs=k,this.updater=me||O}var Q=Y.prototype=new B;Q.constructor=Y,I(Q,D.prototype),Q.isPureReactComponent=!0;var L=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function j(K,pe,me,ve,Ne,Be){return me=Be.ref,{$$typeof:t,type:K,key:pe,ref:me!==void 0?me:null,props:Be}}function N(K,pe){return j(K.type,pe,void 0,void 0,void 0,K.props)}function U(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function $(K){var pe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(me){return pe[me]})}var T=/\/+/g;function ee(K,pe){return typeof K=="object"&&K!==null&&K.key!=null?$(""+K.key):pe.toString(36)}function W(){}function ne(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(W,W):(K.status="pending",K.then(function(pe){K.status==="pending"&&(K.status="fulfilled",K.value=pe)},function(pe){K.status==="pending"&&(K.status="rejected",K.reason=pe)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function Me(K,pe,me,ve,Ne){var Be=typeof K;(Be==="undefined"||Be==="boolean")&&(K=null);var Ue=!1;if(K===null)Ue=!0;else switch(Be){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(K.$$typeof){case t:case e:Ue=!0;break;case _:return Ue=K._init,Me(Ue(K._payload),pe,me,ve,Ne)}}if(Ue)return Ne=Ne(K),Ue=ve===""?"."+ee(K,0):ve,L(Ne)?(me="",Ue!=null&&(me=Ue.replace(T,"$&/")+"/"),Me(Ne,pe,me,"",function(gn){return gn})):Ne!=null&&(U(Ne)&&(Ne=N(Ne,me+(Ne.key==null||K&&K.key===Ne.key?"":(""+Ne.key).replace(T,"$&/")+"/")+Ue)),pe.push(Ne)),1;Ue=0;var It=ve===""?".":ve+":";if(L(K))for(var mt=0;mt<K.length;mt++)ve=K[mt],Be=It+ee(ve,mt),Ue+=Me(ve,pe,me,Be,Ne);else if(mt=C(K),typeof mt=="function")for(K=mt.call(K),mt=0;!(ve=K.next()).done;)ve=ve.value,Be=It+ee(ve,mt++),Ue+=Me(ve,pe,me,Be,Ne);else if(Be==="object"){if(typeof K.then=="function")return Me(ne(K),pe,me,ve,Ne);throw pe=String(K),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ie(K,pe,me){if(K==null)return K;var ve=[],Ne=0;return Me(K,ve,"","",function(Be){return pe.call(me,Be,Ne++)}),ve}function te(K){if(K._status===-1){var pe=K._result;pe=pe(),pe.then(function(me){(K._status===0||K._status===-1)&&(K._status=1,K._result=me)},function(me){(K._status===0||K._status===-1)&&(K._status=2,K._result=me)}),K._status===-1&&(K._status=0,K._result=pe)}if(K._status===1)return K._result.default;throw K._result}var Ce=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Le(){}return wt.Children={map:ie,forEach:function(K,pe,me){ie(K,function(){pe.apply(this,arguments)},me)},count:function(K){var pe=0;return ie(K,function(){pe++}),pe},toArray:function(K){return ie(K,function(pe){return pe})||[]},only:function(K){if(!U(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},wt.Component=D,wt.Fragment=n,wt.Profiler=i,wt.PureComponent=Y,wt.StrictMode=r,wt.Suspense=p,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,wt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return G.H.useMemoCache(K)}},wt.cache=function(K){return function(){return K.apply(null,arguments)}},wt.cloneElement=function(K,pe,me){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ve=I({},K.props),Ne=K.key,Be=void 0;if(pe!=null)for(Ue in pe.ref!==void 0&&(Be=void 0),pe.key!==void 0&&(Ne=""+pe.key),pe)!q.call(pe,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&pe.ref===void 0||(ve[Ue]=pe[Ue]);var Ue=arguments.length-2;if(Ue===1)ve.children=me;else if(1<Ue){for(var It=Array(Ue),mt=0;mt<Ue;mt++)It[mt]=arguments[mt+2];ve.children=It}return j(K.type,Ne,void 0,void 0,Be,ve)},wt.createContext=function(K){return K={$$typeof:c,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},wt.createElement=function(K,pe,me){var ve,Ne={},Be=null;if(pe!=null)for(ve in pe.key!==void 0&&(Be=""+pe.key),pe)q.call(pe,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ne[ve]=pe[ve]);var Ue=arguments.length-2;if(Ue===1)Ne.children=me;else if(1<Ue){for(var It=Array(Ue),mt=0;mt<Ue;mt++)It[mt]=arguments[mt+2];Ne.children=It}if(K&&K.defaultProps)for(ve in Ue=K.defaultProps,Ue)Ne[ve]===void 0&&(Ne[ve]=Ue[ve]);return j(K,Be,void 0,void 0,null,Ne)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(K){return{$$typeof:d,render:K}},wt.isValidElement=U,wt.lazy=function(K){return{$$typeof:_,_payload:{_status:-1,_result:K},_init:te}},wt.memo=function(K,pe){return{$$typeof:g,type:K,compare:pe===void 0?null:pe}},wt.startTransition=function(K){var pe=G.T,me={};G.T=me;try{var ve=K(),Ne=G.S;Ne!==null&&Ne(me,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Le,Ce)}catch(Be){Ce(Be)}finally{G.T=pe}},wt.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},wt.use=function(K){return G.H.use(K)},wt.useActionState=function(K,pe,me){return G.H.useActionState(K,pe,me)},wt.useCallback=function(K,pe){return G.H.useCallback(K,pe)},wt.useContext=function(K){return G.H.useContext(K)},wt.useDebugValue=function(){},wt.useDeferredValue=function(K,pe){return G.H.useDeferredValue(K,pe)},wt.useEffect=function(K,pe,me){var ve=G.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ve.useEffect(K,pe)},wt.useId=function(){return G.H.useId()},wt.useImperativeHandle=function(K,pe,me){return G.H.useImperativeHandle(K,pe,me)},wt.useInsertionEffect=function(K,pe){return G.H.useInsertionEffect(K,pe)},wt.useLayoutEffect=function(K,pe){return G.H.useLayoutEffect(K,pe)},wt.useMemo=function(K,pe){return G.H.useMemo(K,pe)},wt.useOptimistic=function(K,pe){return G.H.useOptimistic(K,pe)},wt.useReducer=function(K,pe,me){return G.H.useReducer(K,pe,me)},wt.useRef=function(K){return G.H.useRef(K)},wt.useState=function(K){return G.H.useState(K)},wt.useSyncExternalStore=function(K,pe,me){return G.H.useSyncExternalStore(K,pe,me)},wt.useTransition=function(){return G.H.useTransition()},wt.version="19.1.0",wt}var Lw;function ry(){return Lw||(Lw=1,s0.exports=tk()),s0.exports}var M=ry();const Yl=nO(M),Uw=WD({__proto__:null,default:Yl},[M]),Vw=Symbol.for("__ABLY_CONTEXT__"),jw=typeof globalThis<"u"?globalThis:{};function nk(){let t=jw[Vw];return t||(t=jw[Vw]=Yl.createContext({})),t}const mf=nk();function ms(t="default"){const e=Yl.useContext(mf)[t].client;if(!e)throw new Error("Could not find ably client in context. Make sure your ably hooks are called inside an <AblyProvider>");return e}function cO(t,e,n){const r=M.useRef(e);M.useEffect(()=>{r.current=e},[e]),M.useEffect(()=>(n?t.on(n,r.current):t.on(e),()=>{n?t.off(n,e):t.off(e)}),[t,n,e])}function d_(t,e,n="default"){const i=ms(typeof e=="string"?e:n),o=typeof e=="function"?e:t,c=typeof t!="function"?t:void 0;cO(i.connection,o,c)}function uO(t="default",e){const n=Yl.useContext(mf)[t]._channelNameToChannelContext[e];if(!n)throw new Error(`Could not find a parent ChannelProvider in the component tree for channelName="${e}". Make sure your channel based hooks (usePresence, useChannel, useChannelStateListener) are called inside a <ChannelProvider> component`);return n}function Fw(t,e,n){const r=typeof t=="object"?t:{channelName:t},{ablyId:i,channelName:o}=r,{channel:c}=uO(i,o);cO(c,typeof n=="function"?n:e,typeof e!="function"?e:void 0)}function rk(t){const[e,n]=M.useState(null),[r,i]=M.useState(null);return d_(["suspended","failed","disconnected"],o=>{var c;o.reason&&((c=t.onConnectionError)===null||c===void 0||c.call(t,o.reason),n(o.reason))},t.ablyId),d_(["connected","closed"],()=>{n(null)},t.ablyId),Fw(t,["suspended","failed","detached"],o=>{var c;o.reason&&((c=t.onChannelError)===null||c===void 0||c.call(t,o.reason),i(o.reason))}),Fw(t,["attached"],()=>{i(null)}),{connectionError:e,channelError:r}}const ik=["suspended","closing","closed","failed"],sk=(t,e)=>{try{t.Logger.logAction(t.logger,t.Logger.LOG_ERROR,`[react-hooks] ${e}`)}catch{console.error(`Unable to access ably-js logger, while sending ${e}`)}};function ak(t,e,n){const r=ms(e),[i,o]=M.useState(r.connection.state);d_(d=>{o(d.current)},e),r.connection.state!==i&&o(r.connection.state);const c=!n&&!ik.includes(i);return M.useEffect(()=>{c&&t.attach().catch(d=>{sk(r,d.toString())})},[c,t]),{connectionState:i}}function wo(t,e,n){const r={channelName:t},i=ms(r.ablyId),{channelName:o,skip:c}=r,{channel:d,derived:p}=uO(r.ablyId,o),g=M.useMemo(()=>{if(!p)return d.publish.bind(d);const k=i.channels.get(o);return k.publish.bind(k)},[i.channels,p,d,o]),_=typeof e=="string"?e:null,E=typeof e=="string"?n:e,C=M.useRef(E),{connectionError:O,channelError:I}=rk(r);return M.useEffect(()=>{C.current=E},[E]),M.useEffect(()=>{const k=C.current?B=>{C.current&&C.current(B)}:null,D=k?_===null?[k]:[_,k]:null;return!c&&D&&ok(d,...D),()=>{!c&&D&&lk(d,...D)}},[_,d,c]),ak(d,r.ablyId,c),{channel:d,publish:g,ably:i,connectionError:O,channelError:I}}async function ok(t,...e){await t.subscribe(...e)}async function lk(t,...e){await t.unsubscribe(...e)}const ck=({client:t,children:e,ablyId:n="default"})=>{if(!t)throw new Error("AblyProvider: the `client` prop is required");const r=Yl.useContext(mf),i=M.useMemo(()=>Object.assign(Object.assign({},r),{[n]:{client:t,_channelNameToChannelContext:{}}}),[r,t,n]);return F.jsx(mf.Provider,Object.assign({value:i},{children:e}))},uk=({ablyId:t="default",channelName:e,options:n,deriveOptions:r,children:i})=>{const o=Yl.useContext(mf),{client:c,_channelNameToChannelContext:d}=o[t];if(d[e])throw new Error("You can not use more than one `ChannelProvider` with the same channel name");const p=!!r,g=p?c.channels.getDerived(e,r):c.channels.get(e),_=M.useMemo(()=>Object.assign(Object.assign({},o),{[t]:{client:c,_channelNameToChannelContext:Object.assign(Object.assign({},d),{[e]:{channel:g,derived:p}})}}),[p,c,g,e,d,t,o]);return M.useLayoutEffect(()=>{g.setOptions(ek(n))},[g,n]),F.jsx(mf.Provider,Object.assign({value:_},{children:i}))};var a0={exports:{}},zh={},o0={exports:{}},l0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function fk(){return Bw||(Bw=1,function(t){function e(ie,te){var Ce=ie.length;ie.push(te);e:for(;0<Ce;){var Le=Ce-1>>>1,K=ie[Le];if(0<i(K,te))ie[Le]=te,ie[Ce]=K,Ce=Le;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var te=ie[0],Ce=ie.pop();if(Ce!==te){ie[0]=Ce;e:for(var Le=0,K=ie.length,pe=K>>>1;Le<pe;){var me=2*(Le+1)-1,ve=ie[me],Ne=me+1,Be=ie[Ne];if(0>i(ve,Ce))Ne<K&&0>i(Be,ve)?(ie[Le]=Be,ie[Ne]=Ce,Le=Ne):(ie[Le]=ve,ie[me]=Ce,Le=me);else if(Ne<K&&0>i(Be,Ce))ie[Le]=Be,ie[Ne]=Ce,Le=Ne;else break e}}return te}function i(ie,te){var Ce=ie.sortIndex-te.sortIndex;return Ce!==0?Ce:ie.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,E=null,C=3,O=!1,I=!1,k=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function L(ie){for(var te=n(g);te!==null;){if(te.callback===null)r(g);else if(te.startTime<=ie)r(g),te.sortIndex=te.expirationTime,e(p,te);else break;te=n(g)}}function G(ie){if(k=!1,L(ie),!I)if(n(p)!==null)I=!0,q||(q=!0,ee());else{var te=n(g);te!==null&&Me(G,te.startTime-ie)}}var q=!1,j=-1,N=5,U=-1;function $(){return D?!0:!(t.unstable_now()-U<N)}function T(){if(D=!1,q){var ie=t.unstable_now();U=ie;var te=!0;try{e:{I=!1,k&&(k=!1,Y(j),j=-1),O=!0;var Ce=C;try{t:{for(L(ie),E=n(p);E!==null&&!(E.expirationTime>ie&&$());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,C=E.priorityLevel;var K=Le(E.expirationTime<=ie);if(ie=t.unstable_now(),typeof K=="function"){E.callback=K,L(ie),te=!0;break t}E===n(p)&&r(p),L(ie)}else r(p);E=n(p)}if(E!==null)te=!0;else{var pe=n(g);pe!==null&&Me(G,pe.startTime-ie),te=!1}}break e}finally{E=null,C=Ce,O=!1}te=void 0}}finally{te?ee():q=!1}}}var ee;if(typeof Q=="function")ee=function(){Q(T)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=T,ee=function(){ne.postMessage(null)}}else ee=function(){B(T,0)};function Me(ie,te){j=B(function(){ie(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(ie){switch(C){case 1:case 2:case 3:var te=3;break;default:te=C}var Ce=C;C=te;try{return ie()}finally{C=Ce}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(ie,te){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Ce=C;C=ie;try{return te()}finally{C=Ce}},t.unstable_scheduleCallback=function(ie,te,Ce){var Le=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Le+Ce:Le):Ce=Le,ie){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Ce+K,ie={id:_++,callback:te,priorityLevel:ie,startTime:Ce,expirationTime:K,sortIndex:-1},Ce>Le?(ie.sortIndex=Ce,e(g,ie),n(p)===null&&ie===n(g)&&(k?(Y(j),j=-1):k=!0,Me(G,Ce-Le))):(ie.sortIndex=K,e(p,ie),I||O||(I=!0,q||(q=!0,ee()))),ie},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(ie){var te=C;return function(){var Ce=C;C=te;try{return ie.apply(this,arguments)}finally{C=Ce}}}}(l0)),l0}var Hw;function hk(){return Hw||(Hw=1,o0.exports=fk()),o0.exports}var c0={exports:{}},Kr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function dk(){if(zw)return Kr;zw=1;var t=ry();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(p,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:p,containerInfo:g,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Kr.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(p,g,null,_)},Kr.flushSync=function(p){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=_,r.d.f()}},Kr.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},Kr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Kr.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:O}):_==="script"&&r.d.X(p,{crossOrigin:E,integrity:C,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Kr.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},Kr.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);r.d.L(p,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Kr.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},Kr.requestFormReset=function(p){r.d.r(p)},Kr.unstable_batchedUpdates=function(p,g){return p(g)},Kr.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},Kr.useFormStatus=function(){return c.H.useHostTransitionStatus()},Kr.version="19.1.0",Kr}var qw;function fO(){if(qw)return c0.exports;qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),c0.exports=dk(),c0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function pk(){if($w)return zh;$w=1;var t=hk(),e=ry(),n=fO();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(r(188))}function p(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,h=a;;){var v=l.return;if(v===null)break;var S=v.alternate;if(S===null){if(h=v.return,h!==null){l=h;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===l)return d(v),s;if(S===h)return d(v),a;S=S.sibling}throw Error(r(188))}if(l.return!==h.return)l=v,h=S;else{for(var P=!1,V=v.child;V;){if(V===l){P=!0,l=v,h=S;break}if(V===h){P=!0,h=v,l=S;break}V=V.sibling}if(!P){for(V=S.child;V;){if(V===l){P=!0,l=S,h=v;break}if(V===h){P=!0,h=S,l=v;break}V=V.sibling}if(!P)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=T&&s[T]||s["@@iterator"],typeof s=="function"?s:null)}var W=Symbol.for("react.client.reference");function ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===W?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case D:return"Profiler";case k:return"StrictMode";case G:return"Suspense";case q:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case Q:return(s.displayName||"Context")+".Provider";case Y:return(s._context.displayName||"Context")+".Consumer";case L:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case j:return a=s.displayName||null,a!==null?a:ne(s.type)||"Memo";case N:a=s._payload,s=s._init;try{return ne(s(a))}catch{}}return null}var Me=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Le=[],K=-1;function pe(s){return{current:s}}function me(s){0>K||(s.current=Le[K],Le[K]=null,K--)}function ve(s,a){K++,Le[K]=s.current,s.current=a}var Ne=pe(null),Be=pe(null),Ue=pe(null),It=pe(null);function mt(s,a){switch(ve(Ue,a),ve(Be,s),ve(Ne,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?aw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=aw(a),s=ow(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}me(Ne),ve(Ne,s)}function gn(){me(Ne),me(Be),me(Ue)}function Ft(s){s.memoizedState!==null&&ve(It,s);var a=Ne.current,l=ow(a,s.type);a!==l&&(ve(Be,s),ve(Ne,l))}function mn(s){Be.current===s&&(me(Ne),me(Be)),It.current===s&&(me(It),Uh._currentValue=Ce)}var On=Object.prototype.hasOwnProperty,Ur=t.unstable_scheduleCallback,wn=t.unstable_cancelCallback,Vr=t.unstable_shouldYield,ys=t.unstable_requestPaint,Un=t.unstable_now,wr=t.unstable_getCurrentPriorityLevel,tr=t.unstable_ImmediatePriority,fn=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,pr=t.unstable_LowPriority,ti=t.unstable_IdlePriority,Ri=t.log,vs=t.unstable_setDisableYieldValue,Bt=null,rt=null;function Xt(s){if(typeof Ri=="function"&&vs(s),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Bt,s)}catch{}}var $t=Math.clz32?Math.clz32:Oi,Ws=Math.log,ni=Math.LN2;function Oi(s){return s>>>=0,s===0?32:31-(Ws(s)/ni|0)|0}var Ii=256,fi=4194304;function Tr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Qi(s,a,l){var h=s.pendingLanes;if(h===0)return 0;var v=0,S=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var V=h&134217727;return V!==0?(h=V&~S,h!==0?v=Tr(h):(P&=V,P!==0?v=Tr(P):l||(l=V&~s,l!==0&&(v=Tr(l))))):(V=h&~S,V!==0?v=Tr(V):P!==0?v=Tr(P):l||(l=h&~s,l!==0&&(v=Tr(l)))),v===0?0:a!==0&&a!==v&&(a&S)===0&&(S=v&-v,l=a&-a,S>=l||S===32&&(l&4194048)!==0)?a:v}function ri(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function xi(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(){var s=Ii;return Ii<<=1,(Ii&4194048)===0&&(Ii=256),s}function Ji(){var s=fi;return fi<<=1,(fi&62914560)===0&&(fi=4194304),s}function sn(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function hi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _s(s,a,l,h,v,S){var P=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var V=s.entanglements,J=s.expirationTimes,he=s.hiddenUpdates;for(l=P&~l;0<l;){var _e=31-$t(l),Ae=1<<_e;V[_e]=0,J[_e]=-1;var de=he[_e];if(de!==null)for(he[_e]=null,_e=0;_e<de.length;_e++){var ge=de[_e];ge!==null&&(ge.lane&=-536870913)}l&=~Ae}h!==0&&Cr(s,h,0),S!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=S&~(P&~a))}function Cr(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-$t(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|l&4194090}function In(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var h=31-$t(l),v=1<<h;v&a|s[h]&a&&(s[h]|=a),l&=~v}}function Zi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ks(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Z(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:Aw(s.type))}function oe(s,a){var l=te.p;try{return te.p=s,a()}finally{te.p=l}}var ce=Math.random().toString(36).slice(2),Te="__reactFiber$"+ce,Ie="__reactProps$"+ce,Fe="__reactContainer$"+ce,Ze="__reactEvents$"+ce,He="__reactListeners$"+ce,$e="__reactHandles$"+ce,Ye="__reactResources$"+ce,st="__reactMarker$"+ce;function We(s){delete s[Te],delete s[Ie],delete s[Ze],delete s[He],delete s[$e]}function tt(s){var a=s[Te];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Fe]||l[Te]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=fw(s);s!==null;){if(l=s[Te])return l;s=fw(s)}return a}s=l,l=s.parentNode}return null}function Tt(s){if(s=s[Te]||s[Fe]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Vt(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Ht(s){var a=s[Ye];return a||(a=s[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function xt(s){s[st]=!0}var ke=new Set,di={};function Vn(s,a){nr(s,a),nr(s+"Capture",a)}function nr(s,a){for(di[s]=a,s=0;s<a.length;s++)ke.add(a[s])}var qn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gt={},jr={};function Ys(s){return On.call(jr,s)?!0:On.call(Gt,s)?!1:qn.test(s)?jr[s]=!0:(Gt[s]=!0,!1)}function jn(s,a,l){if(Ys(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function rr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function dt(s,a,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+h)}}var xn,Fr;function Br(s){if(xn===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);xn=a&&a[1]||"",Fr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xn+s+Fr}var Pi=!1;function Jt(s,a){if(!s||Pi)return"";Pi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(ge){var de=ge}Reflect.construct(s,[],Ae)}else{try{Ae.call()}catch(ge){de=ge}s.call(Ae.prototype)}}else{try{throw Error()}catch(ge){de=ge}(Ae=s())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(ge){if(ge&&de&&typeof ge.stack=="string")return[ge.stack,de.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=h.DetermineComponentFrameRoot(),P=S[0],V=S[1];if(P&&V){var J=P.split(`
`),he=V.split(`
`);for(v=h=0;h<J.length&&!J[h].includes("DetermineComponentFrameRoot");)h++;for(;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;if(h===J.length||v===he.length)for(h=J.length-1,v=he.length-1;1<=h&&0<=v&&J[h]!==he[v];)v--;for(;1<=h&&0<=v;h--,v--)if(J[h]!==he[v]){if(h!==1||v!==1)do if(h--,v--,0>v||J[h]!==he[v]){var _e=`
`+J[h].replace(" at new "," at ");return s.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",s.displayName)),_e}while(1<=h&&0<=v);break}}}finally{Pi=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Br(l):""}function pi(s){switch(s.tag){case 26:case 27:case 5:return Br(s.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 15:return Jt(s.type,!1);case 11:return Jt(s.type.render,!1);case 1:return Jt(s.type,!0);case 31:return Br("Activity");default:return""}}function es(s){try{var a="";do a+=pi(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ir(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Jl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $f(s){var a=Jl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,S=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(P){h=""+P,S.call(this,P)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Oo(s){s._valueTracker||(s._valueTracker=$f(s))}function ii(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return s&&(h=Jl(s)?s.checked?"true":"false":s.value),s=h,s!==l?(a.setValue(s),!0):!1}function bs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Qs=/[\n"\\]/g;function Pn(s){return s.replace(Qs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function si(s,a,l,h,v,S,P,V){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),a!=null?P==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+ir(a)):s.value!==""+ir(a)&&(s.value=""+ir(a)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),a!=null?Xs(s,P,ir(a)):l!=null?Xs(s,P,ir(l)):h!=null&&s.removeAttribute("value"),v==null&&S!=null&&(s.defaultChecked=!!S),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?s.name=""+ir(V):s.removeAttribute("name")}function Ss(s,a,l,h,v,S,P,V){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),a!=null||l!=null){if(!(S!=="submit"&&S!=="reset"||a!=null))return;l=l!=null?""+ir(l):"",a=a!=null?""+ir(a):l,V||a===s.value||(s.value=a),s.defaultValue=a}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=V?s.checked:!!h,s.defaultChecked=!!h,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P)}function Xs(s,a,l){a==="number"&&bs(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Mi(s,a,l,h){if(s=s.options,a){a={};for(var v=0;v<l.length;v++)a["$"+l[v]]=!0;for(l=0;l<s.length;l++)v=a.hasOwnProperty("$"+s[l].value),s[l].selected!==v&&(s[l].selected=v),v&&h&&(s[l].defaultSelected=!0)}else{for(l=""+ir(l),a=null,v=0;v<s.length;v++){if(s[v].value===l){s[v].selected=!0,h&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function Zt(s,a,l){if(a!=null&&(a=""+ir(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+ir(l):""}function hn(s,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(Me(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=ir(a),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h)}function Ge(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sr(s,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,l):typeof l!="number"||l===0||Js.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Zl(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var v in a)h=a[v],a.hasOwnProperty(v)&&l[v]!==h&&sr(s,v,h)}else for(var S in a)a.hasOwnProperty(S)&&sr(s,S,a[S])}function Io(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xo(s){return iu.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var ts=null;function Hr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ns=null,Di=null;function Po(s){var a=Tt(s);if(a&&(s=a.stateNode)){var l=s[Ie]||null;e:switch(s=a.stateNode,a.type){case"input":if(si(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Pn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==s&&h.form===s.form){var v=h[Ie]||null;if(!v)throw Error(r(90));si(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===s.form&&ii(h)}break e;case"textarea":Zt(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Mi(s,!!l.multiple,a,!1)}}}var gi=!1;function ec(s,a,l){if(gi)return s(a,l);gi=!0;try{var h=s(a);return h}finally{if(gi=!1,(ns!==null||Di!==null)&&(Qp(),ns&&(a=ns,s=Di,Di=ns=null,Po(a),s)))for(a=0;a<s.length;a++)Po(s[a])}}function rs(s,a){var l=s.stateNode;if(l===null)return null;var h=l[Ie]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(zr)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){ar=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{ar=!1}var ki=null,Es=null,ws=null;function is(){if(ws)return ws;var s,a=Es,l=a.length,h,v="value"in ki?ki.value:ki.textContent,S=v.length;for(s=0;s<l&&a[s]===v[s];s++);var P=l-s;for(h=1;h<=P&&a[l-h]===v[S-h];h++);return ws=v.slice(s,1<h?1-h:void 0)}function Ni(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ss(){return!0}function tc(){return!1}function $n(s){function a(l,h,v,S,P){this._reactName=l,this._targetInst=v,this.type=h,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var V in s)s.hasOwnProperty(V)&&(l=s[V],this[V]=l?l(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ss:tc,this.isPropagationStopped=tc,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),a}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mo=$n(ot),Da=_({},ot,{view:0,detail:0}),su=$n(Da),Do,ka,as,gr=_({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==as&&(as&&s.type==="mousemove"?(Do=s.screenX-as.screenX,ka=s.screenY-as.screenY):ka=Do=0,as=s),Do)},movementY:function(s){return"movementY"in s?s.movementY:ka}}),ai=$n(gr),au=_({},gr,{dataTransfer:0}),ko=$n(au),Na=_({},Da,{relatedTarget:0}),No=$n(Na),nc=_({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),Lo=$n(nc),ou=_({},ot,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),La=$n(ou),lu=_({},ot,{data:0}),rc=$n(lu),Ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ts(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=sc[s])?!!a[s]:!1}function qr(){return Ts}var cu=_({},Da,{key:function(s){if(s.key){var a=Ua[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ni(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ic[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(s){return s.type==="keypress"?Ni(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ni(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Uo=$n(cu),ac=_({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=$n(ac),Cs=_({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),lc=$n(Cs),uu=_({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),fu=$n(uu),hu=_({},gr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Va=$n(hu),Ar=_({},ot,{newState:0,oldState:0}),Vo=$n(Ar),cc=[9,13,27,32],$r=zr&&"CompositionEvent"in window,y=null;zr&&"documentMode"in document&&(y=document.documentMode);var A=zr&&"TextEvent"in window&&!y,x=zr&&(!$r||y&&8<y&&11>=y),H=" ",le=!1;function ye(s,a){switch(s){case"keyup":return cc.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function De(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Pt=!1;function Fn(s,a){switch(s){case"compositionend":return De(a);case"keypress":return a.which!==32?null:(le=!0,H);case"textInput":return s=a.data,s===H&&le?null:s;default:return null}}function Mt(s,a){if(Pt)return s==="compositionend"||!$r&&ye(s,a)?(s=is(),ws=Es=ki=null,Pt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return x&&a.locale!=="ko"?null:a.data;default:return null}}var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Gn[s.type]:a==="textarea"}function os(s,a,l,h){ns?Di?Di.push(h):Di=[h]:ns=h,a=ng(a,"onChange"),0<a.length&&(l=new Mo("onChange","change",null,l,h),s.push({event:l,listeners:a}))}var Wn=null,Li=null;function jo(s){tw(s,0)}function uc(s){var a=Vt(s);if(ii(a))return s}function op(s,a){if(s==="change")return a}var lp=!1;if(zr){var Wf;if(zr){var du="oninput"in document;if(!du){var ja=document.createElement("div");ja.setAttribute("oninput","return;"),du=typeof ja.oninput=="function"}Wf=du}else Wf=!1;lp=Wf&&(!document.documentMode||9<document.documentMode)}function Fo(){Wn&&(Wn.detachEvent("onpropertychange",Kf),Li=Wn=null)}function Kf(s){if(s.propertyName==="value"&&uc(Li)){var a=[];os(a,Li,s,Hr(s)),ec(jo,a)}}function cp(s,a,l){s==="focusin"?(Fo(),Wn=a,Li=l,Wn.attachEvent("onpropertychange",Kf)):s==="focusout"&&Fo()}function up(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return uc(Li)}function fp(s,a){if(s==="click")return uc(a)}function Gy(s,a){if(s==="input"||s==="change")return uc(a)}function Yf(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var oi=typeof Object.is=="function"?Object.is:Yf;function Zs(s,a){if(oi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var v=l[h];if(!On.call(a,v)||!oi(s[v],a[v]))return!1}return!0}function hp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function pu(s,a){var l=hp(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=a&&h>=a)return{node:l,offset:a-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=hp(l)}}function Qf(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Qf(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Gr(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=bs(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=bs(s.document)}return a}function fc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Xf=zr&&"documentMode"in document&&11>=document.documentMode,Bo=null,Jf=null,Fa=null,gu=!1;function dp(s,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gu||Bo==null||Bo!==bs(h)||(h=Bo,"selectionStart"in h&&fc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fa&&Zs(Fa,h)||(Fa=h,h=ng(Jf,"onSelect"),0<h.length&&(a=new Mo("onSelect","select",null,a,l),s.push({event:a,listeners:h}),a.target=Bo)))}function Ba(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Ha={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},za={},pp={};zr&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function ea(s){if(za[s])return za[s];if(!Ha[s])return s;var a=Ha[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in pp)return za[s]=a[l];return s}var ta=ea("animationend"),mu=ea("animationiteration"),gp=ea("animationstart"),mp=ea("transitionrun"),yp=ea("transitionstart"),Wy=ea("transitioncancel"),vp=ea("transitionend"),_p=new Map,Ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ho.push("scrollEnd");function Kn(s,a){_p.set(s,a),Vn(a,[s])}var bp=new WeakMap;function yi(s,a){if(typeof s=="object"&&s!==null){var l=bp.get(s);return l!==void 0?l:(a={value:s,source:a,stack:es(a)},bp.set(s,a),a)}return{value:s,source:a,stack:es(a)}}var Yn=[],zo=0,Zf=0;function yu(){for(var s=zo,a=Zf=zo=0;a<s;){var l=Yn[a];Yn[a++]=null;var h=Yn[a];Yn[a++]=null;var v=Yn[a];Yn[a++]=null;var S=Yn[a];if(Yn[a++]=null,h!==null&&v!==null){var P=h.pending;P===null?v.next=v:(v.next=P.next,P.next=v),h.pending=v}S!==0&&vu(l,v,S)}}function As(s,a,l,h){Yn[zo++]=s,Yn[zo++]=a,Yn[zo++]=l,Yn[zo++]=h,Zf|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function mr(s,a,l,h){return As(s,a,l,h),na(s)}function qo(s,a){return As(s,null,null,a),na(s)}function vu(s,a,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var v=!1,S=s.return;S!==null;)S.childLanes|=l,h=S.alternate,h!==null&&(h.childLanes|=l),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(v=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,v&&a!==null&&(v=31-$t(l),s=S.hiddenUpdates,h=s[v],h===null?s[v]=[a]:h.push(a),a.lane=l|536870912),S):null}function na(s){if(50<Ih)throw Ih=0,Rv=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var qa={};function eh(s,a,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(s,a,l,h){return new eh(s,a,l,h)}function hc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Rs(s,a){var l=s.alternate;return l===null?(l=li(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Sp(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function dc(s,a,l,h,v,S){var P=0;if(h=s,typeof s=="function")hc(s)&&(P=1);else if(typeof s=="string")P=MD(s,l,Ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=li(31,l,a,v),s.elementType=U,s.lanes=S,s;case I:return $a(l.children,v,S,a);case k:P=8,v|=24;break;case D:return s=li(12,l,a,v|2),s.elementType=D,s.lanes=S,s;case G:return s=li(13,l,a,v),s.elementType=G,s.lanes=S,s;case q:return s=li(19,l,a,v),s.elementType=q,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:case Q:P=10;break e;case Y:P=9;break e;case L:P=11;break e;case j:P=14;break e;case N:P=16,h=null;break e}P=29,l=Error(r(130,s===null?"null":typeof s,"")),h=null}return a=li(P,l,a,v),a.elementType=s,a.type=h,a.lanes=S,a}function $a(s,a,l,h){return s=li(7,s,h,a),s.lanes=l,s}function th(s,a,l){return s=li(6,s,null,a),s.lanes=l,s}function _u(s,a,l){return a=li(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var $o=[],Go=0,bu=null,Su=0,Wr=[],vi=0,Os=null,Is=1,xs="";function Ga(s,a){$o[Go++]=Su,$o[Go++]=bu,bu=s,Su=a}function Ep(s,a,l){Wr[vi++]=Is,Wr[vi++]=xs,Wr[vi++]=Os,Os=s;var h=Is;s=xs;var v=32-$t(h)-1;h&=~(1<<v),l+=1;var S=32-$t(a)+v;if(30<S){var P=v-v%5;S=(h&(1<<P)-1).toString(32),h>>=P,v-=P,Is=1<<32-$t(a)+v|l<<v|h,xs=S+s}else Is=1<<S|l<<v|h,xs=s}function nh(s){s.return!==null&&(Ga(s,1),Ep(s,1,0))}function rh(s){for(;s===bu;)bu=$o[--Go],$o[Go]=null,Su=$o[--Go],$o[Go]=null;for(;s===Os;)Os=Wr[--vi],Wr[vi]=null,xs=Wr[--vi],Wr[vi]=null,Is=Wr[--vi],Wr[vi]=null}var yr=null,bn=null,bt=!1,Ps=null,_i=!1,Wa=Error(r(519));function Ms(s){var a=Error(r(418,""));throw ks(yi(a,s)),Wa}function ih(s){var a=s.stateNode,l=s.type,h=s.memoizedProps;switch(a[Te]=s,a[Ie]=h,l){case"dialog":kt("cancel",a),kt("close",a);break;case"iframe":case"object":case"embed":kt("load",a);break;case"video":case"audio":for(l=0;l<Ph.length;l++)kt(Ph[l],a);break;case"source":kt("error",a);break;case"img":case"image":case"link":kt("error",a),kt("load",a);break;case"details":kt("toggle",a);break;case"input":kt("invalid",a),Ss(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Oo(a);break;case"select":kt("invalid",a);break;case"textarea":kt("invalid",a),hn(a,h.value,h.defaultValue,h.children),Oo(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||sw(a.textContent,l)?(h.popover!=null&&(kt("beforetoggle",a),kt("toggle",a)),h.onScroll!=null&&kt("scroll",a),h.onScrollEnd!=null&&kt("scrollend",a),h.onClick!=null&&(a.onclick=rg),a=!0):a=!1,a||Ms(s)}function sh(s){for(yr=s.return;yr;)switch(yr.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:yr=yr.return}}function Ds(s){if(s!==yr)return!1;if(!bt)return sh(s),bt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||zv(s.type,s.memoizedProps)),l=!l),l&&bn&&Ms(s),sh(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){bn=Vs(s.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}bn=null}}else a===27?(a=bn,dl(s.type)?(s=Wv,Wv=null,bn=s):bn=a):bn=yr?Vs(s.stateNode.nextSibling):null;return!0}function Wo(){bn=yr=null,bt=!1}function Ko(){var s=Ps;return s!==null&&(Ei===null?Ei=s:Ei.push.apply(Ei,s),Ps=null),s}function ks(s){Ps===null?Ps=[s]:Ps.push(s)}var pc=pe(null),ls=null,Ns=null;function cs(s,a,l){ve(pc,a._currentValue),a._currentValue=l}function Qn(s){s._currentValue=pc.current,me(pc)}function Yo(s,a,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===l)break;s=s.return}}function ah(s,a,l,h){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var S=v.dependencies;if(S!==null){var P=v.child;S=S.firstContext;e:for(;S!==null;){var V=S;S=v;for(var J=0;J<a.length;J++)if(V.context===a[J]){S.lanes|=l,V=S.alternate,V!==null&&(V.lanes|=l),Yo(S.return,l,s),h||(P=null);break e}S=V.next}}else if(v.tag===18){if(P=v.return,P===null)throw Error(r(341));P.lanes|=l,S=P.alternate,S!==null&&(S.lanes|=l),Yo(P,l,s),P=null}else P=v.child;if(P!==null)P.return=v;else for(P=v;P!==null;){if(P===s){P=null;break}if(v=P.sibling,v!==null){v.return=P.return,P=v;break}P=P.return}v=P}}function gc(s,a,l,h){s=null;for(var v=a,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var P=v.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var V=v.type;oi(v.pendingProps.value,P.value)||(s!==null?s.push(V):s=[V])}}else if(v===It.current){if(P=v.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Uh):s=[Uh])}v=v.return}s!==null&&ah(a,s,l,h),a.flags|=262144}function mc(s){for(s=s.firstContext;s!==null;){if(!oi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ka(s){ls=s,Ns=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function or(s){return oh(ls,s)}function bi(s,a){return ls===null&&Ka(s),oh(s,a)}function oh(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ns===null){if(s===null)throw Error(r(308));Ns=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ns=Ns.next=a;return l}var yc=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},wp=t.unstable_scheduleCallback,Tp=t.unstable_NormalPriority,dn={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ra(){return{controller:new yc,data:new Map,refCount:0}}function vc(s){s.refCount--,s.refCount===0&&wp(Tp,function(){s.controller.abort()})}var Qo=null,Sn=0,Xo=0,Jo=null;function Ky(s,a){if(Qo===null){var l=Qo=[];Sn=0,Xo=kv(),Jo={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Sn++,a.then(Cp,Cp),a}function Cp(){if(--Sn===0&&Qo!==null){Jo!==null&&(Jo.status="fulfilled");var s=Qo;Qo=null,Xo=0,Jo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Yy(s,a){var l=[],h={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var v=0;v<l.length;v++)(0,l[v])(a)},function(v){for(h.status="rejected",h.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),h}var Ap=ie.S;ie.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Ky(s,a),Ap!==null&&Ap(s,a)};var ia=pe(null);function lh(){var s=ia.current;return s!==null?s:pn.pooledCache}function Zo(s,a){a===null?ve(ia,ia.current):ve(ia,a.pool)}function Rp(){var s=lh();return s===null?null:{parent:dn._currentValue,pool:s}}var _c=Error(r(460)),Op=Error(r(474)),Eu=Error(r(542)),ch={then:function(){}};function Ip(s){return s=s.status,s==="fulfilled"||s==="rejected"}function bc(){}function xp(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(bc,bc),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Mp(s),s;default:if(typeof a.status=="string")a.then(bc,bc);else{if(s=pn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=h}},function(h){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Mp(s),s}throw Sc=a,_c}}var Sc=null;function Pp(){if(Sc===null)throw Error(r(459));var s=Sc;return Sc=null,s}function Mp(s){if(s===_c||s===Eu)throw Error(r(483))}var Ls=!1;function wu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uh(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function sa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function aa(s,a,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(an&2)!==0){var v=h.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),h.pending=a,a=na(s),vu(s,null,l),a}return As(s,h,a,l),na(s)}function Ec(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,In(s,l)}}function fh(s,a){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var v=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var P={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};S===null?v=S=P:S=S.next=P,l=l.next}while(l!==null);S===null?v=S=a:S=S.next=a}else v=S=a;l={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var hh=!1;function wc(){if(hh){var s=Jo;if(s!==null)throw s}}function Tc(s,a,l,h){hh=!1;var v=s.updateQueue;Ls=!1;var S=v.firstBaseUpdate,P=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var J=V,he=J.next;J.next=null,P===null?S=he:P.next=he,P=J;var _e=s.alternate;_e!==null&&(_e=_e.updateQueue,V=_e.lastBaseUpdate,V!==P&&(V===null?_e.firstBaseUpdate=he:V.next=he,_e.lastBaseUpdate=J))}if(S!==null){var Ae=v.baseState;P=0,_e=he=J=null,V=S;do{var de=V.lane&-536870913,ge=de!==V.lane;if(ge?(zt&de)===de:(h&de)===de){de!==0&&de===Xo&&(hh=!0),_e!==null&&(_e=_e.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var gt=s,lt=V;de=a;var cn=l;switch(lt.tag){case 1:if(gt=lt.payload,typeof gt=="function"){Ae=gt.call(cn,Ae,de);break e}Ae=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=lt.payload,de=typeof gt=="function"?gt.call(cn,Ae,de):gt,de==null)break e;Ae=_({},Ae,de);break e;case 2:Ls=!0}}de=V.callback,de!==null&&(s.flags|=64,ge&&(s.flags|=8192),ge=v.callbacks,ge===null?v.callbacks=[de]:ge.push(de))}else ge={lane:de,tag:V.tag,payload:V.payload,callback:V.callback,next:null},_e===null?(he=_e=ge,J=Ae):_e=_e.next=ge,P|=de;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;ge=V,V=ge.next,ge.next=null,v.lastBaseUpdate=ge,v.shared.pending=null}}while(!0);_e===null&&(J=Ae),v.baseState=J,v.firstBaseUpdate=he,v.lastBaseUpdate=_e,S===null&&(v.shared.lanes=0),cl|=P,s.lanes=P,s.memoizedState=Ae}}function el(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function dh(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)el(l[s],a)}var oa=pe(null),Tu=pe(0);function Cu(s,a){s=ro,ve(Tu,s),ve(oa,a),ro=s|a.baseLanes}function Au(){ve(Tu,ro),ve(oa,oa.current)}function ph(){ro=Tu.current,me(oa),me(Tu)}var la=0,Et=null,en=null,Mn=null,Ru=!1,Ya=!1,Ui=!1,ca=0,Qa=0,tl=null,Qy=0;function Tn(){throw Error(r(321))}function gh(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!oi(s[l],a[l]))return!1;return!0}function mh(s,a,l,h,v,S){return la=S,Et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ie.H=s===null||s.memoizedState===null?jE:FE,Ui=!1,S=l(h,v),Ui=!1,Ya&&(S=Dp(a,l,h,v)),yh(s),S}function yh(s){ie.H=Up;var a=en!==null&&en.next!==null;if(la=0,Mn=en=Et=null,Ru=!1,Qa=0,tl=null,a)throw Error(r(300));s===null||vr||(s=s.dependencies,s!==null&&mc(s)&&(vr=!0))}function Dp(s,a,l,h){Et=s;var v=0;do{if(Ya&&(tl=null),Qa=0,Ya=!1,25<=v)throw Error(r(301));if(v+=1,Mn=en=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}ie.H=zM,S=a(l,h)}while(Ya);return S}function Xy(){var s=ie.H,a=s.useState()[0];return a=typeof a.then=="function"?z(a):a,s=s.useState()[0],(en!==null?en.memoizedState:null)!==s&&(Et.flags|=1024),a}function u(){var s=ca!==0;return ca=0,s}function f(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function m(s){if(Ru){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ru=!1}la=0,Mn=en=Et=null,Ya=!1,Qa=ca=0,tl=null}function b(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Et.memoizedState=Mn=s:Mn=Mn.next=s,Mn}function w(){if(en===null){var s=Et.alternate;s=s!==null?s.memoizedState:null}else s=en.next;var a=Mn===null?Et.memoizedState:Mn.next;if(a!==null)Mn=a,en=s;else{if(s===null)throw Et.alternate===null?Error(r(467)):Error(r(310));en=s,s={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Mn===null?Et.memoizedState=Mn=s:Mn=Mn.next=s}return Mn}function R(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function z(s){var a=Qa;return Qa+=1,tl===null&&(tl=[]),s=xp(tl,s,a),a=Et,(Mn===null?a.memoizedState:Mn.next)===null&&(a=a.alternate,ie.H=a===null||a.memoizedState===null?jE:FE),s}function X(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return z(s);if(s.$$typeof===Q)return or(s)}throw Error(r(438,String(s)))}function fe(s){var a=null,l=Et.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Et.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=R(),Et.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),h=0;h<s;h++)l[h]=$;return a.index++,l}function se(s,a){return typeof a=="function"?a(s):a}function be(s){var a=w();return Se(a,en,s)}function Se(s,a,l){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var v=s.baseQueue,S=h.pending;if(S!==null){if(v!==null){var P=v.next;v.next=S.next,S.next=P}a.baseQueue=v=S,h.pending=null}if(S=s.baseState,v===null)s.memoizedState=S;else{a=v.next;var V=P=null,J=null,he=a,_e=!1;do{var Ae=he.lane&-536870913;if(Ae!==he.lane?(zt&Ae)===Ae:(la&Ae)===Ae){var de=he.revertLane;if(de===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ae===Xo&&(_e=!0);else if((la&de)===de){he=he.next,de===Xo&&(_e=!0);continue}else Ae={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},J===null?(V=J=Ae,P=S):J=J.next=Ae,Et.lanes|=de,cl|=de;Ae=he.action,Ui&&l(S,Ae),S=he.hasEagerState?he.eagerState:l(S,Ae)}else de={lane:Ae,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},J===null?(V=J=de,P=S):J=J.next=de,Et.lanes|=Ae,cl|=Ae;he=he.next}while(he!==null&&he!==a);if(J===null?P=S:J.next=V,!oi(S,s.memoizedState)&&(vr=!0,_e&&(l=Jo,l!==null)))throw l;s.memoizedState=S,s.baseState=P,s.baseQueue=J,h.lastRenderedState=S}return v===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Pe(s){var a=w(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var h=l.dispatch,v=l.pending,S=a.memoizedState;if(v!==null){l.pending=null;var P=v=v.next;do S=s(S,P.action),P=P.next;while(P!==v);oi(S,a.memoizedState)||(vr=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),l.lastRenderedState=S}return[S,h]}function Ee(s,a,l){var h=Et,v=w(),S=bt;if(S){if(l===void 0)throw Error(r(407));l=l()}else l=a();var P=!oi((en||v).memoizedState,l);P&&(v.memoizedState=l,vr=!0),v=v.queue;var V=at.bind(null,h,v,s);if(vh(2048,8,V,[s]),v.getSnapshot!==a||P||Mn!==null&&Mn.memoizedState.tag&1){if(h.flags|=2048,Ou(9,kp(),je.bind(null,h,v,l,a),null),pn===null)throw Error(r(349));S||(la&124)!==0||Ve(h,a,l)}return l}function Ve(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Et.updateQueue,a===null?(a=R(),Et.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function je(s,a,l,h){a.value=l,a.getSnapshot=h,jt(a)&&Kt(s)}function at(s,a,l){return l(function(){jt(a)&&Kt(s)})}function jt(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!oi(s,l)}catch{return!0}}function Kt(s){var a=qo(s,2);a!==null&&Hi(a,s,2)}function tn(s){var a=b();if(typeof s=="function"){var l=s;if(s=l(),Ui){Xt(!0);try{l()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:se,lastRenderedState:s},a}function pt(s,a,l,h){return s.baseState=l,Se(s,en,typeof h=="function"?h:se)}function ci(s,a,l,h,v){if(Lp(s))throw Error(r(485));if(s=a.action,s!==null){var S={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){S.listeners.push(P)}};ie.T!==null?l(!0):S.isTransition=!1,h(S),l=a.pending,l===null?(S.next=a.pending=S,lr(a,S)):(S.next=l.next,a.pending=l.next=S)}}function lr(s,a){var l=a.action,h=a.payload,v=s.state;if(a.isTransition){var S=ie.T,P={};ie.T=P;try{var V=l(v,h),J=ie.S;J!==null&&J(P,V),nl(s,a,V)}catch(he){Cc(s,a,he)}finally{ie.T=S}}else try{S=l(v,h),nl(s,a,S)}catch(he){Cc(s,a,he)}}function nl(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Xa(s,a,h)},function(h){return Cc(s,a,h)}):Xa(s,a,l)}function Xa(s,a,l){a.status="fulfilled",a.value=l,gE(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,lr(s,l)))}function Cc(s,a,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,gE(a),a=a.next;while(a!==h)}s.action=null}function gE(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function mE(s,a){return a}function yE(s,a){if(bt){var l=pn.formState;if(l!==null){e:{var h=Et;if(bt){if(bn){t:{for(var v=bn,S=_i;v.nodeType!==8;){if(!S){v=null;break t}if(v=Vs(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){bn=Vs(v.nextSibling),h=v.data==="F!";break e}}Ms(h)}h=!1}h&&(a=l[0])}}return l=b(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mE,lastRenderedState:a},l.queue=h,l=LE.bind(null,Et,h),h.dispatch=l,h=tn(!1),S=nv.bind(null,Et,!1,h.queue),h=b(),v={state:a,dispatch:null,action:s,pending:null},h.queue=v,l=ci.bind(null,Et,v,S,l),v.dispatch=l,h.memoizedState=s,[a,l,!1]}function vE(s){var a=w();return _E(a,en,s)}function _E(s,a,l){if(a=Se(s,a,mE)[0],s=be(se)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=z(a)}catch(P){throw P===_c?Eu:P}else h=a;a=w();var v=a.queue,S=v.dispatch;return l!==a.memoizedState&&(Et.flags|=2048,Ou(9,kp(),jM.bind(null,v,l),null)),[h,S,s]}function jM(s,a){s.action=a}function bE(s){var a=w(),l=en;if(l!==null)return _E(a,l,s);w(),a=a.memoizedState,l=w();var h=l.queue.dispatch;return l.memoizedState=s,[a,h,!1]}function Ou(s,a,l,h){return s={tag:s,create:l,deps:h,inst:a,next:null},a=Et.updateQueue,a===null&&(a=R(),Et.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,a.lastEffect=s),s}function kp(){return{destroy:void 0,resource:void 0}}function SE(){return w().memoizedState}function Np(s,a,l,h){var v=b();h=h===void 0?null:h,Et.flags|=s,v.memoizedState=Ou(1|a,kp(),l,h)}function vh(s,a,l,h){var v=w();h=h===void 0?null:h;var S=v.memoizedState.inst;en!==null&&h!==null&&gh(h,en.memoizedState.deps)?v.memoizedState=Ou(a,S,l,h):(Et.flags|=s,v.memoizedState=Ou(1|a,S,l,h))}function EE(s,a){Np(8390656,8,s,a)}function wE(s,a){vh(2048,8,s,a)}function TE(s,a){return vh(4,2,s,a)}function CE(s,a){return vh(4,4,s,a)}function AE(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function RE(s,a,l){l=l!=null?l.concat([s]):null,vh(4,4,AE.bind(null,a,s),l)}function Jy(){}function OE(s,a){var l=w();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&gh(a,h[1])?h[0]:(l.memoizedState=[s,a],s)}function IE(s,a){var l=w();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&gh(a,h[1]))return h[0];if(h=s(),Ui){Xt(!0);try{s()}finally{Xt(!1)}}return l.memoizedState=[h,a],h}function Zy(s,a,l){return l===void 0||(la&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=M1(),Et.lanes|=s,cl|=s,l)}function xE(s,a,l,h){return oi(l,a)?l:oa.current!==null?(s=Zy(s,l,h),oi(s,a)||(vr=!0),s):(la&42)===0?(vr=!0,s.memoizedState=l):(s=M1(),Et.lanes|=s,cl|=s,a)}function PE(s,a,l,h,v){var S=te.p;te.p=S!==0&&8>S?S:8;var P=ie.T,V={};ie.T=V,nv(s,!1,a,l);try{var J=v(),he=ie.S;if(he!==null&&he(V,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var _e=Yy(J,h);_h(s,a,_e,Bi(s))}else _h(s,a,h,Bi(s))}catch(Ae){_h(s,a,{then:function(){},status:"rejected",reason:Ae},Bi())}finally{te.p=S,ie.T=P}}function FM(){}function ev(s,a,l,h){if(s.tag!==5)throw Error(r(476));var v=ME(s).queue;PE(s,v,a,Ce,l===null?FM:function(){return DE(s),l(h)})}function ME(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:se,lastRenderedState:Ce},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:se,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function DE(s){var a=ME(s).next.queue;_h(s,a,{},Bi())}function tv(){return or(Uh)}function kE(){return w().memoizedState}function NE(){return w().memoizedState}function BM(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Bi();s=sa(l);var h=aa(a,s,l);h!==null&&(Hi(h,a,l),Ec(h,a,l)),a={cache:ra()},s.payload=a;return}a=a.return}}function HM(s,a,l){var h=Bi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Lp(s)?UE(a,l):(l=mr(s,a,l,h),l!==null&&(Hi(l,s,h),VE(l,a,h)))}function LE(s,a,l){var h=Bi();_h(s,a,l,h)}function _h(s,a,l,h){var v={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lp(s))UE(a,v);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var P=a.lastRenderedState,V=S(P,l);if(v.hasEagerState=!0,v.eagerState=V,oi(V,P))return As(s,a,v,0),pn===null&&yu(),!1}catch{}finally{}if(l=mr(s,a,v,h),l!==null)return Hi(l,s,h),VE(l,a,h),!0}return!1}function nv(s,a,l,h){if(h={lane:2,revertLane:kv(),action:h,hasEagerState:!1,eagerState:null,next:null},Lp(s)){if(a)throw Error(r(479))}else a=mr(s,l,h,2),a!==null&&Hi(a,s,2)}function Lp(s){var a=s.alternate;return s===Et||a!==null&&a===Et}function UE(s,a){Ya=Ru=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function VE(s,a,l){if((l&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,In(s,l)}}var Up={readContext:or,use:X,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},jE={readContext:or,use:X,useCallback:function(s,a){return b().memoizedState=[s,a===void 0?null:a],s},useContext:or,useEffect:EE,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Np(4194308,4,AE.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Np(4194308,4,s,a)},useInsertionEffect:function(s,a){Np(4,2,s,a)},useMemo:function(s,a){var l=b();a=a===void 0?null:a;var h=s();if(Ui){Xt(!0);try{s()}finally{Xt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(s,a,l){var h=b();if(l!==void 0){var v=l(a);if(Ui){Xt(!0);try{l(a)}finally{Xt(!1)}}}else v=a;return h.memoizedState=h.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},h.queue=s,s=s.dispatch=HM.bind(null,Et,s),[h.memoizedState,s]},useRef:function(s){var a=b();return s={current:s},a.memoizedState=s},useState:function(s){s=tn(s);var a=s.queue,l=LE.bind(null,Et,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Jy,useDeferredValue:function(s,a){var l=b();return Zy(l,s,a)},useTransition:function(){var s=tn(!1);return s=PE.bind(null,Et,s.queue,!0,!1),b().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var h=Et,v=b();if(bt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),pn===null)throw Error(r(349));(zt&124)!==0||Ve(h,a,l)}v.memoizedState=l;var S={value:l,getSnapshot:a};return v.queue=S,EE(at.bind(null,h,S,s),[s]),h.flags|=2048,Ou(9,kp(),je.bind(null,h,S,l,a),null),l},useId:function(){var s=b(),a=pn.identifierPrefix;if(bt){var l=xs,h=Is;l=(h&~(1<<32-$t(h)-1)).toString(32)+l,a="«"+a+"R"+l,l=ca++,0<l&&(a+="H"+l.toString(32)),a+="»"}else l=Qy++,a="«"+a+"r"+l.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:tv,useFormState:yE,useActionState:yE,useOptimistic:function(s){var a=b();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=nv.bind(null,Et,!0,l),l.dispatch=a,[s,a]},useMemoCache:fe,useCacheRefresh:function(){return b().memoizedState=BM.bind(null,Et)}},FE={readContext:or,use:X,useCallback:OE,useContext:or,useEffect:wE,useImperativeHandle:RE,useInsertionEffect:TE,useLayoutEffect:CE,useMemo:IE,useReducer:be,useRef:SE,useState:function(){return be(se)},useDebugValue:Jy,useDeferredValue:function(s,a){var l=w();return xE(l,en.memoizedState,s,a)},useTransition:function(){var s=be(se)[0],a=w().memoizedState;return[typeof s=="boolean"?s:z(s),a]},useSyncExternalStore:Ee,useId:kE,useHostTransitionStatus:tv,useFormState:vE,useActionState:vE,useOptimistic:function(s,a){var l=w();return pt(l,en,s,a)},useMemoCache:fe,useCacheRefresh:NE},zM={readContext:or,use:X,useCallback:OE,useContext:or,useEffect:wE,useImperativeHandle:RE,useInsertionEffect:TE,useLayoutEffect:CE,useMemo:IE,useReducer:Pe,useRef:SE,useState:function(){return Pe(se)},useDebugValue:Jy,useDeferredValue:function(s,a){var l=w();return en===null?Zy(l,s,a):xE(l,en.memoizedState,s,a)},useTransition:function(){var s=Pe(se)[0],a=w().memoizedState;return[typeof s=="boolean"?s:z(s),a]},useSyncExternalStore:Ee,useId:kE,useHostTransitionStatus:tv,useFormState:bE,useActionState:bE,useOptimistic:function(s,a){var l=w();return en!==null?pt(l,en,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:fe,useCacheRefresh:NE},Iu=null,bh=0;function Vp(s){var a=bh;return bh+=1,Iu===null&&(Iu=[]),xp(Iu,s,a)}function Sh(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function jp(s,a){throw a.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function BE(s){var a=s._init;return a(s._payload)}function HE(s){function a(ae,re){if(s){var ue=ae.deletions;ue===null?(ae.deletions=[re],ae.flags|=16):ue.push(re)}}function l(ae,re){if(!s)return null;for(;re!==null;)a(ae,re),re=re.sibling;return null}function h(ae){for(var re=new Map;ae!==null;)ae.key!==null?re.set(ae.key,ae):re.set(ae.index,ae),ae=ae.sibling;return re}function v(ae,re){return ae=Rs(ae,re),ae.index=0,ae.sibling=null,ae}function S(ae,re,ue){return ae.index=ue,s?(ue=ae.alternate,ue!==null?(ue=ue.index,ue<re?(ae.flags|=67108866,re):ue):(ae.flags|=67108866,re)):(ae.flags|=1048576,re)}function P(ae){return s&&ae.alternate===null&&(ae.flags|=67108866),ae}function V(ae,re,ue,we){return re===null||re.tag!==6?(re=th(ue,ae.mode,we),re.return=ae,re):(re=v(re,ue),re.return=ae,re)}function J(ae,re,ue,we){var Ke=ue.type;return Ke===I?_e(ae,re,ue.props.children,we,ue.key):re!==null&&(re.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&BE(Ke)===re.type)?(re=v(re,ue.props),Sh(re,ue),re.return=ae,re):(re=dc(ue.type,ue.key,ue.props,null,ae.mode,we),Sh(re,ue),re.return=ae,re)}function he(ae,re,ue,we){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=_u(ue,ae.mode,we),re.return=ae,re):(re=v(re,ue.children||[]),re.return=ae,re)}function _e(ae,re,ue,we,Ke){return re===null||re.tag!==7?(re=$a(ue,ae.mode,we,Ke),re.return=ae,re):(re=v(re,ue),re.return=ae,re)}function Ae(ae,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=th(""+re,ae.mode,ue),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return ue=dc(re.type,re.key,re.props,null,ae.mode,ue),Sh(ue,re),ue.return=ae,ue;case O:return re=_u(re,ae.mode,ue),re.return=ae,re;case N:var we=re._init;return re=we(re._payload),Ae(ae,re,ue)}if(Me(re)||ee(re))return re=$a(re,ae.mode,ue,null),re.return=ae,re;if(typeof re.then=="function")return Ae(ae,Vp(re),ue);if(re.$$typeof===Q)return Ae(ae,bi(ae,re),ue);jp(ae,re)}return null}function de(ae,re,ue,we){var Ke=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Ke!==null?null:V(ae,re,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case C:return ue.key===Ke?J(ae,re,ue,we):null;case O:return ue.key===Ke?he(ae,re,ue,we):null;case N:return Ke=ue._init,ue=Ke(ue._payload),de(ae,re,ue,we)}if(Me(ue)||ee(ue))return Ke!==null?null:_e(ae,re,ue,we,null);if(typeof ue.then=="function")return de(ae,re,Vp(ue),we);if(ue.$$typeof===Q)return de(ae,re,bi(ae,ue),we);jp(ae,ue)}return null}function ge(ae,re,ue,we,Ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ae=ae.get(ue)||null,V(re,ae,""+we,Ke);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case C:return ae=ae.get(we.key===null?ue:we.key)||null,J(re,ae,we,Ke);case O:return ae=ae.get(we.key===null?ue:we.key)||null,he(re,ae,we,Ke);case N:var Rt=we._init;return we=Rt(we._payload),ge(ae,re,ue,we,Ke)}if(Me(we)||ee(we))return ae=ae.get(ue)||null,_e(re,ae,we,Ke,null);if(typeof we.then=="function")return ge(ae,re,ue,Vp(we),Ke);if(we.$$typeof===Q)return ge(ae,re,ue,bi(re,we),Ke);jp(re,we)}return null}function gt(ae,re,ue,we){for(var Ke=null,Rt=null,Je=re,ct=re=0,br=null;Je!==null&&ct<ue.length;ct++){Je.index>ct?(br=Je,Je=null):br=Je.sibling;var Wt=de(ae,Je,ue[ct],we);if(Wt===null){Je===null&&(Je=br);break}s&&Je&&Wt.alternate===null&&a(ae,Je),re=S(Wt,re,ct),Rt===null?Ke=Wt:Rt.sibling=Wt,Rt=Wt,Je=br}if(ct===ue.length)return l(ae,Je),bt&&Ga(ae,ct),Ke;if(Je===null){for(;ct<ue.length;ct++)Je=Ae(ae,ue[ct],we),Je!==null&&(re=S(Je,re,ct),Rt===null?Ke=Je:Rt.sibling=Je,Rt=Je);return bt&&Ga(ae,ct),Ke}for(Je=h(Je);ct<ue.length;ct++)br=ge(Je,ae,ct,ue[ct],we),br!==null&&(s&&br.alternate!==null&&Je.delete(br.key===null?ct:br.key),re=S(br,re,ct),Rt===null?Ke=br:Rt.sibling=br,Rt=br);return s&&Je.forEach(function(vl){return a(ae,vl)}),bt&&Ga(ae,ct),Ke}function lt(ae,re,ue,we){if(ue==null)throw Error(r(151));for(var Ke=null,Rt=null,Je=re,ct=re=0,br=null,Wt=ue.next();Je!==null&&!Wt.done;ct++,Wt=ue.next()){Je.index>ct?(br=Je,Je=null):br=Je.sibling;var vl=de(ae,Je,Wt.value,we);if(vl===null){Je===null&&(Je=br);break}s&&Je&&vl.alternate===null&&a(ae,Je),re=S(vl,re,ct),Rt===null?Ke=vl:Rt.sibling=vl,Rt=vl,Je=br}if(Wt.done)return l(ae,Je),bt&&Ga(ae,ct),Ke;if(Je===null){for(;!Wt.done;ct++,Wt=ue.next())Wt=Ae(ae,Wt.value,we),Wt!==null&&(re=S(Wt,re,ct),Rt===null?Ke=Wt:Rt.sibling=Wt,Rt=Wt);return bt&&Ga(ae,ct),Ke}for(Je=h(Je);!Wt.done;ct++,Wt=ue.next())Wt=ge(Je,ae,ct,Wt.value,we),Wt!==null&&(s&&Wt.alternate!==null&&Je.delete(Wt.key===null?ct:Wt.key),re=S(Wt,re,ct),Rt===null?Ke=Wt:Rt.sibling=Wt,Rt=Wt);return s&&Je.forEach(function(qD){return a(ae,qD)}),bt&&Ga(ae,ct),Ke}function cn(ae,re,ue,we){if(typeof ue=="object"&&ue!==null&&ue.type===I&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case C:e:{for(var Ke=ue.key;re!==null;){if(re.key===Ke){if(Ke=ue.type,Ke===I){if(re.tag===7){l(ae,re.sibling),we=v(re,ue.props.children),we.return=ae,ae=we;break e}}else if(re.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&BE(Ke)===re.type){l(ae,re.sibling),we=v(re,ue.props),Sh(we,ue),we.return=ae,ae=we;break e}l(ae,re);break}else a(ae,re);re=re.sibling}ue.type===I?(we=$a(ue.props.children,ae.mode,we,ue.key),we.return=ae,ae=we):(we=dc(ue.type,ue.key,ue.props,null,ae.mode,we),Sh(we,ue),we.return=ae,ae=we)}return P(ae);case O:e:{for(Ke=ue.key;re!==null;){if(re.key===Ke)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){l(ae,re.sibling),we=v(re,ue.children||[]),we.return=ae,ae=we;break e}else{l(ae,re);break}else a(ae,re);re=re.sibling}we=_u(ue,ae.mode,we),we.return=ae,ae=we}return P(ae);case N:return Ke=ue._init,ue=Ke(ue._payload),cn(ae,re,ue,we)}if(Me(ue))return gt(ae,re,ue,we);if(ee(ue)){if(Ke=ee(ue),typeof Ke!="function")throw Error(r(150));return ue=Ke.call(ue),lt(ae,re,ue,we)}if(typeof ue.then=="function")return cn(ae,re,Vp(ue),we);if(ue.$$typeof===Q)return cn(ae,re,bi(ae,ue),we);jp(ae,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,re!==null&&re.tag===6?(l(ae,re.sibling),we=v(re,ue),we.return=ae,ae=we):(l(ae,re),we=th(ue,ae.mode,we),we.return=ae,ae=we),P(ae)):l(ae,re)}return function(ae,re,ue,we){try{bh=0;var Ke=cn(ae,re,ue,we);return Iu=null,Ke}catch(Je){if(Je===_c||Je===Eu)throw Je;var Rt=li(29,Je,null,ae.mode);return Rt.lanes=we,Rt.return=ae,Rt}finally{}}}var xu=HE(!0),zE=HE(!1),us=pe(null),ua=null;function rl(s){var a=s.alternate;ve(cr,cr.current&1),ve(us,s),ua===null&&(a===null||oa.current!==null||a.memoizedState!==null)&&(ua=s)}function qE(s){if(s.tag===22){if(ve(cr,cr.current),ve(us,s),ua===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(ua=s)}}else il()}function il(){ve(cr,cr.current),ve(us,us.current)}function Ja(s){me(us),ua===s&&(ua=null),me(cr)}var cr=pe(0);function Fp(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Gv(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function rv(s,a,l,h){a=s.memoizedState,l=l(h,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var iv={enqueueSetState:function(s,a,l){s=s._reactInternals;var h=Bi(),v=sa(h);v.payload=a,l!=null&&(v.callback=l),a=aa(s,v,h),a!==null&&(Hi(a,s,h),Ec(a,s,h))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var h=Bi(),v=sa(h);v.tag=1,v.payload=a,l!=null&&(v.callback=l),a=aa(s,v,h),a!==null&&(Hi(a,s,h),Ec(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Bi(),h=sa(l);h.tag=2,a!=null&&(h.callback=a),a=aa(s,h,l),a!==null&&(Hi(a,s,l),Ec(a,s,l))}};function $E(s,a,l,h,v,S,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,S,P):a.prototype&&a.prototype.isPureReactComponent?!Zs(l,h)||!Zs(v,S):!0}function GE(s,a,l,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==s&&iv.enqueueReplaceState(a,a.state,null)}function Ac(s,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var v in s)l[v]===void 0&&(l[v]=s[v])}return l}var Bp=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function WE(s){Bp(s)}function KE(s){console.error(s)}function YE(s){Bp(s)}function Hp(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function QE(s,a,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function sv(s,a,l){return l=sa(l),l.tag=3,l.payload={element:null},l.callback=function(){Hp(s,a)},l}function XE(s){return s=sa(s),s.tag=3,s}function JE(s,a,l,h){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var S=h.value;s.payload=function(){return v(S)},s.callback=function(){QE(a,l,h)}}var P=l.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){QE(a,l,h),typeof v!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})})}function qM(s,a,l,h,v){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&gc(a,l,v,!0),l=us.current,l!==null){switch(l.tag){case 13:return ua===null?Iv():l.alternate===null&&Dn===0&&(Dn=3),l.flags&=-257,l.flags|=65536,l.lanes=v,h===ch?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Pv(s,h,v)),!1;case 22:return l.flags|=65536,h===ch?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Pv(s,h,v)),!1}throw Error(r(435,l.tag))}return Pv(s,h,v),Iv(),!1}if(bt)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,h!==Wa&&(s=Error(r(422),{cause:h}),ks(yi(s,l)))):(h!==Wa&&(a=Error(r(423),{cause:h}),ks(yi(a,l))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,h=yi(h,l),v=sv(s.stateNode,h,v),fh(s,v),Dn!==4&&(Dn=2)),!1;var S=Error(r(520),{cause:h});if(S=yi(S,l),Oh===null?Oh=[S]:Oh.push(S),Dn!==4&&(Dn=2),a===null)return!0;h=yi(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=v&-v,l.lanes|=s,s=sv(l.stateNode,h,s),fh(l,s),!1;case 1:if(a=l.type,S=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ul===null||!ul.has(S))))return l.flags|=65536,v&=-v,l.lanes|=v,v=XE(v),JE(v,s,l,h),fh(l,v),!1}l=l.return}while(l!==null);return!1}var ZE=Error(r(461)),vr=!1;function Rr(s,a,l,h){a.child=s===null?zE(a,null,l,h):xu(a,s.child,l,h)}function e1(s,a,l,h,v){l=l.render;var S=a.ref;if("ref"in h){var P={};for(var V in h)V!=="ref"&&(P[V]=h[V])}else P=h;return Ka(a),h=mh(s,a,l,P,S,v),V=u(),s!==null&&!vr?(f(s,a,v),Za(s,a,v)):(bt&&V&&nh(a),a.flags|=1,Rr(s,a,h,v),a.child)}function t1(s,a,l,h,v){if(s===null){var S=l.type;return typeof S=="function"&&!hc(S)&&S.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=S,n1(s,a,S,h,v)):(s=dc(l.type,null,h,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,!dv(s,v)){var P=S.memoizedProps;if(l=l.compare,l=l!==null?l:Zs,l(P,h)&&s.ref===a.ref)return Za(s,a,v)}return a.flags|=1,s=Rs(S,h),s.ref=a.ref,s.return=a,a.child=s}function n1(s,a,l,h,v){if(s!==null){var S=s.memoizedProps;if(Zs(S,h)&&s.ref===a.ref)if(vr=!1,a.pendingProps=h=S,dv(s,v))(s.flags&131072)!==0&&(vr=!0);else return a.lanes=s.lanes,Za(s,a,v)}return av(s,a,l,h,v)}function r1(s,a,l){var h=a.pendingProps,v=h.children,S=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=S!==null?S.baseLanes|l:l,s!==null){for(v=a.child=s.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;a.childLanes=S&~h}else a.childLanes=0,a.child=null;return i1(s,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Zo(a,S!==null?S.cachePool:null),S!==null?Cu(a,S):Au(),qE(a);else return a.lanes=a.childLanes=536870912,i1(s,a,S!==null?S.baseLanes|l:l,l)}else S!==null?(Zo(a,S.cachePool),Cu(a,S),il(),a.memoizedState=null):(s!==null&&Zo(a,null),Au(),il());return Rr(s,a,v,l),a.child}function i1(s,a,l,h){var v=lh();return v=v===null?null:{parent:dn._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},s!==null&&Zo(a,null),Au(),qE(a),s!==null&&gc(s,a,h,!0),null}function zp(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function av(s,a,l,h,v){return Ka(a),l=mh(s,a,l,h,void 0,v),h=u(),s!==null&&!vr?(f(s,a,v),Za(s,a,v)):(bt&&h&&nh(a),a.flags|=1,Rr(s,a,l,v),a.child)}function s1(s,a,l,h,v,S){return Ka(a),a.updateQueue=null,l=Dp(a,h,l,v),yh(s),h=u(),s!==null&&!vr?(f(s,a,S),Za(s,a,S)):(bt&&h&&nh(a),a.flags|=1,Rr(s,a,l,S),a.child)}function a1(s,a,l,h,v){if(Ka(a),a.stateNode===null){var S=qa,P=l.contextType;typeof P=="object"&&P!==null&&(S=or(P)),S=new l(h,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=iv,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=h,S.state=a.memoizedState,S.refs={},wu(a),P=l.contextType,S.context=typeof P=="object"&&P!==null?or(P):qa,S.state=a.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(rv(a,l,P,h),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(P=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),P!==S.state&&iv.enqueueReplaceState(S,S.state,null),Tc(a,h,S,v),wc(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){S=a.stateNode;var V=a.memoizedProps,J=Ac(l,V);S.props=J;var he=S.context,_e=l.contextType;P=qa,typeof _e=="object"&&_e!==null&&(P=or(_e));var Ae=l.getDerivedStateFromProps;_e=typeof Ae=="function"||typeof S.getSnapshotBeforeUpdate=="function",V=a.pendingProps!==V,_e||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V||he!==P)&&GE(a,S,h,P),Ls=!1;var de=a.memoizedState;S.state=de,Tc(a,h,S,v),wc(),he=a.memoizedState,V||de!==he||Ls?(typeof Ae=="function"&&(rv(a,l,Ae,h),he=a.memoizedState),(J=Ls||$E(a,l,J,h,de,he,P))?(_e||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=he),S.props=h,S.state=he,S.context=P,h=J):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{S=a.stateNode,uh(s,a),P=a.memoizedProps,_e=Ac(l,P),S.props=_e,Ae=a.pendingProps,de=S.context,he=l.contextType,J=qa,typeof he=="object"&&he!==null&&(J=or(he)),V=l.getDerivedStateFromProps,(he=typeof V=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==Ae||de!==J)&&GE(a,S,h,J),Ls=!1,de=a.memoizedState,S.state=de,Tc(a,h,S,v),wc();var ge=a.memoizedState;P!==Ae||de!==ge||Ls||s!==null&&s.dependencies!==null&&mc(s.dependencies)?(typeof V=="function"&&(rv(a,l,V,h),ge=a.memoizedState),(_e=Ls||$E(a,l,_e,h,de,ge,J)||s!==null&&s.dependencies!==null&&mc(s.dependencies))?(he||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ge,J),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ge,J)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ge),S.props=h,S.state=ge,S.context=J,h=_e):(typeof S.componentDidUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&de===s.memoizedState||(a.flags|=1024),h=!1)}return S=h,zp(s,a),h=(a.flags&128)!==0,S||h?(S=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,s!==null&&h?(a.child=xu(a,s.child,null,v),a.child=xu(a,null,l,v)):Rr(s,a,l,v),a.memoizedState=S.state,s=a.child):s=Za(s,a,v),s}function o1(s,a,l,h){return Wo(),a.flags|=256,Rr(s,a,l,h),a.child}var ov={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lv(s){return{baseLanes:s,cachePool:Rp()}}function cv(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=fs),s}function l1(s,a,l){var h=a.pendingProps,v=!1,S=(a.flags&128)!==0,P;if((P=S)||(P=s!==null&&s.memoizedState===null?!1:(cr.current&2)!==0),P&&(v=!0,a.flags&=-129),P=(a.flags&32)!==0,a.flags&=-33,s===null){if(bt){if(v?rl(a):il(),bt){var V=bn,J;if(J=V){e:{for(J=V,V=_i;J.nodeType!==8;){if(!V){V=null;break e}if(J=Vs(J.nextSibling),J===null){V=null;break e}}V=J}V!==null?(a.memoizedState={dehydrated:V,treeContext:Os!==null?{id:Is,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},J=li(18,null,null,0),J.stateNode=V,J.return=a,a.child=J,yr=a,bn=null,J=!0):J=!1}J||Ms(a)}if(V=a.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Gv(V)?a.lanes=32:a.lanes=536870912,null;Ja(a)}return V=h.children,h=h.fallback,v?(il(),v=a.mode,V=qp({mode:"hidden",children:V},v),h=$a(h,v,l,null),V.return=a,h.return=a,V.sibling=h,a.child=V,v=a.child,v.memoizedState=lv(l),v.childLanes=cv(s,P,l),a.memoizedState=ov,h):(rl(a),uv(a,V))}if(J=s.memoizedState,J!==null&&(V=J.dehydrated,V!==null)){if(S)a.flags&256?(rl(a),a.flags&=-257,a=fv(s,a,l)):a.memoizedState!==null?(il(),a.child=s.child,a.flags|=128,a=null):(il(),v=h.fallback,V=a.mode,h=qp({mode:"visible",children:h.children},V),v=$a(v,V,l,null),v.flags|=2,h.return=a,v.return=a,h.sibling=v,a.child=h,xu(a,s.child,null,l),h=a.child,h.memoizedState=lv(l),h.childLanes=cv(s,P,l),a.memoizedState=ov,a=v);else if(rl(a),Gv(V)){if(P=V.nextSibling&&V.nextSibling.dataset,P)var he=P.dgst;P=he,h=Error(r(419)),h.stack="",h.digest=P,ks({value:h,source:null,stack:null}),a=fv(s,a,l)}else if(vr||gc(s,a,l,!1),P=(l&s.childLanes)!==0,vr||P){if(P=pn,P!==null&&(h=l&-l,h=(h&42)!==0?1:Zi(h),h=(h&(P.suspendedLanes|l))!==0?0:h,h!==0&&h!==J.retryLane))throw J.retryLane=h,qo(s,h),Hi(P,s,h),ZE;V.data==="$?"||Iv(),a=fv(s,a,l)}else V.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=J.treeContext,bn=Vs(V.nextSibling),yr=a,bt=!0,Ps=null,_i=!1,s!==null&&(Wr[vi++]=Is,Wr[vi++]=xs,Wr[vi++]=Os,Is=s.id,xs=s.overflow,Os=a),a=uv(a,h.children),a.flags|=4096);return a}return v?(il(),v=h.fallback,V=a.mode,J=s.child,he=J.sibling,h=Rs(J,{mode:"hidden",children:h.children}),h.subtreeFlags=J.subtreeFlags&65011712,he!==null?v=Rs(he,v):(v=$a(v,V,l,null),v.flags|=2),v.return=a,h.return=a,h.sibling=v,a.child=h,h=v,v=a.child,V=s.child.memoizedState,V===null?V=lv(l):(J=V.cachePool,J!==null?(he=dn._currentValue,J=J.parent!==he?{parent:he,pool:he}:J):J=Rp(),V={baseLanes:V.baseLanes|l,cachePool:J}),v.memoizedState=V,v.childLanes=cv(s,P,l),a.memoizedState=ov,h):(rl(a),l=s.child,s=l.sibling,l=Rs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,s!==null&&(P=a.deletions,P===null?(a.deletions=[s],a.flags|=16):P.push(s)),a.child=l,a.memoizedState=null,l)}function uv(s,a){return a=qp({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function qp(s,a){return s=li(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function fv(s,a,l){return xu(a,s.child,null,l),s=uv(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function c1(s,a,l){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Yo(s.return,a,l)}function hv(s,a,l,h,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:v}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=h,S.tail=l,S.tailMode=v)}function u1(s,a,l){var h=a.pendingProps,v=h.revealOrder,S=h.tail;if(Rr(s,a,h.children,l),h=cr.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&c1(s,l,a);else if(s.tag===19)c1(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(ve(cr,h),v){case"forwards":for(l=a.child,v=null;l!==null;)s=l.alternate,s!==null&&Fp(s)===null&&(v=l),l=l.sibling;l=v,l===null?(v=a.child,a.child=null):(v=l.sibling,l.sibling=null),hv(a,!1,v,l,S);break;case"backwards":for(l=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&Fp(s)===null){a.child=v;break}s=v.sibling,v.sibling=l,l=v,v=s}hv(a,!0,l,null,S);break;case"together":hv(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Za(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),cl|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(gc(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=Rs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Rs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function dv(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&mc(s)))}function $M(s,a,l){switch(a.tag){case 3:mt(a,a.stateNode.containerInfo),cs(a,dn,s.memoizedState.cache),Wo();break;case 27:case 5:Ft(a);break;case 4:mt(a,a.stateNode.containerInfo);break;case 10:cs(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(rl(a),a.flags|=128,null):(l&a.child.childLanes)!==0?l1(s,a,l):(rl(a),s=Za(s,a,l),s!==null?s.sibling:null);rl(a);break;case 19:var v=(s.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(gc(s,a,l,!1),h=(l&a.childLanes)!==0),v){if(h)return u1(s,a,l);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ve(cr,cr.current),h)break;return null;case 22:case 23:return a.lanes=0,r1(s,a,l);case 24:cs(a,dn,s.memoizedState.cache)}return Za(s,a,l)}function f1(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)vr=!0;else{if(!dv(s,l)&&(a.flags&128)===0)return vr=!1,$M(s,a,l);vr=(s.flags&131072)!==0}else vr=!1,bt&&(a.flags&1048576)!==0&&Ep(a,Su,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var h=a.elementType,v=h._init;if(h=v(h._payload),a.type=h,typeof h=="function")hc(h)?(s=Ac(h,s),a.tag=1,a=a1(null,a,h,s,l)):(a.tag=0,a=av(null,a,h,s,l));else{if(h!=null){if(v=h.$$typeof,v===L){a.tag=11,a=e1(null,a,h,s,l);break e}else if(v===j){a.tag=14,a=t1(null,a,h,s,l);break e}}throw a=ne(h)||h,Error(r(306,a,""))}}return a;case 0:return av(s,a,a.type,a.pendingProps,l);case 1:return h=a.type,v=Ac(h,a.pendingProps),a1(s,a,h,v,l);case 3:e:{if(mt(a,a.stateNode.containerInfo),s===null)throw Error(r(387));h=a.pendingProps;var S=a.memoizedState;v=S.element,uh(s,a),Tc(a,h,null,l);var P=a.memoizedState;if(h=P.cache,cs(a,dn,h),h!==S.cache&&ah(a,[dn],l,!0),wc(),h=P.element,S.isDehydrated)if(S={element:h,isDehydrated:!1,cache:P.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=o1(s,a,h,l);break e}else if(h!==v){v=yi(Error(r(424)),a),ks(v),a=o1(s,a,h,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bn=Vs(s.firstChild),yr=a,bt=!0,Ps=null,_i=!0,l=zE(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Wo(),h===v){a=Za(s,a,l);break e}Rr(s,a,h,l)}a=a.child}return a;case 26:return zp(s,a),s===null?(l=gw(a.type,null,a.pendingProps,null))?a.memoizedState=l:bt||(l=a.type,s=a.pendingProps,h=ig(Ue.current).createElement(l),h[Te]=a,h[Ie]=s,Ir(h,l,s),xt(h),a.stateNode=h):a.memoizedState=gw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Ft(a),s===null&&bt&&(h=a.stateNode=hw(a.type,a.pendingProps,Ue.current),yr=a,_i=!0,v=bn,dl(a.type)?(Wv=v,bn=Vs(h.firstChild)):bn=v),Rr(s,a,a.pendingProps.children,l),zp(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&bt&&((v=h=bn)&&(h=_D(h,a.type,a.pendingProps,_i),h!==null?(a.stateNode=h,yr=a,bn=Vs(h.firstChild),_i=!1,v=!0):v=!1),v||Ms(a)),Ft(a),v=a.type,S=a.pendingProps,P=s!==null?s.memoizedProps:null,h=S.children,zv(v,S)?h=null:P!==null&&zv(v,P)&&(a.flags|=32),a.memoizedState!==null&&(v=mh(s,a,Xy,null,null,l),Uh._currentValue=v),zp(s,a),Rr(s,a,h,l),a.child;case 6:return s===null&&bt&&((s=l=bn)&&(l=bD(l,a.pendingProps,_i),l!==null?(a.stateNode=l,yr=a,bn=null,s=!0):s=!1),s||Ms(a)),null;case 13:return l1(s,a,l);case 4:return mt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=xu(a,null,h,l):Rr(s,a,h,l),a.child;case 11:return e1(s,a,a.type,a.pendingProps,l);case 7:return Rr(s,a,a.pendingProps,l),a.child;case 8:return Rr(s,a,a.pendingProps.children,l),a.child;case 12:return Rr(s,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,cs(a,a.type,h.value),Rr(s,a,h.children,l),a.child;case 9:return v=a.type._context,h=a.pendingProps.children,Ka(a),v=or(v),h=h(v),a.flags|=1,Rr(s,a,h,l),a.child;case 14:return t1(s,a,a.type,a.pendingProps,l);case 15:return n1(s,a,a.type,a.pendingProps,l);case 19:return u1(s,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},s===null?(l=qp(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Rs(s.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return r1(s,a,l);case 24:return Ka(a),h=or(dn),s===null?(v=lh(),v===null&&(v=pn,S=ra(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=l),v=S),a.memoizedState={parent:h,cache:v},wu(a),cs(a,dn,v)):((s.lanes&l)!==0&&(uh(s,a),Tc(a,null,null,l),wc()),v=s.memoizedState,S=a.memoizedState,v.parent!==h?(v={parent:h,cache:h},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),cs(a,dn,h)):(h=S.cache,cs(a,dn,h),h!==v.cache&&ah(a,[dn],l,!0))),Rr(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function eo(s){s.flags|=4}function h1(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!bw(a)){if(a=us.current,a!==null&&((zt&4194048)===zt?ua!==null:(zt&62914560)!==zt&&(zt&536870912)===0||a!==ua))throw Sc=ch,Op;s.flags|=8192}}function $p(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ji():536870912,s.lanes|=a,ku|=a)}function Eh(s,a){if(!bt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Cn(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(a)for(var v=s.child;v!==null;)l|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)l|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=h,s.childLanes=l,a}function GM(s,a,l){var h=a.pendingProps;switch(rh(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(a),null;case 1:return Cn(a),null;case 3:return l=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Qn(dn),gn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ds(a)?eo(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ko())),Cn(a),null;case 26:return l=a.memoizedState,s===null?(eo(a),l!==null?(Cn(a),h1(a,l)):(Cn(a),a.flags&=-16777217)):l?l!==s.memoizedState?(eo(a),Cn(a),h1(a,l)):(Cn(a),a.flags&=-16777217):(s.memoizedProps!==h&&eo(a),Cn(a),a.flags&=-16777217),null;case 27:mn(a),l=Ue.current;var v=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==h&&eo(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return Cn(a),null}s=Ne.current,Ds(a)?ih(a):(s=hw(v,h,l),a.stateNode=s,eo(a))}return Cn(a),null;case 5:if(mn(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&eo(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return Cn(a),null}if(s=Ne.current,Ds(a))ih(a);else{switch(v=ig(Ue.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?v.createElement("select",{is:h.is}):v.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?v.createElement(l,{is:h.is}):v.createElement(l)}}s[Te]=a,s[Ie]=h;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=s;e:switch(Ir(s,l,h),l){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&eo(a)}}return Cn(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&eo(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(s=Ue.current,Ds(a)){if(s=a.stateNode,l=a.memoizedProps,h=null,v=yr,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}s[Te]=a,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||sw(s.nodeValue,l)),s||Ms(a)}else s=ig(s).createTextNode(h),s[Te]=a,a.stateNode=s}return Cn(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Ds(a),h!==null&&h.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Te]=a}else Wo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Cn(a),v=!1}else v=Ko(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Ja(a),a):(Ja(a),null)}if(Ja(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,s=s!==null&&s.memoizedState!==null,l){h=a.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool);var S=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==v&&(h.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),$p(a,a.updateQueue),Cn(a),null;case 4:return gn(),s===null&&Vv(a.stateNode.containerInfo),Cn(a),null;case 10:return Qn(a.type),Cn(a),null;case 19:if(me(cr),v=a.memoizedState,v===null)return Cn(a),null;if(h=(a.flags&128)!==0,S=v.rendering,S===null)if(h)Eh(v,!1);else{if(Dn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=Fp(s),S!==null){for(a.flags|=128,Eh(v,!1),s=S.updateQueue,a.updateQueue=s,$p(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Sp(l,s),l=l.sibling;return ve(cr,cr.current&1|2),a.child}s=s.sibling}v.tail!==null&&Un()>Kp&&(a.flags|=128,h=!0,Eh(v,!1),a.lanes=4194304)}else{if(!h)if(s=Fp(S),s!==null){if(a.flags|=128,h=!0,s=s.updateQueue,a.updateQueue=s,$p(a,s),Eh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!bt)return Cn(a),null}else 2*Un()-v.renderingStartTime>Kp&&l!==536870912&&(a.flags|=128,h=!0,Eh(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(s=v.last,s!==null?s.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Un(),a.sibling=null,s=cr.current,ve(cr,h?s&1|2:s&1),a):(Cn(a),null);case 22:case 23:return Ja(a),ph(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Cn(a),a.subtreeFlags&6&&(a.flags|=8192)):Cn(a),l=a.updateQueue,l!==null&&$p(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),s!==null&&me(ia),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Qn(dn),Cn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function WM(s,a){switch(rh(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Qn(dn),gn(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return mn(a),null;case 13:if(Ja(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Wo()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return me(cr),null;case 4:return gn(),null;case 10:return Qn(a.type),null;case 22:case 23:return Ja(a),ph(),s!==null&&me(ia),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Qn(dn),null;case 25:return null;default:return null}}function d1(s,a){switch(rh(a),a.tag){case 3:Qn(dn),gn();break;case 26:case 27:case 5:mn(a);break;case 4:gn();break;case 13:Ja(a);break;case 19:me(cr);break;case 10:Qn(a.type);break;case 22:case 23:Ja(a),ph(),s!==null&&me(ia);break;case 24:Qn(dn)}}function wh(s,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var v=h.next;l=v;do{if((l.tag&s)===s){h=void 0;var S=l.create,P=l.inst;h=S(),P.destroy=h}l=l.next}while(l!==v)}}catch(V){un(a,a.return,V)}}function sl(s,a,l){try{var h=a.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var S=v.next;h=S;do{if((h.tag&s)===s){var P=h.inst,V=P.destroy;if(V!==void 0){P.destroy=void 0,v=a;var J=l,he=V;try{he()}catch(_e){un(v,J,_e)}}}h=h.next}while(h!==S)}}catch(_e){un(a,a.return,_e)}}function p1(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{dh(a,l)}catch(h){un(s,s.return,h)}}}function g1(s,a,l){l.props=Ac(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){un(s,a,h)}}function Th(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(v){un(s,a,v)}}function fa(s,a){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(v){un(s,a,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){un(s,a,v)}else l.current=null}function m1(s){var a=s.type,l=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(v){un(s,s.return,v)}}function pv(s,a,l){try{var h=s.stateNode;pD(h,s.type,l,a),h[Ie]=a}catch(v){un(s,s.return,v)}}function y1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&dl(s.type)||s.tag===4}function gv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||y1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&dl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mv(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=rg));else if(h!==4&&(h===27&&dl(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(mv(s,a,l),s=s.sibling;s!==null;)mv(s,a,l),s=s.sibling}function Gp(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(h!==4&&(h===27&&dl(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Gp(s,a,l),s=s.sibling;s!==null;)Gp(s,a,l),s=s.sibling}function v1(s){var a=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);Ir(a,h,l),a[Te]=s,a[Ie]=l}catch(S){un(s,s.return,S)}}var to=!1,Hn=!1,yv=!1,_1=typeof WeakSet=="function"?WeakSet:Set,_r=null;function KM(s,a){if(s=s.containerInfo,Bv=ug,s=Gr(s),fc(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var v=h.anchorOffset,S=h.focusNode;h=h.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var P=0,V=-1,J=-1,he=0,_e=0,Ae=s,de=null;t:for(;;){for(var ge;Ae!==l||v!==0&&Ae.nodeType!==3||(V=P+v),Ae!==S||h!==0&&Ae.nodeType!==3||(J=P+h),Ae.nodeType===3&&(P+=Ae.nodeValue.length),(ge=Ae.firstChild)!==null;)de=Ae,Ae=ge;for(;;){if(Ae===s)break t;if(de===l&&++he===v&&(V=P),de===S&&++_e===h&&(J=P),(ge=Ae.nextSibling)!==null)break;Ae=de,de=Ae.parentNode}Ae=ge}l=V===-1||J===-1?null:{start:V,end:J}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hv={focusedElem:s,selectionRange:l},ug=!1,_r=a;_r!==null;)if(a=_r,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,_r=s;else for(;_r!==null;){switch(a=_r,S=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,l=a,v=S.memoizedProps,S=S.memoizedState,h=l.stateNode;try{var gt=Ac(l.type,v,l.elementType===l.type);s=h.getSnapshotBeforeUpdate(gt,S),h.__reactInternalSnapshotBeforeUpdate=s}catch(lt){un(l,l.return,lt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)$v(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":$v(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,_r=s;break}_r=a.return}}function b1(s,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:al(s,l),h&4&&wh(5,l);break;case 1:if(al(s,l),h&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(P){un(l,l.return,P)}else{var v=Ac(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(v,a,s.__reactInternalSnapshotBeforeUpdate)}catch(P){un(l,l.return,P)}}h&64&&p1(l),h&512&&Th(l,l.return);break;case 3:if(al(s,l),h&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{dh(s,a)}catch(P){un(l,l.return,P)}}break;case 27:a===null&&h&4&&v1(l);case 26:case 5:al(s,l),a===null&&h&4&&m1(l),h&512&&Th(l,l.return);break;case 12:al(s,l);break;case 13:al(s,l),h&4&&w1(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=rD.bind(null,l),SD(s,l))));break;case 22:if(h=l.memoizedState!==null||to,!h){a=a!==null&&a.memoizedState!==null||Hn,v=to;var S=Hn;to=h,(Hn=a)&&!S?ol(s,l,(l.subtreeFlags&8772)!==0):al(s,l),to=v,Hn=S}break;case 30:break;default:al(s,l)}}function S1(s){var a=s.alternate;a!==null&&(s.alternate=null,S1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&We(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var En=null,Si=!1;function no(s,a,l){for(l=l.child;l!==null;)E1(s,a,l),l=l.sibling}function E1(s,a,l){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Bt,l)}catch{}switch(l.tag){case 26:Hn||fa(l,a),no(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Hn||fa(l,a);var h=En,v=Si;dl(l.type)&&(En=l.stateNode,Si=!1),no(s,a,l),Dh(l.stateNode),En=h,Si=v;break;case 5:Hn||fa(l,a);case 6:if(h=En,v=Si,En=null,no(s,a,l),En=h,Si=v,En!==null)if(Si)try{(En.nodeType===9?En.body:En.nodeName==="HTML"?En.ownerDocument.body:En).removeChild(l.stateNode)}catch(S){un(l,a,S)}else try{En.removeChild(l.stateNode)}catch(S){un(l,a,S)}break;case 18:En!==null&&(Si?(s=En,uw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Bh(s)):uw(En,l.stateNode));break;case 4:h=En,v=Si,En=l.stateNode.containerInfo,Si=!0,no(s,a,l),En=h,Si=v;break;case 0:case 11:case 14:case 15:Hn||sl(2,l,a),Hn||sl(4,l,a),no(s,a,l);break;case 1:Hn||(fa(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&g1(l,a,h)),no(s,a,l);break;case 21:no(s,a,l);break;case 22:Hn=(h=Hn)||l.memoizedState!==null,no(s,a,l),Hn=h;break;default:no(s,a,l)}}function w1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Bh(s)}catch(l){un(a,a.return,l)}}function YM(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new _1),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new _1),a;default:throw Error(r(435,s.tag))}}function vv(s,a){var l=YM(s);a.forEach(function(h){var v=iD.bind(null,s,h);l.has(h)||(l.add(h),h.then(v,v))})}function Vi(s,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var v=l[h],S=s,P=a,V=P;e:for(;V!==null;){switch(V.tag){case 27:if(dl(V.type)){En=V.stateNode,Si=!1;break e}break;case 5:En=V.stateNode,Si=!1;break e;case 3:case 4:En=V.stateNode.containerInfo,Si=!0;break e}V=V.return}if(En===null)throw Error(r(160));E1(S,P,v),En=null,Si=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)T1(a,s),a=a.sibling}var Us=null;function T1(s,a){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Vi(a,s),ji(s),h&4&&(sl(3,s,s.return),wh(3,s),sl(5,s,s.return));break;case 1:Vi(a,s),ji(s),h&512&&(Hn||l===null||fa(l,l.return)),h&64&&to&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var v=Us;if(Vi(a,s),ji(s),h&512&&(Hn||l===null||fa(l,l.return)),h&4){var S=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){e:{h=s.type,l=s.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":S=v.getElementsByTagName("title")[0],(!S||S[st]||S[Te]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(h),v.head.insertBefore(S,v.querySelector("head > title"))),Ir(S,h,l),S[Te]=s,xt(S),h=S;break e;case"link":var P=vw("link","href",v).get(h+(l.href||""));if(P){for(var V=0;V<P.length;V++)if(S=P[V],S.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&S.getAttribute("rel")===(l.rel==null?null:l.rel)&&S.getAttribute("title")===(l.title==null?null:l.title)&&S.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){P.splice(V,1);break t}}S=v.createElement(h),Ir(S,h,l),v.head.appendChild(S);break;case"meta":if(P=vw("meta","content",v).get(h+(l.content||""))){for(V=0;V<P.length;V++)if(S=P[V],S.getAttribute("content")===(l.content==null?null:""+l.content)&&S.getAttribute("name")===(l.name==null?null:l.name)&&S.getAttribute("property")===(l.property==null?null:l.property)&&S.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&S.getAttribute("charset")===(l.charSet==null?null:l.charSet)){P.splice(V,1);break t}}S=v.createElement(h),Ir(S,h,l),v.head.appendChild(S);break;default:throw Error(r(468,h))}S[Te]=s,xt(S),h=S}s.stateNode=h}else _w(v,s.type,s.stateNode);else s.stateNode=yw(v,h,s.memoizedProps);else S!==h?(S===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):S.count--,h===null?_w(v,s.type,s.stateNode):yw(v,h,s.memoizedProps)):h===null&&s.stateNode!==null&&pv(s,s.memoizedProps,l.memoizedProps)}break;case 27:Vi(a,s),ji(s),h&512&&(Hn||l===null||fa(l,l.return)),l!==null&&h&4&&pv(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Vi(a,s),ji(s),h&512&&(Hn||l===null||fa(l,l.return)),s.flags&32){v=s.stateNode;try{Ge(v,"")}catch(ge){un(s,s.return,ge)}}h&4&&s.stateNode!=null&&(v=s.memoizedProps,pv(s,v,l!==null?l.memoizedProps:v)),h&1024&&(yv=!0);break;case 6:if(Vi(a,s),ji(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(ge){un(s,s.return,ge)}}break;case 3:if(og=null,v=Us,Us=sg(a.containerInfo),Vi(a,s),Us=v,ji(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Bh(a.containerInfo)}catch(ge){un(s,s.return,ge)}yv&&(yv=!1,C1(s));break;case 4:h=Us,Us=sg(s.stateNode.containerInfo),Vi(a,s),ji(s),Us=h;break;case 12:Vi(a,s),ji(s);break;case 13:Vi(a,s),ji(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Tv=Un()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,vv(s,h)));break;case 22:v=s.memoizedState!==null;var J=l!==null&&l.memoizedState!==null,he=to,_e=Hn;if(to=he||v,Hn=_e||J,Vi(a,s),Hn=_e,to=he,ji(s),h&8192)e:for(a=s.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(l===null||J||to||Hn||Rc(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){J=l=a;try{if(S=J.stateNode,v)P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{V=J.stateNode;var Ae=J.memoizedProps.style,de=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;V.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(ge){un(J,J.return,ge)}}}else if(a.tag===6){if(l===null){J=a;try{J.stateNode.nodeValue=v?"":J.memoizedProps}catch(ge){un(J,J.return,ge)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,vv(s,l))));break;case 19:Vi(a,s),ji(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,vv(s,h)));break;case 30:break;case 21:break;default:Vi(a,s),ji(s)}}function ji(s){var a=s.flags;if(a&2){try{for(var l,h=s.return;h!==null;){if(y1(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var v=l.stateNode,S=gv(s);Gp(s,S,v);break;case 5:var P=l.stateNode;l.flags&32&&(Ge(P,""),l.flags&=-33);var V=gv(s);Gp(s,V,P);break;case 3:case 4:var J=l.stateNode.containerInfo,he=gv(s);mv(s,he,J);break;default:throw Error(r(161))}}catch(_e){un(s,s.return,_e)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function C1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;C1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function al(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)b1(s,a.alternate,a),a=a.sibling}function Rc(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:sl(4,a,a.return),Rc(a);break;case 1:fa(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&g1(a,a.return,l),Rc(a);break;case 27:Dh(a.stateNode);case 26:case 5:fa(a,a.return),Rc(a);break;case 22:a.memoizedState===null&&Rc(a);break;case 30:Rc(a);break;default:Rc(a)}s=s.sibling}}function ol(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,v=s,S=a,P=S.flags;switch(S.tag){case 0:case 11:case 15:ol(v,S,l),wh(4,S);break;case 1:if(ol(v,S,l),h=S,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(he){un(h,h.return,he)}if(h=S,v=h.updateQueue,v!==null){var V=h.stateNode;try{var J=v.shared.hiddenCallbacks;if(J!==null)for(v.shared.hiddenCallbacks=null,v=0;v<J.length;v++)el(J[v],V)}catch(he){un(h,h.return,he)}}l&&P&64&&p1(S),Th(S,S.return);break;case 27:v1(S);case 26:case 5:ol(v,S,l),l&&h===null&&P&4&&m1(S),Th(S,S.return);break;case 12:ol(v,S,l);break;case 13:ol(v,S,l),l&&P&4&&w1(v,S);break;case 22:S.memoizedState===null&&ol(v,S,l),Th(S,S.return);break;case 30:break;default:ol(v,S,l)}a=a.sibling}}function _v(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&vc(l))}function bv(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&vc(s))}function ha(s,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)A1(s,a,l,h),a=a.sibling}function A1(s,a,l,h){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ha(s,a,l,h),v&2048&&wh(9,a);break;case 1:ha(s,a,l,h);break;case 3:ha(s,a,l,h),v&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&vc(s)));break;case 12:if(v&2048){ha(s,a,l,h),s=a.stateNode;try{var S=a.memoizedProps,P=S.id,V=S.onPostCommit;typeof V=="function"&&V(P,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(J){un(a,a.return,J)}}else ha(s,a,l,h);break;case 13:ha(s,a,l,h);break;case 23:break;case 22:S=a.stateNode,P=a.alternate,a.memoizedState!==null?S._visibility&2?ha(s,a,l,h):Ch(s,a):S._visibility&2?ha(s,a,l,h):(S._visibility|=2,Pu(s,a,l,h,(a.subtreeFlags&10256)!==0)),v&2048&&_v(P,a);break;case 24:ha(s,a,l,h),v&2048&&bv(a.alternate,a);break;default:ha(s,a,l,h)}}function Pu(s,a,l,h,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var S=s,P=a,V=l,J=h,he=P.flags;switch(P.tag){case 0:case 11:case 15:Pu(S,P,V,J,v),wh(8,P);break;case 23:break;case 22:var _e=P.stateNode;P.memoizedState!==null?_e._visibility&2?Pu(S,P,V,J,v):Ch(S,P):(_e._visibility|=2,Pu(S,P,V,J,v)),v&&he&2048&&_v(P.alternate,P);break;case 24:Pu(S,P,V,J,v),v&&he&2048&&bv(P.alternate,P);break;default:Pu(S,P,V,J,v)}a=a.sibling}}function Ch(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,h=a,v=h.flags;switch(h.tag){case 22:Ch(l,h),v&2048&&_v(h.alternate,h);break;case 24:Ch(l,h),v&2048&&bv(h.alternate,h);break;default:Ch(l,h)}a=a.sibling}}var Ah=8192;function Mu(s){if(s.subtreeFlags&Ah)for(s=s.child;s!==null;)R1(s),s=s.sibling}function R1(s){switch(s.tag){case 26:Mu(s),s.flags&Ah&&s.memoizedState!==null&&kD(Us,s.memoizedState,s.memoizedProps);break;case 5:Mu(s);break;case 3:case 4:var a=Us;Us=sg(s.stateNode.containerInfo),Mu(s),Us=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Ah,Ah=16777216,Mu(s),Ah=a):Mu(s));break;default:Mu(s)}}function O1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Rh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];_r=h,x1(h,s)}O1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I1(s),s=s.sibling}function I1(s){switch(s.tag){case 0:case 11:case 15:Rh(s),s.flags&2048&&sl(9,s,s.return);break;case 3:Rh(s);break;case 12:Rh(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Wp(s)):Rh(s);break;default:Rh(s)}}function Wp(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];_r=h,x1(h,s)}O1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:sl(8,a,a.return),Wp(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Wp(a));break;default:Wp(a)}s=s.sibling}}function x1(s,a){for(;_r!==null;){var l=_r;switch(l.tag){case 0:case 11:case 15:sl(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:vc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,_r=h;else e:for(l=s;_r!==null;){h=_r;var v=h.sibling,S=h.return;if(S1(h),h===l){_r=null;break e}if(v!==null){v.return=S,_r=v;break e}_r=S}}}var QM={getCacheForType:function(s){var a=or(dn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},XM=typeof WeakMap=="function"?WeakMap:Map,an=0,pn=null,Dt=null,zt=0,on=0,Fi=null,ll=!1,Du=!1,Sv=!1,ro=0,Dn=0,cl=0,Oc=0,Ev=0,fs=0,ku=0,Oh=null,Ei=null,wv=!1,Tv=0,Kp=1/0,Yp=null,ul=null,Or=0,fl=null,Nu=null,Lu=0,Cv=0,Av=null,P1=null,Ih=0,Rv=null;function Bi(){if((an&2)!==0&&zt!==0)return zt&-zt;if(ie.T!==null){var s=Xo;return s!==0?s:kv()}return Z()}function M1(){fs===0&&(fs=(zt&536870912)===0||bt?Xi():536870912);var s=us.current;return s!==null&&(s.flags|=32),fs}function Hi(s,a,l){(s===pn&&(on===2||on===9)||s.cancelPendingCommit!==null)&&(Uu(s,0),hl(s,zt,fs,!1)),hi(s,l),((an&2)===0||s!==pn)&&(s===pn&&((an&2)===0&&(Oc|=l),Dn===4&&hl(s,zt,fs,!1)),da(s))}function D1(s,a,l){if((an&6)!==0)throw Error(r(327));var h=!l&&(a&124)===0&&(a&s.expiredLanes)===0||ri(s,a),v=h?eD(s,a):xv(s,a,!0),S=h;do{if(v===0){Du&&!h&&hl(s,a,0,!1);break}else{if(l=s.current.alternate,S&&!JM(l)){v=xv(s,a,!1),S=!1;continue}if(v===2){if(S=a,s.errorRecoveryDisabledLanes&S)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){a=P;e:{var V=s;v=Oh;var J=V.current.memoizedState.isDehydrated;if(J&&(Uu(V,P).flags|=256),P=xv(V,P,!1),P!==2){if(Sv&&!J){V.errorRecoveryDisabledLanes|=S,Oc|=S,v=4;break e}S=Ei,Ei=v,S!==null&&(Ei===null?Ei=S:Ei.push.apply(Ei,S))}v=P}if(S=!1,v!==2)continue}}if(v===1){Uu(s,0),hl(s,a,0,!0);break}e:{switch(h=s,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:hl(h,a,fs,!ll);break e;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=Tv+300-Un(),10<v)){if(hl(h,a,fs,!ll),Qi(h,0,!0)!==0)break e;h.timeoutHandle=lw(k1.bind(null,h,l,Ei,Yp,wv,a,fs,Oc,ku,ll,S,2,-0,0),v);break e}k1(h,l,Ei,Yp,wv,a,fs,Oc,ku,ll,S,0,-0,0)}}break}while(!0);da(s)}function k1(s,a,l,h,v,S,P,V,J,he,_e,Ae,de,ge){if(s.timeoutHandle=-1,Ae=a.subtreeFlags,(Ae&8192||(Ae&16785408)===16785408)&&(Lh={stylesheets:null,count:0,unsuspend:DD},R1(a),Ae=ND(),Ae!==null)){s.cancelPendingCommit=Ae(B1.bind(null,s,a,S,l,h,v,P,V,J,_e,1,de,ge)),hl(s,S,P,!he);return}B1(s,a,S,l,h,v,P,V,J)}function JM(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var v=l[h],S=v.getSnapshot;v=v.value;try{if(!oi(S(),v))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function hl(s,a,l,h){a&=~Ev,a&=~Oc,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var v=a;0<v;){var S=31-$t(v),P=1<<S;h[S]=-1,v&=~P}l!==0&&Cr(s,l,a)}function Qp(){return(an&6)===0?(xh(0),!1):!0}function Ov(){if(Dt!==null){if(on===0)var s=Dt.return;else s=Dt,Ns=ls=null,m(s),Iu=null,bh=0,s=Dt;for(;s!==null;)d1(s.alternate,s),s=s.return;Dt=null}}function Uu(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,mD(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Ov(),pn=s,Dt=l=Rs(s.current,null),zt=a,on=0,Fi=null,ll=!1,Du=ri(s,a),Sv=!1,ku=fs=Ev=Oc=cl=Dn=0,Ei=Oh=null,wv=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var v=31-$t(h),S=1<<v;a|=s[v],h&=~S}return ro=a,yu(),l}function N1(s,a){Et=null,ie.H=Up,a===_c||a===Eu?(a=Pp(),on=3):a===Op?(a=Pp(),on=4):on=a===ZE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Fi=a,Dt===null&&(Dn=1,Hp(s,yi(a,s.current)))}function L1(){var s=ie.H;return ie.H=Up,s===null?Up:s}function U1(){var s=ie.A;return ie.A=QM,s}function Iv(){Dn=4,ll||(zt&4194048)!==zt&&us.current!==null||(Du=!0),(cl&134217727)===0&&(Oc&134217727)===0||pn===null||hl(pn,zt,fs,!1)}function xv(s,a,l){var h=an;an|=2;var v=L1(),S=U1();(pn!==s||zt!==a)&&(Yp=null,Uu(s,a)),a=!1;var P=Dn;e:do try{if(on!==0&&Dt!==null){var V=Dt,J=Fi;switch(on){case 8:Ov(),P=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var he=on;if(on=0,Fi=null,Vu(s,V,J,he),l&&Du){P=0;break e}break;default:he=on,on=0,Fi=null,Vu(s,V,J,he)}}ZM(),P=Dn;break}catch(_e){N1(s,_e)}while(!0);return a&&s.shellSuspendCounter++,Ns=ls=null,an=h,ie.H=v,ie.A=S,Dt===null&&(pn=null,zt=0,yu()),P}function ZM(){for(;Dt!==null;)V1(Dt)}function eD(s,a){var l=an;an|=2;var h=L1(),v=U1();pn!==s||zt!==a?(Yp=null,Kp=Un()+500,Uu(s,a)):Du=ri(s,a);e:do try{if(on!==0&&Dt!==null){a=Dt;var S=Fi;t:switch(on){case 1:on=0,Fi=null,Vu(s,a,S,1);break;case 2:case 9:if(Ip(S)){on=0,Fi=null,j1(a);break}a=function(){on!==2&&on!==9||pn!==s||(on=7),da(s)},S.then(a,a);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:Ip(S)?(on=0,Fi=null,j1(a)):(on=0,Fi=null,Vu(s,a,S,7));break;case 5:var P=null;switch(Dt.tag){case 26:P=Dt.memoizedState;case 5:case 27:var V=Dt;if(!P||bw(P)){on=0,Fi=null;var J=V.sibling;if(J!==null)Dt=J;else{var he=V.return;he!==null?(Dt=he,Xp(he)):Dt=null}break t}}on=0,Fi=null,Vu(s,a,S,5);break;case 6:on=0,Fi=null,Vu(s,a,S,6);break;case 8:Ov(),Dn=6;break e;default:throw Error(r(462))}}tD();break}catch(_e){N1(s,_e)}while(!0);return Ns=ls=null,ie.H=h,ie.A=v,an=l,Dt!==null?0:(pn=null,zt=0,yu(),Dn)}function tD(){for(;Dt!==null&&!Vr();)V1(Dt)}function V1(s){var a=f1(s.alternate,s,ro);s.memoizedProps=s.pendingProps,a===null?Xp(s):Dt=a}function j1(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=s1(l,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=s1(l,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:m(a);default:d1(l,a),a=Dt=Sp(a,ro),a=f1(l,a,ro)}s.memoizedProps=s.pendingProps,a===null?Xp(s):Dt=a}function Vu(s,a,l,h){Ns=ls=null,m(a),Iu=null,bh=0;var v=a.return;try{if(qM(s,v,a,l,zt)){Dn=1,Hp(s,yi(l,s.current)),Dt=null;return}}catch(S){if(v!==null)throw Dt=v,S;Dn=1,Hp(s,yi(l,s.current)),Dt=null;return}a.flags&32768?(bt||h===1?s=!0:Du||(zt&536870912)!==0?s=!1:(ll=s=!0,(h===2||h===9||h===3||h===6)&&(h=us.current,h!==null&&h.tag===13&&(h.flags|=16384))),F1(a,s)):Xp(a)}function Xp(s){var a=s;do{if((a.flags&32768)!==0){F1(a,ll);return}s=a.return;var l=GM(a.alternate,a,ro);if(l!==null){Dt=l;return}if(a=a.sibling,a!==null){Dt=a;return}Dt=a=s}while(a!==null);Dn===0&&(Dn=5)}function F1(s,a){do{var l=WM(s.alternate,s);if(l!==null){l.flags&=32767,Dt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Dt=s;return}Dt=s=l}while(s!==null);Dn=6,Dt=null}function B1(s,a,l,h,v,S,P,V,J){s.cancelPendingCommit=null;do Jp();while(Or!==0);if((an&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(S=a.lanes|a.childLanes,S|=Zf,_s(s,l,S,P,V,J),s===pn&&(Dt=pn=null,zt=0),Nu=a,fl=s,Lu=l,Cv=S,Av=v,P1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,sD(Ct,function(){return G1(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ie.T,ie.T=null,v=te.p,te.p=2,P=an,an|=4;try{KM(s,a,l)}finally{an=P,te.p=v,ie.T=h}}Or=1,H1(),z1(),q1()}}function H1(){if(Or===1){Or=0;var s=fl,a=Nu,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=ie.T,ie.T=null;var h=te.p;te.p=2;var v=an;an|=4;try{T1(a,s);var S=Hv,P=Gr(s.containerInfo),V=S.focusedElem,J=S.selectionRange;if(P!==V&&V&&V.ownerDocument&&Qf(V.ownerDocument.documentElement,V)){if(J!==null&&fc(V)){var he=J.start,_e=J.end;if(_e===void 0&&(_e=he),"selectionStart"in V)V.selectionStart=he,V.selectionEnd=Math.min(_e,V.value.length);else{var Ae=V.ownerDocument||document,de=Ae&&Ae.defaultView||window;if(de.getSelection){var ge=de.getSelection(),gt=V.textContent.length,lt=Math.min(J.start,gt),cn=J.end===void 0?lt:Math.min(J.end,gt);!ge.extend&&lt>cn&&(P=cn,cn=lt,lt=P);var ae=pu(V,lt),re=pu(V,cn);if(ae&&re&&(ge.rangeCount!==1||ge.anchorNode!==ae.node||ge.anchorOffset!==ae.offset||ge.focusNode!==re.node||ge.focusOffset!==re.offset)){var ue=Ae.createRange();ue.setStart(ae.node,ae.offset),ge.removeAllRanges(),lt>cn?(ge.addRange(ue),ge.extend(re.node,re.offset)):(ue.setEnd(re.node,re.offset),ge.addRange(ue))}}}}for(Ae=[],ge=V;ge=ge.parentNode;)ge.nodeType===1&&Ae.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Ae.length;V++){var we=Ae[V];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}ug=!!Bv,Hv=Bv=null}finally{an=v,te.p=h,ie.T=l}}s.current=a,Or=2}}function z1(){if(Or===2){Or=0;var s=fl,a=Nu,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=ie.T,ie.T=null;var h=te.p;te.p=2;var v=an;an|=4;try{b1(s,a.alternate,a)}finally{an=v,te.p=h,ie.T=l}}Or=3}}function q1(){if(Or===4||Or===3){Or=0,ys();var s=fl,a=Nu,l=Lu,h=P1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Or=5:(Or=0,Nu=fl=null,$1(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(ul=null),Ks(l),a=a.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Bt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ie.T,v=te.p,te.p=2,ie.T=null;try{for(var S=s.onRecoverableError,P=0;P<h.length;P++){var V=h[P];S(V.value,{componentStack:V.stack})}}finally{ie.T=a,te.p=v}}(Lu&3)!==0&&Jp(),da(s),v=s.pendingLanes,(l&4194090)!==0&&(v&42)!==0?s===Rv?Ih++:(Ih=0,Rv=s):Ih=0,xh(0)}}function $1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,vc(a)))}function Jp(s){return H1(),z1(),q1(),G1()}function G1(){if(Or!==5)return!1;var s=fl,a=Cv;Cv=0;var l=Ks(Lu),h=ie.T,v=te.p;try{te.p=32>l?32:l,ie.T=null,l=Av,Av=null;var S=fl,P=Lu;if(Or=0,Nu=fl=null,Lu=0,(an&6)!==0)throw Error(r(331));var V=an;if(an|=4,I1(S.current),A1(S,S.current,P,l),an=V,xh(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Bt,S)}catch{}return!0}finally{te.p=v,ie.T=h,$1(s,a)}}function W1(s,a,l){a=yi(l,a),a=sv(s.stateNode,a,2),s=aa(s,a,2),s!==null&&(hi(s,2),da(s))}function un(s,a,l){if(s.tag===3)W1(s,s,l);else for(;a!==null;){if(a.tag===3){W1(a,s,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ul===null||!ul.has(h))){s=yi(l,s),l=XE(2),h=aa(a,l,2),h!==null&&(JE(l,h,a,s),hi(h,2),da(h));break}}a=a.return}}function Pv(s,a,l){var h=s.pingCache;if(h===null){h=s.pingCache=new XM;var v=new Set;h.set(a,v)}else v=h.get(a),v===void 0&&(v=new Set,h.set(a,v));v.has(l)||(Sv=!0,v.add(l),s=nD.bind(null,s,a,l),a.then(s,s))}function nD(s,a,l){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,pn===s&&(zt&l)===l&&(Dn===4||Dn===3&&(zt&62914560)===zt&&300>Un()-Tv?(an&2)===0&&Uu(s,0):Ev|=l,ku===zt&&(ku=0)),da(s)}function K1(s,a){a===0&&(a=Ji()),s=qo(s,a),s!==null&&(hi(s,a),da(s))}function rD(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),K1(s,l)}function iD(s,a){var l=0;switch(s.tag){case 13:var h=s.stateNode,v=s.memoizedState;v!==null&&(l=v.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),K1(s,l)}function sD(s,a){return Ur(s,a)}var Zp=null,ju=null,Mv=!1,eg=!1,Dv=!1,Ic=0;function da(s){s!==ju&&s.next===null&&(ju===null?Zp=ju=s:ju=ju.next=s),eg=!0,Mv||(Mv=!0,oD())}function xh(s,a){if(!Dv&&eg){Dv=!0;do for(var l=!1,h=Zp;h!==null;){if(s!==0){var v=h.pendingLanes;if(v===0)var S=0;else{var P=h.suspendedLanes,V=h.pingedLanes;S=(1<<31-$t(42|s)+1)-1,S&=v&~(P&~V),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(l=!0,J1(h,S))}else S=zt,S=Qi(h,h===pn?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(S&3)===0||ri(h,S)||(l=!0,J1(h,S));h=h.next}while(l);Dv=!1}}function aD(){Y1()}function Y1(){eg=Mv=!1;var s=0;Ic!==0&&(gD()&&(s=Ic),Ic=0);for(var a=Un(),l=null,h=Zp;h!==null;){var v=h.next,S=Q1(h,a);S===0?(h.next=null,l===null?Zp=v:l.next=v,v===null&&(ju=l)):(l=h,(s!==0||(S&3)!==0)&&(eg=!0)),h=v}xh(s)}function Q1(s,a){for(var l=s.suspendedLanes,h=s.pingedLanes,v=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var P=31-$t(S),V=1<<P,J=v[P];J===-1?((V&l)===0||(V&h)!==0)&&(v[P]=xi(V,a)):J<=a&&(s.expiredLanes|=V),S&=~V}if(a=pn,l=zt,l=Qi(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===a&&(on===2||on===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&wn(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ri(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(h!==null&&wn(h),Ks(l)){case 2:case 8:l=fn;break;case 32:l=Ct;break;case 268435456:l=ti;break;default:l=Ct}return h=X1.bind(null,s),l=Ur(l,h),s.callbackPriority=a,s.callbackNode=l,a}return h!==null&&h!==null&&wn(h),s.callbackPriority=2,s.callbackNode=null,2}function X1(s,a){if(Or!==0&&Or!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Jp()&&s.callbackNode!==l)return null;var h=zt;return h=Qi(s,s===pn?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(D1(s,h,a),Q1(s,Un()),s.callbackNode!=null&&s.callbackNode===l?X1.bind(null,s):null)}function J1(s,a){if(Jp())return null;D1(s,a,!0)}function oD(){yD(function(){(an&6)!==0?Ur(tr,aD):Y1()})}function kv(){return Ic===0&&(Ic=Xi()),Ic}function Z1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xo(""+s)}function ew(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function lD(s,a,l,h,v){if(a==="submit"&&l&&l.stateNode===v){var S=Z1((v[Ie]||null).action),P=h.submitter;P&&(a=(a=P[Ie]||null)?Z1(a.formAction):P.getAttribute("formAction"),a!==null&&(S=a,P=null));var V=new Mo("action","action",null,h,v);s.push({event:V,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ic!==0){var J=P?ew(v,P):new FormData(v);ev(l,{pending:!0,data:J,method:v.method,action:S},null,J)}}else typeof S=="function"&&(V.preventDefault(),J=P?ew(v,P):new FormData(v),ev(l,{pending:!0,data:J,method:v.method,action:S},S,J))},currentTarget:v}]})}}for(var Nv=0;Nv<Ho.length;Nv++){var Lv=Ho[Nv],cD=Lv.toLowerCase(),uD=Lv[0].toUpperCase()+Lv.slice(1);Kn(cD,"on"+uD)}Kn(ta,"onAnimationEnd"),Kn(mu,"onAnimationIteration"),Kn(gp,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(mp,"onTransitionRun"),Kn(yp,"onTransitionStart"),Kn(Wy,"onTransitionCancel"),Kn(vp,"onTransitionEnd"),nr("onMouseEnter",["mouseout","mouseover"]),nr("onMouseLeave",["mouseout","mouseover"]),nr("onPointerEnter",["pointerout","pointerover"]),nr("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ph));function tw(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],v=h.event;h=h.listeners;e:{var S=void 0;if(a)for(var P=h.length-1;0<=P;P--){var V=h[P],J=V.instance,he=V.currentTarget;if(V=V.listener,J!==S&&v.isPropagationStopped())break e;S=V,v.currentTarget=he;try{S(v)}catch(_e){Bp(_e)}v.currentTarget=null,S=J}else for(P=0;P<h.length;P++){if(V=h[P],J=V.instance,he=V.currentTarget,V=V.listener,J!==S&&v.isPropagationStopped())break e;S=V,v.currentTarget=he;try{S(v)}catch(_e){Bp(_e)}v.currentTarget=null,S=J}}}}function kt(s,a){var l=a[Ze];l===void 0&&(l=a[Ze]=new Set);var h=s+"__bubble";l.has(h)||(nw(a,s,2,!1),l.add(h))}function Uv(s,a,l){var h=0;a&&(h|=4),nw(l,s,h,a)}var tg="_reactListening"+Math.random().toString(36).slice(2);function Vv(s){if(!s[tg]){s[tg]=!0,ke.forEach(function(l){l!=="selectionchange"&&(fD.has(l)||Uv(l,!1,s),Uv(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[tg]||(a[tg]=!0,Uv("selectionchange",!1,a))}}function nw(s,a,l,h){switch(Aw(a)){case 2:var v=VD;break;case 8:v=jD;break;default:v=Jv}l=v.bind(null,a,l,s),v=void 0,!ar||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),h?v!==void 0?s.addEventListener(a,l,{capture:!0,passive:v}):s.addEventListener(a,l,!0):v!==void 0?s.addEventListener(a,l,{passive:v}):s.addEventListener(a,l,!1)}function jv(s,a,l,h,v){var S=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var P=h.tag;if(P===3||P===4){var V=h.stateNode.containerInfo;if(V===v)break;if(P===4)for(P=h.return;P!==null;){var J=P.tag;if((J===3||J===4)&&P.stateNode.containerInfo===v)return;P=P.return}for(;V!==null;){if(P=tt(V),P===null)return;if(J=P.tag,J===5||J===6||J===26||J===27){h=S=P;continue e}V=V.parentNode}}h=h.return}ec(function(){var he=S,_e=Hr(l),Ae=[];e:{var de=_p.get(s);if(de!==void 0){var ge=Mo,gt=s;switch(s){case"keypress":if(Ni(l)===0)break e;case"keydown":case"keyup":ge=Uo;break;case"focusin":gt="focus",ge=No;break;case"focusout":gt="blur",ge=No;break;case"beforeblur":case"afterblur":ge=No;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=lc;break;case ta:case mu:case gp:ge=Lo;break;case vp:ge=fu;break;case"scroll":case"scrollend":ge=su;break;case"wheel":ge=Va;break;case"copy":case"cut":case"paste":ge=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=oc;break;case"toggle":case"beforetoggle":ge=Vo}var lt=(a&4)!==0,cn=!lt&&(s==="scroll"||s==="scrollend"),ae=lt?de!==null?de+"Capture":null:de;lt=[];for(var re=he,ue;re!==null;){var we=re;if(ue=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ue===null||ae===null||(we=rs(re,ae),we!=null&&lt.push(Mh(re,we,ue))),cn)break;re=re.return}0<lt.length&&(de=new ge(de,gt,null,l,_e),Ae.push({event:de,listeners:lt}))}}if((a&7)===0){e:{if(de=s==="mouseover"||s==="pointerover",ge=s==="mouseout"||s==="pointerout",de&&l!==ts&&(gt=l.relatedTarget||l.fromElement)&&(tt(gt)||gt[Fe]))break e;if((ge||de)&&(de=_e.window===_e?_e:(de=_e.ownerDocument)?de.defaultView||de.parentWindow:window,ge?(gt=l.relatedTarget||l.toElement,ge=he,gt=gt?tt(gt):null,gt!==null&&(cn=o(gt),lt=gt.tag,gt!==cn||lt!==5&&lt!==27&&lt!==6)&&(gt=null)):(ge=null,gt=he),ge!==gt)){if(lt=ai,we="onMouseLeave",ae="onMouseEnter",re="mouse",(s==="pointerout"||s==="pointerover")&&(lt=oc,we="onPointerLeave",ae="onPointerEnter",re="pointer"),cn=ge==null?de:Vt(ge),ue=gt==null?de:Vt(gt),de=new lt(we,re+"leave",ge,l,_e),de.target=cn,de.relatedTarget=ue,we=null,tt(_e)===he&&(lt=new lt(ae,re+"enter",gt,l,_e),lt.target=ue,lt.relatedTarget=cn,we=lt),cn=we,ge&&gt)t:{for(lt=ge,ae=gt,re=0,ue=lt;ue;ue=Fu(ue))re++;for(ue=0,we=ae;we;we=Fu(we))ue++;for(;0<re-ue;)lt=Fu(lt),re--;for(;0<ue-re;)ae=Fu(ae),ue--;for(;re--;){if(lt===ae||ae!==null&&lt===ae.alternate)break t;lt=Fu(lt),ae=Fu(ae)}lt=null}else lt=null;ge!==null&&rw(Ae,de,ge,lt,!1),gt!==null&&cn!==null&&rw(Ae,cn,gt,lt,!0)}}e:{if(de=he?Vt(he):window,ge=de.nodeName&&de.nodeName.toLowerCase(),ge==="select"||ge==="input"&&de.type==="file")var Ke=op;else if(Bn(de))if(lp)Ke=Gy;else{Ke=up;var Rt=cp}else ge=de.nodeName,!ge||ge.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?he&&Io(he.elementType)&&(Ke=op):Ke=fp;if(Ke&&(Ke=Ke(s,he))){os(Ae,Ke,l,_e);break e}Rt&&Rt(s,de,he),s==="focusout"&&he&&de.type==="number"&&he.memoizedProps.value!=null&&Xs(de,"number",de.value)}switch(Rt=he?Vt(he):window,s){case"focusin":(Bn(Rt)||Rt.contentEditable==="true")&&(Bo=Rt,Jf=he,Fa=null);break;case"focusout":Fa=Jf=Bo=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,dp(Ae,l,_e);break;case"selectionchange":if(Xf)break;case"keydown":case"keyup":dp(Ae,l,_e)}var Je;if($r)e:{switch(s){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Pt?ye(s,l)&&(ct="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(ct="onCompositionStart");ct&&(x&&l.locale!=="ko"&&(Pt||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Pt&&(Je=is()):(ki=_e,Es="value"in ki?ki.value:ki.textContent,Pt=!0)),Rt=ng(he,ct),0<Rt.length&&(ct=new rc(ct,s,null,l,_e),Ae.push({event:ct,listeners:Rt}),Je?ct.data=Je:(Je=De(l),Je!==null&&(ct.data=Je)))),(Je=A?Fn(s,l):Mt(s,l))&&(ct=ng(he,"onBeforeInput"),0<ct.length&&(Rt=new rc("onBeforeInput","beforeinput",null,l,_e),Ae.push({event:Rt,listeners:ct}),Rt.data=Je)),lD(Ae,s,he,l,_e)}tw(Ae,a)})}function Mh(s,a,l){return{instance:s,listener:a,currentTarget:l}}function ng(s,a){for(var l=a+"Capture",h=[];s!==null;){var v=s,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=rs(s,l),v!=null&&h.unshift(Mh(s,v,S)),v=rs(s,a),v!=null&&h.push(Mh(s,v,S))),s.tag===3)return h;s=s.return}return[]}function Fu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function rw(s,a,l,h,v){for(var S=a._reactName,P=[];l!==null&&l!==h;){var V=l,J=V.alternate,he=V.stateNode;if(V=V.tag,J!==null&&J===h)break;V!==5&&V!==26&&V!==27||he===null||(J=he,v?(he=rs(l,S),he!=null&&P.unshift(Mh(l,he,J))):v||(he=rs(l,S),he!=null&&P.push(Mh(l,he,J)))),l=l.return}P.length!==0&&s.push({event:a,listeners:P})}var hD=/\r\n?/g,dD=/\u0000|\uFFFD/g;function iw(s){return(typeof s=="string"?s:""+s).replace(hD,`
`).replace(dD,"")}function sw(s,a){return a=iw(a),iw(s)===a}function rg(){}function ln(s,a,l,h,v,S){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Ge(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Ge(s,""+h);break;case"className":rr(s,"class",h);break;case"tabIndex":rr(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(s,l,h);break;case"style":Zl(s,h,S);break;case"data":if(a!=="object"){rr(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=xo(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(l==="formAction"?(a!=="input"&&ln(s,a,"name",v.name,v,null),ln(s,a,"formEncType",v.formEncType,v,null),ln(s,a,"formMethod",v.formMethod,v,null),ln(s,a,"formTarget",v.formTarget,v,null)):(ln(s,a,"encType",v.encType,v,null),ln(s,a,"method",v.method,v,null),ln(s,a,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=xo(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=rg);break;case"onScroll":h!=null&&kt("scroll",s);break;case"onScrollEnd":h!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=xo(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":kt("beforetoggle",s),kt("toggle",s),jn(s,"popover",h);break;case"xlinkActuate":dt(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":dt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":dt(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":dt(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":dt(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":dt(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":dt(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":dt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":dt(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":jn(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Gf.get(l)||l,jn(s,l,h))}}function Fv(s,a,l,h,v,S){switch(l){case"style":Zl(s,h,S);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof h=="string"?Ge(s,h):(typeof h=="number"||typeof h=="bigint")&&Ge(s,""+h);break;case"onScroll":h!=null&&kt("scroll",s);break;case"onScrollEnd":h!=null&&kt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=rg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!di.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),a=l.slice(2,v?l.length-7:void 0),S=s[Ie]||null,S=S!=null?S[l]:null,typeof S=="function"&&s.removeEventListener(a,S,v),typeof h=="function")){typeof S!="function"&&S!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,h,v);break e}l in s?s[l]=h:h===!0?s.setAttribute(l,""):jn(s,l,h)}}}function Ir(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var h=!1,v=!1,S;for(S in l)if(l.hasOwnProperty(S)){var P=l[S];if(P!=null)switch(S){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ln(s,a,S,P,l,null)}}v&&ln(s,a,"srcSet",l.srcSet,l,null),h&&ln(s,a,"src",l.src,l,null);return;case"input":kt("invalid",s);var V=S=P=v=null,J=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var _e=l[h];if(_e!=null)switch(h){case"name":v=_e;break;case"type":P=_e;break;case"checked":J=_e;break;case"defaultChecked":he=_e;break;case"value":S=_e;break;case"defaultValue":V=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,a));break;default:ln(s,a,h,_e,l,null)}}Ss(s,S,V,J,he,P,v,!1),Oo(s);return;case"select":kt("invalid",s),h=P=S=null;for(v in l)if(l.hasOwnProperty(v)&&(V=l[v],V!=null))switch(v){case"value":S=V;break;case"defaultValue":P=V;break;case"multiple":h=V;default:ln(s,a,v,V,l,null)}a=S,l=P,s.multiple=!!h,a!=null?Mi(s,!!h,a,!1):l!=null&&Mi(s,!!h,l,!0);return;case"textarea":kt("invalid",s),S=v=h=null;for(P in l)if(l.hasOwnProperty(P)&&(V=l[P],V!=null))switch(P){case"value":h=V;break;case"defaultValue":v=V;break;case"children":S=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:ln(s,a,P,V,l,null)}hn(s,h,v,S),Oo(s);return;case"option":for(J in l)if(l.hasOwnProperty(J)&&(h=l[J],h!=null))switch(J){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ln(s,a,J,h,l,null)}return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(h=0;h<Ph.length;h++)kt(Ph[h],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ln(s,a,he,h,l,null)}return;default:if(Io(a)){for(_e in l)l.hasOwnProperty(_e)&&(h=l[_e],h!==void 0&&Fv(s,a,_e,h,l,void 0));return}}for(V in l)l.hasOwnProperty(V)&&(h=l[V],h!=null&&ln(s,a,V,h,l,null))}function pD(s,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,P=null,V=null,J=null,he=null,_e=null;for(ge in l){var Ae=l[ge];if(l.hasOwnProperty(ge)&&Ae!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":J=Ae;default:h.hasOwnProperty(ge)||ln(s,a,ge,null,h,Ae)}}for(var de in h){var ge=h[de];if(Ae=l[de],h.hasOwnProperty(de)&&(ge!=null||Ae!=null))switch(de){case"type":S=ge;break;case"name":v=ge;break;case"checked":he=ge;break;case"defaultChecked":_e=ge;break;case"value":P=ge;break;case"defaultValue":V=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,a));break;default:ge!==Ae&&ln(s,a,de,ge,h,Ae)}}si(s,P,V,J,he,_e,S,v);return;case"select":ge=P=V=de=null;for(S in l)if(J=l[S],l.hasOwnProperty(S)&&J!=null)switch(S){case"value":break;case"multiple":ge=J;default:h.hasOwnProperty(S)||ln(s,a,S,null,h,J)}for(v in h)if(S=h[v],J=l[v],h.hasOwnProperty(v)&&(S!=null||J!=null))switch(v){case"value":de=S;break;case"defaultValue":V=S;break;case"multiple":P=S;default:S!==J&&ln(s,a,v,S,h,J)}a=V,l=P,h=ge,de!=null?Mi(s,!!l,de,!1):!!h!=!!l&&(a!=null?Mi(s,!!l,a,!0):Mi(s,!!l,l?[]:"",!1));return;case"textarea":ge=de=null;for(V in l)if(v=l[V],l.hasOwnProperty(V)&&v!=null&&!h.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:ln(s,a,V,null,h,v)}for(P in h)if(v=h[P],S=l[P],h.hasOwnProperty(P)&&(v!=null||S!=null))switch(P){case"value":de=v;break;case"defaultValue":ge=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&ln(s,a,P,v,h,S)}Zt(s,de,ge);return;case"option":for(var gt in l)if(de=l[gt],l.hasOwnProperty(gt)&&de!=null&&!h.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:ln(s,a,gt,null,h,de)}for(J in h)if(de=h[J],ge=l[J],h.hasOwnProperty(J)&&de!==ge&&(de!=null||ge!=null))switch(J){case"selected":s.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:ln(s,a,J,de,h,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in l)de=l[lt],l.hasOwnProperty(lt)&&de!=null&&!h.hasOwnProperty(lt)&&ln(s,a,lt,null,h,de);for(he in h)if(de=h[he],ge=l[he],h.hasOwnProperty(he)&&de!==ge&&(de!=null||ge!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:ln(s,a,he,de,h,ge)}return;default:if(Io(a)){for(var cn in l)de=l[cn],l.hasOwnProperty(cn)&&de!==void 0&&!h.hasOwnProperty(cn)&&Fv(s,a,cn,void 0,h,de);for(_e in h)de=h[_e],ge=l[_e],!h.hasOwnProperty(_e)||de===ge||de===void 0&&ge===void 0||Fv(s,a,_e,de,h,ge);return}}for(var ae in l)de=l[ae],l.hasOwnProperty(ae)&&de!=null&&!h.hasOwnProperty(ae)&&ln(s,a,ae,null,h,de);for(Ae in h)de=h[Ae],ge=l[Ae],!h.hasOwnProperty(Ae)||de===ge||de==null&&ge==null||ln(s,a,Ae,de,h,ge)}var Bv=null,Hv=null;function ig(s){return s.nodeType===9?s:s.ownerDocument}function aw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ow(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function zv(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var qv=null;function gD(){var s=window.event;return s&&s.type==="popstate"?s===qv?!1:(qv=s,!0):(qv=null,!1)}var lw=typeof setTimeout=="function"?setTimeout:void 0,mD=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,yD=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(s){return cw.resolve(null).then(s).catch(vD)}:lw;function vD(s){setTimeout(function(){throw s})}function dl(s){return s==="head"}function uw(s,a){var l=a,h=0,v=0;do{var S=l.nextSibling;if(s.removeChild(l),S&&S.nodeType===8)if(l=S.data,l==="/$"){if(0<h&&8>h){l=h;var P=s.ownerDocument;if(l&1&&Dh(P.documentElement),l&2&&Dh(P.body),l&4)for(l=P.head,Dh(l),P=l.firstChild;P;){var V=P.nextSibling,J=P.nodeName;P[st]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&P.rel.toLowerCase()==="stylesheet"||l.removeChild(P),P=V}}if(v===0){s.removeChild(S),Bh(a);return}v--}else l==="$"||l==="$?"||l==="$!"?v++:h=l.charCodeAt(0)-48;else h=0;l=S}while(l);Bh(a)}function $v(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":$v(l),We(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function _D(s,a,l,h){for(;s.nodeType===1;){var v=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[st])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=Vs(s.nextSibling),s===null)break}return null}function bD(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Vs(s.nextSibling),s===null))return null;return s}function Gv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function SD(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Vs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Wv=null;function fw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function hw(s,a,l){switch(a=ig(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Dh(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);We(s)}var hs=new Map,dw=new Set;function sg(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var io=te.d;te.d={f:ED,r:wD,D:TD,C:CD,L:AD,m:RD,X:ID,S:OD,M:xD};function ED(){var s=io.f(),a=Qp();return s||a}function wD(s){var a=Tt(s);a!==null&&a.tag===5&&a.type==="form"?DE(a):io.r(s)}var Bu=typeof document>"u"?null:document;function pw(s,a,l){var h=Bu;if(h&&typeof a=="string"&&a){var v=Pn(a);v='link[rel="'+s+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),dw.has(v)||(dw.add(v),s={rel:s,crossOrigin:l,href:a},h.querySelector(v)===null&&(a=h.createElement("link"),Ir(a,"link",s),xt(a),h.head.appendChild(a)))}}function TD(s){io.D(s),pw("dns-prefetch",s,null)}function CD(s,a){io.C(s,a),pw("preconnect",s,a)}function AD(s,a,l){io.L(s,a,l);var h=Bu;if(h&&s&&a){var v='link[rel="preload"][as="'+Pn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Pn(l.imageSizes)+'"]')):v+='[href="'+Pn(s)+'"]';var S=v;switch(a){case"style":S=Hu(s);break;case"script":S=zu(s)}hs.has(S)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),hs.set(S,s),h.querySelector(v)!==null||a==="style"&&h.querySelector(kh(S))||a==="script"&&h.querySelector(Nh(S))||(a=h.createElement("link"),Ir(a,"link",s),xt(a),h.head.appendChild(a)))}}function RD(s,a){io.m(s,a);var l=Bu;if(l&&s){var h=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+Pn(h)+'"][href="'+Pn(s)+'"]',S=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=zu(s)}if(!hs.has(S)&&(s=_({rel:"modulepreload",href:s},a),hs.set(S,s),l.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Nh(S)))return}h=l.createElement("link"),Ir(h,"link",s),xt(h),l.head.appendChild(h)}}}function OD(s,a,l){io.S(s,a,l);var h=Bu;if(h&&s){var v=Ht(h).hoistableStyles,S=Hu(s);a=a||"default";var P=v.get(S);if(!P){var V={loading:0,preload:null};if(P=h.querySelector(kh(S)))V.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=hs.get(S))&&Kv(s,l);var J=P=h.createElement("link");xt(J),Ir(J,"link",s),J._p=new Promise(function(he,_e){J.onload=he,J.onerror=_e}),J.addEventListener("load",function(){V.loading|=1}),J.addEventListener("error",function(){V.loading|=2}),V.loading|=4,ag(P,a,h)}P={type:"stylesheet",instance:P,count:1,state:V},v.set(S,P)}}}function ID(s,a){io.X(s,a);var l=Bu;if(l&&s){var h=Ht(l).hoistableScripts,v=zu(s),S=h.get(v);S||(S=l.querySelector(Nh(v)),S||(s=_({src:s,async:!0},a),(a=hs.get(v))&&Yv(s,a),S=l.createElement("script"),xt(S),Ir(S,"link",s),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(v,S))}}function xD(s,a){io.M(s,a);var l=Bu;if(l&&s){var h=Ht(l).hoistableScripts,v=zu(s),S=h.get(v);S||(S=l.querySelector(Nh(v)),S||(s=_({src:s,async:!0,type:"module"},a),(a=hs.get(v))&&Yv(s,a),S=l.createElement("script"),xt(S),Ir(S,"link",s),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(v,S))}}function gw(s,a,l,h){var v=(v=Ue.current)?sg(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Hu(l.href),l=Ht(v).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Hu(l.href);var S=Ht(v).hoistableStyles,P=S.get(s);if(P||(v=v.ownerDocument||v,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,P),(S=v.querySelector(kh(s)))&&!S._p&&(P.instance=S,P.state.loading=5),hs.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},hs.set(s,l),S||PD(v,s,l,P.state))),a&&h===null)throw Error(r(528,""));return P}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zu(l),l=Ht(v).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Hu(s){return'href="'+Pn(s)+'"'}function kh(s){return'link[rel="stylesheet"]['+s+"]"}function mw(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function PD(s,a,l,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Ir(a,"link",l),xt(a),s.head.appendChild(a))}function zu(s){return'[src="'+Pn(s)+'"]'}function Nh(s){return"script[async]"+s}function yw(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Pn(l.href)+'"]');if(h)return a.instance=h,xt(h),h;var v=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),xt(h),Ir(h,"style",v),ag(h,l.precedence,s),a.instance=h;case"stylesheet":v=Hu(l.href);var S=s.querySelector(kh(v));if(S)return a.state.loading|=4,a.instance=S,xt(S),S;h=mw(l),(v=hs.get(v))&&Kv(h,v),S=(s.ownerDocument||s).createElement("link"),xt(S);var P=S;return P._p=new Promise(function(V,J){P.onload=V,P.onerror=J}),Ir(S,"link",h),a.state.loading|=4,ag(S,l.precedence,s),a.instance=S;case"script":return S=zu(l.src),(v=s.querySelector(Nh(S)))?(a.instance=v,xt(v),v):(h=l,(v=hs.get(S))&&(h=_({},l),Yv(h,v)),s=s.ownerDocument||s,v=s.createElement("script"),xt(v),Ir(v,"link",h),s.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,ag(h,l.precedence,s));return a.instance}function ag(s,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,S=v,P=0;P<h.length;P++){var V=h[P];if(V.dataset.precedence===a)S=V;else if(S!==v)break}S?S.parentNode.insertBefore(s,S.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Kv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Yv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var og=null;function vw(s,a,l){if(og===null){var h=new Map,v=og=new Map;v.set(l,h)}else v=og,h=v.get(l),h||(h=new Map,v.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),v=0;v<l.length;v++){var S=l[v];if(!(S[st]||S[Te]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var P=S.getAttribute(a)||"";P=s+P;var V=h.get(P);V?V.push(S):h.set(P,[S])}}return h}function _w(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function MD(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function bw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Lh=null;function DD(){}function kD(s,a,l){if(Lh===null)throw Error(r(475));var h=Lh;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Hu(l.href),S=s.querySelector(kh(v));if(S){s=S._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=lg.bind(h),s.then(h,h)),a.state.loading|=4,a.instance=S,xt(S);return}S=s.ownerDocument||s,l=mw(l),(v=hs.get(v))&&Kv(l,v),S=S.createElement("link"),xt(S);var P=S;P._p=new Promise(function(V,J){P.onload=V,P.onerror=J}),Ir(S,"link",l),a.instance=S}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=lg.bind(h),s.addEventListener("load",a),s.addEventListener("error",a))}}function ND(){if(Lh===null)throw Error(r(475));var s=Lh;return s.stylesheets&&s.count===0&&Qv(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&Qv(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function lg(){if(this.count--,this.count===0){if(this.stylesheets)Qv(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cg=null;function Qv(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cg=new Map,a.forEach(LD,s),cg=null,lg.call(s))}function LD(s,a){if(!(a.state.loading&4)){var l=cg.get(s);if(l)var h=l.get(null);else{l=new Map,cg.set(s,l);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var P=v[S];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(l.set(P.dataset.precedence,P),h=P)}h&&l.set(null,h)}v=a.instance,P=v.getAttribute("data-precedence"),S=l.get(P)||h,S===h&&l.set(null,v),l.set(P,v),this.count++,h=lg.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),S?S.parentNode.insertBefore(v,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),a.state.loading|=4}}var Uh={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function UD(s,a,l,h,v,S,P,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Sw(s,a,l,h,v,S,P,V,J,he,_e,Ae){return s=new UD(s,a,l,P,V,J,he,Ae),a=1,S===!0&&(a|=24),S=li(3,null,null,a),s.current=S,S.stateNode=s,a=ra(),a.refCount++,s.pooledCache=a,a.refCount++,S.memoizedState={element:h,isDehydrated:l,cache:a},wu(S),s}function Ew(s){return s?(s=qa,s):qa}function ww(s,a,l,h,v,S){v=Ew(v),h.context===null?h.context=v:h.pendingContext=v,h=sa(a),h.payload={element:l},S=S===void 0?null:S,S!==null&&(h.callback=S),l=aa(s,h,a),l!==null&&(Hi(l,s,a),Ec(l,s,a))}function Tw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Xv(s,a){Tw(s,a),(s=s.alternate)&&Tw(s,a)}function Cw(s){if(s.tag===13){var a=qo(s,67108864);a!==null&&Hi(a,s,67108864),Xv(s,67108864)}}var ug=!0;function VD(s,a,l,h){var v=ie.T;ie.T=null;var S=te.p;try{te.p=2,Jv(s,a,l,h)}finally{te.p=S,ie.T=v}}function jD(s,a,l,h){var v=ie.T;ie.T=null;var S=te.p;try{te.p=8,Jv(s,a,l,h)}finally{te.p=S,ie.T=v}}function Jv(s,a,l,h){if(ug){var v=Zv(h);if(v===null)jv(s,a,h,fg,l),Rw(s,h);else if(BD(v,s,a,l,h))h.stopPropagation();else if(Rw(s,h),a&4&&-1<FD.indexOf(s)){for(;v!==null;){var S=Tt(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var P=Tr(S.pendingLanes);if(P!==0){var V=S;for(V.pendingLanes|=2,V.entangledLanes|=2;P;){var J=1<<31-$t(P);V.entanglements[1]|=J,P&=~J}da(S),(an&6)===0&&(Kp=Un()+500,xh(0))}}break;case 13:V=qo(S,2),V!==null&&Hi(V,S,2),Qp(),Xv(S,2)}if(S=Zv(h),S===null&&jv(s,a,h,fg,l),S===v)break;v=S}v!==null&&h.stopPropagation()}else jv(s,a,h,null,l)}}function Zv(s){return s=Hr(s),e0(s)}var fg=null;function e0(s){if(fg=null,s=tt(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return fg=s,null}function Aw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case tr:return 2;case fn:return 8;case Ct:case pr:return 32;case ti:return 268435456;default:return 32}default:return 32}}var t0=!1,pl=null,gl=null,ml=null,Vh=new Map,jh=new Map,yl=[],FD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rw(s,a){switch(s){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":gl=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":Vh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(a.pointerId)}}function Fh(s,a,l,h,v,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:S,targetContainers:[v]},a!==null&&(a=Tt(a),a!==null&&Cw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function BD(s,a,l,h,v){switch(a){case"focusin":return pl=Fh(pl,s,a,l,h,v),!0;case"dragenter":return gl=Fh(gl,s,a,l,h,v),!0;case"mouseover":return ml=Fh(ml,s,a,l,h,v),!0;case"pointerover":var S=v.pointerId;return Vh.set(S,Fh(Vh.get(S)||null,s,a,l,h,v)),!0;case"gotpointercapture":return S=v.pointerId,jh.set(S,Fh(jh.get(S)||null,s,a,l,h,v)),!0}return!1}function Ow(s){var a=tt(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,oe(s.priority,function(){if(l.tag===13){var h=Bi();h=Zi(h);var v=qo(l,h);v!==null&&Hi(v,l,h),Xv(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hg(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Zv(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);ts=h,l.target.dispatchEvent(h),ts=null}else return a=Tt(l),a!==null&&Cw(a),s.blockedOn=l,!1;a.shift()}return!0}function Iw(s,a,l){hg(s)&&l.delete(a)}function HD(){t0=!1,pl!==null&&hg(pl)&&(pl=null),gl!==null&&hg(gl)&&(gl=null),ml!==null&&hg(ml)&&(ml=null),Vh.forEach(Iw),jh.forEach(Iw)}function dg(s,a){s.blockedOn===a&&(s.blockedOn=null,t0||(t0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,HD)))}var pg=null;function xw(s){pg!==s&&(pg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){pg===s&&(pg=null);for(var a=0;a<s.length;a+=3){var l=s[a],h=s[a+1],v=s[a+2];if(typeof h!="function"){if(e0(h||l)===null)continue;break}var S=Tt(l);S!==null&&(s.splice(a,3),a-=3,ev(S,{pending:!0,data:v,method:l.method,action:h},h,v))}}))}function Bh(s){function a(J){return dg(J,s)}pl!==null&&dg(pl,s),gl!==null&&dg(gl,s),ml!==null&&dg(ml,s),Vh.forEach(a),jh.forEach(a);for(var l=0;l<yl.length;l++){var h=yl[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<yl.length&&(l=yl[0],l.blockedOn===null);)Ow(l),l.blockedOn===null&&yl.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var v=l[h],S=l[h+1],P=v[Ie]||null;if(typeof S=="function")P||xw(l);else if(P){var V=null;if(S&&S.hasAttribute("formAction")){if(v=S,P=S[Ie]||null)V=P.formAction;else if(e0(v)!==null)continue}else V=P.action;typeof V=="function"?l[h+1]=V:(l.splice(h,3),h-=3),xw(l)}}}function n0(s){this._internalRoot=s}gg.prototype.render=n0.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=Bi();ww(l,h,s,a,null,null)},gg.prototype.unmount=n0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;ww(s.current,2,null,s,null,null),Qp(),a[Fe]=null}};function gg(s){this._internalRoot=s}gg.prototype.unstable_scheduleHydration=function(s){if(s){var a=Z();s={blockedOn:null,target:s,priority:a};for(var l=0;l<yl.length&&a!==0&&a<yl[l].priority;l++);yl.splice(l,0,s),l===0&&Ow(s)}};var Pw=e.version;if(Pw!=="19.1.0")throw Error(r(527,Pw,"19.1.0"));te.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var zD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mg.isDisabled&&mg.supportsFiber)try{Bt=mg.inject(zD),rt=mg}catch{}}return zh.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,h="",v=WE,S=KE,P=YE,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(P=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks)),a=Sw(s,1,!1,null,null,l,h,v,S,P,V,null),s[Fe]=a.current,Vv(s),new n0(a)},zh.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var h=!1,v="",S=WE,P=KE,V=YE,J=null,he=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(P=l.onCaughtError),l.onRecoverableError!==void 0&&(V=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(J=l.unstable_transitionCallbacks),l.formState!==void 0&&(he=l.formState)),a=Sw(s,1,!0,a,l??null,h,v,S,P,V,J,he),a.context=Ew(null),l=a.current,h=Bi(),h=Zi(h),v=sa(h),v.callback=null,aa(l,v,h),l=h,a.current.lanes=l,hi(a,l),da(a),s[Fe]=a.current,Vv(s),new gg(a)},zh.version="19.1.0",zh}var Gw;function gk(){if(Gw)return a0.exports;Gw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),a0.exports=pk(),a0.exports}var mk=gk(),u0={exports:{}},f0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function yk(){if(Ww)return f0;Ww=1;var t=ry();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,d=t.useDebugValue;return f0.useSyncExternalStoreWithSelector=function(p,g,_,E,C){var O=i(null);if(O.current===null){var I={hasValue:!1,value:null};O.current=I}else I=O.current;O=c(function(){function D(G){if(!B){if(B=!0,Y=G,G=E(G),C!==void 0&&I.hasValue){var q=I.value;if(C(q,G))return Q=q}return Q=G}if(q=Q,n(Y,G))return q;var j=E(G);return C!==void 0&&C(q,j)?(Y=G,q):(Y=G,Q=j)}var B=!1,Y,Q,L=_===void 0?null:_;return[function(){return D(g())},L===null?void 0:function(){return D(L())}]},[g,_,E,C]);var k=r(p,O[0],O[1]);return o(function(){I.hasValue=!0,I.value=k},[k]),d(k),k},f0}var Kw;function vk(){return Kw||(Kw=1,u0.exports=yk()),u0.exports}var _k=vk();function bk(t){t()}function Sk(){let t=null,e=null;return{clear(){t=null,e=null},notify(){bk(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Yw={notify(){},get:()=>[]};function Ek(t,e){let n,r=Yw,i=0,o=!1;function c(k){_();const D=r.subscribe(k);let B=!1;return()=>{B||(B=!0,D(),E())}}function d(){r.notify()}function p(){I.onStateChange&&I.onStateChange()}function g(){return o}function _(){i++,n||(n=t.subscribe(p),r=Sk())}function E(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Yw)}function C(){o||(o=!0,_())}function O(){o&&(o=!1,E())}const I={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:C,tryUnsubscribe:O,getListeners:()=>r};return I}var wk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tk=wk(),Ck=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ak=Ck(),Rk=()=>Tk||Ak?M.useLayoutEffect:M.useEffect,Ok=Rk(),h0=Symbol.for("react-redux-context"),d0=typeof globalThis<"u"?globalThis:{};function Ik(){if(!M.createContext)return{};const t=d0[h0]??(d0[h0]=new Map);let e=t.get(M.createContext);return e||(e=M.createContext(null),t.set(M.createContext,e)),e}var Nl=Ik();function xk(t){const{children:e,context:n,serverState:r,store:i}=t,o=M.useMemo(()=>{const p=Ek(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),c=M.useMemo(()=>i.getState(),[i]);Ok(()=>{const{subscription:p}=o;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[o,c]);const d=n||Nl;return M.createElement(d.Provider,{value:o},e)}var Pk=xk;function Nb(t=Nl){return function(){return M.useContext(t)}}var hO=Nb();function dO(t=Nl){const e=t===Nl?hO:Nb(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var Mk=dO();function Dk(t=Nl){const e=t===Nl?Mk:dO(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var qs=Dk(),kk=(t,e)=>t===e;function Nk(t=Nl){const e=t===Nl?hO:Nb(t),n=(r,i={})=>{const{equalityFn:o=kk}=typeof i=="function"?{equalityFn:i}:i,c=e(),{store:d,subscription:p,getServerState:g}=c;M.useRef(!0);const _=M.useCallback({[r.name](C){return r(C)}}[r.name],[r]),E=_k.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,_,o);return M.useDebugValue(E),E};return Object.assign(n,{withTypes:()=>n}),n}var dr=Nk();const Lk=()=>{};var Qw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Uk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],d=t[n++],p=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},gO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,d=c?t[i+1]:0,p=i+2<t.length,g=p?t[i+2]:0,_=o>>2,E=(o&3)<<4|d>>4;let C=(d&15)<<2|g>>6,O=g&63;p||(O=64,c||(C=64)),r.push(n[_],n[E],n[C],n[O])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Uk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const g=i<t.length?n[t.charAt(i)]:64;++i;const E=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||d==null||g==null||E==null)throw new Vk;const C=o<<2|d>>4;if(r.push(C),g!==64){const O=d<<4&240|g>>2;if(r.push(O),E!==64){const I=g<<6&192|E;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jk=function(t){const e=pO(t);return gO.encodeByteArray(e,!0)},pm=function(t){return jk(t).replace(/\./g,"")},mO=function(t){try{return gO.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=()=>Fk().__FIREBASE_DEFAULTS__,Hk=()=>{if(typeof process>"u"||typeof Qw>"u")return;const t=Qw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mO(t[1]);return e&&JSON.parse(e)},iy=()=>{try{return Lk()||Bk()||Hk()||zk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yO=t=>{var e,n;return(n=(e=iy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qk=t=>{const e=yO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vO=()=>{var t;return(t=iy())===null||t===void 0?void 0:t.config},_O=t=>{var e;return(e=iy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $k=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){return t.endsWith(".cloudworkstations.dev")}async function bO(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pm(JSON.stringify(n)),pm(JSON.stringify(c)),""].join(".")}const cd={};function Wk(){const t={prod:[],emulator:[]};for(const e of Object.keys(cd))cd[e]?t.emulator.push(e):t.prod.push(e);return t}function Kk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xw=!1;function SO(t,e){if(typeof window>"u"||typeof document>"u"||!xf(window.location.host)||cd[t]===e||cd[t]||Xw)return;cd[t]=e;function n(C){return`__firebase__banner__${C}`}const r="__firebase__banner",o=Wk().prod.length>0;function c(){const C=document.getElementById(r);C&&C.remove()}function d(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,O){C.setAttribute("width","24"),C.setAttribute("id",O),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function g(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Xw=!0,c()},C}function _(C,O){C.setAttribute("id",O),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=Kk(r),O=n("text"),I=document.getElementById(O)||document.createElement("span"),k=n("learnmore"),D=document.getElementById(k)||document.createElement("a"),B=n("preprendIcon"),Y=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Q=C.element;d(Q),_(D,k);const L=g();p(Y,B),Q.append(Y,I,D,L),document.body.appendChild(Q)}o?(I.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zr())}function Qk(){var t;const e=(t=iy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eN(){const t=Zr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tN(){return!Qk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nN(){try{return typeof indexedDB=="object"}catch{return!1}}function rN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="FirebaseError";class To extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iN,Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hd.prototype.create)}}class Hd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?sN(o,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new To(i,d,r)}}function sN(t,e){return t.replace(aN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aN=/\{\$([^}]+)}/g;function oN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(Jw(o)&&Jw(c)){if(!Vc(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ed(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lN(t,e){const n=new cN(t,e);return n.subscribe.bind(n)}class cN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=p0),i.error===void 0&&(i.error=p0),i.complete===void 0&&(i.complete=p0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function p0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){return t&&t._delegate?t._delegate:t}class jc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $k;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dN(e))try{this.getOrInitializeService({instanceIdentifier:xc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xc){return this.instances.has(e)}getOptions(e=xc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xc){return this.component?this.component.multipleInstances?e:xc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hN(t){return t===xc?void 0:t}function dN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Lt||(Lt={}));const gN={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},mN=Lt.INFO,yN={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},vN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Lb=class{constructor(e){this.name=e,this._logLevel=mN,this._logHandler=vN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}};const _N=(t,e)=>e.some(n=>t instanceof n);let Zw,eT;function bN(){return Zw||(Zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SN(){return eT||(eT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EO=new WeakMap,p_=new WeakMap,wO=new WeakMap,g0=new WeakMap,Ub=new WeakMap;function EN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(Il(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&EO.set(n,t)}).catch(()=>{}),Ub.set(e,t),e}function wN(t){if(p_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});p_.set(t,e)}let g_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return p_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Il(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TN(t){g_=t(g_)}function CN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(m0(this),e,...n);return wO.set(r,e.sort?e.sort():[e]),Il(r)}:SN().includes(t)?function(...e){return t.apply(m0(this),e),Il(EO.get(this))}:function(...e){return Il(t.apply(m0(this),e))}}function AN(t){return typeof t=="function"?CN(t):(t instanceof IDBTransaction&&wN(t),_N(t,bN())?new Proxy(t,g_):t)}function Il(t){if(t instanceof IDBRequest)return EN(t);if(g0.has(t))return g0.get(t);const e=AN(t);return e!==t&&(g0.set(t,e),Ub.set(e,t)),e}const m0=t=>Ub.get(t);function RN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),d=Il(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Il(c.result),p.oldVersion,p.newVersion,Il(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),d.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const ON=["get","getKey","getAll","getAllKeys","count"],IN=["put","add","delete","clear"],y0=new Map;function tT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(y0.get(e))return y0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=IN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ON.includes(n)))return;const o=async function(c,...d){const p=this.transaction(c,i?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[n](...d),i&&p.done]))[0]};return y0.set(e,o),o}TN(t=>({...t,get:(e,n,r)=>tT(e,n)||t.get(e,n,r),has:(e,n)=>!!tT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const m_="@firebase/app",nT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Lb("@firebase/app"),MN="@firebase/app-compat",DN="@firebase/analytics-compat",kN="@firebase/analytics",NN="@firebase/app-check-compat",LN="@firebase/app-check",UN="@firebase/auth",VN="@firebase/auth-compat",jN="@firebase/database",FN="@firebase/data-connect",BN="@firebase/database-compat",HN="@firebase/functions",zN="@firebase/functions-compat",qN="@firebase/installations",$N="@firebase/installations-compat",GN="@firebase/messaging",WN="@firebase/messaging-compat",KN="@firebase/performance",YN="@firebase/performance-compat",QN="@firebase/remote-config",XN="@firebase/remote-config-compat",JN="@firebase/storage",ZN="@firebase/storage-compat",eL="@firebase/firestore",tL="@firebase/ai",nL="@firebase/firestore-compat",rL="firebase",iL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="[DEFAULT]",sL={[m_]:"fire-core",[MN]:"fire-core-compat",[kN]:"fire-analytics",[DN]:"fire-analytics-compat",[LN]:"fire-app-check",[NN]:"fire-app-check-compat",[UN]:"fire-auth",[VN]:"fire-auth-compat",[jN]:"fire-rtdb",[FN]:"fire-data-connect",[BN]:"fire-rtdb-compat",[HN]:"fire-fn",[zN]:"fire-fn-compat",[qN]:"fire-iid",[$N]:"fire-iid-compat",[GN]:"fire-fcm",[WN]:"fire-fcm-compat",[KN]:"fire-perf",[YN]:"fire-perf-compat",[QN]:"fire-rc",[XN]:"fire-rc-compat",[JN]:"fire-gcs",[ZN]:"fire-gcs-compat",[eL]:"fire-fst",[nL]:"fire-fst-compat",[tL]:"fire-vertex","fire-js":"fire-js",[rL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Map,aL=new Map,v_=new Map;function rT(t,e){try{t.container.addComponent(e)}catch(n){po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yf(t){const e=t.name;if(v_.has(e))return po.debug(`There were multiple attempts to register component ${e}.`),!1;v_.set(e,t);for(const n of gm.values())rT(n,t);for(const n of aL.values())rT(n,t);return!0}function Vb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ps(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xl=new Hd("app","Firebase",oL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=iL;function TO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:y_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw xl.create("bad-app-name",{appName:String(i)});if(n||(n=vO()),!n)throw xl.create("no-options");const o=gm.get(i);if(o){if(Vc(n,o.options)&&Vc(r,o.config))return o;throw xl.create("duplicate-app",{appName:i})}const c=new pN(i);for(const p of v_.values())c.addComponent(p);const d=new lL(n,r,c);return gm.set(i,d),d}function CO(t=y_){const e=gm.get(t);if(!e&&t===y_&&vO())return TO();if(!e)throw xl.create("no-app",{appName:t});return e}function Pl(t,e,n){var r;let i=(r=sL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),po.warn(d.join(" "));return}yf(new jc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="firebase-heartbeat-database",uL=1,_d="firebase-heartbeat-store";let v0=null;function AO(){return v0||(v0=RN(cL,uL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_d)}catch(n){console.warn(n)}}}}).catch(t=>{throw xl.create("idb-open",{originalErrorMessage:t.message})})),v0}async function fL(t){try{const n=(await AO()).transaction(_d),r=await n.objectStore(_d).get(RO(t));return await n.done,r}catch(e){if(e instanceof To)po.warn(e.message);else{const n=xl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});po.warn(n.message)}}}async function iT(t,e){try{const r=(await AO()).transaction(_d,"readwrite");await r.objectStore(_d).put(e,RO(t)),await r.done}catch(n){if(n instanceof To)po.warn(n.message);else{const r=xl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});po.warn(r.message)}}}function RO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=1024,dL=30;class pL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>dL){const c=yL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){po.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sT(),{heartbeatsToSend:r,unsentEntries:i}=gL(this._heartbeatsCache.heartbeats),o=pm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return po.warn(n),""}}}function sT(){return new Date().toISOString().substring(0,10)}function gL(t,e=hL){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),aT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),aT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nN()?rN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function aT(t){return pm(JSON.stringify({version:2,heartbeats:t})).length}function yL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t){yf(new jc("platform-logger",e=>new xN(e),"PRIVATE")),yf(new jc("heartbeat",e=>new pL(e),"PRIVATE")),Pl(m_,nT,t),Pl(m_,nT,"esm2017"),Pl("fire-js","")}vL("");function jb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _L=OO,IO=new Hd("auth","Firebase",OO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new Lb("@firebase/auth");function bL(t,...e){mm.logLevel<=Lt.WARN&&mm.warn(`Auth (${Pf}): ${t}`,...e)}function Hg(t,...e){mm.logLevel<=Lt.ERROR&&mm.error(`Auth (${Pf}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t,...e){throw Fb(t,...e)}function Sa(t,...e){return Fb(t,...e)}function xO(t,e,n){const r=Object.assign(Object.assign({},_L()),{[e]:n});return new Hd("auth","Firebase",r).create(e,{appName:t.name})}function co(t){return xO(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IO.create(t,...e)}function ft(t,e,...n){if(!t)throw Fb(e,...n)}function oo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hg(e),new Error(e)}function go(t,e){t||oo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SL(){return oT()==="http:"||oT()==="https:"}function oT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SL()||Jk()||"connection"in navigator)?navigator.onLine:!0}function wL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,go(n>e,"Short delay should be less than long delay!"),this.isMobile=Yk()||Zk()}get(){return EL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e){go(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AL=new qd(3e4,6e4);function Ql(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xl(t,e,n,r,i={}){return MO(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=zd(Object.assign({key:t.config.apiKey},c)).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const g=Object.assign({method:e,headers:p},o);return Xk()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&xf(t.emulatorConfig.host)&&(g.credentials="include"),PO.fetch()(await DO(t,t.config.apiHost,n,d),g)})}async function MO(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TL),e);try{const i=new OL(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw yg(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw yg(t,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw yg(t,"email-already-in-use",c);if(p==="USER_DISABLED")throw yg(t,"user-disabled",c);const _=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xO(t,_,g);Hs(t,_)}}catch(i){if(i instanceof To)throw i;Hs(t,"network-request-failed",{message:String(i)})}}async function $d(t,e,n,r,i={}){const o=await Xl(t,e,n,r,i);return"mfaPendingCredential"in o&&Hs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function DO(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?Bb(t.config,i):`${t.config.apiScheme}://${i}`;return CL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function RL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sa(this.auth,"network-request-failed")),AL.get())})}}function yg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sa(t,e,r);return i.customData._tokenResponse=n,i}function lT(t){return t!==void 0&&t.enterprise!==void 0}class IL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xL(t,e){return Xl(t,"GET","/v2/recaptchaConfig",Ql(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){return Xl(t,"POST","/v1/accounts:delete",e)}async function ym(t,e){return Xl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ML(t,e=!1){const n=ui(t),r=await n.getIdToken(e),i=Hb(r);ft(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ud(_0(i.auth_time)),issuedAtTime:ud(_0(i.iat)),expirationTime:ud(_0(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function _0(t){return Number(t)*1e3}function Hb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hg("JWT malformed, contained fewer than 3 sections"),null;try{const i=mO(n);return i?JSON.parse(i):(Hg("Failed to decode base64 JWT payload"),null)}catch(i){return Hg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function cT(t){const e=Hb(t);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof To&&DL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ud(this.lastLoginAt),this.creationTime=ud(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await bd(t,ym(n,{idToken:r}));ft(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kO(o.providerUserInfo):[],d=LL(t.providerData,c),p=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),_=p?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new b_(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,E)}async function NL(t){const e=ui(t);await vm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kO(t){return t.map(e=>{var{providerId:n}=e,r=jb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e){const n=await MO(t,{},async()=>{const r=zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await DO(t,i,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return t.emulatorConfig&&xf(t.emulatorConfig.host)&&(p.credentials="include"),PO.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VL(t,e){return Xl(t,"POST","/v2/accounts:revokeToken",Ql(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const n=cT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await UL(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new cf;return r&&(ft(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ft(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(ft(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cf,this.toJSON())}_performRefresh(){return oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t,e){ft(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=jb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new b_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bd(this,this.stsTokenManager.getToken(this.auth,e));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ML(this,e)}reload(){return NL(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await bd(this,PL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,c,d,p,g,_;const E=(r=n.displayName)!==null&&r!==void 0?r:void 0,C=(i=n.email)!==null&&i!==void 0?i:void 0,O=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,I=(c=n.photoURL)!==null&&c!==void 0?c:void 0,k=(d=n.tenantId)!==null&&d!==void 0?d:void 0,D=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,B=(g=n.createdAt)!==null&&g!==void 0?g:void 0,Y=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Q,emailVerified:L,isAnonymous:G,providerData:q,stsTokenManager:j}=n;ft(Q&&j,e,"internal-error");const N=cf.fromJSON(this.name,j);ft(typeof Q=="string",e,"internal-error"),bl(E,e.name),bl(C,e.name),ft(typeof L=="boolean",e,"internal-error"),ft(typeof G=="boolean",e,"internal-error"),bl(O,e.name),bl(I,e.name),bl(k,e.name),bl(D,e.name),bl(B,e.name),bl(Y,e.name);const U=new Fs({uid:Q,auth:e,email:C,emailVerified:L,displayName:E,isAnonymous:G,photoURL:I,phoneNumber:O,tenantId:k,stsTokenManager:N,createdAt:B,lastLoginAt:Y});return q&&Array.isArray(q)&&(U.providerData=q.map($=>Object.assign({},$))),D&&(U._redirectEventId=D),U}static async _fromIdTokenResponse(e,n,r=!1){const i=new cf;i.updateFromServerResponse(n);const o=new Fs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ft(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?kO(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),d=new cf;d.updateFromIdToken(r);const p=new Fs({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new b_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Map;function lo(t){go(t instanceof Function,"Expected a class definition");let e=uT.get(t);return e?(go(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NO.type="NONE";const fT=NO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e,n){return`firebase:${t}:${e}:${n}`}class uf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=zg(this.userKey,i.apiKey,o),this.fullPersistenceKey=zg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ym(this.auth,{idToken:e}).catch(()=>{});return n?Fs._fromGetAccountInfoResponse(this.auth,n,e):null}return Fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new uf(lo(fT),e,r);const i=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||lo(fT);const c=zg(r,e.config.apiKey,e.name);let d=null;for(const g of n)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const C=await ym(e,{idToken:_}).catch(()=>{});if(!C)break;E=await Fs._fromGetAccountInfoResponse(e,C,_)}else E=Fs._fromJSON(e,_);g!==o&&(d=E),o=g;break}}catch{}const p=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new uf(o,e,r):(o=p[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new uf(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BO(e))return"Blackberry";if(HO(e))return"Webos";if(UO(e))return"Safari";if((e.includes("chrome/")||VO(e))&&!e.includes("edge/"))return"Chrome";if(FO(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LO(t=Zr()){return/firefox\//i.test(t)}function UO(t=Zr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VO(t=Zr()){return/crios\//i.test(t)}function jO(t=Zr()){return/iemobile/i.test(t)}function FO(t=Zr()){return/android/i.test(t)}function BO(t=Zr()){return/blackberry/i.test(t)}function HO(t=Zr()){return/webos/i.test(t)}function zb(t=Zr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jL(t=Zr()){var e;return zb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FL(){return eN()&&document.documentMode===10}function zO(t=Zr()){return zb(t)||FO(t)||HO(t)||BO(t)||/windows phone/i.test(t)||jO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e=[]){let n;switch(t){case"Browser":n=hT(Zr());break;case"Worker":n=`${hT(Zr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,d)=>{try{const p=e(o);c(p)}catch(p){d(p)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t,e={}){return Xl(t,"GET","/v2/passwordPolicy",Ql(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=6;class qL{constructor(e){var n,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:zL,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsUppercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dT(this),this.idTokenSubscription=new dT(this),this.beforeStateQueue=new BL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lo(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await uf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ym(this,{idToken:e}),r=await Fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ps(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(co(this));const n=e?ui(e):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HL(this),n=new qL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lo(e)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await uf.create(this,[lo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qc(t){return ui(t)}class dT{constructor(e){this.auth=e,this.observer=null,this.addObserver=lN(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GL(t){sy=t}function $O(t){return sy.loadJS(t)}function WL(){return sy.recaptchaEnterpriseScript}function KL(){return sy.gapiScript}function YL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QL{constructor(){this.enterprise=new XL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class XL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const JL="recaptcha-enterprise",GO="NO_RECAPTCHA";class ZL{constructor(e){this.type=JL,this.auth=Qc(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{xL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new IL(p);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function i(o,c,d){const p=window.grecaptcha;lT(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(g=>{c(g)}).catch(()=>{c(GO)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QL().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!n&&lT(window.grecaptcha))i(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=WL();p.length!==0&&(p+=d),$O(p).then(()=>{i(d,o,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function pT(t,e,n,r=!1,i=!1){const o=new ZL(t);let c;if(i)c=GO;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function S_(t,e,n,r,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await pT(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await pT(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e){const n=Vb(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Vc(o,e??{}))return i;Hs(i,"already-initialized")}return n.initialize({options:e})}function t4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function n4(t,e,n){const r=Qc(t);ft(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=WO(e),{host:c,port:d}=r4(e),p=d===null?"":`:${d}`,g={url:`${o}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ft(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ft(Vc(g,r.config.emulator)&&Vc(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,xf(c)?(bO(`${o}//${c}${p}`),SO("Auth",!0)):i4()}function WO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r4(t){const e=WO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:gT(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:gT(c)}}}function gT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function i4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oo("not implemented")}_getIdTokenResponse(e){return oo("not implemented")}_linkToIdToken(e,n){return oo("not implemented")}_getReauthenticationResolver(e){return oo("not implemented")}}async function s4(t,e){return Xl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(t,e){return $d(t,"POST","/v1/accounts:signInWithPassword",Ql(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e){return $d(t,"POST","/v1/accounts:signInWithEmailLink",Ql(t,e))}async function l4(t,e){return $d(t,"POST","/v1/accounts:signInWithEmailLink",Ql(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends qb{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,n,"signInWithPassword",a4);case"emailLink":return o4(e,{email:this._email,oobCode:this._password});default:Hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,r,"signUpPassword",s4);case"emailLink":return l4(e,{idToken:n,email:this._email,oobCode:this._password});default:Hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t,e){return $d(t,"POST","/v1/accounts:signInWithIdp",Ql(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="http://localhost";class Fc extends qb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=jb(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Fc(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return ff(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ff(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ff(e,n)}buildRequest(){const e={requestUri:c4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f4(t){const e=Zh(ed(t)).link,n=e?Zh(ed(e)).deep_link_id:null,r=Zh(ed(t)).deep_link_id;return(r?Zh(ed(r)).link:null)||r||n||e||t}class $b{constructor(e){var n,r,i,o,c,d;const p=Zh(ed(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(r=p.oobCode)!==null&&r!==void 0?r:null,E=u4((i=p.mode)!==null&&i!==void 0?i:null);ft(g&&_&&E,"argument-error"),this.apiKey=g,this.operation=E,this.code=_,this.continueUrl=(o=p.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=f4(e);try{return new $b(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.providerId=Mf.PROVIDER_ID}static credential(e,n){return Sd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$b.parseLink(n);return ft(r,"argument-error"),Sd._fromEmailAndCode(e,r.code,r.tenantId)}}Mf.PROVIDER_ID="password";Mf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends KO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Gd{constructor(){super("facebook.com")}static credential(e){return Fc._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wl.credential(e.oauthAccessToken)}catch{return null}}}wl.FACEBOOK_SIGN_IN_METHOD="facebook.com";wl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fc._fromParams({providerId:Tl.PROVIDER_ID,signInMethod:Tl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tl.credentialFromTaggedObject(e)}static credentialFromError(e){return Tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tl.credential(n,r)}catch{return null}}}Tl.GOOGLE_SIGN_IN_METHOD="google.com";Tl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Gd{constructor(){super("github.com")}static credential(e){return Fc._fromParams({providerId:Cl.PROVIDER_ID,signInMethod:Cl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cl.credentialFromTaggedObject(e)}static credentialFromError(e){return Cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cl.credential(e.oauthAccessToken)}catch{return null}}}Cl.GITHUB_SIGN_IN_METHOD="github.com";Cl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Gd{constructor(){super("twitter.com")}static credential(e,n){return Fc._fromParams({providerId:Al.PROVIDER_ID,signInMethod:Al.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Al.credentialFromTaggedObject(e)}static credentialFromError(e){return Al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Al.credential(n,r)}catch{return null}}}Al.TWITTER_SIGN_IN_METHOD="twitter.com";Al.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(t,e){return $d(t,"POST","/v1/accounts:signUp",Ql(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Fs._fromIdTokenResponse(e,r,i),c=mT(r);return new Bc({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=mT(r);return new Bc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function mT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends To{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_m.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _m(e,n,r,i)}}function YO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_m._fromErrorAndOperation(t,o,e,r):o})}async function d4(t,e,n=!1){const r=await bd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e,n=!1){const{auth:r}=t;if(ps(r.app))return Promise.reject(co(r));const i="reauthenticate";try{const o=await bd(t,YO(r,i,e,t),n);ft(o.idToken,r,"internal-error");const c=Hb(o.idToken);ft(c,r,"internal-error");const{sub:d}=c;return ft(t.uid===d,r,"user-mismatch"),Bc._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Hs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e,n=!1){if(ps(t.app))return Promise.reject(co(t));const r="signIn",i=await YO(t,r,e),o=await Bc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function g4(t,e){return QO(Qc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t){const e=Qc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m4(t,e,n){if(ps(t.app))return Promise.reject(co(t));const r=Qc(t),c=await S_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",h4).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&XO(t),p}),d=await Bc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function y4(t,e,n){return ps(t.app)?Promise.reject(co(t)):g4(ui(t),Mf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XO(t),r})}function v4(t,e,n,r){return ui(t).onIdTokenChanged(e,n,r)}function _4(t,e,n){return ui(t).beforeAuthStateChanged(e,n)}function b4(t,e,n,r){return ui(t).onAuthStateChanged(e,n,r)}function S4(t){return ui(t).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=1e3,w4=10;class ZO extends JO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);FL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,w4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},E4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZO.type="LOCAL";const T4=ZO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends JO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eI.type="SESSION";const tI=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ay(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async g=>g(n.origin,o)),p=await C4(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ay.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((d,p)=>{const g=Gb("",20);i.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(E){const C=E;if(C.data.eventId===g)switch(C.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(C.data.response);break;default:clearTimeout(_),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(){return window}function R4(t){Ea().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return typeof Ea().WorkerGlobalScope<"u"&&typeof Ea().importScripts=="function"}async function O4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x4(){return nI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebaseLocalStorageDb",P4=1,Sm="firebaseLocalStorage",iI="fbase_key";class Wd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oy(t,e){return t.transaction([Sm],e?"readwrite":"readonly").objectStore(Sm)}function M4(){const t=indexedDB.deleteDatabase(rI);return new Wd(t).toPromise()}function E_(){const t=indexedDB.open(rI,P4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Sm,{keyPath:iI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Sm)?e(r):(r.close(),await M4(),e(await E_()))})})}async function yT(t,e,n){const r=oy(t,!0).put({[iI]:e,value:n});return new Wd(r).toPromise()}async function D4(t,e){const n=oy(t,!1).get(e),r=await new Wd(n).toPromise();return r===void 0?null:r.value}function vT(t,e){const n=oy(t,!0).delete(e);return new Wd(n).toPromise()}const k4=800,N4=3;class sI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await E_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>N4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ay._getInstance(x4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await O4(),!this.activeServiceWorker)return;this.sender=new A4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await E_();return await yT(e,bm,"1"),await vT(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>D4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=oy(i,!1).getAll();return new Wd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sI.type="LOCAL";const L4=sI;new qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t,e){return e?lo(e):(ft(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends qb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ff(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ff(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ff(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function V4(t){return QO(t.auth,new Wb(t),t.bypassAuthState)}function j4(t){const{auth:e,user:n}=t;return ft(n,e,"internal-error"),p4(n,new Wb(t),t.bypassAuthState)}async function F4(t){const{auth:e,user:n}=t;return ft(n,e,"internal-error"),d4(n,new Wb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V4;case"linkViaPopup":case"linkViaRedirect":return F4;case"reauthViaPopup":case"reauthViaRedirect":return j4;default:Hs(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new qd(2e3,1e4);class sf extends aI{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,sf.currentPopupAction&&sf.currentPopupAction.cancel(),sf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){go(this.filter.length===1,"Popup operations only handle one event");const e=Gb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B4.get())};e()}}sf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="pendingRedirect",qg=new Map;class z4 extends aI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qg.get(this.auth._key());if(!e){try{const r=await q4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qg.set(this.auth._key(),e)}return this.bypassAuthState||qg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q4(t,e){const n=W4(e),r=G4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function $4(t,e){qg.set(t._key(),e)}function G4(t){return lo(t._redirectPersistence)}function W4(t){return zg(H4,t.config.apiKey,t.name)}async function K4(t,e,n=!1){if(ps(t.app))return Promise.reject(co(t));const r=Qc(t),i=U4(r,e),c=await new z4(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=10*60*1e3;class Q4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y4&&this.cachedEventUids.clear(),this.cachedEventUids.has(_T(e))}saveEventToCache(e){this.cachedEventUids.add(_T(e)),this.lastProcessedEventTime=Date.now()}}function _T(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(t,e={}){return Xl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e3=/^https?/;async function t3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J4(t);for(const n of e)try{if(n3(n))return}catch{}Hs(t,"unauthorized-domain")}function n3(t){const e=__(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!e3.test(n))return!1;if(Z4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new qd(3e4,6e4);function bT(){const t=Ea().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i3(t){return new Promise((e,n)=>{var r,i,o;function c(){bT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bT(),n(Sa(t,"network-request-failed"))},timeout:r3.get()})}if(!((i=(r=Ea().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ea().gapi)===null||o===void 0)&&o.load)c();else{const d=YL("iframefcb");return Ea()[d]=()=>{gapi.load?c():n(Sa(t,"network-request-failed"))},$O(`${KL()}?onload=${d}`).catch(p=>n(p))}}).catch(e=>{throw $g=null,e})}let $g=null;function s3(t){return $g=$g||i3(t),$g}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=new qd(5e3,15e3),o3="__/auth/iframe",l3="emulator/auth/iframe",c3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f3(t){const e=t.config;ft(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bb(e,l3):`https://${t.config.authDomain}/${o3}`,r={apiKey:e.apiKey,appName:t.name,v:Pf},i=u3.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${zd(r).slice(1)}`}async function h3(t){const e=await s3(t),n=Ea().gapi;return ft(n,t,"internal-error"),e.open({where:document.body,url:f3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c3,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Sa(t,"network-request-failed"),d=Ea().setTimeout(()=>{o(c)},a3.get());function p(){Ea().clearTimeout(d),i(r)}r.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p3=500,g3=600,m3="_blank",y3="http://localhost";class ST{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v3(t,e,n,r=p3,i=g3){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},d3),{width:r.toString(),height:i.toString(),top:o,left:c}),g=Zr().toLowerCase();n&&(d=VO(g)?m3:n),LO(g)&&(e=e||y3,p.scrollbars="yes");const _=Object.entries(p).reduce((C,[O,I])=>`${C}${O}=${I},`,"");if(jL(g)&&d!=="_self")return _3(e||"",d),new ST(null);const E=window.open(e||"",d,_);ft(E,t,"popup-blocked");try{E.focus()}catch{}return new ST(E)}function _3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="__/auth/handler",S3="emulator/auth/handler",E3=encodeURIComponent("fac");async function ET(t,e,n,r,i,o){ft(t.config.authDomain,t,"auth-domain-config-required"),ft(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pf,eventId:i};if(e instanceof KO){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",oN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Gd){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await t._getAppCheckToken(),g=p?`#${E3}=${encodeURIComponent(p)}`:"";return`${w3(t)}?${zd(d).slice(1)}${g}`}function w3({config:t}){return t.emulator?Bb(t,S3):`https://${t.authDomain}/${b3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="webStorageSupport";class T3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=K4,this._overrideRedirectResult=$4}async _openPopup(e,n,r,i){var o;go((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await ET(e,n,r,__(),i);return v3(e,c,Gb())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await ET(e,n,r,__(),i);return R4(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(go(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h3(e),r=new Q4(e);return n.register("authEvent",i=>(ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(b0,{type:b0},i=>{var o;const c=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[b0];c!==void 0&&n(!!c),Hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zO()||UO()||zb()}}const C3=T3;var wT="@firebase/auth",TT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O3(t){yf(new jc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ft(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qO(t)},g=new $L(r,i,o,p);return t4(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yf(new jc("auth-internal",e=>{const n=Qc(e.getProvider("auth").getImmediate());return(r=>new A3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pl(wT,TT,R3(t)),Pl(wT,TT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=5*60,x3=_O("authIdTokenMaxAge")||I3;let CT=null;const P3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>x3)return;const i=n==null?void 0:n.token;CT!==i&&(CT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function M3(t=CO()){const e=Vb(t,"auth");if(e.isInitialized())return e.getImmediate();const n=e4(t,{popupRedirectResolver:C3,persistence:[L4,T4,tI]}),r=_O("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=P3(o.toString());_4(n,c,()=>c(n.currentUser)),v4(n,d=>c(d))}}const i=yO("auth");return i&&n4(n,`http://${i}`),n}function D3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Sa("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",D3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O3("Browser");var qh={},AT;function k3(){if(AT)return qh;AT=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.parse=c,qh.serialize=g;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function c(C,O){const I=new o,k=C.length;if(k<2)return I;const D=(O==null?void 0:O.decode)||_;let B=0;do{const Y=C.indexOf("=",B);if(Y===-1)break;const Q=C.indexOf(";",B),L=Q===-1?k:Q;if(Y>L){B=C.lastIndexOf(";",Y-1)+1;continue}const G=d(C,B,Y),q=p(C,Y,G),j=C.slice(G,q);if(I[j]===void 0){let N=d(C,Y+1,L),U=p(C,L,N);const $=D(C.slice(N,U));I[j]=$}B=L+1}while(B<k);return I}function d(C,O,I){do{const k=C.charCodeAt(O);if(k!==32&&k!==9)return O}while(++O<I);return I}function p(C,O,I){for(;O>I;){const k=C.charCodeAt(--O);if(k!==32&&k!==9)return O+1}return I}function g(C,O,I){const k=(I==null?void 0:I.encode)||encodeURIComponent;if(!t.test(C))throw new TypeError(`argument name is invalid: ${C}`);const D=k(O);if(!e.test(D))throw new TypeError(`argument val is invalid: ${O}`);let B=C+"="+D;if(!I)return B;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);B+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);B+="; Domain="+I.domain}if(I.path){if(!r.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);B+="; Path="+I.path}if(I.expires){if(!E(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);B+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(B+="; HttpOnly"),I.secure&&(B+="; Secure"),I.partitioned&&(B+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return B}function _(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function E(C){return i.call(C)==="[object Date]"}return qh}k3();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lI=t=>{throw TypeError(t)},N3=(t,e,n)=>e.has(t)||lI("Cannot "+n),S0=(t,e,n)=>(N3(t,e,"read from private field"),n?n.call(t):e.get(t)),L3=(t,e,n)=>e.has(t)?lI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),RT="popstate";function U3(t={}){function e(i,o){let{pathname:c="/",search:d="",hash:p=""}=Co(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Ed("",{pathname:c,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=i.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof o=="string"?o:Ll(o))}function r(i,o){An(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return j3(e,n,r,t)}function Ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function An(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V3(){return Math.random().toString(36).substring(2,10)}function OT(t,e){return{usr:t.state,key:t.key,idx:e}}function Ed(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Co(e):e,state:n,key:e&&e.key||r||V3()}}function Ll({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function j3(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function E(){d="POP";let D=_(),B=D==null?null:D-g;g=D,p&&p({action:d,location:k.location,delta:B})}function C(D,B){d="PUSH";let Y=Ed(k.location,D,B);n&&n(Y,D),g=_()+1;let Q=OT(Y,g),L=k.createHref(Y);try{c.pushState(Q,"",L)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(L)}o&&p&&p({action:d,location:k.location,delta:1})}function O(D,B){d="REPLACE";let Y=Ed(k.location,D,B);n&&n(Y,D),g=_();let Q=OT(Y,g),L=k.createHref(Y);c.replaceState(Q,"",L),o&&p&&p({action:d,location:k.location,delta:0})}function I(D){return cI(D)}let k={get action(){return d},get location(){return t(i,c)},listen(D){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(RT,E),p=D,()=>{i.removeEventListener(RT,E),p=null}},createHref(D){return e(i,D)},createURL:I,encodeLocation(D){let B=I(D);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:C,replace:O,go(D){return c.go(D)}};return k}function cI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ll(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var td,IT=class{constructor(t){if(L3(this,td,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(S0(this,td).has(t))return S0(this,td).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){S0(this,td).set(t,e)}};td=new WeakMap;var F3=new Set(["lazy","caseSensitive","path","id","index","children"]);function B3(t){return F3.has(t)}var H3=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function z3(t){return H3.has(t)}function q3(t){return t.index===!0}function Em(t,e,n=[],r={}){return t.map((i,o)=>{let c=[...n,String(o)],d=typeof i.id=="string"?i.id:c.join("-");if(Ot(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ot(!r[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),q3(i)){let p={...i,...e(i),id:d};return r[d]=p,p}else{let p={...i,...e(i),id:d,children:void 0};return r[d]=p,i.children&&(p.children=Em(i.children,e,c,r)),p}})}function Rl(t,e,n="/"){return Gg(t,e,n,!1)}function Gg(t,e,n,r){let i=typeof e=="string"?Co(e):e,o=Ci(i.pathname||"/",n);if(o==null)return null;let c=uI(t);G3(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=rU(o);d=tU(c[p],g,r)}return d}function $3(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function uI(t,e=[],n=[],r=""){let i=(o,c,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};p.relativePath.startsWith("/")&&(Ot(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let g=wa([r,p.relativePath]),_=n.concat(p);o.children&&o.children.length>0&&(Ot(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),uI(o.children,e,_,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:Z3(g,o.index),routesMeta:_})};return t.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,c);else for(let p of fI(o.path))i(o,c,p)}),e}function fI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=fI(r.join("/")),d=[];return d.push(...c.map(p=>p===""?o:[o,p].join("/"))),i&&d.push(...c),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function G3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var W3=/^:[\w-]+$/,K3=3,Y3=2,Q3=1,X3=10,J3=-2,xT=t=>t==="*";function Z3(t,e){let n=t.split("/"),r=n.length;return n.some(xT)&&(r+=J3),e&&(r+=Y3),n.filter(i=>!xT(i)).reduce((i,o)=>i+(W3.test(o)?K3:o===""?Q3:X3),r)}function eU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tU(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",E=wm({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),C=p.route;if(!E&&g&&n&&!r[r.length-1].route.index&&(E=wm({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(i,E.params),c.push({params:i,pathname:wa([o,E.pathname]),pathnameBase:aU(wa([o,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(o=wa([o,E.pathnameBase]))}return c}function wm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nU(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:E},C)=>{if(_==="*"){let I=d[C]||"";c=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const O=d[C];return E&&!O?g[_]=void 0:g[_]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:t}}function nU(t,e=!1,n=!0){An(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return An(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ci(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iU(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Co(t):t;return{pathname:n?n.startsWith("/")?n:sU(n,e):e,search:oU(r),hash:lU(i)}}function sU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function E0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ly(t){let e=hI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function cy(t,e,n,r=!1){let i;typeof t=="string"?i=Co(t):(i={...t},Ot(!i.pathname||!i.pathname.includes("?"),E0("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),E0("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),E0("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=n;else{let E=e.length-1;if(!r&&c.startsWith("..")){let C=c.split("/");for(;C[0]==="..";)C.shift(),E-=1;i.pathname=C.join("/")}d=E>=0?e[E]:"/"}let p=iU(i,d),g=c&&c!=="/"&&c.endsWith("/"),_=(o||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var wa=t=>t.join("/").replace(/\/\/+/g,"/"),aU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Tm=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function wd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var dI=["POST","PUT","PATCH","DELETE"],cU=new Set(dI),uU=["GET",...dI],fU=new Set(uU),hU=new Set([301,302,303,307,308]),dU=new Set([307,308]),w0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pU={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ju={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gU=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),pI="remix-router-transitions",gI=Symbol("ResetLoaderData");function mU(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ot(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||gU,o={},c=Em(t.routes,i,void 0,o),d,p=t.basename||"/",g=t.dataStrategy||SU,_={unstable_middleware:!1,...t.future},E=null,C=new Set,O=null,I=null,k=null,D=t.hydrationData!=null,B=Rl(c,t.history.location,p),Y=!1,Q=null,L;if(B==null&&!t.patchRoutesOnNavigation){let Z=ds(404,{pathname:t.history.location.pathname}),{matches:oe,route:ce}=HT(c);L=!0,B=oe,Q={[ce.id]:Z}}else if(B&&!t.hydrationData&&Cr(B,c,t.history.location.pathname).active&&(B=null),B)if(B.some(Z=>Z.route.lazy))L=!1;else if(!B.some(Z=>Z.route.loader))L=!0;else{let Z=t.hydrationData?t.hydrationData.loaderData:null,oe=t.hydrationData?t.hydrationData.errors:null;if(oe){let ce=B.findIndex(Te=>oe[Te.route.id]!==void 0);L=B.slice(0,ce+1).every(Te=>!T_(Te.route,Z,oe))}else L=B.every(ce=>!T_(ce.route,Z,oe))}else{L=!1,B=[];let Z=Cr(null,c,t.history.location.pathname);Z.active&&Z.matches&&(Y=!0,B=Z.matches)}let G,q={historyAction:t.history.action,location:t.history.location,matches:B,initialized:L,navigation:w0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||Q,fetchers:new Map,blockers:new Map},j="POP",N=!1,U,$=!1,T=new Map,ee=null,W=!1,ne=!1,Me=new Set,ie=new Map,te=0,Ce=-1,Le=new Map,K=new Set,pe=new Map,me=new Map,ve=new Set,Ne=new Map,Be,Ue=null;function It(){if(E=t.history.listen(({action:Z,location:oe,delta:ce})=>{if(Be){Be(),Be=void 0;return}An(Ne.size===0||ce!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Te=xi({currentLocation:q.location,nextLocation:oe,historyAction:Z});if(Te&&ce!=null){let Ie=new Promise(Fe=>{Be=Fe});t.history.go(ce*-1),ri(Te,{state:"blocked",location:oe,proceed(){ri(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:oe}),Ie.then(()=>t.history.go(ce))},reset(){let Fe=new Map(q.blockers);Fe.set(Te,Ju),Ft({blockers:Fe})}});return}return wn(Z,oe)}),n){MU(e,T);let Z=()=>DU(e,T);e.addEventListener("pagehide",Z),ee=()=>e.removeEventListener("pagehide",Z)}return q.initialized||wn("POP",q.location,{initialHydration:!0}),G}function mt(){E&&E(),ee&&ee(),C.clear(),U&&U.abort(),q.fetchers.forEach((Z,oe)=>$t(oe)),q.blockers.forEach((Z,oe)=>Qi(oe))}function gn(Z){return C.add(Z),()=>C.delete(Z)}function Ft(Z,oe={}){q={...q,...Z};let ce=[],Te=[];q.fetchers.forEach((Ie,Fe)=>{Ie.state==="idle"&&(ve.has(Fe)?ce.push(Fe):Te.push(Fe))}),ve.forEach(Ie=>{!q.fetchers.has(Ie)&&!ie.has(Ie)&&ce.push(Ie)}),[...C].forEach(Ie=>Ie(q,{deletedFetchers:ce,viewTransitionOpts:oe.viewTransitionOpts,flushSync:oe.flushSync===!0})),ce.forEach(Ie=>$t(Ie)),Te.forEach(Ie=>q.fetchers.delete(Ie))}function mn(Z,oe,{flushSync:ce}={}){var Ye,st;let Te=q.actionData!=null&&q.navigation.formMethod!=null&&qi(q.navigation.formMethod)&&q.navigation.state==="loading"&&((Ye=Z.state)==null?void 0:Ye._isRedirect)!==!0,Ie;oe.actionData?Object.keys(oe.actionData).length>0?Ie=oe.actionData:Ie=null:Te?Ie=q.actionData:Ie=null;let Fe=oe.loaderData?FT(q.loaderData,oe.loaderData,oe.matches||[],oe.errors):q.loaderData,Ze=q.blockers;Ze.size>0&&(Ze=new Map(Ze),Ze.forEach((We,tt)=>Ze.set(tt,Ju)));let He=N===!0||q.navigation.formMethod!=null&&qi(q.navigation.formMethod)&&((st=Z.state)==null?void 0:st._isRedirect)!==!0;d&&(c=d,d=void 0),W||j==="POP"||(j==="PUSH"?t.history.push(Z,Z.state):j==="REPLACE"&&t.history.replace(Z,Z.state));let $e;if(j==="POP"){let We=T.get(q.location.pathname);We&&We.has(Z.pathname)?$e={currentLocation:q.location,nextLocation:Z}:T.has(Z.pathname)&&($e={currentLocation:Z,nextLocation:q.location})}else if($){let We=T.get(q.location.pathname);We?We.add(Z.pathname):(We=new Set([Z.pathname]),T.set(q.location.pathname,We)),$e={currentLocation:q.location,nextLocation:Z}}Ft({...oe,actionData:Ie,loaderData:Fe,historyAction:j,location:Z,initialized:!0,navigation:w0,revalidation:"idle",restoreScrollPosition:_s(Z,oe.matches||q.matches),preventScrollReset:He,blockers:Ze},{viewTransitionOpts:$e,flushSync:ce===!0}),j="POP",N=!1,$=!1,W=!1,ne=!1,Ue==null||Ue.resolve(),Ue=null}async function On(Z,oe){if(typeof Z=="number"){t.history.go(Z);return}let ce=w_(q.location,q.matches,p,Z,oe==null?void 0:oe.fromRouteId,oe==null?void 0:oe.relative),{path:Te,submission:Ie,error:Fe}=PT(!1,ce,oe),Ze=q.location,He=Ed(q.location,Te,oe&&oe.state);He={...He,...t.history.encodeLocation(He)};let $e=oe&&oe.replace!=null?oe.replace:void 0,Ye="PUSH";$e===!0?Ye="REPLACE":$e===!1||Ie!=null&&qi(Ie.formMethod)&&Ie.formAction===q.location.pathname+q.location.search&&(Ye="REPLACE");let st=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,We=(oe&&oe.flushSync)===!0,tt=xi({currentLocation:Ze,nextLocation:He,historyAction:Ye});if(tt){ri(tt,{state:"blocked",location:He,proceed(){ri(tt,{state:"proceeding",proceed:void 0,reset:void 0,location:He}),On(Z,oe)},reset(){let Tt=new Map(q.blockers);Tt.set(tt,Ju),Ft({blockers:Tt})}});return}await wn(Ye,He,{submission:Ie,pendingError:Fe,preventScrollReset:st,replace:oe&&oe.replace,enableViewTransition:oe&&oe.viewTransition,flushSync:We})}function Ur(){Ue||(Ue=kU()),vs(),Ft({revalidation:"loading"});let Z=Ue.promise;return q.navigation.state==="submitting"?Z:q.navigation.state==="idle"?(wn(q.historyAction,q.location,{startUninterruptedRevalidation:!0}),Z):(wn(j||q.historyAction,q.navigation.location,{overrideNavigation:q.navigation,enableViewTransition:$===!0}),Z)}async function wn(Z,oe,ce){U&&U.abort(),U=null,j=Z,W=(ce&&ce.startUninterruptedRevalidation)===!0,hi(q.location,q.matches),N=(ce&&ce.preventScrollReset)===!0,$=(ce&&ce.enableViewTransition)===!0;let Te=d||c,Ie=ce&&ce.overrideNavigation,Fe=ce!=null&&ce.initialHydration&&q.matches&&q.matches.length>0&&!Y?q.matches:Rl(Te,oe,p),Ze=(ce&&ce.flushSync)===!0;if(Fe&&q.initialized&&!ne&&RU(q.location,oe)&&!(ce&&ce.submission&&qi(ce.submission.formMethod))){mn(oe,{matches:Fe},{flushSync:Ze});return}let He=Cr(Fe,Te,oe.pathname);if(He.active&&He.matches&&(Fe=He.matches),!Fe){let{error:Ht,notFoundMatches:xt,route:ke}=Xi(oe.pathname);mn(oe,{matches:xt,loaderData:{},errors:{[ke.id]:Ht}},{flushSync:Ze});return}U=new AbortController;let $e=Zu(t.history,oe,U.signal,ce&&ce.submission),Ye=new IT(t.unstable_getContext?await t.unstable_getContext():void 0),st;if(ce&&ce.pendingError)st=[Dc(Fe).route.id,{type:"error",error:ce.pendingError}];else if(ce&&ce.submission&&qi(ce.submission.formMethod)){let Ht=await Vr($e,oe,ce.submission,Fe,Ye,He.active,ce&&ce.initialHydration===!0,{replace:ce.replace,flushSync:Ze});if(Ht.shortCircuited)return;if(Ht.pendingActionResult){let[xt,ke]=Ht.pendingActionResult;if(zi(ke)&&wd(ke.error)&&ke.error.status===404){U=null,mn(oe,{matches:Ht.matches,loaderData:{},errors:{[xt]:ke.error}});return}}Fe=Ht.matches||Fe,st=Ht.pendingActionResult,Ie=T0(oe,ce.submission),Ze=!1,He.active=!1,$e=Zu(t.history,$e.url,$e.signal)}let{shortCircuited:We,matches:tt,loaderData:Tt,errors:Vt}=await ys($e,oe,Fe,Ye,He.active,Ie,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,Ze,st);We||(U=null,mn(oe,{matches:tt||Fe,...BT(st),loaderData:Tt,errors:Vt}))}async function Vr(Z,oe,ce,Te,Ie,Fe,Ze,He={}){vs();let $e=xU(oe,ce);if(Ft({navigation:$e},{flushSync:He.flushSync===!0}),Fe){let We=await In(Te,oe.pathname,Z.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){let tt=Dc(We.partialMatches).route.id;return{matches:We.partialMatches,pendingActionResult:[tt,{type:"error",error:We.error}]}}else if(We.matches)Te=We.matches;else{let{notFoundMatches:tt,error:Tt,route:Vt}=Xi(oe.pathname);return{matches:tt,pendingActionResult:[Vt.id,{type:"error",error:Tt}]}}}let Ye,st=nd(Te,oe);if(!st.route.action&&!st.route.lazy)Ye={type:"error",error:ds(405,{method:Z.method,pathname:oe.pathname,routeId:st.route.id})};else{let We=hf(i,o,Z,Te,st,Ze?[]:r,Ie),tt=await ti(Z,We,Ie,null);if(Ye=tt[st.route.id],!Ye){for(let Tt of Te)if(tt[Tt.route.id]){Ye=tt[Tt.route.id];break}}if(Z.signal.aborted)return{shortCircuited:!0}}if(kc(Ye)){let We;return He&&He.replace!=null?We=He.replace:We=UT(Ye.response.headers.get("Location"),new URL(Z.url),p)===q.location.pathname+q.location.search,await pr(Z,Ye,!0,{submission:ce,replace:We}),{shortCircuited:!0}}if(zi(Ye)){let We=Dc(Te,st.route.id);return(He&&He.replace)!==!0&&(j="PUSH"),{matches:Te,pendingActionResult:[We.route.id,Ye,st.route.id]}}return{matches:Te,pendingActionResult:[st.route.id,Ye]}}async function ys(Z,oe,ce,Te,Ie,Fe,Ze,He,$e,Ye,st,We){let tt=Fe||T0(oe,Ze),Tt=Ze||He||qT(tt),Vt=!W&&!Ye;if(Ie){if(Vt){let xn=Un(We);Ft({navigation:tt,...xn!==void 0?{actionData:xn}:{}},{flushSync:st})}let dt=await In(ce,oe.pathname,Z.signal);if(dt.type==="aborted")return{shortCircuited:!0};if(dt.type==="error"){let xn=Dc(dt.partialMatches).route.id;return{matches:dt.partialMatches,loaderData:{},errors:{[xn]:dt.error}}}else if(dt.matches)ce=dt.matches;else{let{error:xn,notFoundMatches:Fr,route:Br}=Xi(oe.pathname);return{matches:Fr,loaderData:{},errors:{[Br.id]:xn}}}}let Ht=d||c,{dsMatches:xt,revalidatingFetchers:ke}=MT(Z,Te,i,o,t.history,q,ce,Tt,oe,Ye?[]:r,Ye===!0,ne,Me,ve,pe,K,Ht,p,t.patchRoutesOnNavigation!=null,We);if(Ce=++te,!t.dataStrategy&&!xt.some(dt=>dt.shouldLoad)&&ke.length===0){let dt=Ii();return mn(oe,{matches:ce,loaderData:{},errors:We&&zi(We[1])?{[We[0]]:We[1].error}:null,...BT(We),...dt?{fetchers:new Map(q.fetchers)}:{}},{flushSync:st}),{shortCircuited:!0}}if(Vt){let dt={};if(!Ie){dt.navigation=tt;let xn=Un(We);xn!==void 0&&(dt.actionData=xn)}ke.length>0&&(dt.fetchers=wr(ke)),Ft(dt,{flushSync:st})}ke.forEach(dt=>{ni(dt.key),dt.controller&&ie.set(dt.key,dt.controller)});let di=()=>ke.forEach(dt=>ni(dt.key));U&&U.signal.addEventListener("abort",di);let{loaderResults:Vn,fetcherResults:nr}=await Ri(xt,ke,Z,Te);if(Z.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",di),ke.forEach(dt=>ie.delete(dt.key));let qn=vg(Vn);if(qn)return await pr(Z,qn.result,!0,{replace:$e}),{shortCircuited:!0};if(qn=vg(nr),qn)return K.add(qn.key),await pr(Z,qn.result,!0,{replace:$e}),{shortCircuited:!0};let{loaderData:Gt,errors:jr}=jT(q,ce,Vn,We,ke,nr);Ye&&q.errors&&(jr={...q.errors,...jr});let Ys=Ii(),jn=fi(Ce),rr=Ys||jn||ke.length>0;return{matches:ce,loaderData:Gt,errors:jr,...rr?{fetchers:new Map(q.fetchers)}:{}}}function Un(Z){if(Z&&!zi(Z[1]))return{[Z[0]]:Z[1].data};if(q.actionData)return Object.keys(q.actionData).length===0?null:q.actionData}function wr(Z){return Z.forEach(oe=>{let ce=q.fetchers.get(oe.key),Te=$h(void 0,ce?ce.data:void 0);q.fetchers.set(oe.key,Te)}),new Map(q.fetchers)}async function tr(Z,oe,ce,Te){ni(Z);let Ie=(Te&&Te.flushSync)===!0,Fe=d||c,Ze=w_(q.location,q.matches,p,ce,oe,Te==null?void 0:Te.relative),He=Rl(Fe,Ze,p),$e=Cr(He,Fe,Ze);if($e.active&&$e.matches&&(He=$e.matches),!He){rt(Z,oe,ds(404,{pathname:Ze}),{flushSync:Ie});return}let{path:Ye,submission:st,error:We}=PT(!0,Ze,Te);if(We){rt(Z,oe,We,{flushSync:Ie});return}let tt=nd(He,Ye),Tt=new IT(t.unstable_getContext?await t.unstable_getContext():void 0),Vt=(Te&&Te.preventScrollReset)===!0;if(st&&qi(st.formMethod)){await fn(Z,oe,Ye,tt,He,Tt,$e.active,Ie,Vt,st);return}pe.set(Z,{routeId:oe,path:Ye}),await Ct(Z,oe,Ye,tt,He,Tt,$e.active,Ie,Vt,st)}async function fn(Z,oe,ce,Te,Ie,Fe,Ze,He,$e,Ye){vs(),pe.delete(Z);function st(Jt){if(!Jt.route.action&&!Jt.route.lazy){let pi=ds(405,{method:Ye.formMethod,pathname:ce,routeId:oe});return rt(Z,oe,pi,{flushSync:He}),!0}return!1}if(!Ze&&st(Te))return;let We=q.fetchers.get(Z);Bt(Z,PU(Ye,We),{flushSync:He});let tt=new AbortController,Tt=Zu(t.history,ce,tt.signal,Ye);if(Ze){let Jt=await In(Ie,ce,Tt.signal,Z);if(Jt.type==="aborted")return;if(Jt.type==="error"){rt(Z,oe,Jt.error,{flushSync:He});return}else if(Jt.matches){if(Ie=Jt.matches,Te=nd(Ie,ce),st(Te))return}else{rt(Z,oe,ds(404,{pathname:ce}),{flushSync:He});return}}ie.set(Z,tt);let Vt=te,Ht=hf(i,o,Tt,Ie,Te,r,Fe),ke=(await ti(Tt,Ht,Fe,Z))[Te.route.id];if(Tt.signal.aborted){ie.get(Z)===tt&&ie.delete(Z);return}if(ve.has(Z)){if(kc(ke)||zi(ke)){Bt(Z,El(void 0));return}}else{if(kc(ke))if(ie.delete(Z),Ce>Vt){Bt(Z,El(void 0));return}else return K.add(Z),Bt(Z,$h(Ye)),pr(Tt,ke,!1,{fetcherSubmission:Ye,preventScrollReset:$e});if(zi(ke)){rt(Z,oe,ke.error);return}}let di=q.navigation.location||q.location,Vn=Zu(t.history,di,tt.signal),nr=d||c,qn=q.navigation.state!=="idle"?Rl(nr,q.navigation.location,p):q.matches;Ot(qn,"Didn't find any matches after fetcher action");let Gt=++te;Le.set(Z,Gt);let jr=$h(Ye,ke.data);q.fetchers.set(Z,jr);let{dsMatches:Ys,revalidatingFetchers:jn}=MT(Vn,Fe,i,o,t.history,q,qn,Ye,di,r,!1,ne,Me,ve,pe,K,nr,p,t.patchRoutesOnNavigation!=null,[Te.route.id,ke]);jn.filter(Jt=>Jt.key!==Z).forEach(Jt=>{let pi=Jt.key,es=q.fetchers.get(pi),ir=$h(void 0,es?es.data:void 0);q.fetchers.set(pi,ir),ni(pi),Jt.controller&&ie.set(pi,Jt.controller)}),Ft({fetchers:new Map(q.fetchers)});let rr=()=>jn.forEach(Jt=>ni(Jt.key));tt.signal.addEventListener("abort",rr);let{loaderResults:dt,fetcherResults:xn}=await Ri(Ys,jn,Vn,Fe);if(tt.signal.aborted)return;if(tt.signal.removeEventListener("abort",rr),Le.delete(Z),ie.delete(Z),jn.forEach(Jt=>ie.delete(Jt.key)),q.fetchers.has(Z)){let Jt=El(ke.data);q.fetchers.set(Z,Jt)}let Fr=vg(dt);if(Fr)return pr(Vn,Fr.result,!1,{preventScrollReset:$e});if(Fr=vg(xn),Fr)return K.add(Fr.key),pr(Vn,Fr.result,!1,{preventScrollReset:$e});let{loaderData:Br,errors:Pi}=jT(q,qn,dt,void 0,jn,xn);fi(Gt),q.navigation.state==="loading"&&Gt>Ce?(Ot(j,"Expected pending action"),U&&U.abort(),mn(q.navigation.location,{matches:qn,loaderData:Br,errors:Pi,fetchers:new Map(q.fetchers)})):(Ft({errors:Pi,loaderData:FT(q.loaderData,Br,qn,Pi),fetchers:new Map(q.fetchers)}),ne=!1)}async function Ct(Z,oe,ce,Te,Ie,Fe,Ze,He,$e,Ye){let st=q.fetchers.get(Z);Bt(Z,$h(Ye,st?st.data:void 0),{flushSync:He});let We=new AbortController,tt=Zu(t.history,ce,We.signal);if(Ze){let ke=await In(Ie,ce,tt.signal,Z);if(ke.type==="aborted")return;if(ke.type==="error"){rt(Z,oe,ke.error,{flushSync:He});return}else if(ke.matches)Ie=ke.matches,Te=nd(Ie,ce);else{rt(Z,oe,ds(404,{pathname:ce}),{flushSync:He});return}}ie.set(Z,We);let Tt=te,Vt=hf(i,o,tt,Ie,Te,r,Fe),xt=(await ti(tt,Vt,Fe,Z))[Te.route.id];if(ie.get(Z)===We&&ie.delete(Z),!tt.signal.aborted){if(ve.has(Z)){Bt(Z,El(void 0));return}if(kc(xt))if(Ce>Tt){Bt(Z,El(void 0));return}else{K.add(Z),await pr(tt,xt,!1,{preventScrollReset:$e});return}if(zi(xt)){rt(Z,oe,xt.error);return}Bt(Z,El(xt.data))}}async function pr(Z,oe,ce,{submission:Te,fetcherSubmission:Ie,preventScrollReset:Fe,replace:Ze}={}){oe.response.headers.has("X-Remix-Revalidate")&&(ne=!0);let He=oe.response.headers.get("Location");Ot(He,"Expected a Location header on the redirect Response"),He=UT(He,new URL(Z.url),p);let $e=Ed(q.location,He,{_isRedirect:!0});if(n){let Vt=!1;if(oe.response.headers.has("X-Remix-Reload-Document"))Vt=!0;else if(Kb.test(He)){const Ht=cI(He,!0);Vt=Ht.origin!==e.location.origin||Ci(Ht.pathname,p)==null}if(Vt){Ze?e.location.replace(He):e.location.assign(He);return}}U=null;let Ye=Ze===!0||oe.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:st,formAction:We,formEncType:tt}=q.navigation;!Te&&!Ie&&st&&We&&tt&&(Te=qT(q.navigation));let Tt=Te||Ie;if(dU.has(oe.response.status)&&Tt&&qi(Tt.formMethod))await wn(Ye,$e,{submission:{...Tt,formAction:He},preventScrollReset:Fe||N,enableViewTransition:ce?$:void 0});else{let Vt=T0($e,Te);await wn(Ye,$e,{overrideNavigation:Vt,fetcherSubmission:Ie,preventScrollReset:Fe||N,enableViewTransition:ce?$:void 0})}}async function ti(Z,oe,ce,Te){let Ie,Fe={};try{Ie=await EU(g,Z,oe,Te,ce,!1)}catch(Ze){return oe.filter(He=>He.shouldLoad).forEach(He=>{Fe[He.route.id]={type:"error",error:Ze}}),Fe}if(Z.signal.aborted)return Fe;for(let[Ze,He]of Object.entries(Ie))if(OU(He)){let $e=He.result;Fe[Ze]={type:"redirect",response:CU($e,Z,Ze,oe,p)}}else Fe[Ze]=await TU(He);return Fe}async function Ri(Z,oe,ce,Te){let Ie=ti(ce,Z,Te,null),Fe=Promise.all(oe.map(async $e=>{if($e.matches&&$e.match&&$e.request&&$e.controller){let st=(await ti($e.request,$e.matches,Te,$e.key))[$e.match.route.id];return{[$e.key]:st}}else return Promise.resolve({[$e.key]:{type:"error",error:ds(404,{pathname:$e.path})}})})),Ze=await Ie,He=(await Fe).reduce(($e,Ye)=>Object.assign($e,Ye),{});return{loaderResults:Ze,fetcherResults:He}}function vs(){ne=!0,pe.forEach((Z,oe)=>{ie.has(oe)&&Me.add(oe),ni(oe)})}function Bt(Z,oe,ce={}){q.fetchers.set(Z,oe),Ft({fetchers:new Map(q.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function rt(Z,oe,ce,Te={}){let Ie=Dc(q.matches,oe);$t(Z),Ft({errors:{[Ie.route.id]:ce},fetchers:new Map(q.fetchers)},{flushSync:(Te&&Te.flushSync)===!0})}function Xt(Z){return me.set(Z,(me.get(Z)||0)+1),ve.has(Z)&&ve.delete(Z),q.fetchers.get(Z)||pU}function $t(Z){let oe=q.fetchers.get(Z);ie.has(Z)&&!(oe&&oe.state==="loading"&&Le.has(Z))&&ni(Z),pe.delete(Z),Le.delete(Z),K.delete(Z),ve.delete(Z),Me.delete(Z),q.fetchers.delete(Z)}function Ws(Z){let oe=(me.get(Z)||0)-1;oe<=0?(me.delete(Z),ve.add(Z)):me.set(Z,oe),Ft({fetchers:new Map(q.fetchers)})}function ni(Z){let oe=ie.get(Z);oe&&(oe.abort(),ie.delete(Z))}function Oi(Z){for(let oe of Z){let ce=Xt(oe),Te=El(ce.data);q.fetchers.set(oe,Te)}}function Ii(){let Z=[],oe=!1;for(let ce of K){let Te=q.fetchers.get(ce);Ot(Te,`Expected fetcher: ${ce}`),Te.state==="loading"&&(K.delete(ce),Z.push(ce),oe=!0)}return Oi(Z),oe}function fi(Z){let oe=[];for(let[ce,Te]of Le)if(Te<Z){let Ie=q.fetchers.get(ce);Ot(Ie,`Expected fetcher: ${ce}`),Ie.state==="loading"&&(ni(ce),Le.delete(ce),oe.push(ce))}return Oi(oe),oe.length>0}function Tr(Z,oe){let ce=q.blockers.get(Z)||Ju;return Ne.get(Z)!==oe&&Ne.set(Z,oe),ce}function Qi(Z){q.blockers.delete(Z),Ne.delete(Z)}function ri(Z,oe){let ce=q.blockers.get(Z)||Ju;Ot(ce.state==="unblocked"&&oe.state==="blocked"||ce.state==="blocked"&&oe.state==="blocked"||ce.state==="blocked"&&oe.state==="proceeding"||ce.state==="blocked"&&oe.state==="unblocked"||ce.state==="proceeding"&&oe.state==="unblocked",`Invalid blocker state transition: ${ce.state} -> ${oe.state}`);let Te=new Map(q.blockers);Te.set(Z,oe),Ft({blockers:Te})}function xi({currentLocation:Z,nextLocation:oe,historyAction:ce}){if(Ne.size===0)return;Ne.size>1&&An(!1,"A router only supports one blocker at a time");let Te=Array.from(Ne.entries()),[Ie,Fe]=Te[Te.length-1],Ze=q.blockers.get(Ie);if(!(Ze&&Ze.state==="proceeding")&&Fe({currentLocation:Z,nextLocation:oe,historyAction:ce}))return Ie}function Xi(Z){let oe=ds(404,{pathname:Z}),ce=d||c,{matches:Te,route:Ie}=HT(ce);return{notFoundMatches:Te,route:Ie,error:oe}}function Ji(Z,oe,ce){if(O=Z,k=oe,I=ce||null,!D&&q.navigation===w0){D=!0;let Te=_s(q.location,q.matches);Te!=null&&Ft({restoreScrollPosition:Te})}return()=>{O=null,k=null,I=null}}function sn(Z,oe){return I&&I(Z,oe.map(Te=>$3(Te,q.loaderData)))||Z.key}function hi(Z,oe){if(O&&k){let ce=sn(Z,oe);O[ce]=k()}}function _s(Z,oe){if(O){let ce=sn(Z,oe),Te=O[ce];if(typeof Te=="number")return Te}return null}function Cr(Z,oe,ce){if(t.patchRoutesOnNavigation)if(Z){if(Object.keys(Z[0].params).length>0)return{active:!0,matches:Gg(oe,ce,p,!0)}}else return{active:!0,matches:Gg(oe,ce,p,!0)||[]};return{active:!1,matches:null}}async function In(Z,oe,ce,Te){if(!t.patchRoutesOnNavigation)return{type:"success",matches:Z};let Ie=Z;for(;;){let Fe=d==null,Ze=d||c,He=o;try{await t.patchRoutesOnNavigation({signal:ce,path:oe,matches:Ie,fetcherKey:Te,patch:(st,We)=>{ce.aborted||DT(st,We,Ze,He,i)}})}catch(st){return{type:"error",error:st,partialMatches:Ie}}finally{Fe&&!ce.aborted&&(c=[...c])}if(ce.aborted)return{type:"aborted"};let $e=Rl(Ze,oe,p);if($e)return{type:"success",matches:$e};let Ye=Gg(Ze,oe,p,!0);if(!Ye||Ie.length===Ye.length&&Ie.every((st,We)=>st.route.id===Ye[We].route.id))return{type:"success",matches:null};Ie=Ye}}function Zi(Z){o={},d=Em(Z,i,void 0,o)}function Ks(Z,oe){let ce=d==null;DT(Z,oe,d||c,o,i),ce&&(c=[...c],Ft({}))}return G={get basename(){return p},get future(){return _},get state(){return q},get routes(){return c},get window(){return e},initialize:It,subscribe:gn,enableScrollRestoration:Ji,navigate:On,fetch:tr,revalidate:Ur,createHref:Z=>t.history.createHref(Z),encodeLocation:Z=>t.history.encodeLocation(Z),getFetcher:Xt,deleteFetcher:Ws,dispose:mt,getBlocker:Tr,deleteBlocker:Qi,patchRoutes:Ks,_internalFetchControllers:ie,_internalSetRoutes:Zi},G}function yU(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function w_(t,e,n,r,i,o){let c,d;if(i){c=[];for(let g of e)if(c.push(g),g.route.id===i){d=g;break}}else c=e,d=e[e.length-1];let p=cy(r||".",ly(c),Ci(t.pathname,n)||t.pathname,o==="path");if(r==null&&(p.search=t.search,p.hash=t.hash),(r==null||r===""||r===".")&&d){let g=Yb(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let _=new URLSearchParams(p.search),E=_.getAll("index");_.delete("index"),E.filter(O=>O).forEach(O=>_.append("index",O));let C=_.toString();p.search=C?`?${C}`:""}}return n!=="/"&&(p.pathname=p.pathname==="/"?n:wa([n,p.pathname])),Ll(p)}function PT(t,e,n){if(!n||!yU(n))return{path:e};if(n.formMethod&&!IU(n.formMethod))return{path:e,error:ds(405,{method:n.formMethod})};let r=()=>({path:e,error:ds(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),c=SI(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!qi(o))return r();let E=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((C,[O,I])=>`${C}${O}=${I}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:E}}}else if(n.formEncType==="application/json"){if(!qi(o))return r();try{let E=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:c,formEncType:n.formEncType,formData:void 0,json:E,text:void 0}}}catch{return r()}}}Ot(typeof FormData=="function","FormData is not available in this environment");let d,p;if(n.formData)d=A_(n.formData),p=n.formData;else if(n.body instanceof FormData)d=A_(n.body),p=n.body;else if(n.body instanceof URLSearchParams)d=n.body,p=VT(d);else if(n.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(n.body),p=VT(d)}catch{return r()}let g={formMethod:o,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(qi(g.formMethod))return{path:e,submission:g};let _=Co(e);return t&&_.search&&Yb(_.search)&&d.append("index",""),_.search=`?${d}`,{path:Ll(_),submission:g}}function MT(t,e,n,r,i,o,c,d,p,g,_,E,C,O,I,k,D,B,Y,Q){var W;let L=Q?zi(Q[1])?Q[1].error:Q[1].data:void 0,G=i.createURL(o.location),q=i.createURL(p),j;if(_&&o.errors){let ne=Object.keys(o.errors)[0];j=c.findIndex(Me=>Me.route.id===ne)}else if(Q&&zi(Q[1])){let ne=Q[0];j=c.findIndex(Me=>Me.route.id===ne)-1}let N=Q?Q[1].statusCode:void 0,U=N&&N>=400,$={currentUrl:G,currentParams:((W=o.matches[0])==null?void 0:W.params)||{},nextUrl:q,nextParams:c[0].params,...d,actionResult:L,actionStatus:N},T=c.map((ne,Me)=>{let{route:ie}=ne,te=null;if(j!=null&&Me>j?te=!1:ie.lazy?te=!0:ie.loader==null?te=!1:_?te=T_(ie,o.loaderData,o.errors):vU(o.loaderData,o.matches[Me],ne)&&(te=!0),te!==null)return C_(n,r,t,ne,g,e,te);let Ce=U?!1:E||G.pathname+G.search===q.pathname+q.search||G.search!==q.search||_U(o.matches[Me],ne),Le={...$,defaultShouldRevalidate:Ce},K=Cm(ne,Le);return C_(n,r,t,ne,g,e,K,Le)}),ee=[];return I.forEach((ne,Me)=>{if(_||!c.some(ve=>ve.route.id===ne.routeId)||O.has(Me))return;let ie=o.fetchers.get(Me),te=ie&&ie.state!=="idle"&&ie.data===void 0,Ce=Rl(D,ne.path,B);if(!Ce){if(Y&&te)return;ee.push({key:Me,routeId:ne.routeId,path:ne.path,matches:null,match:null,request:null,controller:null});return}if(k.has(Me))return;let Le=nd(Ce,ne.path),K=new AbortController,pe=Zu(i,ne.path,K.signal),me=null;if(C.has(Me))C.delete(Me),me=hf(n,r,pe,Ce,Le,g,e);else if(te)E&&(me=hf(n,r,pe,Ce,Le,g,e));else{let ve={...$,defaultShouldRevalidate:U?!1:E};Cm(Le,ve)&&(me=hf(n,r,pe,Ce,Le,g,e,ve))}me&&ee.push({key:Me,routeId:ne.routeId,path:ne.path,matches:me,match:Le,request:pe,controller:K})}),{dsMatches:T,revalidatingFetchers:ee}}function T_(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function vU(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function _U(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Cm(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function DT(t,e,n,r,i){let o;if(t){let p=r[t];Ot(p,`No route found to patch children into: routeId = ${t}`),p.children||(p.children=[]),o=p.children}else o=n;let c=e.filter(p=>!o.some(g=>mI(p,g))),d=Em(c,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...d)}function mI(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>mI(n,o))}):!1}var kT=new WeakMap,yI=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(Ot(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[t];if(!o)return;let c=kT.get(i);c||(c={},kT.set(i,c));let d=c[t];if(d)return d;let p=(async()=>{let g=B3(t),E=i[t]!==void 0&&t!=="hasErrorBoundary";if(g)An(!g,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),c[t]=Promise.resolve();else if(E)An(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let C=await o();C!=null&&(Object.assign(i,{[t]:C}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(C=>C===void 0)&&(i.lazy=void 0))})();return c[t]=p,p},NT=new WeakMap;function bU(t,e,n,r,i){let o=n[t.id];if(Ot(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let _=NT.get(o);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let E=(async()=>{Ot(typeof t.lazy=="function","No lazy route function found");let C=await t.lazy(),O={};for(let I in C){let k=C[I];if(k===void 0)continue;let D=z3(I),Y=o[I]!==void 0&&I!=="hasErrorBoundary";D?An(!D,"Route property "+I+" is not a supported property to be returned from a lazy route function. This property will be ignored."):Y?An(!Y,`Route "${o.id}" has a static property "${I}" defined but its lazy function is also returning a value for this property. The lazy route property "${I}" will be ignored.`):O[I]=k}Object.assign(o,O),Object.assign(o,{...r(o),lazy:void 0})})();return NT.set(o,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(t.lazy),d=[],p;for(let _ of c){if(i&&i.includes(_))continue;let E=yI({key:_,route:t,manifest:n,mapRouteProperties:r});E&&(d.push(E),_===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function LT(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{n[e[o].route.id]=i}),n}async function SU(t){return t.matches.some(e=>e.route.unstable_middleware)?vI(t,!1,()=>LT(t),(e,n)=>({[n]:{type:"error",result:e}})):LT(t)}async function vI(t,e,n,r){let{matches:i,request:o,params:c,context:d}=t,p={handlerResult:void 0};try{let g=i.flatMap(E=>E.route.unstable_middleware?E.route.unstable_middleware.map(C=>[E.route.id,C]):[]),_=await _I({request:o,params:c,context:d},g,e,p,n);return e?_:p.handlerResult}catch(g){if(!p.middlewareError)throw g;let _=await r(p.middlewareError.error,p.middlewareError.routeId);return p.handlerResult?Object.assign(p.handlerResult,_):_}}async function _I(t,e,n,r,i,o=0){let{request:c}=t;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let d=e[o];if(!d)return r.handlerResult=await i(),r.handlerResult;let[p,g]=d,_=!1,E,C=async()=>{if(_)throw new Error("You may only call `next()` once per middleware");_=!0,await _I(t,e,n,r,i,o+1)};try{let O=await g({request:t.request,params:t.params,context:t.context},C);return _?O===void 0?E:O:C()}catch(O){throw r.middlewareError?r.middlewareError.error!==O&&(r.middlewareError={routeId:p,error:O}):r.middlewareError={routeId:p,error:O},O}}function bI(t,e,n,r,i){let o=yI({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),c=bU(r.route,qi(n.method)?"action":"loader",e,t,i);return{middleware:o,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function C_(t,e,n,r,i,o,c,d=null){let p=!1,g=bI(t,e,n,r,i);return{...r,_lazyPromises:g,shouldLoad:c,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(_){return p=!0,d?typeof _=="boolean"?Cm(r,{...d,defaultShouldRevalidate:_}):Cm(r,d):c},resolve(_){return p||c||_&&n.method==="GET"&&(r.route.lazy||r.route.loader)?wU({request:n,match:r,lazyHandlerPromise:g==null?void 0:g.handler,lazyRoutePromise:g==null?void 0:g.route,handlerOverride:_,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function hf(t,e,n,r,i,o,c,d=null){return r.map(p=>p.route.id!==i.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:bI(t,e,n,p,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:C_(t,e,n,p,o,c,!0,d))}async function EU(t,e,n,r,i,o){n.some(g=>{var _;return(_=g._lazyPromises)==null?void 0:_.middleware})&&await Promise.all(n.map(g=>{var _;return(_=g._lazyPromises)==null?void 0:_.middleware}));let c={request:e,params:n[0].params,context:i,matches:n},p=await t({...c,fetcherKey:r,unstable_runClientMiddleware:g=>{let _=c;return vI(_,!1,()=>g({..._,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(E,C)=>({[C]:{type:"error",result:E}}))}});try{await Promise.all(n.flatMap(g=>{var _,E;return[(_=g._lazyPromises)==null?void 0:_.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function wU({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:o}){let c,d,p=qi(t.method),g=p?"action":"loader",_=E=>{let C,O=new Promise((D,B)=>C=B);d=()=>C(),t.signal.addEventListener("abort",d);let I=D=>typeof E!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${e.route.id}]`)):E({request:t,params:e.params,context:o},...D!==void 0?[D]:[]),k=(async()=>{try{return{type:"data",result:await(i?i(B=>I(B)):I())}}catch(D){return{type:"error",result:D}}})();return Promise.race([k,O])};try{let E=p?e.route.action:e.route.loader;if(n||r)if(E){let C,[O]=await Promise.all([_(E).catch(I=>{C=I}),n,r]);if(C!==void 0)throw C;c=O}else{await n;let C=p?e.route.action:e.route.loader;if(C)[c]=await Promise.all([_(C),r]);else if(g==="action"){let O=new URL(t.url),I=O.pathname+O.search;throw ds(405,{method:t.method,pathname:I,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(E)c=await _(E);else{let C=new URL(t.url),O=C.pathname+C.search;throw ds(404,{pathname:O})}}catch(E){return{type:"error",result:E}}finally{d&&t.signal.removeEventListener("abort",d)}return c}async function TU(t){var r,i,o,c,d,p;let{result:e,type:n}=t;if(EI(e)){let g;try{let _=e.headers.get("Content-Type");_&&/\bapplication\/json\b/.test(_)?e.body==null?g=null:g=await e.json():g=await e.text()}catch(_){return{type:"error",error:_}}return n==="error"?{type:"error",error:new Tm(e.status,e.statusText,g),statusCode:e.status,headers:e.headers}:{type:"data",data:g,statusCode:e.status,headers:e.headers}}return n==="error"?zT(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Tm(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:wd(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:wd(e)?e.status:void 0}:zT(e)?{type:"data",data:e.data,statusCode:(d=e.init)==null?void 0:d.status,headers:(p=e.init)!=null&&p.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function CU(t,e,n,r,i){let o=t.headers.get("Location");if(Ot(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Kb.test(o)){let c=r.slice(0,r.findIndex(d=>d.route.id===n)+1);o=w_(new URL(e.url),c,i,o),t.headers.set("Location",o)}return t}function UT(t,e,n){if(Kb.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Ci(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Zu(t,e,n,r){let i=t.createURL(SI(e)).toString(),o={signal:n};if(r&&qi(r.formMethod)){let{formMethod:c,formEncType:d}=r;o.method=c.toUpperCase(),d==="application/json"?(o.headers=new Headers({"Content-Type":d}),o.body=JSON.stringify(r.json)):d==="text/plain"?o.body=r.text:d==="application/x-www-form-urlencoded"&&r.formData?o.body=A_(r.formData):o.body=r.formData}return new Request(i,o)}function A_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function VT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function AU(t,e,n,r=!1,i=!1){let o={},c=null,d,p=!1,g={},_=n&&zi(n[1])?n[1].error:void 0;return t.forEach(E=>{if(!(E.route.id in e))return;let C=E.route.id,O=e[C];if(Ot(!kc(O),"Cannot handle redirect results in processLoaderData"),zi(O)){let I=O.error;if(_!==void 0&&(I=_,_=void 0),c=c||{},i)c[C]=I;else{let k=Dc(t,C);c[k.route.id]==null&&(c[k.route.id]=I)}r||(o[C]=gI),p||(p=!0,d=wd(O.error)?O.error.status:500),O.headers&&(g[C]=O.headers)}else o[C]=O.data,O.statusCode&&O.statusCode!==200&&!p&&(d=O.statusCode),O.headers&&(g[C]=O.headers)}),_!==void 0&&n&&(c={[n[0]]:_},n[2]&&(o[n[2]]=void 0)),{loaderData:o,errors:c,statusCode:d||200,loaderHeaders:g}}function jT(t,e,n,r,i,o){let{loaderData:c,errors:d}=AU(e,n,r);return i.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:_,controller:E}=p,C=o[g];if(Ot(C,"Did not find corresponding fetcher result"),!(E&&E.signal.aborted))if(zi(C)){let O=Dc(t.matches,_==null?void 0:_.route.id);d&&d[O.route.id]||(d={...d,[O.route.id]:C.error}),t.fetchers.delete(g)}else if(kc(C))Ot(!1,"Unhandled fetcher revalidation redirect");else{let O=El(C.data);t.fetchers.set(g,O)}}),{loaderData:c,errors:d}}function FT(t,e,n,r){let i=Object.entries(e).filter(([,o])=>o!==gI).reduce((o,[c,d])=>(o[c]=d,o),{});for(let o of n){let c=o.route.id;if(!e.hasOwnProperty(c)&&t.hasOwnProperty(c)&&o.route.loader&&(i[c]=t[c]),r&&r.hasOwnProperty(c))break}return i}function BT(t){return t?zi(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Dc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function HT(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ds(t,{pathname:e,routeId:n,method:r,type:i,message:o}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return t===400?(c="Bad Request",r&&e&&n?d=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(d="Unable to encode submission body")):t===403?(c="Forbidden",d=`Route "${n}" does not match URL "${e}"`):t===404?(c="Not Found",d=`No route matches URL "${e}"`):t===405&&(c="Method Not Allowed",r&&e&&n?d=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(d=`Invalid request method "${r.toUpperCase()}"`)),new Tm(t||500,c,new Error(d),!0)}function vg(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(kc(i))return{key:r,result:i}}}function SI(t){let e=typeof t=="string"?Co(t):t;return Ll({...e,hash:""})}function RU(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function OU(t){return EI(t.result)&&hU.has(t.result.status)}function zi(t){return t.type==="error"}function kc(t){return(t&&t.type)==="redirect"}function zT(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function EI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function IU(t){return fU.has(t.toUpperCase())}function qi(t){return cU.has(t.toUpperCase())}function Yb(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function nd(t,e){let n=typeof e=="string"?Co(e).search:e.search;if(t[t.length-1].route.index&&Yb(n||""))return t[t.length-1];let r=hI(t);return r[r.length-1]}function qT(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:c}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:c,text:void 0}}}function T0(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function xU(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function $h(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PU(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function El(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function MU(t,e){try{let n=t.sessionStorage.getItem(pI);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function DU(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(pI,JSON.stringify(n))}catch(r){An(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function kU(){let t,e,n=new Promise((r,i)=>{t=async o=>{r(o);try{await n}catch{}},e=async o=>{i(o);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Xc=M.createContext(null);Xc.displayName="DataRouter";var Kd=M.createContext(null);Kd.displayName="DataRouterState";var Qb=M.createContext({isTransitioning:!1});Qb.displayName="ViewTransition";var wI=M.createContext(new Map);wI.displayName="Fetchers";var NU=M.createContext(null);NU.displayName="Await";var $s=M.createContext(null);$s.displayName="Navigation";var uy=M.createContext(null);uy.displayName="Location";var Gs=M.createContext({outlet:null,matches:[],isDataRoute:!1});Gs.displayName="Route";var Xb=M.createContext(null);Xb.displayName="RouteError";function LU(t,{relative:e}={}){Ot(Df(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext($s),{hash:i,pathname:o,search:c}=Yd(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:wa([n,o])),r.createHref({pathname:d,search:c,hash:i})}function Df(){return M.useContext(uy)!=null}function xa(){return Ot(Df(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(uy).location}var TI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CI(t){M.useContext($s).static||M.useLayoutEffect(t)}function kf(){let{isDataRoute:t}=M.useContext(Gs);return t?XU():UU()}function UU(){Ot(Df(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Xc),{basename:e,navigator:n}=M.useContext($s),{matches:r}=M.useContext(Gs),{pathname:i}=xa(),o=JSON.stringify(ly(r)),c=M.useRef(!1);return CI(()=>{c.current=!0}),M.useCallback((p,g={})=>{if(An(c.current,TI),!c.current)return;if(typeof p=="number"){n.go(p);return}let _=cy(p,JSON.parse(o),i,g.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:wa([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,o,i,t])}var VU=M.createContext(null);function jU(t){let e=M.useContext(Gs).outlet;return e&&M.createElement(VU.Provider,{value:t},e)}function Yd(t,{relative:e}={}){let{matches:n}=M.useContext(Gs),{pathname:r}=xa(),i=JSON.stringify(ly(n));return M.useMemo(()=>cy(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function FU(t,e,n,r){Ot(Df(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext($s),{matches:o}=M.useContext(Gs),c=o[o.length-1],d=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let B=_&&_.path||"";OI(p,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let E=xa(),C;C=E;let O=C.pathname||"/",I=O;if(g!=="/"){let B=g.replace(/^\//,"").split("/");I="/"+O.replace(/^\//,"").split("/").slice(B.length).join("/")}let k=Rl(t,{pathname:I});return An(_||k!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),An(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),$U(k&&k.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:wa([g,i.encodeLocation?i.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:wa([g,i.encodeLocation?i.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),o,n,r)}function BU(){let t=KU(),e=wd(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,c)}var HU=M.createElement(BU,null),zU=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(Gs.Provider,{value:this.props.routeContext},M.createElement(Xb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qU({routeContext:t,match:e,children:n}){let r=M.useContext(Xc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Gs.Provider,{value:t},n)}function $U(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let p=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);Ot(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,d=-1;if(n)for(let p=0;p<i.length;p++){let g=i[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:_,errors:E}=n,C=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||C){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((p,g,_)=>{let E,C=!1,O=null,I=null;n&&(E=o&&g.route.id?o[g.route.id]:void 0,O=g.route.errorElement||HU,c&&(d<0&&_===0?(OI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,I=null):d===_&&(C=!0,I=g.route.hydrateFallbackElement||null)));let k=e.concat(i.slice(0,_+1)),D=()=>{let B;return E?B=O:C?B=I:g.route.Component?B=M.createElement(g.route.Component,null):g.route.element?B=g.route.element:B=p,M.createElement(qU,{match:g,routeContext:{outlet:p,matches:k,isDataRoute:n!=null},children:B})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?M.createElement(zU,{location:n.location,revalidation:n.revalidation,component:O,error:E,children:D(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):D()},null)}function Jb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AI(t){let e=M.useContext(Xc);return Ot(e,Jb(t)),e}function RI(t){let e=M.useContext(Kd);return Ot(e,Jb(t)),e}function GU(t){let e=M.useContext(Gs);return Ot(e,Jb(t)),e}function Zb(t){let e=GU(t),n=e.matches[e.matches.length-1];return Ot(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function WU(){return Zb("useRouteId")}function KU(){var r;let t=M.useContext(Xb),e=RI("useRouteError"),n=Zb("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}var YU=0;function QU(t){let{router:e,basename:n}=AI("useBlocker"),r=RI("useBlocker"),[i,o]=M.useState(""),c=M.useCallback(d=>{if(typeof t!="function")return!!t;if(n==="/")return t(d);let{currentLocation:p,nextLocation:g,historyAction:_}=d;return t({currentLocation:{...p,pathname:Ci(p.pathname,n)||p.pathname},nextLocation:{...g,pathname:Ci(g.pathname,n)||g.pathname},historyAction:_})},[n,t]);return M.useEffect(()=>{let d=String(++YU);return o(d),()=>e.deleteBlocker(d)},[e]),M.useEffect(()=>{i!==""&&e.getBlocker(i,c)},[e,i,c]),i&&r.blockers.has(i)?r.blockers.get(i):Ju}function XU(){let{router:t}=AI("useNavigate"),e=Zb("useNavigate"),n=M.useRef(!1);return CI(()=>{n.current=!0}),M.useCallback(async(i,o={})=>{An(n.current,TI),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var $T={};function OI(t,e,n){!e&&!$T[t]&&($T[t]=!0,An(!1,n))}var GT={};function WT(t,e){!t&&!GT[e]&&(GT[e]=!0,console.warn(e))}function JU(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&An(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&An(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&An(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var ZU=["HydrateFallback","hydrateFallbackElement"],e6=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function t6({router:t,flushSync:e}){let[n,r]=M.useState(t.state),[i,o]=M.useState(),[c,d]=M.useState({isTransitioning:!1}),[p,g]=M.useState(),[_,E]=M.useState(),[C,O]=M.useState(),I=M.useRef(new Map),k=M.useCallback((Q,{deletedFetchers:L,flushSync:G,viewTransitionOpts:q})=>{Q.fetchers.forEach((N,U)=>{N.data!==void 0&&I.current.set(U,N.data)}),L.forEach(N=>I.current.delete(N)),WT(G===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let j=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(WT(q==null||j,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!q||!j){e&&G?e(()=>r(Q)):M.startTransition(()=>r(Q));return}if(e&&G){e(()=>{_&&(p&&p.resolve(),_.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:q.currentLocation,nextLocation:q.nextLocation})});let N=t.window.document.startViewTransition(()=>{e(()=>r(Q))});N.finished.finally(()=>{e(()=>{g(void 0),E(void 0),o(void 0),d({isTransitioning:!1})})}),e(()=>E(N));return}_?(p&&p.resolve(),_.skipTransition(),O({state:Q,currentLocation:q.currentLocation,nextLocation:q.nextLocation})):(o(Q),d({isTransitioning:!0,flushSync:!1,currentLocation:q.currentLocation,nextLocation:q.nextLocation}))},[t.window,e,_,p]);M.useLayoutEffect(()=>t.subscribe(k),[t,k]),M.useEffect(()=>{c.isTransitioning&&!c.flushSync&&g(new e6)},[c]),M.useEffect(()=>{if(p&&i&&t.window){let Q=i,L=p.promise,G=t.window.document.startViewTransition(async()=>{M.startTransition(()=>r(Q)),await L});G.finished.finally(()=>{g(void 0),E(void 0),o(void 0),d({isTransitioning:!1})}),E(G)}},[i,p,t.window]),M.useEffect(()=>{p&&i&&n.location.key===i.location.key&&p.resolve()},[p,_,n.location,i]),M.useEffect(()=>{!c.isTransitioning&&C&&(o(C.state),d({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),O(void 0))},[c.isTransitioning,C]);let D=M.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:Q=>t.navigate(Q),push:(Q,L,G)=>t.navigate(Q,{state:L,preventScrollReset:G==null?void 0:G.preventScrollReset}),replace:(Q,L,G)=>t.navigate(Q,{replace:!0,state:L,preventScrollReset:G==null?void 0:G.preventScrollReset})}),[t]),B=t.basename||"/",Y=M.useMemo(()=>({router:t,navigator:D,static:!1,basename:B}),[t,D,B]);return M.createElement(M.Fragment,null,M.createElement(Xc.Provider,{value:Y},M.createElement(Kd.Provider,{value:n},M.createElement(wI.Provider,{value:I.current},M.createElement(Qb.Provider,{value:c},M.createElement(s6,{basename:B,location:n.location,navigationType:n.historyAction,navigator:D},M.createElement(n6,{routes:t.routes,future:t.future,state:n})))))),null)}var n6=M.memo(r6);function r6({routes:t,future:e,state:n}){return FU(t,void 0,n,e)}function II({to:t,replace:e,state:n,relative:r}){Ot(Df(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext($s);An(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Gs),{pathname:c}=xa(),d=kf(),p=cy(t,ly(o),c,r==="path"),g=JSON.stringify(p);return M.useEffect(()=>{d(JSON.parse(g),{replace:e,state:n,relative:r})},[d,g,r,e,n]),null}function i6(t){return jU(t.context)}function s6({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Ot(!Df(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof n=="string"&&(n=Co(n));let{pathname:p="/",search:g="",hash:_="",state:E=null,key:C="default"}=n,O=M.useMemo(()=>{let I=Ci(p,c);return I==null?null:{location:{pathname:I,search:g,hash:_,state:E,key:C},navigationType:r}},[c,p,g,_,E,C,r]);return An(O!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:M.createElement($s.Provider,{value:d},M.createElement(uy.Provider,{children:e,value:O}))}var Wg="get",Kg="application/x-www-form-urlencoded";function fy(t){return t!=null&&typeof t.tagName=="string"}function a6(t){return fy(t)&&t.tagName.toLowerCase()==="button"}function o6(t){return fy(t)&&t.tagName.toLowerCase()==="form"}function l6(t){return fy(t)&&t.tagName.toLowerCase()==="input"}function c6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function u6(t,e){return t.button===0&&(!e||e==="_self")&&!c6(t)}function R_(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function f6(t,e){let n=R_(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var _g=null;function h6(){if(_g===null)try{new FormData(document.createElement("form"),0),_g=!1}catch{_g=!0}return _g}var d6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function C0(t){return t!=null&&!d6.has(t)?(An(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kg}"`),null):t}function p6(t,e){let n,r,i,o,c;if(o6(t)){let d=t.getAttribute("action");r=d?Ci(d,e):null,n=t.getAttribute("method")||Wg,i=C0(t.getAttribute("enctype"))||Kg,o=new FormData(t)}else if(a6(t)||l6(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(r=p?Ci(p,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Wg,i=C0(t.getAttribute("formenctype"))||C0(d.getAttribute("enctype"))||Kg,o=new FormData(d,t),!h6()){let{name:g,type:_,value:E}=t;if(_==="image"){let C=g?`${g}.`:"";o.append(`${C}x`,"0"),o.append(`${C}y`,"0")}else g&&o.append(g,E)}}else{if(fy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Wg,r=null,i=Kg,c=t}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:c}}function eS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function g6(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function m6(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function y6(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await g6(o,n);return c.links?c.links():[]}return[]}));return S6(r.flat(1).filter(m6).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function KT(t,e,n,r,i,o){let c=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,d=(p,g)=>{var _;return n[g].pathname!==p.pathname||((_=n[g].route.path)==null?void 0:_.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return o==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):o==="data"?e.filter((p,g)=>{var E;let _=r.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function v6(t,e,{includeHydrateFallback:n}={}){return _6(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function _6(t){return[...new Set(t)]}function b6(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function S6(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(b6(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var E6=new Set([100,101,204,205]);function w6(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ci(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function xI(){let t=M.useContext(Xc);return eS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function T6(){let t=M.useContext(Kd);return eS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tS=M.createContext(void 0);tS.displayName="FrameworkContext";function PI(){let t=M.useContext(tS);return eS(t,"You must render this element inside a <HydratedRouter> element"),t}function C6(t,e){let n=M.useContext(tS),[r,i]=M.useState(!1),[o,c]=M.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,C=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let k=B=>{B.forEach(Y=>{c(Y.isIntersecting)})},D=new IntersectionObserver(k,{threshold:.5});return C.current&&D.observe(C.current),()=>{D.disconnect()}}},[t]),M.useEffect(()=>{if(r){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[r]);let O=()=>{i(!0)},I=()=>{i(!1),c(!1)};return n?t!=="intent"?[o,C,{}]:[o,C,{onFocus:Gh(d,O),onBlur:Gh(p,I),onMouseEnter:Gh(g,O),onMouseLeave:Gh(_,I),onTouchStart:Gh(E,O)}]:[!1,C,{}]}function Gh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function A6({page:t,...e}){let{router:n}=xI(),r=M.useMemo(()=>Rl(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?M.createElement(O6,{page:t,matches:r,...e}):null}function R6(t){let{manifest:e,routeModules:n}=PI(),[r,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return y6(t,e,n).then(c=>{o||i(c)}),()=>{o=!0}},[t,e,n]),r}function O6({page:t,matches:e,...n}){let r=xa(),{manifest:i,routeModules:o}=PI(),{basename:c}=xI(),{loaderData:d,matches:p}=T6(),g=M.useMemo(()=>KT(t,e,p,i,r,"data"),[t,e,p,i,r]),_=M.useMemo(()=>KT(t,e,p,i,r,"assets"),[t,e,p,i,r]),E=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,k=!1;if(e.forEach(B=>{var Q;let Y=i.routes[B.route.id];!Y||!Y.hasLoader||(!g.some(L=>L.route.id===B.route.id)&&B.route.id in d&&((Q=o[B.route.id])!=null&&Q.shouldRevalidate)||Y.hasClientLoader?k=!0:I.add(B.route.id))}),I.size===0)return[];let D=w6(t,c);return k&&I.size>0&&D.searchParams.set("_routes",e.filter(B=>I.has(B.route.id)).map(B=>B.route.id).join(",")),[D.pathname+D.search]},[c,d,r,i,g,e,t,o]),C=M.useMemo(()=>v6(_,i),[_,i]),O=R6(_);return M.createElement(M.Fragment,null,E.map(I=>M.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),C.map(I=>M.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),O.map(({key:I,link:k})=>M.createElement("link",{key:I,...k})))}function I6(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var MI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MI&&(window.__reactRouterVersion="7.6.2")}catch{}function x6(t,e){return mU({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:U3({window:e==null?void 0:e.window}),hydrationData:P6(),routes:t,mapRouteProperties:JU,hydrationRouteProperties:ZU,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function P6(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:M6(t.errors)}),t}function M6(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Tm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let c=new o(i.message);c.stack="",n[r]=c}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var DI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nS=M.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:E,...C},O){let{basename:I}=M.useContext($s),k=typeof g=="string"&&DI.test(g),D,B=!1;if(typeof g=="string"&&k&&(D=g,MI))try{let U=new URL(window.location.href),$=g.startsWith("//")?new URL(U.protocol+g):new URL(g),T=Ci($.pathname,I);$.origin===U.origin&&T!=null?g=T+$.search+$.hash:B=!0}catch{An(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=LU(g,{relative:i}),[Q,L,G]=C6(r,C),q=L6(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:i,viewTransition:E});function j(U){e&&e(U),U.defaultPrevented||q(U)}let N=M.createElement("a",{...C,...G,href:D||Y,onClick:B||o?e:j,ref:I6(O,L),target:p,"data-discover":!k&&n==="render"?"true":void 0});return Q&&!k?M.createElement(M.Fragment,null,N,M.createElement(A6,{page:Y})):N});nS.displayName="Link";var D6=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:p,...g},_){let E=Yd(c,{relative:g.relative}),C=xa(),O=M.useContext(Kd),{navigator:I,basename:k}=M.useContext($s),D=O!=null&&B6(E)&&d===!0,B=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,Y=C.pathname,Q=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),Q=Q?Q.toLowerCase():null,B=B.toLowerCase()),Q&&k&&(Q=Ci(Q,k)||Q);const L=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let G=Y===B||!i&&Y.startsWith(B)&&Y.charAt(L)==="/",q=Q!=null&&(Q===B||!i&&Q.startsWith(B)&&Q.charAt(B.length)==="/"),j={isActive:G,isPending:q,isTransitioning:D},N=G?e:void 0,U;typeof r=="function"?U=r(j):U=[r,G?"active":null,q?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(j):o;return M.createElement(nS,{...g,"aria-current":N,className:U,ref:_,style:$,to:c,viewTransition:d},typeof p=="function"?p(j):p)});D6.displayName="NavLink";var k6=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:c=Wg,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:E,...C},O)=>{let I=j6(),k=F6(d,{relative:g}),D=c.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&DI.test(d),Y=Q=>{if(p&&p(Q),Q.defaultPrevented)return;Q.preventDefault();let L=Q.nativeEvent.submitter,G=(L==null?void 0:L.getAttribute("formmethod"))||c;I(L||Q.currentTarget,{fetcherKey:e,method:G,navigate:n,replace:i,state:o,relative:g,preventScrollReset:_,viewTransition:E})};return M.createElement("form",{ref:O,method:D,action:k,onSubmit:r?p:Y,...C,"data-discover":!B&&t==="render"?"true":void 0})});k6.displayName="Form";function N6(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kI(t){let e=M.useContext(Xc);return Ot(e,N6(t)),e}function L6(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:c}={}){let d=kf(),p=xa(),g=Yd(t,{relative:o});return M.useCallback(_=>{if(u6(_,e)){_.preventDefault();let E=n!==void 0?n:Ll(p)===Ll(g);d(t,{replace:E,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[p,d,g,n,r,e,t,i,o,c])}function rS(t){An(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(R_(t)),n=M.useRef(!1),r=xa(),i=M.useMemo(()=>f6(r.search,n.current?null:e.current),[r.search]),o=kf(),c=M.useCallback((d,p)=>{const g=R_(typeof d=="function"?d(i):d);n.current=!0,o("?"+g,p)},[o,i]);return[i,c]}var U6=0,V6=()=>`__${String(++U6)}__`;function j6(){let{router:t}=kI("useSubmit"),{basename:e}=M.useContext($s),n=WU();return M.useCallback(async(r,i={})=>{let{action:o,method:c,encType:d,formData:p,body:g}=p6(r,e);if(i.navigate===!1){let _=i.fetcherKey||V6();await t.fetch(_,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:g,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:g,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function F6(t,{relative:e}={}){let{basename:n}=M.useContext($s),r=M.useContext(Gs);Ot(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Yd(t||".",{relative:e})},c=xa();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let _=d.toString();o.search=_?`?${_}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:wa([n,o.pathname])),Ll(o)}function B6(t,e={}){let n=M.useContext(Qb);Ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kI("useViewTransitionState"),i=Yd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ci(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Ci(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wm(i.pathname,c)!=null||wm(i.pathname,o)!=null}[...E6];const H6=(t,e,n,r)=>{var o,c,d,p;const i=[n,{code:e,...r||{}}];if((c=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&c.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Uc(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(p=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&p.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},YT={},O_=(t,e,n,r)=>{Uc(n)&&YT[n]||(Uc(n)&&(YT[n]=new Date),H6(t,e,n,r))},NI=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},I_=(t,e,n)=>{t.loadNamespaces(e,NI(t,n))},QT=(t,e,n,r)=>{if(Uc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return I_(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,NI(t,r))},z6=(t,e,n={})=>!e.languages||!e.languages.length?(O_(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{var o;if(((o=n.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Uc=t=>typeof t=="string",q6=t=>typeof t=="object"&&t!==null,$6=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,G6={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},W6=t=>G6[t],K6=t=>t.replace($6,W6);let x_={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:K6};const Y6=(t={})=>{x_={...x_,...t}},Q6=()=>x_;let LI;const X6=t=>{LI=t},J6=()=>LI,Z6={type:"3rdParty",init(t){Y6(t.options.react),X6(t)}},eV=M.createContext();class tV{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const nV=(t,e)=>{const n=M.useRef();return M.useEffect(()=>{n.current=t},[t,e]),n.current},UI=(t,e,n,r)=>t.getFixedT(e,n,r),rV=(t,e,n,r)=>M.useCallback(UI(t,e,n,r),[t,e,n,r]),Ln=(t,e={})=>{var L,G,q,j;const{i18n:n}=e,{i18n:r,defaultNS:i}=M.useContext(eV)||{},o=n||r||J6();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new tV),!o){O_(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const N=($,T)=>Uc(T)?T:q6(T)&&Uc(T.defaultValue)?T.defaultValue:Array.isArray($)?$[$.length-1]:$,U=[N,{},!1];return U.t=N,U.i18n={},U.ready=!1,U}(L=o.options.react)!=null&&L.wait&&O_(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...Q6(),...o.options.react,...e},{useSuspense:d,keyPrefix:p}=c;let g=i||((G=o.options)==null?void 0:G.defaultNS);g=Uc(g)?[g]:g||["translation"],(j=(q=o.reportNamespaces).addUsedNamespaces)==null||j.call(q,g);const _=(o.isInitialized||o.initializedStoreOnce)&&g.every(N=>z6(N,o,c)),E=rV(o,e.lng||null,c.nsMode==="fallback"?g:g[0],p),C=()=>E,O=()=>UI(o,e.lng||null,c.nsMode==="fallback"?g:g[0],p),[I,k]=M.useState(C);let D=g.join();e.lng&&(D=`${e.lng}${D}`);const B=nV(D),Y=M.useRef(!0);M.useEffect(()=>{const{bindI18n:N,bindI18nStore:U}=c;Y.current=!0,!_&&!d&&(e.lng?QT(o,e.lng,g,()=>{Y.current&&k(O)}):I_(o,g,()=>{Y.current&&k(O)})),_&&B&&B!==D&&Y.current&&k(O);const $=()=>{Y.current&&k(O)};return N&&(o==null||o.on(N,$)),U&&(o==null||o.store.on(U,$)),()=>{Y.current=!1,o&&(N==null||N.split(" ").forEach(T=>o.off(T,$))),U&&o&&U.split(" ").forEach(T=>o.store.off(T,$))}},[o,D]),M.useEffect(()=>{Y.current&&_&&k(C)},[o,p,_]);const Q=[I,o,_];if(Q.t=I,Q.i18n=o,Q.ready=_,_||!_&&!d)return Q;throw new Promise(N=>{e.lng?QT(o,e.lng,g,()=>N()):I_(o,g,()=>N())})},iV="_BlockUI_1m4vb_1",sV={BlockUI:iV},aV=()=>F.jsx("div",{className:sV.BlockUI,children:F.jsx(VP,{size:"3x"})});M.memo(aV);const kn=Object.freeze({DEFAULT:"DEFAULT",DANGER:"DANGER",PRIMARY:"PRIMARY",SUCCESS:"SUCCESS"}),oV="_Button_1o78h_1",lV={Button:oV},cV=t=>{const{category:e=kn.DEFAULT,children:n,className:r="",icon:i=null,textOnly:o=!1,...c}=t;return F.jsxs("button",{className:`${lV.Button} ${r}`,"data-category":e,"data-text-only":o,"data-has-icon":i!=null,...c,children:[i,n]})},_n=M.memo(cV),uV=(t,e)=>Object.keys(e).forEach(n=>{const{extraReducers:r=()=>null}=e[n];r(t)}),bg=(t,e)=>Object.keys(t).map(n=>t[n][e]).reduce((n,r)=>({...n,...r}),{});function Pr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var fV=typeof Symbol=="function"&&Symbol.observable||"@@observable",XT=fV,A0=()=>Math.random().toString(36).substring(7).split("").join("."),hV={INIT:`@@redux/INIT${A0()}`,REPLACE:`@@redux/REPLACE${A0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${A0()}`},Am=hV;function iS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function VI(t,e,n){if(typeof t!="function")throw new Error(Pr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pr(1));return n(VI)(t,e)}let r=t,i=e,o=new Map,c=o,d=0,p=!1;function g(){c===o&&(c=new Map,o.forEach((D,B)=>{c.set(B,D)}))}function _(){if(p)throw new Error(Pr(3));return i}function E(D){if(typeof D!="function")throw new Error(Pr(4));if(p)throw new Error(Pr(5));let B=!0;g();const Y=d++;return c.set(Y,D),function(){if(B){if(p)throw new Error(Pr(6));B=!1,g(),c.delete(Y),o=null}}}function C(D){if(!iS(D))throw new Error(Pr(7));if(typeof D.type>"u")throw new Error(Pr(8));if(typeof D.type!="string")throw new Error(Pr(17));if(p)throw new Error(Pr(9));try{p=!0,i=r(i,D)}finally{p=!1}return(o=c).forEach(Y=>{Y()}),D}function O(D){if(typeof D!="function")throw new Error(Pr(10));r=D,C({type:Am.REPLACE})}function I(){const D=E;return{subscribe(B){if(typeof B!="object"||B===null)throw new Error(Pr(11));function Y(){const L=B;L.next&&L.next(_())}return Y(),{unsubscribe:D(Y)}},[XT](){return this}}}return C({type:Am.INIT}),{dispatch:C,subscribe:E,getState:_,replaceReducer:O,[XT]:I}}function dV(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Am.INIT})>"u")throw new Error(Pr(12));if(typeof n(void 0,{type:Am.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pr(13))})}function pV(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const c=e[o];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let i;try{dV(n)}catch(o){i=o}return function(c={},d){if(i)throw i;let p=!1;const g={};for(let _=0;_<r.length;_++){const E=r[_],C=n[E],O=c[E],I=C(O,d);if(typeof I>"u")throw d&&d.type,new Error(Pr(14));g[E]=I,p=p||I!==O}return p=p||r.length!==Object.keys(c).length,p?g:c}}function Rm(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function gV(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Pr(15))};const c={getState:i.getState,dispatch:(p,...g)=>o(p,...g)},d=t.map(p=>p(c));return o=Rm(...d)(i.dispatch),{...i,dispatch:o}}}function mV(t){return iS(t)&&"type"in t&&typeof t.type=="string"}var jI=Symbol.for("immer-nothing"),JT=Symbol.for("immer-draftable"),Gi=Symbol.for("immer-state");function js(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var vf=Object.getPrototypeOf;function Hc(t){return!!t&&!!t[Gi]}function mo(t){var e;return t?FI(t)||Array.isArray(t)||!!t[JT]||!!((e=t.constructor)!=null&&e[JT])||dy(t)||py(t):!1}var yV=Object.prototype.constructor.toString();function FI(t){if(!t||typeof t!="object")return!1;const e=vf(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===yV}function Om(t,e){hy(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function hy(t){const e=t[Gi];return e?e.type_:Array.isArray(t)?1:dy(t)?2:py(t)?3:0}function P_(t,e){return hy(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function BI(t,e,n){const r=hy(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function vV(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function dy(t){return t instanceof Map}function py(t){return t instanceof Set}function Pc(t){return t.copy_||t.base_}function M_(t,e){if(dy(t))return new Map(t);if(py(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=FI(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Gi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const c=i[o],d=r[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[c]})}return Object.create(vf(t),r)}else{const r=vf(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function sS(t,e=!1){return gy(t)||Hc(t)||!mo(t)||(hy(t)>1&&(t.set=t.add=t.clear=t.delete=_V),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>sS(r,!0))),t}function _V(){js(2)}function gy(t){return Object.isFrozen(t)}var bV={};function zc(t){const e=bV[t];return e||js(0,t),e}var Td;function HI(){return Td}function SV(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ZT(t,e){e&&(zc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function D_(t){k_(t),t.drafts_.forEach(EV),t.drafts_=null}function k_(t){t===Td&&(Td=t.parent_)}function eC(t){return Td=SV(Td,t)}function EV(t){const e=t[Gi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tC(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Gi].modified_&&(D_(e),js(4)),mo(t)&&(t=Im(e,t),e.parent_||xm(e,t)),e.patches_&&zc("Patches").generateReplacementPatches_(n[Gi].base_,t,e.patches_,e.inversePatches_)):t=Im(e,n,[]),D_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==jI?t:void 0}function Im(t,e,n){if(gy(e))return e;const r=e[Gi];if(!r)return Om(e,(i,o)=>nC(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return xm(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,c=!1;r.type_===3&&(o=new Set(i),i.clear(),c=!0),Om(o,(d,p)=>nC(t,r,i,d,p,n,c)),xm(t,i,!1),n&&t.patches_&&zc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function nC(t,e,n,r,i,o,c){if(Hc(i)){const d=o&&e&&e.type_!==3&&!P_(e.assigned_,r)?o.concat(r):void 0,p=Im(t,i,d);if(BI(n,r,p),Hc(p))t.canAutoFreeze_=!1;else return}else c&&n.add(i);if(mo(i)&&!gy(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Im(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&xm(t,i)}}function xm(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&sS(e,n)}function wV(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:HI(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=aS;n&&(i=[r],o=Cd);const{revoke:c,proxy:d}=Proxy.revocable(i,o);return r.draft_=d,r.revoke_=c,d}var aS={get(t,e){if(e===Gi)return t;const n=Pc(t);if(!P_(n,e))return TV(t,n,e);const r=n[e];return t.finalized_||!mo(r)?r:r===R0(t.base_,e)?(O0(t),t.copy_[e]=L_(r,t)):r},has(t,e){return e in Pc(t)},ownKeys(t){return Reflect.ownKeys(Pc(t))},set(t,e,n){const r=zI(Pc(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=R0(Pc(t),e),o=i==null?void 0:i[Gi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(vV(n,i)&&(n!==void 0||P_(t.base_,e)))return!0;O0(t),N_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return R0(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,O0(t),N_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Pc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){js(11)},getPrototypeOf(t){return vf(t.base_)},setPrototypeOf(){js(12)}},Cd={};Om(aS,(t,e)=>{Cd[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Cd.deleteProperty=function(t,e){return Cd.set.call(this,t,e,void 0)};Cd.set=function(t,e,n){return aS.set.call(this,t[0],e,n,t[0])};function R0(t,e){const n=t[Gi];return(n?Pc(n):t)[e]}function TV(t,e,n){var i;const r=zI(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function zI(t,e){if(!(e in t))return;let n=vf(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=vf(n)}}function N_(t){t.modified_||(t.modified_=!0,t.parent_&&N_(t.parent_))}function O0(t){t.copy_||(t.copy_=M_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var CV=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const c=this;return function(p=o,...g){return c.produce(p,_=>n.call(this,_,...g))}}typeof n!="function"&&js(6),r!==void 0&&typeof r!="function"&&js(7);let i;if(mo(e)){const o=eC(this),c=L_(e,void 0);let d=!0;try{i=n(c),d=!1}finally{d?D_(o):k_(o)}return ZT(o,r),tC(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===jI&&(i=void 0),this.autoFreeze_&&sS(i,!0),r){const o=[],c=[];zc("Patches").generateReplacementPatches_(e,i,o,c),r(o,c)}return i}else js(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let r,i;return[this.produce(e,n,(c,d)=>{r=c,i=d}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){mo(t)||js(8),Hc(t)&&(t=AV(t));const e=eC(this),n=L_(t,void 0);return n[Gi].isManual_=!0,k_(e),n}finishDraft(t,e){const n=t&&t[Gi];(!n||!n.isManual_)&&js(9);const{scope_:r}=n;return ZT(r,e),tC(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=zc("Patches").applyPatches_;return Hc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function L_(t,e){const n=dy(t)?zc("MapSet").proxyMap_(t,e):py(t)?zc("MapSet").proxySet_(t,e):wV(t,e);return(e?e.scope_:HI()).drafts_.push(n),n}function AV(t){return Hc(t)||js(10,t),qI(t)}function qI(t){if(!mo(t)||gy(t))return t;const e=t[Gi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=M_(t,e.scope_.immer_.useStrictShallowCopy_)}else n=M_(t,!0);return Om(n,(r,i)=>{BI(n,r,qI(i))}),e&&(e.finalized_=!1),n}var Wi=new CV,$I=Wi.produce;Wi.produceWithPatches.bind(Wi);Wi.setAutoFreeze.bind(Wi);Wi.setUseStrictShallowCopy.bind(Wi);Wi.applyPatches.bind(Wi);Wi.createDraft.bind(Wi);Wi.finishDraft.bind(Wi);function GI(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var RV=GI(),OV=GI,IV=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Rm:Rm.apply(null,arguments)},xV=t=>t&&typeof t.match=="function";function fd(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(uo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>mV(r)&&r.type===t,n}var WI=class rd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,rd.prototype)}static get[Symbol.species](){return rd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new rd(...e[0].concat(this)):new rd(...e.concat(this))}};function rC(t){return mo(t)?$I(t,()=>{}):t}function Sg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function PV(t){return typeof t=="boolean"}var MV=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let c=new WI;return n&&(PV(n)?c.push(RV):c.push(OV(n.extraArgument))),c},DV="RTK_autoBatch",iC=t=>e=>{setTimeout(e,t)},kV=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,c=!1;const d=new Set,p=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:iC(10):t.type==="callback"?t.queueNotification:iC(t.timeout),g=()=>{c=!1,o&&(o=!1,d.forEach(_=>_()))};return Object.assign({},r,{subscribe(_){const E=()=>i&&_(),C=r.subscribe(E);return d.add(_),()=>{C(),d.delete(_)}},dispatch(_){var E;try{return i=!((E=_==null?void 0:_.meta)!=null&&E[DV]),o=!i,o&&(c||(c=!0,p(g))),r.dispatch(_)}finally{i=!0}}})},NV=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new WI(t);return r&&i.push(kV(typeof r=="object"?r:void 0)),i};function LV(t){const e=MV(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:c=void 0}=t||{};let d;if(typeof n=="function")d=n;else if(iS(n))d=pV(n);else throw new Error(uo(1));let p;typeof r=="function"?p=r(e):p=e();let g=Rm;i&&(g=IV({trace:!1,...typeof i=="object"&&i}));const _=gV(...p),E=NV(_);let C=typeof c=="function"?c(E):E();const O=g(...C);return VI(d,o,O)}function KI(t){const e={},n=[];let r;const i={addCase(o,c){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(uo(28));if(d in e)throw new Error(uo(29));return e[d]=c,i},addMatcher(o,c){return n.push({matcher:o,reducer:c}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function UV(t){return typeof t=="function"}function VV(t,e){let[n,r,i]=KI(e),o;if(UV(t))o=()=>rC(t());else{const d=rC(t);o=()=>d}function c(d=o(),p){let g=[n[p.type],...r.filter(({matcher:_})=>_(p)).map(({reducer:_})=>_)];return g.filter(_=>!!_).length===0&&(g=[i]),g.reduce((_,E)=>{if(E)if(Hc(_)){const O=E(_,p);return O===void 0?_:O}else{if(mo(_))return $I(_,C=>E(C,p));{const C=E(_,p);if(C===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return _},d)}return c.getInitialState=o,c}var jV=(t,e)=>xV(t)?t.match(e):t(e);function oS(...t){return e=>t.some(n=>jV(n,e))}function YI(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",r=e.indexOf(t.meta.requestStatus)>-1;return n&&r}function QI(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function XI(...t){return t.length===0?e=>YI(e,["rejected"]):QI(t)?oS(...t.map(e=>e.rejected)):XI()(t[0])}function JI(...t){return t.length===0?e=>YI(e,["fulfilled"]):QI(t)?oS(...t.map(e=>e.fulfilled)):JI()(t[0])}var FV="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",BV=(t=21)=>{let e="",n=t;for(;n--;)e+=FV[Math.random()*64|0];return e},HV=["name","message","stack","code"],I0=class{constructor(t,e){r0(this,"_type");this.payload=t,this.meta=e}},sC=class{constructor(t,e){r0(this,"_type");this.payload=t,this.meta=e}},zV=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of HV)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},aC="External signal was aborted",yo=(()=>{function t(e,n,r){const i=fd(e+"/fulfilled",(p,g,_,E)=>({payload:p,meta:{...E||{},arg:_,requestId:g,requestStatus:"fulfilled"}})),o=fd(e+"/pending",(p,g,_)=>({payload:void 0,meta:{..._||{},arg:g,requestId:p,requestStatus:"pending"}})),c=fd(e+"/rejected",(p,g,_,E,C)=>({payload:E,error:(r&&r.serializeError||zV)(p||"Rejected"),meta:{...C||{},arg:_,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(_,E,C)=>{const O=r!=null&&r.idGenerator?r.idGenerator(p):BV(),I=new AbortController;let k,D;function B(Q){D=Q,I.abort()}g&&(g.aborted?B(aC):g.addEventListener("abort",()=>B(aC),{once:!0}));const Y=async function(){var G,q;let Q;try{let j=(G=r==null?void 0:r.condition)==null?void 0:G.call(r,p,{getState:E,extra:C});if($V(j)&&(j=await j),j===!1||I.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const N=new Promise((U,$)=>{k=()=>{$({name:"AbortError",message:D||"Aborted"})},I.signal.addEventListener("abort",k)});_(o(O,p,(q=r==null?void 0:r.getPendingMeta)==null?void 0:q.call(r,{requestId:O,arg:p},{getState:E,extra:C}))),Q=await Promise.race([N,Promise.resolve(n(p,{dispatch:_,getState:E,extra:C,requestId:O,signal:I.signal,abort:B,rejectWithValue:(U,$)=>new I0(U,$),fulfillWithValue:(U,$)=>new sC(U,$)})).then(U=>{if(U instanceof I0)throw U;return U instanceof sC?i(U.payload,O,p,U.meta):i(U,O,p)})])}catch(j){Q=j instanceof I0?c(null,O,p,j.payload,j.meta):c(j,O,p)}finally{k&&I.signal.removeEventListener("abort",k)}return r&&!r.dispatchConditionRejection&&c.match(Q)&&Q.meta.condition||_(Q),Q}();return Object.assign(Y,{abort:B,requestId:O,arg:p,unwrap(){return Y.then(qV)}})}}return Object.assign(d,{pending:o,rejected:c,fulfilled:i,settled:oS(c,i),typePrefix:e})}return t.withTypes=()=>t,t})();function qV(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function $V(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var GV=Symbol.for("rtk-slice-createasyncthunk");function WV(t,e){return`${t}/${e}`}function KV({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[GV];return function(i){const{name:o,reducerPath:c=o}=i;if(!o)throw new Error(uo(11));const d=(typeof i.reducers=="function"?i.reducers(XV()):i.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(L,G){const q=typeof L=="string"?L:L.type;if(!q)throw new Error(uo(12));if(q in g.sliceCaseReducersByType)throw new Error(uo(13));return g.sliceCaseReducersByType[q]=G,_},addMatcher(L,G){return g.sliceMatchers.push({matcher:L,reducer:G}),_},exposeAction(L,G){return g.actionCreators[L]=G,_},exposeCaseReducer(L,G){return g.sliceCaseReducersByName[L]=G,_}};p.forEach(L=>{const G=d[L],q={reducerName:L,type:WV(o,L),createNotation:typeof i.reducers=="function"};ZV(G)?t9(q,G,_,e):JV(q,G,_)});function E(){const[L={},G=[],q=void 0]=typeof i.extraReducers=="function"?KI(i.extraReducers):[i.extraReducers],j={...L,...g.sliceCaseReducersByType};return VV(i.initialState,N=>{for(let U in j)N.addCase(U,j[U]);for(let U of g.sliceMatchers)N.addMatcher(U.matcher,U.reducer);for(let U of G)N.addMatcher(U.matcher,U.reducer);q&&N.addDefaultCase(q)})}const C=L=>L,O=new Map,I=new WeakMap;let k;function D(L,G){return k||(k=E()),k(L,G)}function B(){return k||(k=E()),k.getInitialState()}function Y(L,G=!1){function q(N){let U=N[L];return typeof U>"u"&&G&&(U=Sg(I,q,B)),U}function j(N=C){const U=Sg(O,G,()=>new WeakMap);return Sg(U,N,()=>{const $={};for(const[T,ee]of Object.entries(i.selectors??{}))$[T]=YV(ee,N,()=>Sg(I,N,B),G);return $})}return{reducerPath:L,getSelectors:j,get selectors(){return j(q)},selectSlice:q}}const Q={name:o,reducer:D,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:B,...Y(c),injectInto(L,{reducerPath:G,...q}={}){const j=G??c;return L.inject({reducerPath:j,reducer:D},q),{...Q,...Y(j,!0)}}};return Q}}function YV(t,e,n,r){function i(o,...c){let d=e(o);return typeof d>"u"&&r&&(d=n()),t(d,...c)}return i.unwrapped=t,i}var QV=KV();function XV(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function JV({type:t,reducerName:e,createNotation:n},r,i){let o,c;if("reducer"in r){if(n&&!e9(r))throw new Error(uo(17));o=r.reducer,c=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,c?fd(t,c):fd(t))}function ZV(t){return t._reducerDefinitionType==="asyncThunk"}function e9(t){return t._reducerDefinitionType==="reducerWithPrepare"}function t9({type:t,reducerName:e},n,r,i){if(!i)throw new Error(uo(18));const{payloadCreator:o,fulfilled:c,pending:d,rejected:p,settled:g,options:_}=n,E=i(t,o,_);r.exposeAction(e,E),c&&r.addCase(E.fulfilled,c),d&&r.addCase(E.pending,d),p&&r.addCase(E.rejected,p),g&&r.addMatcher(E.settled,g),r.exposeCaseReducer(e,{fulfilled:c||Eg,pending:d||Eg,rejected:p||Eg,settled:g||Eg})}function Eg(){}function uo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const wg=Object.freeze({INITIAL_STATE:"initialState",ASYNC_THUNK:"asyncThunk",REDUCERS:"reducers",EXTRA_REDUCERS:"extraReducers",SELECTORS:"selectors"}),lS=t=>{const{sliceName:e,sliceParts:n}=t,r=bg(n,wg.INITIAL_STATE),i=QV({name:e,initialState:r,reducers:bg(n,wg.REDUCERS),extraReducers(d){uV(d,n)}}),o={...i.actions,...bg(n,wg.ASYNC_THUNK)},c={...bg(n,wg.SELECTORS)};return{reducer:i.reducer,actions:o,selectors:c}},n9="growl",r9={growls:[]},i9={addGrowl:(t,e)=>{t.growls.push(e.payload)},removeGrowl:(t,e)=>{t.growls=t.growls.filter(n=>n.id!==e.payload)},clearAllGrowls:t=>{t.growls=[]}},s9={selectAllGrowls:t=>t.growls.growls},a9={initialState:r9,reducers:i9,selectors:s9},o9=Object.freeze(Object.defineProperty({__proto__:null,Growl:a9},Symbol.toStringTag,{value:"Module"})),Ad=lS({sliceName:n9,sliceParts:o9}),Qd="songs",_t=Object.freeze({IDLE:"idle",LOADING:"loading",SUCCEEDED:"succeeded",FAILED:"failed"}),Ao="melo-chart-song-updates",Qe=Object.freeze({UPDATE_CHART_CHANGES_LOG:"update-chart-changes-log",UPDATE_CHART_REQUEST_CHANGES:"update-chart-request-changes",ADD_PITCH_ABOVE:"add-pitch-above",ADD_PITCH_BELOW:"add-pitch-below",ADD_NOTE_BEFORE:"add-note-before",ADD_NOTE_AFTER:"add-note-after",REMOVE_PITCH:"remove-pitch",REMOVE_NOTE:"remove-note",UPDATE_SONG_TITLE:"update-song-title",UPDATE_NOTE_CHUNK_TEXT:"update-note-chunk-text",UPDATE_NOTE_CHUNK_POSITION:"update-note-chunk-position",UPDATE_CHART_GENERATE_BY_LYRICS:"update-chart-generate-by-lyrics",UPDATE_CHART_TRIM:"update-chart-trim",UPDATE_CHART_SHARED_WITH:"update-chart-shared-with",UPDATE_CHART_ADD_MULTIPLE_PITCHES:"update-chart-add-multiple-pitches",UPDATE_CHART_ADD_MULTIPLE_NOTES:"update-chart-add-multiple-notes"});var l9="firebase",c9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pl(l9,c9,"app");const u9={apiKey:"AIzaSyCrUUG-1lrbf5iZXLtswHQTa9H-7wb8bho",authDomain:"melo-chart.firebaseapp.com",projectId:"melo-chart",storageBucket:"melo-chart.firebasestorage.app",messagingSenderId:"218674893122",appId:"1:218674893122:web:5669423f50d704d8ad38db"},cS=TO(u9),my=M3(cS),f9=async(t,e)=>{const{user:n}=await y4(my,t,e);return n},h9=async()=>{await S4(my)},d9=async(t,e)=>{const{user:n}=await m4(my,t,e);return n},p9=Object.freeze(Object.defineProperty({__proto__:null,auth:my,signIn:f9,signOut:h9,signUp:d9},Symbol.toStringTag,{value:"Module"}));var oC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ml,ZI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function U(){}U.prototype=N.prototype,j.D=N.prototype,j.prototype=new U,j.prototype.constructor=j,j.C=function($,T,ee){for(var W=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)W[ne-2]=arguments[ne];return N.prototype[T].apply($,W)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,N,U){U||(U=0);var $=Array(16);if(typeof N=="string")for(var T=0;16>T;++T)$[T]=N.charCodeAt(U++)|N.charCodeAt(U++)<<8|N.charCodeAt(U++)<<16|N.charCodeAt(U++)<<24;else for(T=0;16>T;++T)$[T]=N[U++]|N[U++]<<8|N[U++]<<16|N[U++]<<24;N=j.g[0],U=j.g[1],T=j.g[2];var ee=j.g[3],W=N+(ee^U&(T^ee))+$[0]+3614090360&4294967295;N=U+(W<<7&4294967295|W>>>25),W=ee+(T^N&(U^T))+$[1]+3905402710&4294967295,ee=N+(W<<12&4294967295|W>>>20),W=T+(U^ee&(N^U))+$[2]+606105819&4294967295,T=ee+(W<<17&4294967295|W>>>15),W=U+(N^T&(ee^N))+$[3]+3250441966&4294967295,U=T+(W<<22&4294967295|W>>>10),W=N+(ee^U&(T^ee))+$[4]+4118548399&4294967295,N=U+(W<<7&4294967295|W>>>25),W=ee+(T^N&(U^T))+$[5]+1200080426&4294967295,ee=N+(W<<12&4294967295|W>>>20),W=T+(U^ee&(N^U))+$[6]+2821735955&4294967295,T=ee+(W<<17&4294967295|W>>>15),W=U+(N^T&(ee^N))+$[7]+4249261313&4294967295,U=T+(W<<22&4294967295|W>>>10),W=N+(ee^U&(T^ee))+$[8]+1770035416&4294967295,N=U+(W<<7&4294967295|W>>>25),W=ee+(T^N&(U^T))+$[9]+2336552879&4294967295,ee=N+(W<<12&4294967295|W>>>20),W=T+(U^ee&(N^U))+$[10]+4294925233&4294967295,T=ee+(W<<17&4294967295|W>>>15),W=U+(N^T&(ee^N))+$[11]+2304563134&4294967295,U=T+(W<<22&4294967295|W>>>10),W=N+(ee^U&(T^ee))+$[12]+1804603682&4294967295,N=U+(W<<7&4294967295|W>>>25),W=ee+(T^N&(U^T))+$[13]+4254626195&4294967295,ee=N+(W<<12&4294967295|W>>>20),W=T+(U^ee&(N^U))+$[14]+2792965006&4294967295,T=ee+(W<<17&4294967295|W>>>15),W=U+(N^T&(ee^N))+$[15]+1236535329&4294967295,U=T+(W<<22&4294967295|W>>>10),W=N+(T^ee&(U^T))+$[1]+4129170786&4294967295,N=U+(W<<5&4294967295|W>>>27),W=ee+(U^T&(N^U))+$[6]+3225465664&4294967295,ee=N+(W<<9&4294967295|W>>>23),W=T+(N^U&(ee^N))+$[11]+643717713&4294967295,T=ee+(W<<14&4294967295|W>>>18),W=U+(ee^N&(T^ee))+$[0]+3921069994&4294967295,U=T+(W<<20&4294967295|W>>>12),W=N+(T^ee&(U^T))+$[5]+3593408605&4294967295,N=U+(W<<5&4294967295|W>>>27),W=ee+(U^T&(N^U))+$[10]+38016083&4294967295,ee=N+(W<<9&4294967295|W>>>23),W=T+(N^U&(ee^N))+$[15]+3634488961&4294967295,T=ee+(W<<14&4294967295|W>>>18),W=U+(ee^N&(T^ee))+$[4]+3889429448&4294967295,U=T+(W<<20&4294967295|W>>>12),W=N+(T^ee&(U^T))+$[9]+568446438&4294967295,N=U+(W<<5&4294967295|W>>>27),W=ee+(U^T&(N^U))+$[14]+3275163606&4294967295,ee=N+(W<<9&4294967295|W>>>23),W=T+(N^U&(ee^N))+$[3]+4107603335&4294967295,T=ee+(W<<14&4294967295|W>>>18),W=U+(ee^N&(T^ee))+$[8]+1163531501&4294967295,U=T+(W<<20&4294967295|W>>>12),W=N+(T^ee&(U^T))+$[13]+2850285829&4294967295,N=U+(W<<5&4294967295|W>>>27),W=ee+(U^T&(N^U))+$[2]+4243563512&4294967295,ee=N+(W<<9&4294967295|W>>>23),W=T+(N^U&(ee^N))+$[7]+1735328473&4294967295,T=ee+(W<<14&4294967295|W>>>18),W=U+(ee^N&(T^ee))+$[12]+2368359562&4294967295,U=T+(W<<20&4294967295|W>>>12),W=N+(U^T^ee)+$[5]+4294588738&4294967295,N=U+(W<<4&4294967295|W>>>28),W=ee+(N^U^T)+$[8]+2272392833&4294967295,ee=N+(W<<11&4294967295|W>>>21),W=T+(ee^N^U)+$[11]+1839030562&4294967295,T=ee+(W<<16&4294967295|W>>>16),W=U+(T^ee^N)+$[14]+4259657740&4294967295,U=T+(W<<23&4294967295|W>>>9),W=N+(U^T^ee)+$[1]+2763975236&4294967295,N=U+(W<<4&4294967295|W>>>28),W=ee+(N^U^T)+$[4]+1272893353&4294967295,ee=N+(W<<11&4294967295|W>>>21),W=T+(ee^N^U)+$[7]+4139469664&4294967295,T=ee+(W<<16&4294967295|W>>>16),W=U+(T^ee^N)+$[10]+3200236656&4294967295,U=T+(W<<23&4294967295|W>>>9),W=N+(U^T^ee)+$[13]+681279174&4294967295,N=U+(W<<4&4294967295|W>>>28),W=ee+(N^U^T)+$[0]+3936430074&4294967295,ee=N+(W<<11&4294967295|W>>>21),W=T+(ee^N^U)+$[3]+3572445317&4294967295,T=ee+(W<<16&4294967295|W>>>16),W=U+(T^ee^N)+$[6]+76029189&4294967295,U=T+(W<<23&4294967295|W>>>9),W=N+(U^T^ee)+$[9]+3654602809&4294967295,N=U+(W<<4&4294967295|W>>>28),W=ee+(N^U^T)+$[12]+3873151461&4294967295,ee=N+(W<<11&4294967295|W>>>21),W=T+(ee^N^U)+$[15]+530742520&4294967295,T=ee+(W<<16&4294967295|W>>>16),W=U+(T^ee^N)+$[2]+3299628645&4294967295,U=T+(W<<23&4294967295|W>>>9),W=N+(T^(U|~ee))+$[0]+4096336452&4294967295,N=U+(W<<6&4294967295|W>>>26),W=ee+(U^(N|~T))+$[7]+1126891415&4294967295,ee=N+(W<<10&4294967295|W>>>22),W=T+(N^(ee|~U))+$[14]+2878612391&4294967295,T=ee+(W<<15&4294967295|W>>>17),W=U+(ee^(T|~N))+$[5]+4237533241&4294967295,U=T+(W<<21&4294967295|W>>>11),W=N+(T^(U|~ee))+$[12]+1700485571&4294967295,N=U+(W<<6&4294967295|W>>>26),W=ee+(U^(N|~T))+$[3]+2399980690&4294967295,ee=N+(W<<10&4294967295|W>>>22),W=T+(N^(ee|~U))+$[10]+4293915773&4294967295,T=ee+(W<<15&4294967295|W>>>17),W=U+(ee^(T|~N))+$[1]+2240044497&4294967295,U=T+(W<<21&4294967295|W>>>11),W=N+(T^(U|~ee))+$[8]+1873313359&4294967295,N=U+(W<<6&4294967295|W>>>26),W=ee+(U^(N|~T))+$[15]+4264355552&4294967295,ee=N+(W<<10&4294967295|W>>>22),W=T+(N^(ee|~U))+$[6]+2734768916&4294967295,T=ee+(W<<15&4294967295|W>>>17),W=U+(ee^(T|~N))+$[13]+1309151649&4294967295,U=T+(W<<21&4294967295|W>>>11),W=N+(T^(U|~ee))+$[4]+4149444226&4294967295,N=U+(W<<6&4294967295|W>>>26),W=ee+(U^(N|~T))+$[11]+3174756917&4294967295,ee=N+(W<<10&4294967295|W>>>22),W=T+(N^(ee|~U))+$[2]+718787259&4294967295,T=ee+(W<<15&4294967295|W>>>17),W=U+(ee^(T|~N))+$[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(T+(W<<21&4294967295|W>>>11))&4294967295,j.g[2]=j.g[2]+T&4294967295,j.g[3]=j.g[3]+ee&4294967295}r.prototype.u=function(j,N){N===void 0&&(N=j.length);for(var U=N-this.blockSize,$=this.B,T=this.h,ee=0;ee<N;){if(T==0)for(;ee<=U;)i(this,j,ee),ee+=this.blockSize;if(typeof j=="string"){for(;ee<N;)if($[T++]=j.charCodeAt(ee++),T==this.blockSize){i(this,$),T=0;break}}else for(;ee<N;)if($[T++]=j[ee++],T==this.blockSize){i(this,$),T=0;break}}this.h=T,this.o+=N},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var U=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=U&255,U/=256;for(this.u(j),j=Array(16),N=U=0;4>N;++N)for(var $=0;32>$;$+=8)j[U++]=this.g[N]>>>$&255;return j};function o(j,N){var U=d;return Object.prototype.hasOwnProperty.call(U,j)?U[j]:U[j]=N(j)}function c(j,N){this.h=N;for(var U=[],$=!0,T=j.length-1;0<=T;T--){var ee=j[T]|0;$&&ee==N||(U[T]=ee,$=!1)}this.g=U}var d={};function p(j){return-128<=j&&128>j?o(j,function(N){return new c([N|0],0>N?-1:0)}):new c([j|0],0>j?-1:0)}function g(j){if(isNaN(j)||!isFinite(j))return E;if(0>j)return D(g(-j));for(var N=[],U=1,$=0;j>=U;$++)N[$]=j/U|0,U*=4294967296;return new c(N,0)}function _(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return D(_(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=g(Math.pow(N,8)),$=E,T=0;T<j.length;T+=8){var ee=Math.min(8,j.length-T),W=parseInt(j.substring(T,T+ee),N);8>ee?(ee=g(Math.pow(N,ee)),$=$.j(ee).add(g(W))):($=$.j(U),$=$.add(g(W)))}return $}var E=p(0),C=p(1),O=p(16777216);t=c.prototype,t.m=function(){if(k(this))return-D(this).m();for(var j=0,N=1,U=0;U<this.g.length;U++){var $=this.i(U);j+=(0<=$?$:4294967296+$)*N,N*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(I(this))return"0";if(k(this))return"-"+D(this).toString(j);for(var N=g(Math.pow(j,6)),U=this,$="";;){var T=L(U,N).g;U=B(U,T.j(N));var ee=((0<U.g.length?U.g[0]:U.h)>>>0).toString(j);if(U=T,I(U))return ee+$;for(;6>ee.length;)ee="0"+ee;$=ee+$}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function I(j){if(j.h!=0)return!1;for(var N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function k(j){return j.h==-1}t.l=function(j){return j=B(this,j),k(j)?-1:I(j)?0:1};function D(j){for(var N=j.g.length,U=[],$=0;$<N;$++)U[$]=~j.g[$];return new c(U,~j.h).add(C)}t.abs=function(){return k(this)?D(this):this},t.add=function(j){for(var N=Math.max(this.g.length,j.g.length),U=[],$=0,T=0;T<=N;T++){var ee=$+(this.i(T)&65535)+(j.i(T)&65535),W=(ee>>>16)+(this.i(T)>>>16)+(j.i(T)>>>16);$=W>>>16,ee&=65535,W&=65535,U[T]=W<<16|ee}return new c(U,U[U.length-1]&-2147483648?-1:0)};function B(j,N){return j.add(D(N))}t.j=function(j){if(I(this)||I(j))return E;if(k(this))return k(j)?D(this).j(D(j)):D(D(this).j(j));if(k(j))return D(this.j(D(j)));if(0>this.l(O)&&0>j.l(O))return g(this.m()*j.m());for(var N=this.g.length+j.g.length,U=[],$=0;$<2*N;$++)U[$]=0;for($=0;$<this.g.length;$++)for(var T=0;T<j.g.length;T++){var ee=this.i($)>>>16,W=this.i($)&65535,ne=j.i(T)>>>16,Me=j.i(T)&65535;U[2*$+2*T]+=W*Me,Y(U,2*$+2*T),U[2*$+2*T+1]+=ee*Me,Y(U,2*$+2*T+1),U[2*$+2*T+1]+=W*ne,Y(U,2*$+2*T+1),U[2*$+2*T+2]+=ee*ne,Y(U,2*$+2*T+2)}for($=0;$<N;$++)U[$]=U[2*$+1]<<16|U[2*$];for($=N;$<2*N;$++)U[$]=0;return new c(U,0)};function Y(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function Q(j,N){this.g=j,this.h=N}function L(j,N){if(I(N))throw Error("division by zero");if(I(j))return new Q(E,E);if(k(j))return N=L(D(j),N),new Q(D(N.g),D(N.h));if(k(N))return N=L(j,D(N)),new Q(D(N.g),N.h);if(30<j.g.length){if(k(j)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var U=C,$=N;0>=$.l(j);)U=G(U),$=G($);var T=q(U,1),ee=q($,1);for($=q($,2),U=q(U,2);!I($);){var W=ee.add($);0>=W.l(j)&&(T=T.add(U),ee=W),$=q($,1),U=q(U,1)}return N=B(j,T.j(N)),new Q(T,N)}for(T=E;0<=j.l(N);){for(U=Math.max(1,Math.floor(j.m()/N.m())),$=Math.ceil(Math.log(U)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),ee=g(U),W=ee.j(N);k(W)||0<W.l(j);)U-=$,ee=g(U),W=ee.j(N);I(ee)&&(ee=C),T=T.add(ee),j=B(j,W)}return new Q(T,j)}t.A=function(j){return L(this,j).h},t.and=function(j){for(var N=Math.max(this.g.length,j.g.length),U=[],$=0;$<N;$++)U[$]=this.i($)&j.i($);return new c(U,this.h&j.h)},t.or=function(j){for(var N=Math.max(this.g.length,j.g.length),U=[],$=0;$<N;$++)U[$]=this.i($)|j.i($);return new c(U,this.h|j.h)},t.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),U=[],$=0;$<N;$++)U[$]=this.i($)^j.i($);return new c(U,this.h^j.h)};function G(j){for(var N=j.g.length+1,U=[],$=0;$<N;$++)U[$]=j.i($)<<1|j.i($-1)>>>31;return new c(U,j.h)}function q(j,N){var U=N>>5;N%=32;for(var $=j.g.length-U,T=[],ee=0;ee<$;ee++)T[ee]=0<N?j.i(ee+U)>>>N|j.i(ee+U+1)<<32-N:j.i(ee+U);return new c(T,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZI=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Ml=c}).apply(typeof oC<"u"?oC:typeof self<"u"?self:typeof window<"u"?window:{});var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ex,id,tx,Yg,U_,nx,rx,ix;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,x){return y==Array.prototype||y==Object.prototype||(y[A]=x.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tg=="object"&&Tg];for(var A=0;A<y.length;++A){var x=y[A];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(y,A){if(A)e:{var x=r;y=y.split(".");for(var H=0;H<y.length-1;H++){var le=y[H];if(!(le in x))break e;x=x[le]}y=y[y.length-1],H=x[y],A=A(H),A!=H&&A!=null&&e(x,y,{configurable:!0,writable:!0,value:A})}}function o(y,A){y instanceof String&&(y+="");var x=0,H=!1,le={next:function(){if(!H&&x<y.length){var ye=x++;return{value:A(ye,y[ye]),done:!1}}return H=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(y){return y||function(){return o(this,function(A,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function g(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function _(y,A,x){return y.call.apply(y.bind,arguments)}function E(y,A,x){if(!y)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,H),y.apply(A,le)}}return function(){return y.apply(A,arguments)}}function C(y,A,x){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,C.apply(null,arguments)}function O(y,A){var x=Array.prototype.slice.call(arguments,1);return function(){var H=x.slice();return H.push.apply(H,arguments),y.apply(this,H)}}function I(y,A){function x(){}x.prototype=A.prototype,y.aa=A.prototype,y.prototype=new x,y.prototype.constructor=y,y.Qb=function(H,le,ye){for(var De=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)De[Pt-2]=arguments[Pt];return A.prototype[le].apply(H,De)}}function k(y){const A=y.length;if(0<A){const x=Array(A);for(let H=0;H<A;H++)x[H]=y[H];return x}return[]}function D(y,A){for(let x=1;x<arguments.length;x++){const H=arguments[x];if(p(H)){const le=y.length||0,ye=H.length||0;y.length=le+ye;for(let De=0;De<ye;De++)y[le+De]=H[De]}else y.push(H)}}class B{constructor(A,x){this.i=A,this.j=x,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function Y(y){return/^[\s\xa0]*$/.test(y)}function Q(){var y=d.navigator;return y&&(y=y.userAgent)?y:""}function L(y){return L[" "](y),y}L[" "]=function(){};var G=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function q(y,A,x){for(const H in y)A.call(x,y[H],H,y)}function j(y,A){for(const x in y)A.call(void 0,y[x],x,y)}function N(y){const A={};for(const x in y)A[x]=y[x];return A}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(y,A){let x,H;for(let le=1;le<arguments.length;le++){H=arguments[le];for(x in H)y[x]=H[x];for(let ye=0;ye<U.length;ye++)x=U[ye],Object.prototype.hasOwnProperty.call(H,x)&&(y[x]=H[x])}}function T(y){var A=1;y=y.split(":");const x=[];for(;0<A&&y.length;)x.push(y.shift()),A--;return y.length&&x.push(y.join(":")),x}function ee(y){d.setTimeout(()=>{throw y},0)}function W(){var y=Le;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class ne{constructor(){this.h=this.g=null}add(A,x){const H=Me.get();H.set(A,x),this.h?this.h.next=H:this.g=H,this.h=H}}var Me=new B(()=>new ie,y=>y.reset());class ie{constructor(){this.next=this.g=this.h=null}set(A,x){this.h=A,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Ce=!1,Le=new ne,K=()=>{const y=d.Promise.resolve(void 0);te=()=>{y.then(pe)}};var pe=()=>{for(var y;y=W();){try{y.h.call(y.g)}catch(x){ee(x)}var A=Me;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}Ce=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const x=()=>{};d.addEventListener("test",x,A),d.removeEventListener("test",x,A)}catch{}return y}();function Be(y,A){if(ve.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var x=this.type=y.type,H=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(G){e:{try{L(A.nodeName);var le=!0;break e}catch{}le=!1}le||(A=null)}}else x=="mouseover"?A=y.fromElement:x=="mouseout"&&(A=y.toElement);this.relatedTarget=A,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Ue[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Be.aa.h.call(this)}}I(Be,ve);var Ue={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),mt=0;function gn(y,A,x,H,le){this.listener=y,this.proxy=null,this.src=A,this.type=x,this.capture=!!H,this.ha=le,this.key=++mt,this.da=this.fa=!1}function Ft(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function mn(y){this.src=y,this.g={},this.h=0}mn.prototype.add=function(y,A,x,H,le){var ye=y.toString();y=this.g[ye],y||(y=this.g[ye]=[],this.h++);var De=Ur(y,A,H,le);return-1<De?(A=y[De],x||(A.fa=!1)):(A=new gn(A,this.src,ye,!!H,le),A.fa=x,y.push(A)),A};function On(y,A){var x=A.type;if(x in y.g){var H=y.g[x],le=Array.prototype.indexOf.call(H,A,void 0),ye;(ye=0<=le)&&Array.prototype.splice.call(H,le,1),ye&&(Ft(A),y.g[x].length==0&&(delete y.g[x],y.h--))}}function Ur(y,A,x,H){for(var le=0;le<y.length;++le){var ye=y[le];if(!ye.da&&ye.listener==A&&ye.capture==!!x&&ye.ha==H)return le}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),Vr={};function ys(y,A,x,H,le){if(Array.isArray(A)){for(var ye=0;ye<A.length;ye++)ys(y,A[ye],x,H,le);return null}return x=vs(x),y&&y[It]?y.K(A,x,g(H)?!!H.capture:!1,le):Un(y,A,x,!1,H,le)}function Un(y,A,x,H,le,ye){if(!A)throw Error("Invalid event type");var De=g(le)?!!le.capture:!!le,Pt=ti(y);if(Pt||(y[wn]=Pt=new mn(y)),x=Pt.add(A,x,H,De,ye),x.proxy)return x;if(H=wr(),x.proxy=H,H.src=y,H.listener=x,y.addEventListener)Ne||(le=De),le===void 0&&(le=!1),y.addEventListener(A.toString(),H,le);else if(y.attachEvent)y.attachEvent(Ct(A.toString()),H);else if(y.addListener&&y.removeListener)y.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return x}function wr(){function y(x){return A.call(y.src,y.listener,x)}const A=pr;return y}function tr(y,A,x,H,le){if(Array.isArray(A))for(var ye=0;ye<A.length;ye++)tr(y,A[ye],x,H,le);else H=g(H)?!!H.capture:!!H,x=vs(x),y&&y[It]?(y=y.i,A=String(A).toString(),A in y.g&&(ye=y.g[A],x=Ur(ye,x,H,le),-1<x&&(Ft(ye[x]),Array.prototype.splice.call(ye,x,1),ye.length==0&&(delete y.g[A],y.h--)))):y&&(y=ti(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Ur(A,x,H,le)),(x=-1<y?A[y]:null)&&fn(x))}function fn(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[It])On(A.i,y);else{var x=y.type,H=y.proxy;A.removeEventListener?A.removeEventListener(x,H,y.capture):A.detachEvent?A.detachEvent(Ct(x),H):A.addListener&&A.removeListener&&A.removeListener(H),(x=ti(A))?(On(x,y),x.h==0&&(x.src=null,A[wn]=null)):Ft(y)}}}function Ct(y){return y in Vr?Vr[y]:Vr[y]="on"+y}function pr(y,A){if(y.da)y=!0;else{A=new Be(A,this);var x=y.listener,H=y.ha||y.src;y.fa&&fn(y),y=x.call(H,A)}return y}function ti(y){return y=y[wn],y instanceof mn?y:null}var Ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function vs(y){return typeof y=="function"?y:(y[Ri]||(y[Ri]=function(A){return y.handleEvent(A)}),y[Ri])}function Bt(){me.call(this),this.i=new mn(this),this.M=this,this.F=null}I(Bt,me),Bt.prototype[It]=!0,Bt.prototype.removeEventListener=function(y,A,x,H){tr(this,y,A,x,H)};function rt(y,A){var x,H=y.F;if(H)for(x=[];H;H=H.F)x.push(H);if(y=y.M,H=A.type||A,typeof A=="string")A=new ve(A,y);else if(A instanceof ve)A.target=A.target||y;else{var le=A;A=new ve(H,y),$(A,le)}if(le=!0,x)for(var ye=x.length-1;0<=ye;ye--){var De=A.g=x[ye];le=Xt(De,H,!0,A)&&le}if(De=A.g=y,le=Xt(De,H,!0,A)&&le,le=Xt(De,H,!1,A)&&le,x)for(ye=0;ye<x.length;ye++)De=A.g=x[ye],le=Xt(De,H,!1,A)&&le}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var x=y.g[A],H=0;H<x.length;H++)Ft(x[H]);delete y.g[A],y.h--}}this.F=null},Bt.prototype.K=function(y,A,x,H){return this.i.add(String(y),A,!1,x,H)},Bt.prototype.L=function(y,A,x,H){return this.i.add(String(y),A,!0,x,H)};function Xt(y,A,x,H){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var le=!0,ye=0;ye<A.length;++ye){var De=A[ye];if(De&&!De.da&&De.capture==x){var Pt=De.listener,Fn=De.ha||De.src;De.fa&&On(y.i,De),le=Pt.call(Fn,H)!==!1&&le}}return le&&!H.defaultPrevented}function $t(y,A,x){if(typeof y=="function")x&&(y=C(y,x));else if(y&&typeof y.handleEvent=="function")y=C(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(y,A||0)}function Ws(y){y.g=$t(()=>{y.g=null,y.i&&(y.i=!1,Ws(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class ni extends me{constructor(A,x){super(),this.m=A,this.l=x,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ws(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(y){me.call(this),this.h=y,this.g={}}I(Oi,me);var Ii=[];function fi(y){q(y.g,function(A,x){this.g.hasOwnProperty(x)&&fn(A)},y),y.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),fi(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=d.JSON.stringify,Qi=d.JSON.parse,ri=class{stringify(y){return d.JSON.stringify(y,void 0)}parse(y){return d.JSON.parse(y,void 0)}};function xi(){}xi.prototype.h=null;function Xi(y){return y.h||(y.h=y.i())}function Ji(){}var sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){ve.call(this,"d")}I(hi,ve);function _s(){ve.call(this,"c")}I(_s,ve);var Cr={},In=null;function Zi(){return In=In||new Bt}Cr.La="serverreachability";function Ks(y){ve.call(this,Cr.La,y)}I(Ks,ve);function Z(y){const A=Zi();rt(A,new Ks(A))}Cr.STAT_EVENT="statevent";function oe(y,A){ve.call(this,Cr.STAT_EVENT,y),this.stat=A}I(oe,ve);function ce(y){const A=Zi();rt(A,new oe(A,y))}Cr.Ma="timingevent";function Te(y,A){ve.call(this,Cr.Ma,y),this.size=A}I(Te,ve);function Ie(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){y()},A)}function Fe(){this.g=!0}Fe.prototype.xa=function(){this.g=!1};function Ze(y,A,x,H,le,ye){y.info(function(){if(y.g)if(ye)for(var De="",Pt=ye.split("&"),Fn=0;Fn<Pt.length;Fn++){var Mt=Pt[Fn].split("=");if(1<Mt.length){var Gn=Mt[0];Mt=Mt[1];var Bn=Gn.split("_");De=2<=Bn.length&&Bn[1]=="type"?De+(Gn+"="+Mt+"&"):De+(Gn+"=redacted&")}}else De=null;else De=ye;return"XMLHTTP REQ ("+H+") [attempt "+le+"]: "+A+`
`+x+`
`+De})}function He(y,A,x,H,le,ye,De){y.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+le+"]: "+A+`
`+x+`
`+ye+" "+De})}function $e(y,A,x,H){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+st(y,x)+(H?" "+H:"")})}function Ye(y,A){y.info(function(){return"TIMEOUT: "+A})}Fe.prototype.info=function(){};function st(y,A){if(!y.g)return A;if(!A)return null;try{var x=JSON.parse(A);if(x){for(y=0;y<x.length;y++)if(Array.isArray(x[y])){var H=x[y];if(!(2>H.length)){var le=H[1];if(Array.isArray(le)&&!(1>le.length)){var ye=le[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var De=1;De<le.length;De++)le[De]=""}}}}return Tr(x)}catch{return A}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tt;function Vt(){}I(Vt,xi),Vt.prototype.g=function(){return new XMLHttpRequest},Vt.prototype.i=function(){return{}},Tt=new Vt;function Ht(y,A,x,H){this.j=y,this.i=A,this.l=x,this.R=H||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var ke={},di={};function Vn(y,A,x){y.L=1,y.v=hn(si(A)),y.m=x,y.P=!0,nr(y,null)}function nr(y,A){y.F=Date.now(),jr(y),y.A=si(y.v);var x=y.A,H=y.R;Array.isArray(H)||(H=[String(H)]),Po(x.i,"t",H),y.C=0,x=y.j.J,y.h=new xt,y.g=fu(y.j,x?A:null,!y.m),0<y.O&&(y.M=new ni(C(y.Y,y,y.g),y.O)),A=y.U,x=y.g,H=y.ca;var le="readystatechange";Array.isArray(le)||(le&&(Ii[0]=le.toString()),le=Ii);for(var ye=0;ye<le.length;ye++){var De=ys(x,le[ye],H||A.handleEvent,!1,A.h||A);if(!De)break;A.g[De.key]=De}A=y.H?N(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),Z(),Ze(y.i,y.u,y.A,y.l,y.R,y.m)}Ht.prototype.ca=function(y){y=y.target;const A=this.M;A&&ai(y)==3?A.j():this.Y(y)},Ht.prototype.Y=function(y){try{if(y==this.g)e:{const Bn=ai(this.g);var A=this.g.Ba();const os=this.g.Z();if(!(3>Bn)&&(Bn!=3||this.g&&(this.h.h||this.g.oa()||au(this.g)))){this.J||Bn!=4||A==7||(A==8||0>=os?Z(3):Z(2)),jn(this);var x=this.g.Z();this.X=x;t:if(qn(this)){var H=au(this.g);y="";var le=H.length,ye=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dt(this),rr(this);var De="";break t}this.h.i=new d.TextDecoder}for(A=0;A<le;A++)this.h.h=!0,y+=this.h.i.decode(H[A],{stream:!(ye&&A==le-1)});H.length=0,this.h.g+=y,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=x==200,He(this.i,this.u,this.A,this.l,this.R,Bn,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,Fn=this.g;if((Pt=Fn.g?Fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Pt)){var Mt=Pt;break t}}Mt=null}if(x=Mt)$e(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xn(this,x);else{this.o=!1,this.s=3,ce(12),dt(this),rr(this);break e}}if(this.P){x=!0;let Wn;for(;!this.J&&this.C<De.length;)if(Wn=Gt(this,De),Wn==di){Bn==4&&(this.s=4,ce(14),x=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==ke){this.s=4,ce(15),$e(this.i,this.l,De,"[Invalid Chunk]"),x=!1;break}else $e(this.i,this.l,Wn,null),xn(this,Wn);if(qn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bn!=4||De.length!=0||this.h.h||(this.s=1,ce(16),x=!1),this.o=this.o&&x,!x)$e(this.i,this.l,De,"[Invalid Chunked Response]"),dt(this),rr(this);else if(0<De.length&&!this.W){this.W=!0;var Gn=this.j;Gn.g==this&&Gn.ba&&!Gn.M&&(Gn.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),qr(Gn),Gn.M=!0,ce(11))}}else $e(this.i,this.l,De,null),xn(this,De);Bn==4&&dt(this),this.o&&!this.J&&(Bn==4?ac(this.j,this):(this.o=!1,jr(this)))}else ko(this.g),x==400&&0<De.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),dt(this),rr(this)}}}catch{}finally{}};function qn(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Gt(y,A){var x=y.C,H=A.indexOf(`
`,x);return H==-1?di:(x=Number(A.substring(x,H)),isNaN(x)?ke:(H+=1,H+x>A.length?di:(A=A.slice(H,H+x),y.C=H+x,A)))}Ht.prototype.cancel=function(){this.J=!0,dt(this)};function jr(y){y.S=Date.now()+y.I,Ys(y,y.I)}function Ys(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Ie(C(y.ba,y),A)}function jn(y){y.B&&(d.clearTimeout(y.B),y.B=null)}Ht.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Ye(this.i,this.A),this.L!=2&&(Z(),ce(17)),dt(this),this.s=2,rr(this)):Ys(this,this.S-y)};function rr(y){y.j.G==0||y.J||ac(y.j,y)}function dt(y){jn(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,fi(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function xn(y,A){try{var x=y.j;if(x.G!=0&&(x.g==y||pi(x.h,y))){if(!y.K&&pi(x.h,y)&&x.G==3){try{var H=x.Da.g.parse(A)}catch{H=null}if(Array.isArray(H)&&H.length==3){var le=H;if(le[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<y.F)Uo(x),Lo(x);else break e;Ts(x),ce(18)}}else x.za=le[1],0<x.za-x.T&&37500>le[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ie(C(x.Za,x),6e3));if(1>=Jt(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Cs(x,11)}else if((y.K||x.g==y)&&Uo(x),!Y(A))for(le=x.Da.g.parse(A),A=0;A<le.length;A++){let Mt=le[A];if(x.T=Mt[0],Mt=Mt[1],x.G==2)if(Mt[0]=="c"){x.K=Mt[1],x.ia=Mt[2];const Gn=Mt[3];Gn!=null&&(x.la=Gn,x.j.info("VER="+x.la));const Bn=Mt[4];Bn!=null&&(x.Aa=Bn,x.j.info("SVER="+x.Aa));const os=Mt[5];os!=null&&typeof os=="number"&&0<os&&(H=1.5*os,x.L=H,x.j.info("backChannelRequestTimeoutMs_="+H)),H=x;const Wn=y.g;if(Wn){const Li=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var ye=H.h;ye.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(es(ye,ye.h),ye.h=null))}if(H.D){const jo=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(H.ya=jo,Zt(H.I,H.D,jo))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-y.F,x.j.info("Handshake RTT: "+x.R+"ms")),H=x;var De=y;if(H.qa=uu(H,H.J?H.ia:null,H.W),De.K){ir(H.h,De);var Pt=De,Fn=H.L;Fn&&(Pt.I=Fn),Pt.B&&(jn(Pt),jr(Pt)),H.g=De}else sc(H);0<x.i.length&&La(x)}else Mt[0]!="stop"&&Mt[0]!="close"||Cs(x,7);else x.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Cs(x,7):nc(x):Mt[0]!="noop"&&x.l&&x.l.ta(Mt),x.v=0)}}Z(4)}catch{}}var Fr=class{constructor(y,A){this.g=y,this.map=A}};function Br(y){this.l=y||10,d.PerformanceNavigationTiming?(y=d.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pi(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Jt(y){return y.h?1:y.g?y.g.size:0}function pi(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function es(y,A){y.g?y.g.add(A):y.h=A}function ir(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}Br.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Jl(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const x of y.g.values())A=A.concat(x.D);return A}return k(y.i)}function $f(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(p(y)){for(var A=[],x=y.length,H=0;H<x;H++)A.push(y[H]);return A}A=[],x=0;for(H in y)A[x++]=y[H];return A}function Oo(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(p(y)||typeof y=="string"){var A=[];y=y.length;for(var x=0;x<y;x++)A.push(x);return A}A=[],x=0;for(const H in y)A[x++]=H;return A}}}function ii(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(p(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var x=Oo(y),H=$f(y),le=H.length,ye=0;ye<le;ye++)A.call(void 0,H[ye],x&&x[ye],y)}var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qs(y,A){if(y){y=y.split("&");for(var x=0;x<y.length;x++){var H=y[x].indexOf("="),le=null;if(0<=H){var ye=y[x].substring(0,H);le=y[x].substring(H+1)}else ye=y[x];A(ye,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Pn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Pn){this.h=y.h,Ss(this,y.j),this.o=y.o,this.g=y.g,Xs(this,y.s),this.l=y.l;var A=y.i,x=new ts;x.i=A.i,A.g&&(x.g=new Map(A.g),x.h=A.h),Mi(this,x),this.m=y.m}else y&&(A=String(y).match(bs))?(this.h=!1,Ss(this,A[1]||"",!0),this.o=Ge(A[2]||""),this.g=Ge(A[3]||"",!0),Xs(this,A[4]),this.l=Ge(A[5]||"",!0),Mi(this,A[6]||"",!0),this.m=Ge(A[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}Pn.prototype.toString=function(){var y=[],A=this.j;A&&y.push(Js(A,Zl,!0),":");var x=this.g;return(x||A=="file")&&(y.push("//"),(A=this.o)&&y.push(Js(A,Zl,!0),"@"),y.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&y.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&y.push("/"),y.push(Js(x,x.charAt(0)=="/"?Gf:Io,!0))),(x=this.i.toString())&&y.push("?",x),(x=this.m)&&y.push("#",Js(x,xo)),y.join("")};function si(y){return new Pn(y)}function Ss(y,A,x){y.j=x?Ge(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function Xs(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function Mi(y,A,x){A instanceof ts?(y.i=A,ec(y.i,y.h)):(x||(A=Js(A,iu)),y.i=new ts(A,y.h))}function Zt(y,A,x){y.i.set(A,x)}function hn(y){return Zt(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Ge(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Js(y,A,x){return typeof y=="string"?(y=encodeURI(y).replace(A,sr),x&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function sr(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Zl=/[#\/\?@]/g,Io=/[#\?:]/g,Gf=/[#\?]/g,iu=/[#\?@]/g,xo=/#/g;function ts(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Hr(y){y.g||(y.g=new Map,y.h=0,y.i&&Qs(y.i,function(A,x){y.add(decodeURIComponent(A.replace(/\+/g," ")),x)}))}t=ts.prototype,t.add=function(y,A){Hr(this),this.i=null,y=gi(this,y);var x=this.g.get(y);return x||this.g.set(y,x=[]),x.push(A),this.h+=1,this};function ns(y,A){Hr(y),A=gi(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function Di(y,A){return Hr(y),A=gi(y,A),y.g.has(A)}t.forEach=function(y,A){Hr(this),this.g.forEach(function(x,H){x.forEach(function(le){y.call(A,le,H,this)},this)},this)},t.na=function(){Hr(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),x=[];for(let H=0;H<A.length;H++){const le=y[H];for(let ye=0;ye<le.length;ye++)x.push(A[H])}return x},t.V=function(y){Hr(this);let A=[];if(typeof y=="string")Di(this,y)&&(A=A.concat(this.g.get(gi(this,y))));else{y=Array.from(this.g.values());for(let x=0;x<y.length;x++)A=A.concat(y[x])}return A},t.set=function(y,A){return Hr(this),this.i=null,y=gi(this,y),Di(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function Po(y,A,x){ns(y,A),0<x.length&&(y.i=null,y.g.set(gi(y,A),k(x)),y.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var x=0;x<A.length;x++){var H=A[x];const ye=encodeURIComponent(String(H)),De=this.V(H);for(H=0;H<De.length;H++){var le=ye;De[H]!==""&&(le+="="+encodeURIComponent(String(De[H]))),y.push(le)}}return this.i=y.join("&")};function gi(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function ec(y,A){A&&!y.j&&(Hr(y),y.i=null,y.g.forEach(function(x,H){var le=H.toLowerCase();H!=le&&(ns(this,H),Po(this,le,x))},y)),y.j=A}function rs(y,A){const x=new Fe;if(d.Image){const H=new Image;H.onload=O(ar,x,"TestLoadImage: loaded",!0,A,H),H.onerror=O(ar,x,"TestLoadImage: error",!1,A,H),H.onabort=O(ar,x,"TestLoadImage: abort",!1,A,H),H.ontimeout=O(ar,x,"TestLoadImage: timeout",!1,A,H),d.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=y}else A(!1)}function zr(y,A){const x=new Fe,H=new AbortController,le=setTimeout(()=>{H.abort(),ar(x,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:H.signal}).then(ye=>{clearTimeout(le),ye.ok?ar(x,"TestPingServer: ok",!0,A):ar(x,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(le),ar(x,"TestPingServer: error",!1,A)})}function ar(y,A,x,H,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),H(x)}catch{}}function mi(){this.g=new ri}function ki(y,A,x){const H=x||"";try{ii(y,function(le,ye){let De=le;g(le)&&(De=Tr(le)),A.push(H+ye+"="+encodeURIComponent(De))})}catch(le){throw A.push(H+"type="+encodeURIComponent("_badmap")),le}}function Es(y){this.l=y.Ub||null,this.j=y.eb||!1}I(Es,xi),Es.prototype.g=function(){return new ws(this.l,this.j)},Es.prototype.i=function(y){return function(){return y}}({});function ws(y,A){Bt.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ws,Bt),t=ws.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,ss(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;is(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function is(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?Ni(this):ss(this),this.readyState==3&&is(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,Ni(this))},t.Qa=function(y){this.g&&(this.response=y,Ni(this))},t.ga=function(){this.g&&Ni(this)};function Ni(y){y.readyState=4,y.l=null,y.j=null,y.v=null,ss(y)}t.setRequestHeader=function(y,A){this.u.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var x=A.next();!x.done;)x=x.value,y.push(x[0]+": "+x[1]),x=A.next();return y.join(`\r
`)};function ss(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function tc(y){let A="";return q(y,function(x,H){A+=H,A+=":",A+=x,A+=`\r
`}),A}function $n(y,A,x){e:{for(H in x){var H=!1;break e}H=!0}H||(x=tc(x),typeof y=="string"?x!=null&&encodeURIComponent(String(x)):Zt(y,A,x))}function ot(y){Bt.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ot,Bt);var Mo=/^https?$/i,Da=["POST","PUT"];t=ot.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,A,x,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tt.g(),this.v=this.o?Xi(this.o):Xi(Tt),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(ye){su(this,ye);return}if(y=x||"",x=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var le in H)x.set(le,H[le]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ye of H.keys())x.set(ye,H.get(ye));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(x.keys()).find(ye=>ye.toLowerCase()=="content-type"),le=d.FormData&&y instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Da,A,void 0))||H||le||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,De]of x)this.g.setRequestHeader(ye,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gr(this),this.u=!0,this.g.send(y),this.u=!1}catch(ye){su(this,ye)}};function su(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Do(y),as(y)}function Do(y){y.A||(y.A=!0,rt(y,"complete"),rt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,rt(this,"complete"),rt(this,"abort"),as(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ka(this):this.bb())},t.bb=function(){ka(this)};function ka(y){if(y.h&&typeof c<"u"&&(!y.v[1]||ai(y)!=4||y.Z()!=2)){if(y.u&&ai(y)==4)$t(y.Ea,0,y);else if(rt(y,"readystatechange"),ai(y)==4){y.h=!1;try{const De=y.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var x;if(!(x=A)){var H;if(H=De===0){var le=String(y.D).match(bs)[1]||null;!le&&d.self&&d.self.location&&(le=d.self.location.protocol.slice(0,-1)),H=!Mo.test(le?le.toLowerCase():"")}x=H}if(x)rt(y,"complete"),rt(y,"success");else{y.m=6;try{var ye=2<ai(y)?y.g.statusText:""}catch{ye=""}y.l=ye+" ["+y.Z()+"]",Do(y)}}finally{as(y)}}}}function as(y,A){if(y.g){gr(y);const x=y.g,H=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||rt(y,"ready");try{x.onreadystatechange=H}catch{}}}function gr(y){y.I&&(d.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function ai(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Qi(A)}};function au(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function ko(y){const A={};y=(y.g&&2<=ai(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<y.length;H++){if(Y(y[H]))continue;var x=T(y[H]);const le=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ye=A[le]||[];A[le]=ye,ye.push(x)}j(A,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Na(y,A,x){return x&&x.internalChannelParams&&x.internalChannelParams[y]||A}function No(y){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Na("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Na("baseRetryDelayMs",5e3,y),this.cb=Na("retryDelaySeedMs",1e4,y),this.Wa=Na("forwardChannelMaxRetries",2,y),this.wa=Na("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Br(y&&y.concurrentRequestLimit),this.Da=new mi,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=No.prototype,t.la=8,t.G=1,t.connect=function(y,A,x,H){ce(0),this.W=y,this.H=A||{},x&&H!==void 0&&(this.H.OSID=x,this.H.OAID=H),this.F=this.X,this.I=uu(this,null,this.W),La(this)};function nc(y){if(ou(y),y.G==3){var A=y.U++,x=si(y.I);if(Zt(x,"SID",y.K),Zt(x,"RID",A),Zt(x,"TYPE","terminate"),Ua(y,x),A=new Ht(y,y.j,A),A.L=2,A.v=hn(si(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(A.v.toString(),"")}catch{}!x&&d.Image&&(new Image().src=A.v,x=!0),x||(A.g=fu(A.j,null),A.g.ea(A.v)),A.F=Date.now(),jr(A)}lc(y)}function Lo(y){y.g&&(qr(y),y.g.cancel(),y.g=null)}function ou(y){Lo(y),y.u&&(d.clearTimeout(y.u),y.u=null),Uo(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&d.clearTimeout(y.s),y.s=null)}function La(y){if(!Pi(y.h)&&!y.s){y.s=!0;var A=y.Ga;te||K(),Ce||(te(),Ce=!0),Le.add(A,y),y.B=0}}function lu(y,A){return Jt(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Ie(C(y.Ga,y,A),oc(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const le=new Ht(this,this.j,y);let ye=this.o;if(this.S&&(ye?(ye=N(ye),$(ye,this.S)):ye=this.S),this.m!==null||this.O||(le.H=ye,ye=null),this.P)e:{for(var A=0,x=0;x<this.i.length;x++){t:{var H=this.i[x];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(A+=H,4096<A){A=x;break e}if(A===4096||x===this.i.length-1){A=x+1;break e}}A=1e3}else A=1e3;A=ic(this,le,A),x=si(this.I),Zt(x,"RID",y),Zt(x,"CVER",22),this.D&&Zt(x,"X-HTTP-Session-Id",this.D),Ua(this,x),ye&&(this.O?A="headers="+encodeURIComponent(String(tc(ye)))+"&"+A:this.m&&$n(x,this.m,ye)),es(this.h,le),this.Ua&&Zt(x,"TYPE","init"),this.P?(Zt(x,"$req",A),Zt(x,"SID","null"),le.T=!0,Vn(le,x,null)):Vn(le,x,A),this.G=2}}else this.G==3&&(y?rc(this,y):this.i.length==0||Pi(this.h)||rc(this))};function rc(y,A){var x;A?x=A.l:x=y.U++;const H=si(y.I);Zt(H,"SID",y.K),Zt(H,"RID",x),Zt(H,"AID",y.T),Ua(y,H),y.m&&y.o&&$n(H,y.m,y.o),x=new Ht(y,y.j,x,y.B+1),y.m===null&&(x.H=y.o),A&&(y.i=A.D.concat(y.i)),A=ic(y,x,1e3),x.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),es(y.h,x),Vn(x,H,A)}function Ua(y,A){y.H&&q(y.H,function(x,H){Zt(A,H,x)}),y.l&&ii({},function(x,H){Zt(A,H,x)})}function ic(y,A,x){x=Math.min(y.i.length,x);var H=y.l?C(y.l.Na,y.l,y):null;e:{var le=y.i;let ye=-1;for(;;){const De=["count="+x];ye==-1?0<x?(ye=le[0].g,De.push("ofs="+ye)):ye=0:De.push("ofs="+ye);let Pt=!0;for(let Fn=0;Fn<x;Fn++){let Mt=le[Fn].g;const Gn=le[Fn].map;if(Mt-=ye,0>Mt)ye=Math.max(0,le[Fn].g-100),Pt=!1;else try{ki(Gn,De,"req"+Mt+"_")}catch{H&&H(Gn)}}if(Pt){H=De.join("&");break e}}}return y=y.i.splice(0,x),A.D=y,H}function sc(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;te||K(),Ce||(te(),Ce=!0),Le.add(A,y),y.v=0}}function Ts(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Ie(C(y.Fa,y),oc(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Ie(C(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Lo(this),cu(this))};function qr(y){y.A!=null&&(d.clearTimeout(y.A),y.A=null)}function cu(y){y.g=new Ht(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=si(y.qa);Zt(A,"RID","rpc"),Zt(A,"SID",y.K),Zt(A,"AID",y.T),Zt(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&Zt(A,"TO",y.ja),Zt(A,"TYPE","xmlhttp"),Ua(y,A),y.m&&y.o&&$n(A,y.m,y.o),y.L&&(y.g.I=y.L);var x=y.g;y=y.ia,x.L=1,x.v=hn(si(A)),x.m=null,x.P=!0,nr(x,y)}t.Za=function(){this.C!=null&&(this.C=null,Lo(this),Ts(this),ce(19))};function Uo(y){y.C!=null&&(d.clearTimeout(y.C),y.C=null)}function ac(y,A){var x=null;if(y.g==A){Uo(y),qr(y),y.g=null;var H=2}else if(pi(y.h,A))x=A.D,ir(y.h,A),H=1;else return;if(y.G!=0){if(A.o)if(H==1){x=A.m?A.m.length:0,A=Date.now()-A.F;var le=y.B;H=Zi(),rt(H,new Te(H,x)),La(y)}else sc(y);else if(le=A.s,le==3||le==0&&0<A.X||!(H==1&&lu(y,A)||H==2&&Ts(y)))switch(x&&0<x.length&&(A=y.h,A.i=A.i.concat(x)),le){case 1:Cs(y,5);break;case 4:Cs(y,10);break;case 3:Cs(y,6);break;default:Cs(y,2)}}}function oc(y,A){let x=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(x*=2),x*A}function Cs(y,A){if(y.j.info("Error code "+A),A==2){var x=C(y.fb,y),H=y.Xa;const le=!H;H=new Pn(H||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ss(H,"https"),hn(H),le?rs(H.toString(),x):zr(H.toString(),x)}else ce(2);y.G=0,y.l&&y.l.sa(A),lc(y),ou(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function lc(y){if(y.G=0,y.ka=[],y.l){const A=Jl(y.h);(A.length!=0||y.i.length!=0)&&(D(y.ka,A),D(y.ka,y.i),y.h.i.length=0,k(y.i),y.i.length=0),y.l.ra()}}function uu(y,A,x){var H=x instanceof Pn?si(x):new Pn(x);if(H.g!="")A&&(H.g=A+"."+H.g),Xs(H,H.s);else{var le=d.location;H=le.protocol,A=A?A+"."+le.hostname:le.hostname,le=+le.port;var ye=new Pn(null);H&&Ss(ye,H),A&&(ye.g=A),le&&Xs(ye,le),x&&(ye.l=x),H=ye}return x=y.D,A=y.ya,x&&A&&Zt(H,x,A),Zt(H,"VER",y.la),Ua(y,H),H}function fu(y,A,x){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new ot(new Es({eb:x})):new ot(y.pa),A.Ha(y.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hu(){}t=hu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Va(){}Va.prototype.g=function(y,A){return new Ar(y,A)};function Ar(y,A){Bt.call(this),this.g=new No(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!Y(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!Y(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new $r(this)}I(Ar,Bt),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){nc(this.g)},Ar.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var x={};x.__data__=y,y=x}else this.u&&(x={},x.__data__=Tr(y),y=x);A.i.push(new Fr(A.Ya++,y)),A.G==3&&La(A)},Ar.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,Ar.aa.N.call(this)};function Vo(y){hi.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const x in A){y=x;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}I(Vo,hi);function cc(){_s.call(this),this.status=1}I(cc,_s);function $r(y){this.g=y}I($r,hu),$r.prototype.ua=function(){rt(this.g,"a")},$r.prototype.ta=function(y){rt(this.g,new Vo(y))},$r.prototype.sa=function(y){rt(this.g,new cc)},$r.prototype.ra=function(){rt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,ix=function(){return new Va},rx=function(){return Zi()},nx=Cr,U_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,Yg=We,tt.COMPLETE="complete",tx=tt,Ji.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,id=Ji,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,ex=ot}).apply(typeof Tg<"u"?Tg:typeof self<"u"?self:typeof window<"u"?window:{});const lC="@firebase/firestore",cC="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Lb("@firebase/firestore");function ef(){return qc.logLevel}function ze(t,...e){if(qc.logLevel<=Lt.DEBUG){const n=e.map(uS);qc.debug(`Firestore (${Nf}): ${t}`,...n)}}function vo(t,...e){if(qc.logLevel<=Lt.ERROR){const n=e.map(uS);qc.error(`Firestore (${Nf}): ${t}`,...n)}}function _f(t,...e){if(qc.logLevel<=Lt.WARN){const n=e.map(uS);qc.warn(`Firestore (${Nf}): ${t}`,...n)}}function uS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,sx(t,r,n)}function sx(t,e,n){let r=`FIRESTORE (${Nf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vo(r),new Error(r)}function rn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||sx(e,i,r)}function St(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends To{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xr.UNAUTHENTICATED))}shutdown(){}}class m9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y9{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rn(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let o=new fo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const p=o;e.enqueueRetryable(async()=>{await p.promise,await i(this.currentUser)})},d=p=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fo)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rn(typeof r.accessToken=="string",31837,{l:r}),new ax(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string",2055,{h:e}),new Xr(e)}}class v9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new v9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rn(this.o===void 0,3512);const r=o=>{o.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=S9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function At(t,e){return t<e?-1:t>e?1:0}function V_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return At(r,i);{const o=ox(),c=E9(o.encode(fC(t,n)),o.encode(fC(e,n)));return c!==0?c:At(r,i)}}n+=r>65535?2:1}return At(t.length,e.length)}function fC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function E9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return At(t[n],e[n]);return At(t.length,e.length)}function bf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=-62135596800,dC=1e6;class fr{static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*dC);return new fr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hC)throw new qe(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dC}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(e){return new vt(e)}static min(){return new vt(new fr(0,0))}static max(){return new vt(new fr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__name__";class pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ht(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ht(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=pa.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return At(e.length,n.length)}static compareSegments(e,n){const r=pa.isNumericId(e),i=pa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?pa.extractNumericId(e).compare(pa.extractNumericId(n)):V_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ml.fromString(e.substring(4,e.length-2))}}class yn extends pa{construct(e,n,r){return new yn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new yn(n)}static emptyPath(){return new yn([])}}const w9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends pa{construct(e,n,r){return new kr(e,n,r)}static isValidIdentifier(e){return w9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j_}static keyField(){return new kr([j_])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new qe(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new qe(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new qe(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(n)}static emptyPath(){return new kr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.path=e}static fromPath(e){return new it(yn.fromString(e))}static fromName(e){return new it(yn.fromString(e).popFirst(5))}static empty(){return new it(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new yn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=-1;function T9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(r===1e9?new fr(n+1,0):new fr(n,r));return new Ul(i,it.empty(),e)}function C9(t){return new Ul(t.readTime,t.key,Rd)}class Ul{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ul(vt.min(),it.empty(),Rd)}static max(){return new Ul(vt.max(),it.empty(),Rd)}}function A9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=it.comparator(t.documentKey,e.documentKey),n!==0?n:At(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(t){if(t.code!==Re.FAILED_PRECONDITION||t.message!==R9)throw t;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Oe?n:Oe.resolve(n)}catch(n){return Oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.reject(n)}static resolve(e){return new Oe((n,r)=>{n(e)})}static reject(e){return new Oe((n,r)=>{r(e)})}static waitFor(e){return new Oe((n,r)=>{let i=0,o=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++o,c&&o===i&&n()},p=>r(p))}),c=!0,o===i&&n()})}static or(e){let n=Oe.resolve(!1);for(const r of e)n=n.next(i=>i?Oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Oe((r,i)=>{const o=e.length,c=new Array(o);let d=0;for(let p=0;p<o;p++){const g=p;n(e[g]).next(_=>{c[g]=_,++d,d===o&&r(c)},_=>i(_))}})}static doWhile(e,n){return new Oe((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function I9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}yy.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=-1;function vy(t){return t==null}function Pm(t){return t===0&&1/t==-1/0}function x9(t){return typeof t=="number"&&Number.isInteger(t)&&!Pm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="";function P9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pC(e)),e=M9(t.get(n),e);return pC(e)}function M9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case cx:n+="";break;default:n+=o}}return n}function pC(t){return t+cx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ux(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.comparator=e,this.root=n||Mr.EMPTY}insert(e,n){return new Rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cg(this.root,e,this.comparator,!0)}}class Cg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Mr.RED,this.left=i??Mr.EMPTY,this.right=o??Mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Mr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ht(27949);return e+(this.isRed()?0:1)}}Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht(57766)}get value(){throw ht(16141)}get color(){throw ht(16727)}get left(){throw ht(29726)}get right(){throw ht(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hr(this.comparator);return n.data=e,n}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.fields=e,e.sort(kr.comparator)}static empty(){return new Bs([])}unionWith(e){let n=new hr(kr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fx("Invalid base64 string: "+o):o}}(e);return new Lr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Lr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const D9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(t){if(rn(!!t,39018),typeof t=="string"){let e=0;const n=D9.exec(t);if(rn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jl(t){return typeof t=="string"?Lr.fromBase64String(t):Lr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="server_timestamp",dx="__type__",px="__previous_value__",gx="__local_write_time__";function hS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[dx])===null||n===void 0?void 0:n.stringValue)===hx}function _y(t){const e=t.mapValue.fields[px];return hS(e)?_y(e):e}function Od(t){const e=Vl(t.mapValue.fields[gx].timestampValue);return new fr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,n,r,i,o,c,d,p,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Mm="(default)";class Id{constructor(e,n){this.projectId=e,this.database=n||Mm}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database===Mm}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__type__",N9="__max__",Ag={mapValue:{}},yx="__vector__",Dm="value";function Fl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hS(t)?4:U9(t)?9007199254740991:L9(t)?10:11:ht(28295,{value:t})}function Ia(t,e){if(t===e)return!0;const n=Fl(t);if(n!==Fl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Od(t).isEqual(Od(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Vl(i.timestampValue),d=Vl(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return jl(i.bytesValue).isEqual(jl(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return zn(i.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(i.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return zn(i.integerValue)===zn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=zn(i.doubleValue),d=zn(o.doubleValue);return c===d?Pm(c)===Pm(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return bf(t.arrayValue.values||[],e.arrayValue.values||[],Ia);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},d=o.mapValue.fields||{};if(gC(c)!==gC(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ia(c[p],d[p])))return!1;return!0}(t,e);default:return ht(52216,{left:t})}}function xd(t,e){return(t.values||[]).find(n=>Ia(n,e))!==void 0}function Sf(t,e){if(t===e)return 0;const n=Fl(t),r=Fl(e);if(n!==r)return At(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(t.booleanValue,e.booleanValue);case 2:return function(o,c){const d=zn(o.integerValue||o.doubleValue),p=zn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(t,e);case 3:return yC(t.timestampValue,e.timestampValue);case 4:return yC(Od(t),Od(e));case 5:return V_(t.stringValue,e.stringValue);case 6:return function(o,c){const d=jl(o),p=jl(c);return d.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=At(d[g],p[g]);if(_!==0)return _}return At(d.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const d=At(zn(o.latitude),zn(c.latitude));return d!==0?d:At(zn(o.longitude),zn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vC(t.arrayValue,e.arrayValue);case 10:return function(o,c){var d,p,g,_;const E=o.fields||{},C=c.fields||{},O=(d=E[Dm])===null||d===void 0?void 0:d.arrayValue,I=(p=C[Dm])===null||p===void 0?void 0:p.arrayValue,k=At(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((_=I==null?void 0:I.values)===null||_===void 0?void 0:_.length)||0);return k!==0?k:vC(O,I)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Ag.mapValue&&c===Ag.mapValue)return 0;if(o===Ag.mapValue)return 1;if(c===Ag.mapValue)return-1;const d=o.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const C=V_(p[E],_[E]);if(C!==0)return C;const O=Sf(d[p[E]],g[_[E]]);if(O!==0)return O}return At(p.length,_.length)}(t.mapValue,e.mapValue);default:throw ht(23264,{Pe:n})}}function yC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return At(t,e);const n=Vl(t),r=Vl(e),i=At(n.seconds,r.seconds);return i!==0?i:At(n.nanos,r.nanos)}function vC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Sf(n[i],r[i]);if(o)return o}return At(n.length,r.length)}function Ef(t){return F_(t)}function F_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return it.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=F_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${F_(n.fields[c])}`;return i+"}"}(t.mapValue):ht(61005,{value:t})}function Qg(t){switch(Fl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_y(t);return e?16+Qg(e):16;case 5:return 2*t.stringValue.length;case 6:return jl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Qg(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Jc(r.fields,(o,c)=>{i+=o.length+Qg(c)}),i}(t.mapValue);default:throw ht(13486,{value:t})}}function _C(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function B_(t){return!!t&&"integerValue"in t}function dS(t){return!!t&&"arrayValue"in t}function bC(t){return!!t&&"nullValue"in t}function SC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xg(t){return!!t&&"mapValue"in t}function L9(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mx])===null||n===void 0?void 0:n.stringValue)===yx}function hd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function U9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===N9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hd(n)}setAll(e){let n=kr.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const p=this.getFieldsMap(n);this.applyChanges(p,r,i),r={},i=[],n=d.popLast()}c?r[d.lastSegment()]=hd(c):i.push(d.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Xg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ia(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jc(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new gs(hd(this.value))}}function vx(t){const e=[];return Jc(t.fields,(n,r)=>{const i=new kr([n]);if(Xg(r)){const o=vx(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Bs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r,i,o,c,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Jr(e,0,vt.min(),vt.min(),vt.min(),gs.empty(),0)}static newFoundDocument(e,n,r,i){return new Jr(e,1,n,vt.min(),r,i,0)}static newNoDocument(e,n){return new Jr(e,2,n,vt.min(),vt.min(),gs.empty(),0)}static newUnknownDocument(e,n){return new Jr(e,3,n,vt.min(),vt.min(),gs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.position=e,this.inclusive=n}}function EC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=it.comparator(it.fromName(c.referenceValue),n.key):r=Sf(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function wC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ia(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n="asc"){this.field=e,this.dir=n}}function V9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{}class Zn extends _x{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new F9(e,n,r):n==="array-contains"?new z9(e,r):n==="in"?new q9(e,r):n==="not-in"?new $9(e,r):n==="array-contains-any"?new G9(e,r):new Zn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B9(e,r):new H9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sf(n,this.value)):n!==null&&Fl(this.value)===Fl(n)&&this.matchesComparison(Sf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zs extends _x{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new zs(e,n)}matches(e){return bx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function bx(t){return t.op==="and"}function Sx(t){return j9(t)&&bx(t)}function j9(t){for(const e of t.filters)if(e instanceof zs)return!1;return!0}function H_(t){if(t instanceof Zn)return t.field.canonicalString()+t.op.toString()+Ef(t.value);if(Sx(t))return t.filters.map(e=>H_(e)).join(",");{const e=t.filters.map(n=>H_(n)).join(",");return`${t.op}(${e})`}}function Ex(t,e){return t instanceof Zn?function(r,i){return i instanceof Zn&&r.op===i.op&&r.field.isEqual(i.field)&&Ia(r.value,i.value)}(t,e):t instanceof zs?function(r,i){return i instanceof zs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,d)=>o&&Ex(c,i.filters[d]),!0):!1}(t,e):void ht(19439)}function wx(t){return t instanceof Zn?function(n){return`${n.field.canonicalString()} ${n.op} ${Ef(n.value)}`}(t):t instanceof zs?function(n){return n.op.toString()+" {"+n.getFilters().map(wx).join(" ,")+"}"}(t):"Filter"}class F9 extends Zn{constructor(e,n,r){super(e,n,r),this.key=it.fromName(r.referenceValue)}matches(e){const n=it.comparator(e.key,this.key);return this.matchesComparison(n)}}class B9 extends Zn{constructor(e,n){super(e,"in",n),this.keys=Tx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class H9 extends Zn{constructor(e,n){super(e,"not-in",n),this.keys=Tx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>it.fromName(r.referenceValue))}class z9 extends Zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dS(n)&&xd(n.arrayValue,this.value)}}class q9 extends Zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xd(this.value.arrayValue,n)}}class $9 extends Zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xd(this.value.arrayValue,n)}}class G9 extends Zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,n=null,r=[],i=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.Ie=null}}function TC(t,e=null,n=[],r=[],i=null,o=null,c=null){return new W9(t,e,n,r,i,o,c)}function pS(t){const e=St(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>H_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),vy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ef(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ef(r)).join(",")),e.Ie=n}return e.Ie}function gS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!V9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ex(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wC(t.startAt,e.startAt)&&wC(t.endAt,e.endAt)}function z_(t){return it.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n=null,r=[],i=[],o=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function K9(t,e,n,r,i,o,c,d){return new Vf(t,e,n,r,i,o,c,d)}function mS(t){return new Vf(t)}function CC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cx(t){return t.collectionGroup!==null}function dd(t){const e=St(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new hr(kr.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Pd(o,r))}),n.has(kr.keyField().canonicalString())||e.Ee.push(new Pd(kr.keyField(),r))}return e.Ee}function Ta(t){const e=St(t);return e.de||(e.de=Y9(e,dd(t))),e.de}function Y9(t,e){if(t.limitType==="F")return TC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Pd(i.field,o)});const n=t.endAt?new km(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new km(t.startAt.position,t.startAt.inclusive):null;return TC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function q_(t,e){const n=t.filters.concat([e]);return new Vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $_(t,e,n){return new Vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function by(t,e){return gS(Ta(t),Ta(e))&&t.limitType===e.limitType}function Ax(t){return`${pS(Ta(t))}|lt:${t.limitType}`}function tf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wx(i)).join(", ")}]`),vy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ef(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ef(i)).join(",")),`Target(${r})`}(Ta(t))}; limitType=${t.limitType})`}function Sy(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):it.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of dd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,d,p){const g=EC(c,d,p);return c.inclusive?g<=0:g<0}(r.startAt,dd(r),i)||r.endAt&&!function(c,d,p){const g=EC(c,d,p);return c.inclusive?g>=0:g>0}(r.endAt,dd(r),i))}(t,e)}function Q9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rx(t){return(e,n)=>{let r=!1;for(const i of dd(t)){const o=X9(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function X9(t,e,n){const r=t.field.isKeyField()?it.comparator(e.key,n.key):function(o,c,d){const p=c.data.field(o),g=d.data.field(o);return p!==null&&g!==null?Sf(p,g):ht(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ht(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jc(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return ux(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=new Rn(it.comparator);function _o(){return J9}const Ox=new Rn(it.comparator);function sd(...t){let e=Ox;for(const n of t)e=e.insert(n.key,n);return e}function Ix(t){let e=Ox;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Nc(){return pd()}function xx(){return pd()}function pd(){return new Zc(t=>t.toString(),(t,e)=>t.isEqual(e))}const Z9=new Rn(it.comparator),e5=new hr(it.comparator);function Ut(...t){let e=e5;for(const n of t)e=e.add(n);return e}const t5=new hr(At);function n5(){return t5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pm(e)?"-0":e}}function Px(t){return{integerValue:""+t}}function r5(t,e){return x9(e)?Px(e):yS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this._=void 0}}function i5(t,e,n){return t instanceof Nm?function(i,o){const c={fields:{[dx]:{stringValue:hx},[gx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hS(o)&&(o=_y(o)),o&&(c.fields[px]=o),{mapValue:c}}(n,e):t instanceof Md?Dx(t,e):t instanceof Dd?kx(t,e):function(i,o){const c=Mx(i,o),d=AC(c)+AC(i.Re);return B_(c)&&B_(i.Re)?Px(d):yS(i.serializer,d)}(t,e)}function s5(t,e,n){return t instanceof Md?Dx(t,e):t instanceof Dd?kx(t,e):n}function Mx(t,e){return t instanceof Lm?function(r){return B_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Nm extends Ey{}class Md extends Ey{constructor(e){super(),this.elements=e}}function Dx(t,e){const n=Nx(e);for(const r of t.elements)n.some(i=>Ia(i,r))||n.push(r);return{arrayValue:{values:n}}}class Dd extends Ey{constructor(e){super(),this.elements=e}}function kx(t,e){let n=Nx(e);for(const r of t.elements)n=n.filter(i=>!Ia(i,r));return{arrayValue:{values:n}}}class Lm extends Ey{constructor(e,n){super(),this.serializer=e,this.Re=n}}function AC(t){return zn(t.integerValue||t.doubleValue)}function Nx(t){return dS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function a5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Md&&i instanceof Md||r instanceof Dd&&i instanceof Dd?bf(r.elements,i.elements,Ia):r instanceof Lm&&i instanceof Lm?Ia(r.Re,i.Re):r instanceof Nm&&i instanceof Nm}(t.transform,e.transform)}class o5{constructor(e,n){this.version=e,this.transformResults=n}}class Ca{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ca}static exists(e){return new Ca(void 0,e)}static updateTime(e){return new Ca(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wy{}function Lx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vS(t.key,Ca.none()):new Xd(t.key,t.data,Ca.none());{const n=t.data,r=gs.empty();let i=new hr(kr.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new eu(t.key,r,new Bs(i.toArray()),Ca.none())}}function l5(t,e,n){t instanceof Xd?function(i,o,c){const d=i.value.clone(),p=OC(i.fieldTransforms,o,c.transformResults);d.setAll(p),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof eu?function(i,o,c){if(!Jg(i.precondition,o))return void o.convertToUnknownDocument(c.version);const d=OC(i.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(Ux(i)),p.setAll(d),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(t,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function gd(t,e,n,r){return t instanceof Xd?function(o,c,d,p){if(!Jg(o.precondition,c))return d;const g=o.value.clone(),_=IC(o.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(t,e,n,r):t instanceof eu?function(o,c,d,p){if(!Jg(o.precondition,c))return d;const g=IC(o.fieldTransforms,p,c),_=c.data;return _.setAll(Ux(o)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(t,e,n,r):function(o,c,d){return Jg(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function c5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Mx(r.transform,i||null);o!=null&&(n===null&&(n=gs.empty()),n.set(r.field,o))}return n||null}function RC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bf(r,i,(o,c)=>a5(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xd extends wy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends wy{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ux(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OC(t,e,n){const r=new Map;rn(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,d=e.data.field(o.field);r.set(o.field,s5(c,d,n[i]))}return r}function IC(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,i5(o,c,e))}return r}class vS extends wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u5 extends wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&l5(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xx();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(i.key)?null:d;const p=Lx(c,d);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ut())}isEqual(e){return this.batchId===e.batchId&&bf(this.mutations,e.mutations,(n,r)=>RC(n,r))&&bf(this.baseMutations,e.baseMutations,(n,r)=>RC(n,r))}}class _S{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){rn(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Z9}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new _S(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,qt;function p5(t){switch(t){case Re.OK:return ht(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return ht(15467,{code:t})}}function Vx(t){if(t===void 0)return vo("GRPC error has no .code"),Re.UNKNOWN;switch(t){case Xn.OK:return Re.OK;case Xn.CANCELLED:return Re.CANCELLED;case Xn.UNKNOWN:return Re.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return Re.INTERNAL;case Xn.UNAVAILABLE:return Re.UNAVAILABLE;case Xn.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Xn.NOT_FOUND:return Re.NOT_FOUND;case Xn.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Xn.ABORTED:return Re.ABORTED;case Xn.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Xn.DATA_LOSS:return Re.DATA_LOSS;default:return ht(39323,{code:t})}}(qt=Xn||(Xn={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=new Ml([4294967295,4294967295],0);function xC(t){const e=ox().encode(t),n=new ZI;return n.update(e),new Uint8Array(n.digest())}function PC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ml([n,r],0),new Ml([i,o],0)]}class bS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ad(`Invalid padding: ${n}`);if(r<0)throw new ad(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ad(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ad(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ml.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Ml.fromNumber(r)));return i.compare(g5)===1&&(i=new Ml([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=xC(e),[r,i]=PC(n);for(let o=0;o<this.hashCount;o++){const c=this.we(r,i,o);if(!this.be(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new bS(o,i,n);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=xC(e),[r,i]=PC(n);for(let o=0;o<this.hashCount;o++){const c=this.we(r,i,o);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ty(vt.min(),i,new Rn(At),_o(),Ut())}}class Jd{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jd(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class jx{constructor(e,n){this.targetId=e,this.Ce=n}}class Fx{constructor(e,n,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class MC{constructor(){this.Fe=0,this.Me=DC(),this.xe=Lr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ut(),n=Ut(),r=Ut();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ht(38017,{changeType:o})}}),new Jd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=DC()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,rn(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class m5{constructor(e){this.ze=e,this.je=new Map,this.He=_o(),this.Je=Rg(),this.Ye=Rg(),this.Ze=new Rn(At)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ht(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const o=i.target;if(z_(o))if(r===0){const c=new it(o.path);this.tt(n,c,Jr.newNoDocument(c,vt.min()))}else rn(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,d;try{c=jl(r).toUint8Array()}catch(p){if(p instanceof fx)return _f("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new bS(c,i,o)}catch(p){return _f(p instanceof ad?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,o,null),i++)}),i}It(e){const n=new Map;this.je.forEach((o,c)=>{const d=this._t(c);if(d){if(o.current&&z_(d.target)){const p=new it(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,Jr.newNoDocument(p,e))}o.Le&&(n.set(c,o.qe()),o.Qe())}});let r=Ut();this.Ye.forEach((o,c)=>{let d=!0;c.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(o))}),this.He.forEach((o,c)=>c.setReadTime(e));const i=new Ty(e,n,this.Ze,this.He,r);return this.He=_o(),this.Je=Rg(),this.Ye=Rg(),this.Ze=new Rn(At),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new MC,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new hr(At),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new hr(At),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new MC),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Rg(){return new Rn(it.comparator)}function DC(){return new Rn(it.comparator)}const y5={asc:"ASCENDING",desc:"DESCENDING"},v5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_5={and:"AND",or:"OR"};class b5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function G_(t,e){return t.useProto3Json||vy(e)?e:{value:e}}function Um(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S5(t,e){return Um(t,e.toTimestamp())}function Aa(t){return rn(!!t,49232),vt.fromTimestamp(function(n){const r=Vl(n);return new fr(r.seconds,r.nanos)}(t))}function SS(t,e){return W_(t,e).canonicalString()}function W_(t,e){const n=function(i){return new yn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hx(t){const e=yn.fromString(t);return rn(Wx(e),10190,{key:e.toString()}),e}function K_(t,e){return SS(t.databaseId,e.path)}function x0(t,e){const n=Hx(e);if(n.get(1)!==t.databaseId.projectId)throw new qe(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qe(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new it(qx(n))}function zx(t,e){return SS(t.databaseId,e)}function E5(t){const e=Hx(t);return e.length===4?yn.emptyPath():qx(e)}function Y_(t){return new yn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qx(t){return rn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kC(t,e,n){return{name:K_(t,e),fields:n.value.mapValue.fields}}function w5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ht(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,_){return g.useProto3Json?(rn(_===void 0||typeof _=="string",58123),Lr.fromBase64String(_||"")):(rn(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Lr.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?Re.UNKNOWN:Vx(g.code);return new qe(_,g.message||"")}(c);n=new Fx(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=x0(t,r.document.name),o=Aa(r.document.updateTime),c=r.document.createTime?Aa(r.document.createTime):vt.min(),d=new gs({mapValue:{fields:r.document.fields}}),p=Jr.newFoundDocument(i,o,c,d),g=r.targetIds||[],_=r.removedTargetIds||[];n=new Zg(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=x0(t,r.document),o=r.readTime?Aa(r.readTime):vt.min(),c=Jr.newNoDocument(i,o),d=r.removedTargetIds||[];n=new Zg([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=x0(t,r.document),o=r.removedTargetIds||[];n=new Zg([],o,i,null)}else{if(!("filter"in e))return ht(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new d5(i,o),d=r.targetId;n=new jx(d,c)}}return n}function T5(t,e){let n;if(e instanceof Xd)n={update:kC(t,e.key,e.value)};else if(e instanceof vS)n={delete:K_(t,e.key)};else if(e instanceof eu)n={update:kC(t,e.key,e.data),updateMask:D5(e.fieldMask)};else{if(!(e instanceof u5))return ht(16599,{ft:e.type});n={verify:K_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof Nm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Md)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Dd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Lm)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw ht(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:S5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ht(27497)}(t,e.precondition)),n}function C5(t,e){return t&&t.length>0?(rn(e!==void 0,14353),t.map(n=>function(i,o){let c=i.updateTime?Aa(i.updateTime):Aa(o);return c.isEqual(vt.min())&&(c=Aa(o)),new o5(c,i.transformResults||[])}(n,e))):[]}function A5(t,e){return{documents:[zx(t,e.path)]}}function R5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zx(t,i);const o=function(g){if(g.length!==0)return Gx(zs.create(g,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(_=>function(C){return{field:nf(C.field),direction:x5(C.dir)}}(_))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=G_(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:i}}function O5(t){let e=E5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){rn(r===1,65062);const _=n.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(E){const C=$x(E);return C instanceof zs&&Sx(C)?C.getFilters():[C]}(n.where));let c=[];n.orderBy&&(c=function(E){return E.map(C=>function(I){return new Pd(rf(I.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(C))}(n.orderBy));let d=null;n.limit&&(d=function(E){let C;return C=typeof E=="object"?E.value:E,vy(C)?null:C}(n.limit));let p=null;n.startAt&&(p=function(E){const C=!!E.before,O=E.values||[];return new km(O,C)}(n.startAt));let g=null;return n.endAt&&(g=function(E){const C=!E.before,O=E.values||[];return new km(O,C)}(n.endAt)),K9(e,i,c,o,d,"F",p,g)}function I5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $x(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rf(n.unaryFilter.field);return Zn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rf(n.unaryFilter.field);return Zn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rf(n.unaryFilter.field);return Zn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rf(n.unaryFilter.field);return Zn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ht(61313);default:return ht(60726)}}(t):t.fieldFilter!==void 0?function(n){return Zn.create(rf(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ht(58110);default:return ht(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zs.create(n.compositeFilter.filters.map(r=>$x(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ht(1026)}}(n.compositeFilter.op))}(t):ht(30097,{filter:t})}function x5(t){return y5[t]}function P5(t){return v5[t]}function M5(t){return _5[t]}function nf(t){return{fieldPath:t.canonicalString()}}function rf(t){return kr.fromServerFormat(t.fieldPath)}function Gx(t){return t instanceof Zn?function(n){if(n.op==="=="){if(SC(n.value))return{unaryFilter:{field:nf(n.field),op:"IS_NAN"}};if(bC(n.value))return{unaryFilter:{field:nf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(SC(n.value))return{unaryFilter:{field:nf(n.field),op:"IS_NOT_NAN"}};if(bC(n.value))return{unaryFilter:{field:nf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nf(n.field),op:P5(n.op),value:n.value}}}(t):t instanceof zs?function(n){const r=n.getFilters().map(i=>Gx(i));return r.length===1?r[0]:{compositeFilter:{op:M5(n.op),filters:r}}}(t):ht(54877,{filter:t})}function D5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,i,o=vt.min(),c=vt.min(),d=Lr.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ol(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ol(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.wt=e}}function N5(t){const e=O5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.Cn=new U5}addToCollectionParentIndex(e,n){return this.Cn.add(n),Oe.resolve()}getCollectionParents(e,n){return Oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Oe.resolve()}deleteFieldIndex(e,n){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,n){return Oe.resolve()}getDocumentsMatchingTarget(e,n){return Oe.resolve(null)}getIndexType(e,n){return Oe.resolve(0)}getFieldIndexes(e,n){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,n){return Oe.resolve(Ul.min())}getMinOffsetFromCollectionGroup(e,n){return Oe.resolve(Ul.min())}updateCollectionGroup(e,n,r){return Oe.resolve()}updateIndexEntries(e,n){return Oe.resolve()}}class U5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new hr(yn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hr(yn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kx=41943040;class wi{static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(Kx,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new wf(0)}static lr(){return new wf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="LruGarbageCollector",V5=1048576;function UC([t,e],[n,r]){const i=At(t,n);return i===0?At(e,r):i}class j5{constructor(e){this.Er=e,this.buffer=new hr(UC),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class F5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ze(LC,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Uf(n)?ze(LC,"Ignoring IndexedDB error during garbage collection: ",n):await Lf(n)}await this.mr(3e5)})}}class B5{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Oe.resolve(yy.le);const r=new j5(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(NC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NC):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,n))).next(E=>(o=E,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(g=Date.now(),ef()<=Lt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${o} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}function H5(t,e){return new B5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.changes=new Zc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gd(r.mutation,i,Bs.empty(),fr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ut()){const i=Nc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let c=sd();return o.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Nc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ut()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,r,i){let o=_o();const c=pd(),d=function(){return pd()}();return n.forEach((p,g)=>{const _=r.get(g.key);i.has(g.key)&&(_===void 0||_.mutation instanceof eu)?o=o.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),gd(_.mutation,g,_.mutation.getFieldMask(),fr.now())):c.set(g.key,Bs.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((g,_)=>c.set(g,_)),n.forEach((g,_)=>{var E;return d.set(g,new q5(_,(E=c.get(g))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,n){const r=pd();let i=new Rn((c,d)=>c-d),o=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let _=r.get(p)||Bs.empty();_=d.applyToLocalView(g,_),r.set(p,_);const E=(i.get(d.batchId)||Ut()).add(p);i=i.insert(d.batchId,E)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,E=xx();_.forEach(C=>{if(!o.has(C)){const O=Lx(n.get(C),r.get(C));O!==null&&E.set(C,O),o=o.add(C)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return Oe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return it.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Oe.resolve(Nc());let d=Rd,p=o;return c.next(g=>Oe.forEach(g,(_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(_)?Oe.resolve():this.remoteDocumentCache.getEntry(e,_).next(C=>{p=p.insert(_,C)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,p,g,Ut())).next(_=>({batchId:d,changes:Ix(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new it(n)).next(r=>{let i=sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=sd();return this.indexManager.getCollectionParents(e,o).next(d=>Oe.forEach(d,p=>{const g=function(E,C){return new Vf(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(_=>{_.forEach((E,C)=>{c=c.insert(E,C)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(c=>{o.forEach((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Jr.newInvalidDocument(_)))});let d=sd();return c.forEach((p,g)=>{const _=o.get(p);_!==void 0&&gd(_.mutation,g,Bs.empty(),fr.now()),Sy(n,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return Oe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Aa(i.createTime)}}(n)),Oe.resolve()}getNamedQuery(e,n){return Oe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:N5(i.bundledQuery),readTime:Aa(i.readTime)}}(n)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.overlays=new Rn(it.comparator),this.Qr=new Map}getOverlay(e,n){return Oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Nc();return Oe.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),Oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),Oe.resolve()}getOverlaysForCollection(e,n,r){const i=Nc(),o=n.length+1,c=new it(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Rn((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let _=o.get(g.largestBatchId);_===null&&(_=Nc(),o=o.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Nc(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=i)););return Oe.resolve(d)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new h5(n,r));let o=this.Qr.get(n);o===void 0&&(o=Ut(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.sessionToken=Lr.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.$r=new hr(Sr.Ur),this.Kr=new hr(Sr.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Sr(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Sr(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new it(new yn([])),r=new Sr(n,e),i=new Sr(n,e+1),o=[];return this.Kr.forEachInRange([r,i],c=>{this.zr(c),o.push(c.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new it(new yn([])),r=new Sr(n,e),i=new Sr(n,e+1);let o=Ut();return this.Kr.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new Sr(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Sr{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return it.comparator(e.key,n.key)||At(e.Zr,n.Zr)}static Wr(e,n){return At(e.Zr,n.Zr)||it.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new hr(Sr.Ur)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new f5(o,n,r,i);this.mutationQueue.push(c);for(const d of i)this.Xr=this.Xr.add(new Sr(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Oe.resolve(c)}lookupMutationBatch(e,n){return Oe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),o=i<0?0:i;return Oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?fS:this.nr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Sr(n,0),i=new Sr(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],c=>{const d=this.ei(c.Zr);o.push(d)}),Oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hr(At);return n.forEach(i=>{const o=new Sr(i,0),c=new Sr(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,c],d=>{r=r.add(d.Zr)})}),Oe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;it.isDocumentKey(o)||(o=o.child(""));const c=new Sr(new it(o),0);let d=new hr(At);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(d=d.add(p.Zr)),!0)},c),Oe.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){rn(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Oe.forEach(n.mutations,i=>{const o=new Sr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Sr(n,0),i=this.Xr.firstAfterOrEqual(r);return Oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.ii=e,this.docs=function(){return new Rn(it.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Oe.resolve(r?r.document.mutableCopy():Jr.newInvalidDocument(n))}getEntries(e,n){let r=_o();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Jr.newInvalidDocument(i))}),Oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=_o();const c=n.path,d=new it(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||A9(C9(_),r)<=0||(i.has(_.key)||Sy(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Oe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ht(9500)}si(e,n){return Oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new X5(this)}getSize(e){return Oe.resolve(this.size)}}class X5 extends z5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),Oe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.persistence=e,this.oi=new Zc(n=>pS(n),gS),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this._i=0,this.ai=new ES,this.targetCount=0,this.ui=wf.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),Oe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new wf(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,Oe.resolve()}updateTargetData(e,n){return this.Tr(n),Oe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),Oe.waitFor(o).next(()=>i)}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return Oe.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),Oe.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),Oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),Oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return Oe.resolve(r)}containsKey(e,n){return Oe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.ci={},this.overlays={},this.li=new yy(0),this.hi=!1,this.hi=!0,this.Pi=new K5,this.referenceDelegate=e(this),this.Ti=new J5(this),this.indexManager=new L5,this.remoteDocumentCache=function(i){return new Q5(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new k5(n),this.Ei=new G5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new Y5(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){ze("MemoryPersistence","Starting transaction:",e);const i=new Z5(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return Oe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class Z5 extends O9{constructor(e){super(),this.currentSequenceNumber=e}}class wS{constructor(e){this.persistence=e,this.Vi=new ES,this.mi=null}static fi(e){return new wS(e)}get gi(){if(this.mi)return this.mi;throw ht(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),Oe.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),Oe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),Oe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.gi,r=>{const i=it.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,vt.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return Oe.or([()=>Oe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Vm{constructor(e,n){this.persistence=e,this.yi=new Zc(r=>P9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=H5(this,n)}static fi(e,n){return new Vm(e,n)}di(){}Ai(e){return Oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return Oe.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?Oe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,c=>this.Dr(e,c,n).next(d=>{d||(r++,o.removeEntry(c,vt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),Oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Oe.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Oe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),Oe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qg(e.data.value)),n}Dr(e,n,r){return Oe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return Oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=Ut(),i=Ut();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new TS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return tN()?8:I9(Zr())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ws(e,n).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new ej;return this.Ss(e,n,c).next(d=>{if(o.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(ef()<=Lt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",tf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Oe.resolve()):(ef()<=Lt.DEBUG&&ze("QueryEngine","Query:",tf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(ef()<=Lt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",tf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ta(n))):Oe.resolve())}ws(e,n){if(CC(n))return Oe.resolve(null);let r=Ta(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$_(n,null,"F"),r=Ta(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Ut(...o);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const g=this.vs(n,d);return this.Cs(n,g,c,p.readTime)?this.ws(e,$_(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,r,i){return CC(n)||i.isEqual(vt.min())?Oe.resolve(null):this.ys.getDocuments(e,r).next(o=>{const c=this.vs(n,o);return this.Cs(n,c,r,i)?Oe.resolve(null):(ef()<=Lt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tf(n)),this.Fs(e,c,n,T9(i,Rd)).next(d=>d))})}vs(e,n){let r=new hr(Rx(e));return n.forEach((i,o)=>{Sy(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ef()<=Lt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",tf(n)),this.ys.getDocumentsMatchingQuery(e,n,Ul.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="LocalStore",nj=3e8;class rj{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Rn(At),this.Os=new Zc(o=>pS(o),gS),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ij(t,e,n,r){return new rj(t,e,n,r)}async function Qx(t,e){const n=St(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],d=[];let p=Ut();for(const g of i){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of o){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(r,p).next(g=>({ks:g,removedBatchIds:c,addedBatchIds:d}))})})}function sj(t,e){const n=St(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,g,_){const E=g.batch,C=E.keys();let O=Oe.resolve();return C.forEach(I=>{O=O.next(()=>_.getEntry(p,I)).next(k=>{const D=g.docVersions.get(I);rn(D!==null,48541),k.version.compareTo(D)<0&&(E.applyToRemoteDocument(k,g),k.isValidDocument()&&(k.setReadTime(g.commitVersion),_.addEntry(k)))})}),O.next(()=>d.mutationQueue.removeMutationBatch(p,E))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Ut();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Xx(t){const e=St(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function aj(t,e){const n=St(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const d=[];e.targetChanges.forEach((_,E)=>{const C=i.get(E);if(!C)return;d.push(n.Ti.removeMatchingKeys(o,_.removedDocuments,E).next(()=>n.Ti.addMatchingKeys(o,_.addedDocuments,E)));let O=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Lr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,r)),i=i.insert(E,O),function(k,D,B){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=nj?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(C,O,_)&&d.push(n.Ti.updateTargetData(o,O))});let p=_o(),g=Ut();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),d.push(oj(o,c,e.documentUpdates).next(_=>{p=_.qs,g=_.Qs})),!r.isEqual(vt.min())){const _=n.Ti.getLastRemoteSnapshotVersion(o).next(E=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(_)}return Oe.waitFor(d).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,p,g)).next(()=>p)}).then(o=>(n.xs=i,o))}function oj(t,e,n){let r=Ut(),i=Ut();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=_o();return n.forEach((d,p)=>{const g=o.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(vt.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ze(CS,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{qs:c,Qs:i}})}function lj(t,e){const n=St(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fS),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cj(t,e){const n=St(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,Oe.resolve(i)):n.Ti.allocateTargetId(r).next(c=>(i=new Ol(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Q_(t,e,n){const r=St(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Uf(c))throw c;ze(CS,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function VC(t,e,n){const r=St(t);let i=vt.min(),o=Ut();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,_){const E=St(p),C=E.Os.get(_);return C!==void 0?Oe.resolve(E.xs.get(C)):E.Ti.getTargetData(g,_)}(r,c,Ta(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{o=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,n?i:vt.min(),n?o:Ut())).next(d=>(uj(r,Q9(e),d),{documents:d,$s:o})))}function uj(t,e,n){let r=t.Ns.get(e)||vt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class jC{constructor(){this.activeTargetIds=n5()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fj{constructor(){this.xo=new jC,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new jC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="ConnectivityMonitor";class BC{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ze(FC,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ze(FC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og=null;function X_(){return Og===null?Og=function(){return 268435456+Math.round(2147483648*Math.random())}():Og++,"0x"+Og.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="RestConnection",dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Mm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){const c=X_(),d=this.jo(e,n.toUriEncodedString());ze(P0,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,i,o);const{host:g}=new URL(d),_=xf(g);return this.Jo(e,d,p,r,_).then(E=>(ze(P0,`Received RPC '${e}' ${c}: `,E),E),E=>{throw _f(P0,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E})}Yo(e,n,r,i,o,c){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){const r=dj[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="WebChannelConnection";class mj extends pj{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const c=X_();return new Promise((d,p)=>{const g=new ex;g.setWithCredentials(!0),g.listenOnce(tx.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Yg.NO_ERROR:const E=g.getResponseJson();ze(Yr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Yg.TIMEOUT:ze(Yr,`RPC '${e}' ${c} timed out`),p(new qe(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Yg.HTTP_ERROR:const C=g.getStatus();if(ze(Yr,`RPC '${e}' ${c} failed with status:`,C,"response text:",g.getResponseText()),C>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const I=O==null?void 0:O.error;if(I&&I.status&&I.message){const k=function(B){const Y=B.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(Y)>=0?Y:Re.UNKNOWN}(I.status);p(new qe(k,I.message))}else p(new qe(Re.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new qe(Re.UNAVAILABLE,"Connection failed."));break;default:ht(9055,{h_:e,streamId:c,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{ze(Yr,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(i);ze(Yr,`RPC '${e}' ${c} sending request:`,i),g.send(n,"POST",_,r,15)})}I_(e,n,r){const i=X_(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ix(),d=rx(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const _=o.join("");ze(Yr,`Creating RPC '${e}' stream ${i}: ${_}`,p);const E=c.createWebChannel(_,p);this.E_(E);let C=!1,O=!1;const I=new gj({Zo:D=>{O?ze(Yr,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(C||(ze(Yr,`Opening RPC '${e}' stream ${i} transport.`),E.open(),C=!0),ze(Yr,`RPC '${e}' stream ${i} sending:`,D),E.send(D))},Xo:()=>E.close()}),k=(D,B,Y)=>{D.listen(B,Q=>{try{Y(Q)}catch(L){setTimeout(()=>{throw L},0)}})};return k(E,id.EventType.OPEN,()=>{O||(ze(Yr,`RPC '${e}' stream ${i} transport opened.`),I.__())}),k(E,id.EventType.CLOSE,()=>{O||(O=!0,ze(Yr,`RPC '${e}' stream ${i} transport closed`),I.u_(),this.d_(E))}),k(E,id.EventType.ERROR,D=>{O||(O=!0,_f(Yr,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),I.u_(new qe(Re.UNAVAILABLE,"The operation could not be completed")))}),k(E,id.EventType.MESSAGE,D=>{var B;if(!O){const Y=D.data[0];rn(!!Y,16349);const Q=Y,L=(Q==null?void 0:Q.error)||((B=Q[0])===null||B===void 0?void 0:B.error);if(L){ze(Yr,`RPC '${e}' stream ${i} received error:`,L);const G=L.status;let q=function(U){const $=Xn[U];if($!==void 0)return Vx($)}(G),j=L.message;q===void 0&&(q=Re.INTERNAL,j="Unknown error status: "+G+" with message "+L.message),O=!0,I.u_(new qe(q,j)),E.close()}else ze(Yr,`RPC '${e}' stream ${i} received:`,Y),I.c_(Y)}}),k(d,nx.STAT_EVENT,D=>{D.stat===U_.PROXY?ze(Yr,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===U_.NOPROXY&&ze(Yr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function M0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){return new b5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="PersistentStream";class Zx{constructor(e,n,r,i,o,c,d,p){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Jx(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===Re.RESOURCE_EXHAUSTED?(vo(n.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{const i=new qe(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ze(HC,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ze(HC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yj extends Zx{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=w5(this.serializer,e),r=function(o){if(!("targetChange"in o))return vt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?vt.min():c.readTime?Aa(c.readTime):vt.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Y_(this.serializer),n.addTarget=function(o,c){let d;const p=c.target;if(d=z_(p)?{documents:A5(o,p)}:{query:R5(o,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Bx(o,c.resumeToken);const g=G_(o,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(vt.min())>0){d.readTime=Um(o,c.snapshotVersion.toTimestamp());const g=G_(o,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const r=I5(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Y_(this.serializer),n.removeTarget=e,this.Q_(n)}}class vj extends Zx{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return rn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){rn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=C5(e.writeResults,e.commitTime),r=Aa(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Y_(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>T5(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{}class bj extends _j{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new qe(Re.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.zo(e,W_(n,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Re.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,W_(n,r),i,c,d,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(Re.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Sj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vo(n),this.ua=!1):ze("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="RemoteStore";class Ej{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(c=>{r.enqueueAndForget(async()=>{tu(this)&&(ze($c,"Restarting streams for network reachability change."),await async function(p){const g=St(p);g.da.add(4),await Zd(g),g.Va.set("Unknown"),g.da.delete(4),await Ay(g)}(this))})}),this.Va=new Sj(r,i)}}async function Ay(t){if(tu(t))for(const e of t.Aa)await e(!0)}async function Zd(t){for(const e of t.Aa)await e(!1)}function e2(t,e){const n=St(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),IS(n)?OS(n):jf(n).N_()&&RS(n,e))}function AS(t,e){const n=St(t),r=jf(n);n.Ea.delete(e),r.N_()&&t2(n,e),n.Ea.size===0&&(r.N_()?r.k_():tu(n)&&n.Va.set("Unknown"))}function RS(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jf(t).Z_(e)}function t2(t,e){t.ma.Ke(e),jf(t).X_(e)}function OS(t){t.ma=new m5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),jf(t).start(),t.Va.ca()}function IS(t){return tu(t)&&!jf(t).O_()&&t.Ea.size>0}function tu(t){return St(t).da.size===0}function n2(t){t.ma=void 0}async function wj(t){t.Va.set("Online")}async function Tj(t){t.Ea.forEach((e,n)=>{RS(t,e)})}async function Cj(t,e){n2(t),IS(t)?(t.Va.Pa(e),OS(t)):t.Va.set("Unknown")}async function Aj(t,e,n){if(t.Va.set("Online"),e instanceof Fx&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const d of o.targetIds)i.Ea.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ea.delete(d),i.ma.removeTarget(d))}(t,e)}catch(r){ze($c,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jm(t,r)}else if(e instanceof Zg?t.ma.Xe(e):e instanceof jx?t.ma.ot(e):t.ma.nt(e),!n.isEqual(vt.min()))try{const r=await Xx(t.localStore);n.compareTo(r)>=0&&await function(o,c){const d=o.ma.It(c);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=o.Ea.get(g);_&&o.Ea.set(g,_.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,g)=>{const _=o.Ea.get(p);if(!_)return;o.Ea.set(p,_.withResumeToken(Lr.EMPTY_BYTE_STRING,_.snapshotVersion)),t2(o,p);const E=new Ol(_.target,p,g,_.sequenceNumber);RS(o,E)}),o.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(r){ze($c,"Failed to raise snapshot:",r),await jm(t,r)}}async function jm(t,e,n){if(!Uf(e))throw e;t.da.add(1),await Zd(t),t.Va.set("Offline"),n||(n=()=>Xx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ze($c,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Ay(t)})}function r2(t,e){return e().catch(n=>jm(t,n,e))}async function Ry(t){const e=St(t),n=Bl(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:fS;for(;Rj(e);)try{const i=await lj(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,Oj(e,i)}catch(i){await jm(e,i)}i2(e)&&s2(e)}function Rj(t){return tu(t)&&t.Ia.length<10}function Oj(t,e){t.Ia.push(e);const n=Bl(t);n.N_()&&n.ea&&n.ta(e.mutations)}function i2(t){return tu(t)&&!Bl(t).O_()&&t.Ia.length>0}function s2(t){Bl(t).start()}async function Ij(t){Bl(t).ia()}async function xj(t){const e=Bl(t);for(const n of t.Ia)e.ta(n.mutations)}async function Pj(t,e,n){const r=t.Ia.shift(),i=_S.from(r,e,n);await r2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ry(t)}async function Mj(t,e){e&&Bl(t).ea&&await async function(r,i){if(function(c){return p5(c)&&c!==Re.ABORTED}(i.code)){const o=r.Ia.shift();Bl(r).L_(),await r2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ry(r)}}(t,e),i2(t)&&s2(t)}async function zC(t,e){const n=St(t);n.asyncQueue.verifyOperationInProgress(),ze($c,"RemoteStore received new credentials");const r=tu(n);n.da.add(3),await Zd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Ay(n)}async function Dj(t,e){const n=St(t);e?(n.da.delete(2),await Ay(n)):e||(n.da.add(2),await Zd(n),n.Va.set("Unknown"))}function jf(t){return t.fa||(t.fa=function(n,r,i){const o=St(n);return o.oa(),new yj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:wj.bind(null,t),n_:Tj.bind(null,t),i_:Cj.bind(null,t),Y_:Aj.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),IS(t)?OS(t):t.Va.set("Unknown")):(await t.fa.stop(),n2(t))})),t.fa}function Bl(t){return t.ga||(t.ga=function(n,r,i){const o=St(n);return o.oa(),new vj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Ij.bind(null,t),i_:Mj.bind(null,t),na:xj.bind(null,t),ra:Pj.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Ry(t)):(await t.ga.stop(),t.Ia.length>0&&(ze($c,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,d=new xS(e,n,c,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PS(t,e){if(vo("AsyncQueue",`${e}: ${t}`),Uf(t))return new qe(Re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{static emptySet(e){return new df(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||it.comparator(n.key,r.key):(n,r)=>it.comparator(n.key,r.key),this.keyedMap=sd(),this.sortedSet=new Rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof df)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new df;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.pa=new Rn(it.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ht(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tf{constructor(e,n,r,i,o,c,d,p,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new Tf(e,n,df.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&by(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Nj{constructor(){this.queries=$C(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=St(n),o=i.queries;i.queries=$C(),o.forEach((c,d)=>{for(const p of d.Sa)p.onError(r)})})(this,new qe(Re.ABORTED,"Firestore shutting down"))}}function $C(){return new Zc(t=>Ax(t),by)}async function a2(t,e){const n=St(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new kj,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(i,!0);break;case 1:o.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const d=PS(c,`Initialization of query '${tf(e.query)}' failed`);return void e.onError(d)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&MS(n)}async function o2(t,e){const n=St(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lj(t,e){const n=St(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const d of c.Sa)d.Ma(i)&&(r=!0);c.ba=i}}r&&MS(n)}function Uj(t,e,n){const r=St(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function MS(t){t.Ca.forEach(e=>{e.next()})}var J_,GC;(GC=J_||(J_={})).xa="default",GC.Cache="cache";class l2{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Tf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==J_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.key=e}}class u2{constructor(e){this.key=e}}class Vj{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ut(),this.mutatedKeys=Ut(),this.Za=Rx(e),this.Xa=new df(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new qC,i=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,d=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,E)=>{const C=i.get(_),O=Sy(this.query,E)?E:null,I=!!C&&this.mutatedKeys.has(C.key),k=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let D=!1;C&&O?C.data.isEqual(O.data)?I!==k&&(r.track({type:3,doc:O}),D=!0):this.ru(C,O)||(r.track({type:2,doc:O}),D=!0,(p&&this.Za(O,p)>0||g&&this.Za(O,g)<0)&&(d=!0)):!C&&O?(r.track({type:0,doc:O}),D=!0):C&&!O&&(r.track({type:1,doc:C}),D=!0,(p||g)&&(d=!0)),D&&(O?(c=c.add(O),o=k?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{Xa:c,nu:r,Cs:d,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((_,E)=>function(O,I){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht(20277,{Vt:D})}};return k(O)-k(I)}(_.type,E.type)||this.Za(_.doc,E.doc)),this.iu(r),i=i!=null&&i;const d=n&&!i?this.su():[],p=this.Ya.size===0&&this.current&&!i?1:0,g=p!==this.Ja;return this.Ja=p,c.length!==0||g?{snapshot:new Tf(this.query,e.Xa,o,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new qC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ut(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new u2(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new c2(r))}),n}au(e){this.Ha=e.$s,this.Ya=Ut();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Tf.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const DS="SyncEngine";class jj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Fj{constructor(e){this.key=e,this.cu=!1}}class Bj{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Zc(d=>Ax(d),by),this.Pu=new Map,this.Tu=new Set,this.Iu=new Rn(it.comparator),this.Eu=new Map,this.du=new ES,this.Au={},this.Ru=new Map,this.Vu=wf.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Hj(t,e,n=!0){const r=m2(t);let i;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await f2(r,e,n,!0),i}async function zj(t,e){const n=m2(t);await f2(n,e,!0,!1)}async function f2(t,e,n,r){const i=await cj(t.localStore,Ta(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await qj(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&e2(t.remoteStore,i),d}async function qj(t,e,n,r,i){t.fu=(E,C,O)=>async function(k,D,B,Y){let Q=D.view.tu(B);Q.Cs&&(Q=await VC(k.localStore,D.query,!1).then(({documents:j})=>D.view.tu(j,Q)));const L=Y&&Y.targetChanges.get(D.targetId),G=Y&&Y.targetMismatches.get(D.targetId)!=null,q=D.view.applyChanges(Q,k.isPrimaryClient,L,G);return KC(k,D.targetId,q.ou),q.snapshot}(t,E,C,O);const o=await VC(t.localStore,e,!0),c=new Vj(e,o.$s),d=c.tu(o.documents),p=Jd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),g=c.applyChanges(d,t.isPrimaryClient,p);KC(t,n,g.ou);const _=new jj(e,n,c);return t.hu.set(e,_),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),g.snapshot}async function $j(t,e,n){const r=St(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(c=>!by(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Q_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&AS(r.remoteStore,i.targetId),Z_(r,i.targetId)}).catch(Lf)):(Z_(r,i.targetId),await Q_(r.localStore,i.targetId,!0))}async function Gj(t,e){const n=St(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),AS(n.remoteStore,r.targetId))}async function Wj(t,e,n){const r=e8(t);try{const i=await function(c,d){const p=St(c),g=fr.now(),_=d.reduce((O,I)=>O.add(I.key),Ut());let E,C;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let I=_o(),k=Ut();return p.Bs.getEntries(O,_).next(D=>{I=D,I.forEach((B,Y)=>{Y.isValidDocument()||(k=k.add(B))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,I)).next(D=>{E=D;const B=[];for(const Y of d){const Q=c5(Y,E.get(Y.key).overlayedDocument);Q!=null&&B.push(new eu(Y.key,Q,vx(Q.value.mapValue),Ca.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,B,d)}).next(D=>{C=D;const B=D.applyToLocalDocumentSet(E,k);return p.documentOverlayCache.saveOverlays(O,D.batchId,B)})}).then(()=>({batchId:C.batchId,changes:Ix(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,d,p){let g=c.Au[c.currentUser.toKey()];g||(g=new Rn(At)),g=g.insert(d,p),c.Au[c.currentUser.toKey()]=g}(r,i.batchId,n),await ep(r,i.changes),await Ry(r.remoteStore)}catch(i){const o=PS(i,"Failed to persist write");n.reject(o)}}async function h2(t,e){const n=St(t);try{const r=await aj(n.localStore,e);e.targetChanges.forEach((i,o)=>{const c=n.Eu.get(o);c&&(rn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.cu=!0:i.modifiedDocuments.size>0?rn(c.cu,14607):i.removedDocuments.size>0&&(rn(c.cu,42227),c.cu=!1))}),await ep(n,r,e)}catch(r){await Lf(r)}}function WC(t,e,n){const r=St(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.hu.forEach((o,c)=>{const d=c.view.Fa(e);d.snapshot&&i.push(d.snapshot)}),function(c,d){const p=St(c);p.onlineState=d;let g=!1;p.queries.forEach((_,E)=>{for(const C of E.Sa)C.Fa(d)&&(g=!0)}),g&&MS(p)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Kj(t,e,n){const r=St(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let c=new Rn(it.comparator);c=c.insert(o,Jr.newNoDocument(o,vt.min()));const d=Ut().add(o),p=new Ty(vt.min(),new Map,new Rn(At),c,d);await h2(r,p),r.Iu=r.Iu.remove(o),r.Eu.delete(e),kS(r)}else await Q_(r.localStore,e,!1).then(()=>Z_(r,e,n)).catch(Lf)}async function Yj(t,e){const n=St(t),r=e.batch.batchId;try{const i=await sj(n.localStore,e);p2(n,r,null),d2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ep(n,i)}catch(i){await Lf(i)}}async function Qj(t,e,n){const r=St(t);try{const i=await function(c,d){const p=St(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next(E=>(rn(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(g,E))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(r.localStore,e);p2(r,e,n),d2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ep(r,i)}catch(i){await Lf(i)}}function d2(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function p2(t,e,n){const r=St(t);let i=r.Au[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Z_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||g2(t,r)})}function g2(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(AS(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),kS(t))}function KC(t,e,n){for(const r of n)r instanceof c2?(t.du.addReference(r.key,e),Xj(t,r)):r instanceof u2?(ze(DS,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||g2(t,r.key)):ht(19791,{pu:r})}function Xj(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(ze(DS,"New document in limbo: "+n),t.Tu.add(r),kS(t))}function kS(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new it(yn.fromString(e)),r=t.Vu.next();t.Eu.set(r,new Fj(n)),t.Iu=t.Iu.insert(n,r),e2(t.remoteStore,new Ol(Ta(mS(n.path)),r,"TargetPurposeLimboResolution",yy.le))}}async function ep(t,e,n){const r=St(t),i=[],o=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,p)=>{c.push(r.fu(p,e,n).then(g=>{var _;if((g||n)&&r.isPrimaryClient){const E=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){i.push(g);const E=TS.Rs(p.targetId,g);o.push(E)}}))}),await Promise.all(c),r.lu.Y_(i),await async function(p,g){const _=St(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Oe.forEach(g,C=>Oe.forEach(C.ds,O=>_.persistence.referenceDelegate.addReference(E,C.targetId,O)).next(()=>Oe.forEach(C.As,O=>_.persistence.referenceDelegate.removeReference(E,C.targetId,O)))))}catch(E){if(!Uf(E))throw E;ze(CS,"Failed to update sequence numbers: "+E)}for(const E of g){const C=E.targetId;if(!E.fromCache){const O=_.xs.get(C),I=O.snapshotVersion,k=O.withLastLimboFreeSnapshotVersion(I);_.xs=_.xs.insert(C,k)}}}(r.localStore,o))}async function Jj(t,e){const n=St(t);if(!n.currentUser.isEqual(e)){ze(DS,"User change. New user:",e.toKey());const r=await Qx(n.localStore,e);n.currentUser=e,function(o,c){o.Ru.forEach(d=>{d.forEach(p=>{p.reject(new qe(Re.CANCELLED,c))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ep(n,r.ks)}}function Zj(t,e){const n=St(t),r=n.Eu.get(e);if(r&&r.cu)return Ut().add(r.key);{let i=Ut();const o=n.Pu.get(e);if(!o)return i;for(const c of o){const d=n.hu.get(c);i=i.unionWith(d.view.eu)}return i}}function m2(t){const e=St(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kj.bind(null,e),e.lu.Y_=Lj.bind(null,e.eventManager),e.lu.gu=Uj.bind(null,e.eventManager),e}function e8(t){const e=St(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qj.bind(null,e),e}class Fm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cy(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return ij(this.persistence,new tj,e.initialUser,this.serializer)}Su(e){return new Yx(wS.fi,this.serializer)}bu(e){return new fj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fm.provider={build:()=>new Fm};class t8 extends Fm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){rn(this.persistence.referenceDelegate instanceof Vm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new F5(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new Yx(r=>Vm.fi(r,n),this.serializer)}}class eb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>WC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jj.bind(null,this.syncEngine),await Dj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Nj}()}createDatastore(e){const n=Cy(e.databaseInfo.databaseId),r=function(o){return new mj(o)}(e.databaseInfo);return function(o,c,d,p){return new bj(o,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,c,d){return new Ej(r,i,o,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>WC(this.syncEngine,n,0),function(){return BC.C()?new BC:new hj}())}createSyncEngine(e,n){return function(i,o,c,d,p,g,_){const E=new Bj(i,o,c,d,p,g);return _&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=St(i);ze($c,"RemoteStore shutting down."),o.da.add(5),await Zd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}eb.provider={build:()=>new eb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="FirestoreClient";class n8{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xr.UNAUTHENTICATED,this.clientId=lx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{ze(Hl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ze(Hl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=PS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D0(t,e){t.asyncQueue.verifyOperationInProgress(),ze(Hl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Qx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function YC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r8(t);ze(Hl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zC(e.remoteStore,i)),t._onlineComponents=e}async function r8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ze(Hl,"Using user provided OfflineComponentProvider");try{await D0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;_f("Error using user provided cache. Falling back to memory cache: "+n),await D0(t,new Fm)}}else ze(Hl,"Using default OfflineComponentProvider"),await D0(t,new t8(void 0));return t._offlineComponents}async function v2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ze(Hl,"Using user provided OnlineComponentProvider"),await YC(t,t._uninitializedComponentsProvider._online)):(ze(Hl,"Using default OnlineComponentProvider"),await YC(t,new eb))),t._onlineComponents}function i8(t){return v2(t).then(e=>e.syncEngine)}async function _2(t){const e=await v2(t),n=e.eventManager;return n.onListen=Hj.bind(null,e.syncEngine),n.onUnlisten=$j.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Gj.bind(null,e.syncEngine),n}function s8(t,e,n={}){const r=new fo;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,d,p,g){const _=new y2({next:C=>{_.xu(),c.enqueueAndForget(()=>o2(o,E));const O=C.docs.has(d);!O&&C.fromCache?g.reject(new qe(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&p&&p.source==="server"?g.reject(new qe(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(C)},error:C=>g.reject(C)}),E=new l2(mS(d.path),_,{includeMetadataChanges:!0,Qa:!0});return a2(o,E)}(await _2(t),t.asyncQueue,e,n,r)),r.promise}function a8(t,e,n={}){const r=new fo;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,d,p,g){const _=new y2({next:C=>{_.xu(),c.enqueueAndForget(()=>o2(o,E)),C.fromCache&&p.source==="server"?g.reject(new qe(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(C)},error:C=>g.reject(C)}),E=new l2(d,_,{includeMetadataChanges:!0,Qa:!0});return a2(o,E)}(await _2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e,n){if(!n)throw new qe(Re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function o8(t,e,n,r){if(e===!0&&r===!0)throw new qe(Re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XC(t){if(!it.isDocumentKey(t))throw new qe(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JC(t){if(it.isDocumentKey(t))throw new qe(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Oy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ht(12329,{type:typeof t})}function zl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oy(t);throw new qe(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="firestore.googleapis.com",ZC=!0;class eA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E2,this.ssl=ZC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ZC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V5)throw new qe(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g9;switch(r.type){case"firstParty":return new _9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=QC.get(n);r&&(ze("ComponentProvider","Removing Datastore"),QC.delete(n),r.terminate())}(this),Promise.resolve()}}function l8(t,e,n,r={}){var i;t=zl(t,Iy);const o=xf(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),p=`${e}:${n}`;o&&(bO(`https://${p}`),SO("Firestore",!0)),c.host!==E2&&c.host!==p&&_f("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:o,emulatorOptions:r});if(!Vc(g,d)&&(t._setSettings(g),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=Xr.MOCK_USER;else{_=Gk(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new qe(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xr(C)}t._authCredentials=new m9(new ax(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nu(this.firestore,e,this._query)}}class Ti{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ti(this.firestore,e,this._key)}}class Dl extends nu{constructor(e,n,r){super(e,n,mS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ti(this.firestore,null,new it(e))}withConverter(e){return new Dl(this.firestore,e,this._path)}}function Ff(t,e,...n){if(t=ui(t),S2("collection","path",e),t instanceof Iy){const r=yn.fromString(e,...n);return JC(r),new Dl(t,null,r)}{if(!(t instanceof Ti||t instanceof Dl))throw new qe(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yn.fromString(e,...n));return JC(r),new Dl(t.firestore,null,r)}}function Bf(t,e,...n){if(t=ui(t),arguments.length===1&&(e=lx.newId()),S2("doc","path",e),t instanceof Iy){const r=yn.fromString(e,...n);return XC(r),new Ti(t,null,new it(r))}{if(!(t instanceof Ti||t instanceof Dl))throw new qe(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yn.fromString(e,...n));return XC(r),new Ti(t.firestore,t instanceof Dl?t.converter:null,new it(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="AsyncQueue";class nA{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Jx(this,"async_queue_retry"),this.rc=()=>{const r=M0();r&&ze(tA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=M0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=M0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new fo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Uf(e))throw e;ze(tA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,vo("INTERNAL UNHANDLED ERROR: ",rA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const i=xS.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&ht(47125,{cc:rA(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function rA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class tp extends Iy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nA(e),this._firestoreClient=void 0,await e}}}function w2(t,e){const n=typeof t=="object"?t:CO(),r=typeof t=="string"?t:Mm,i=Vb(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=qk("firestore");o&&l8(i,...o)}return i}function NS(t){if(t._terminated)throw new qe(Re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c8(t),t._firestoreClient}function c8(t){var e,n,r;const i=t._freezeSettings(),o=function(d,p,g,_){return new k9(d,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,b2(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new n8(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cf(Lr.fromBase64String(e))}catch(n){throw new qe(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cf(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function u8(){return new xy(j_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=/^__.*__$/;class h8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new eu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xd(e,this.data,n,this.fieldTransforms)}}function C2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht(40011,{Ic:t})}}class VS{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new VS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Bm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(C2(this.Ic)&&f8.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class d8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cy(e)}bc(e,n,r,i=!1){return new VS({Ic:e,methodName:n,wc:r,path:kr.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function A2(t){const e=t._freezeSettings(),n=Cy(t._databaseId);return new d8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function p8(t,e,n,r,i,o={}){const c=t.bc(o.merge||o.mergeFields?2:0,e,n,i);I2("Data must be an object, but it was:",c,r);const d=R2(r,c);let p,g;if(o.merge)p=new Bs(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const E of o.mergeFields){const C=m8(e,E,n);if(!c.contains(C))throw new qe(Re.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);v8(_,C)||_.push(C)}p=new Bs(_),g=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,g=c.fieldTransforms;return new h8(new gs(d),p,g)}function g8(t,e,n,r=!1){return jS(n,t.bc(r?4:3,e))}function jS(t,e){if(O2(t=ui(t)))return I2("Unsupported field value:",e,t),R2(t,e);if(t instanceof T2)return function(r,i){if(!C2(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const d of r){let p=jS(d,i.fc(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ui(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=fr.fromDate(r);return{timestampValue:Um(i.serializer,o)}}if(r instanceof fr){const o=new fr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Um(i.serializer,o)}}if(r instanceof LS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cf)return{bytesValue:Bx(i.serializer,r._byteString)};if(r instanceof Ti){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:SS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof US)return function(c,d){return{mapValue:{fields:{[mx]:{stringValue:yx},[Dm]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.gc("VectorValues must only contain numeric values.");return yS(d.serializer,g)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Oy(r)}`)}(t,e)}function R2(t,e){const n={};return ux(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jc(t,(r,i)=>{const o=jS(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function O2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fr||t instanceof LS||t instanceof Cf||t instanceof Ti||t instanceof T2||t instanceof US)}function I2(t,e,n){if(!O2(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Oy(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function m8(t,e,n){if((e=ui(e))instanceof xy)return e._internalPath;if(typeof e=="string")return x2(t,e);throw Bm("Field path arguments must be of type string or ",t,!1,void 0,n)}const y8=new RegExp("[~\\*/\\[\\]]");function x2(t,e,n){if(e.search(y8)>=0)throw Bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xy(...e.split("."))._internalPath}catch{throw Bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bm(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new qe(Re.INVALID_ARGUMENT,d+t+p)}function v8(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Py("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _8 extends P2{data(){return super.data()}}function Py(t,e){return typeof e=="string"?x2(t,e):e instanceof xy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FS{}class M2 extends FS{}function D2(t,e,...n){let r=[];e instanceof FS&&r.push(e),r=r.concat(n),function(o){const c=o.filter(p=>p instanceof BS).length,d=o.filter(p=>p instanceof My).length;if(c>1||c>0&&d>0)throw new qe(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class My extends M2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new My(e,n,r)}_apply(e){const n=this._parse(e);return N2(e._query,n),new nu(e.firestore,e.converter,q_(e._query,n))}_parse(e){const n=A2(e.firestore);return function(o,c,d,p,g,_,E){let C;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new qe(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){aA(E,_);const I=[];for(const k of E)I.push(sA(p,o,k));C={arrayValue:{values:I}}}else C=sA(p,o,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||aA(E,_),C=g8(d,c,E,_==="in"||_==="not-in");return Zn.create(g,_,C)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function k2(t,e,n){const r=e,i=Py("where",t);return My._create(i,r,n)}class BS extends FS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new BS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let c=i;const d=o.getFlattenedFilters();for(const p of d)N2(c,p),c=q_(c,p)}(e._query,n),new nu(e.firestore,e.converter,q_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class HS extends M2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new HS(e,n)}_apply(e){const n=function(i,o,c){if(i.startAt!==null)throw new qe(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pd(o,c)}(e._query,this._field,this._direction);return new nu(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new Vf(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function iA(t,e="asc"){const n=e,r=Py("orderBy",t);return HS._create(r,n)}function sA(t,e,n){if(typeof(n=ui(n))=="string"){if(n==="")throw new qe(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cx(e)&&n.indexOf("/")!==-1)throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(yn.fromString(n));if(!it.isDocumentKey(r))throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _C(t,new it(r))}if(n instanceof Ti)return _C(t,n._key);throw new qe(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oy(n)}.`)}function aA(t,e){if(!Array.isArray(t)||t.length===0)throw new qe(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N2(t,e){const n=function(i,o){for(const c of i)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new qe(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class S8{convertValue(e,n="none"){switch(Fl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ht(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Dm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>zn(c.doubleValue));return new US(o)}convertGeoPoint(e){return new LS(zn(e.latitude),zn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_y(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const n=Vl(e);return new fr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=yn.fromString(e);rn(Wx(r),9688,{name:e});const i=new Id(r.get(1),r.get(3)),o=new it(r.popFirst(5));return i.isEqual(n)||vo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class L2 extends P2{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new em(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Py("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class em extends L2{data(e={}){return super.data(e)}}class w8{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new od(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new em(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(d=>{const p=new em(i._firestore,i._userDataWriter,d.doc.key,d.doc,new od(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const p=new em(i._firestore,i._userDataWriter,d.doc.key,d.doc,new od(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:T8(d.type),doc:p,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function T8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){t=zl(t,Ti);const e=zl(t.firestore,tp);return s8(NS(e),t._key).then(n=>R8(e,t,n))}class U2 extends S8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cf(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,n)}}function Hf(t){t=zl(t,nu);const e=zl(t.firestore,tp),n=NS(e),r=new U2(e);return b8(t._query),a8(n,t._query).then(i=>new w8(e,r,t,i))}function Dy(t,e,n){t=zl(t,Ti);const r=zl(t.firestore,tp),i=E8(t.converter,e);return V2(r,[p8(A2(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ca.none())])}function A8(t){return V2(zl(t.firestore,tp),[new vS(t._key,Ca.none())])}function V2(t,e){return function(r,i){const o=new fo;return r.asyncQueue.enqueueAndForget(async()=>Wj(await i8(r),i,o)),o.promise}(NS(t),e)}function R8(t,e,n){const r=n.docs.get(e._key),i=new U2(t);return new L2(t,i,e._key,r,new od(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Nf=i})(Pf),yf(new jc("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new tp(new y9(r.getProvider("auth-internal")),new b9(c,r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new qe(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(g.options.projectId,_)}(c,i),c);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),Pl(lC,cC,e),Pl(lC,cC,"esm2017")})();const ky=w2(cS),O8=async t=>(await Dy(Bf(ky,"songs",t.id),t),t),I8=async t=>(await A8(Bf(ky,"songs",t)),{id:t}),x8=async t=>{const e=Ff(ky,"songs"),n=D2(e,k2("editors","array-contains",t),iA("owner","asc"),iA("title","asc")),i=(await Hf(n)).docs.map(p=>p.data()),o=i.reduce((p,g)=>[...p,...g.editors,g.owner],[]),c=await Ki.user.getUsersInUIDListAsMap(o);return i.map(p=>{const g=c[p.owner]||{},_=p.editors.map(E=>{const C=c[E]||null;return{value:E,label:`${C==null?void 0:C.username}#${C==null?void 0:C.tag}`}});return{...p,editorsData:_,ownerData:g}})},P8=async t=>{const{editorsData:e,...n}=t;return await Dy(Bf(ky,"songs",t.id),n),t},M8=Object.freeze(Object.defineProperty({__proto__:null,addSong:O8,deleteSong:I8,loadSongs:x8,saveSong:P8},Symbol.toStringTag,{value:"Module"})),xr=[];for(let t=0;t<256;++t)xr.push((t+256).toString(16).slice(1));function D8(t,e=0){return(xr[t[e+0]]+xr[t[e+1]]+xr[t[e+2]]+xr[t[e+3]]+"-"+xr[t[e+4]]+xr[t[e+5]]+"-"+xr[t[e+6]]+xr[t[e+7]]+"-"+xr[t[e+8]]+xr[t[e+9]]+"-"+xr[t[e+10]]+xr[t[e+11]]+xr[t[e+12]]+xr[t[e+13]]+xr[t[e+14]]+xr[t[e+15]]).toLowerCase()}let k0;const k8=new Uint8Array(16);function N8(){if(!k0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k0=crypto.getRandomValues.bind(crypto)}return k0(k8)}const N0={};function np(t,e,n){let r;{const i=Date.now(),o=N8();L8(N0,i,o),r=U8(o,N0.msecs,N0.seq,e,n)}return D8(r)}function L8(t,e,n){return t.msecs??(t.msecs=-1/0),t.seq??(t.seq=0),e>t.msecs?(t.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],t.msecs=e):(t.seq=t.seq+1|0,t.seq===0&&t.msecs++),t}function U8(t,e,n,r,i=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!r)r=new Uint8Array(16),i=0;else if(i<0||i+16>r.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??(e=Date.now()),n??(n=t[6]*127<<24|t[7]<<16|t[8]<<8|t[9]),r[i++]=e/1099511627776&255,r[i++]=e/4294967296&255,r[i++]=e/16777216&255,r[i++]=e/65536&255,r[i++]=e/256&255,r[i++]=e&255,r[i++]=112|n>>>28&15,r[i++]=n>>>20&255,r[i++]=128|n>>>14&63,r[i++]=n>>>6&255,r[i++]=n<<2&255|t[10]&3,r[i++]=t[11],r[i++]=t[12],r[i++]=t[13],r[i++]=t[14],r[i++]=t[15],r}const ql=w2(cS),j2=async t=>{const{uid:e,tag:n,username:r}=t;await Dy(Bf(ql,"publicUsers",e),{uid:e,tag:n,username:r})},V8=async t=>{const{email:e,password:n,username:r}=t,{uid:i}=await Ki.auth.signUp(e,n),o=np();await Dy(Bf(ql,"users",i),{uid:i,tag:o,username:r,email:e}),await j2({uid:i,tag:o,username:r})},j8=async()=>{const t=Ff(ql,"publicUsers");return(await Hf(t)).docs.map(n=>n.data())},F8=async()=>{const t=Ff(ql,"users");return(await Hf(t)).docs.map(n=>n.data())},B8=async t=>{if(!(t!=null&&t.length))return{};const e=Ff(ql,"publicUsers"),n=D2(e,k2(u8(),"in",t));return(await Hf(n)).docs.reduce((i,o)=>({...i,[o.id]:o.data()}),{})},H8=async()=>{const t=Ff(ql,"publicUsers");return(await Hf(t)).docs.map(n=>n.data())},F2=async t=>{const e=Bf(ql,"users",t),n=await C8(e);if(n.exists()){const r=await n.data(),i=Ff(ql,"users",t,"songs"),c=(await Hf(i)).docs.map(d=>d.data());return{...r,songs:c}}return null},z8=async t=>{const{email:e,password:n}=t,r=await Ki.auth.signIn(e,n);return await F2(r.uid)},q8=Object.freeze(Object.defineProperty({__proto__:null,addPublicUser:j2,addUser:V8,getAllPublicUsers:j8,getAllUsers:F8,getUsersInUIDListAsMap:B8,loadPublicUsers:H8,loadUser:F2,signInUser:z8},Symbol.toStringTag,{value:"Module"})),Ki={auth:p9,song:M8,user:q8},$8=async t=>await Ki.song.addSong(t),G8=async t=>await Ki.song.deleteSong(t),W8=async t=>await Ki.song.loadSongs(t),K8=async t=>await Ki.song.saveSong(t),Y8=async()=>await Ki.user.loadPublicUsers(),Q8=async t=>{const{uid:e}=t;return await Ki.user.loadUser(e)},X8=async t=>{const{email:e,password:n}=t;return await Ki.user.signInUser({email:e,password:n})},J8=async()=>{await Ki.auth.signOut()},Z8=async t=>{await Ki.user.addUser(t)},B2=t=>(t||"").replaceAll(/\s+/g," ").trim().split(" "),eF=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize),tF=()=>np(),nF=5e3,zS=Object.freeze({ERROR:"ERROR",INFO:"INFO",SUCCESS:"SUCCESS",WARN:"WARN"}),qS=(t,e,n)=>({id:tF(),level:t,message:e,fixed:(n==null?void 0:n.fixed)??!0}),H2=t=>qS(zS.ERROR,t),z2=t=>qS(zS.SUCCESS,t,{fixed:!1}),rF=t=>qS(zS.WARN,t),tb=t=>e=>{e.fixed||setTimeout(()=>{t(Ad.actions.removeGrowl(e.id))},nF),t(Ad.actions.addGrowl(e))},q2=t=>t==_t.LOADING,iF=t=>{if(!Array.isArray(t))throw new Error("alphabeticallySortSongs: songs should be an array");return[...t].sort((e,n)=>{const r=e.title||"",i=n.title||"";return r.localeCompare(i)})},sF={addSongStatus:_t.IDLE,latestAddedSongId:null},tm={addSong:yo(`${Qd}/addSong`,async t=>await $8(t))},aF={clearAddSongStatus:t=>{t.addSongStatus=_t.IDLE},clearLatestAddedSongId:t=>{t.latestAddedSongId=null}},oF=t=>{t.addCase(tm.addSong.pending,e=>{e.addSongStatus=_t.LOADING}).addCase(tm.addSong.fulfilled,(e,n)=>{e.addSongStatus=_t.SUCCEEDED,e.songs=iF([...e.songs,n.payload]),e.latestAddedSongId=n.payload.id}).addCase(tm.addSong.rejected,e=>{e.addSongStatus=_t.FAILED})},lF={selectAddSongStatus:t=>t.songs.addSongStatus,selectLatestAddedSongId:t=>t.songs.latestAddedSongId},cF={asyncThunk:tm,extraReducers:oF,initialState:sF,reducers:aF,selectors:lF},uF={deleteSongStatus:_t.IDLE},nm={deleteSong:yo(`${Qd}/deleteSong`,async t=>await G8(t))},fF={clearDeleteSongStatus:t=>{t.deleteSongStatus=_t.IDLE}},hF=t=>{t.addCase(nm.deleteSong.pending,e=>{e.deleteSongStatus=_t.LOADING}).addCase(nm.deleteSong.fulfilled,(e,n)=>{e.deleteSongStatus=_t.SUCCEEDED;const r=e.songs.findIndex(i=>i.id==n.payload.id);e.songs.splice(r,1)}).addCase(nm.deleteSong.rejected,e=>{e.deleteSongStatus=_t.FAILED})},dF={},pF={asyncThunk:nm,extraReducers:hF,initialState:uF,reducers:fF,selectors:dF},gF={songs:[],loadSongsStatus:_t.IDLE},rm={loadSongs:yo(`${Qd}/loadSongs`,async t=>await W8(t))},mF=t=>{t.addCase(rm.loadSongs.pending,e=>{e.loadSongsStatus=_t.LOADING}).addCase(rm.loadSongs.fulfilled,(e,n)=>{e.loadSongsStatus=_t.SUCCEEDED,e.songs=n.payload}).addCase(rm.loadSongs.rejected,e=>{e.loadSongsStatus=_t.FAILED})},yF={selectAllSongs:t=>t.songs.songs||[],selectSongById:t=>e=>e.songs.songs.find(n=>n.id===t),selectSongsStatus:t=>t.songs.songsStatus},vF={initialState:gF,asyncThunk:rm,extraReducers:mF,selectors:yF},_F={saveSongStatus:_t.IDLE},im={saveSong:yo(`${Qd}/saveSong`,async t=>await K8(t))},bF={editSongTitle:(t,e)=>{const{payload:n}=e,r=t.songs.find(i=>i.id===n.id);r&&(r.title=n.title)},editSongEditors:(t,e)=>{const{payload:n}=e,r=t.songs.find(i=>i.id===n.id);r&&(r.editors=n.editors,r.editorsData=n.editorsData)},clearSaveSongStatus:t=>{t.saveSongStatus=_t.IDLE}},SF=t=>{t.addCase(im.saveSong.pending,e=>{e.saveSongStatus=_t.LOADING}).addCase(im.saveSong.fulfilled,(e,n)=>{e.saveSongStatus=_t.SUCCEEDED;const r=n.payload,i=e.songs.find(o=>o.id===r.id);i.notes=r.notes,i.editors=r.editors,i.editorsData=r.editorsData}).addCase(im.saveSong.rejected,e=>{e.saveSongStatus=_t.FAILED})},EF={selectSaveSongStatus:t=>t.songs.saveSongStatus},wF={asyncThunk:im,extraReducers:SF,initialState:_F,reducers:bF,selectors:EF},TF=Object.freeze(Object.defineProperty({__proto__:null,AddSong:cF,DeleteSong:pF,LoadSongs:vF,SaveSong:wF},Symbol.toStringTag,{value:"Module"})),ur=lS({sliceName:Qd,sliceParts:TF}),Af="user",CF={loggedUser:null,publicUsers:null,loggedUserStatus:_t.IDLE,publicUsersStatus:_t.IDLE,firebaseOnAuthStateChangedStatus:_t.IDLE},AF={completeFirebaseOnAuthStateChangedStatus:t=>{t.firebaseOnAuthStateChangedStatus=_t.SUCCEEDED}},Mc={loadUser:yo(`${Af}/loadUser`,async t=>await Q8(t)),loadPublicUsers:yo(`${Af}/loadPublicUsers`,async()=>await Y8())},RF=t=>{t.addCase(Mc.loadUser.pending,e=>{e.loggedUserStatus=_t.LOADING}).addCase(Mc.loadUser.fulfilled,(e,n)=>{e.loggedUserStatus=_t.SUCCEEDED,e.loggedUser=n.payload}).addCase(Mc.loadUser.rejected,e=>{e.loggedUserStatus=_t.FAILED}),t.addCase(Mc.loadPublicUsers.pending,e=>{e.publicUsersStatus=_t.LOADING}).addCase(Mc.loadPublicUsers.fulfilled,(e,n)=>{e.publicUsersStatus=_t.SUCCEEDED,e.publicUsers=n.payload}).addCase(Mc.loadPublicUsers.rejected,e=>{e.publicUsersStatus=_t.FAILED})},OF={selectLoggedUser:t=>t.users.loggedUser,selectPublicUsers:t=>t.users.publicUsers,isLoggedIn:t=>!!t.users.loggedUser,isLoginVerificationComplete:t=>t.users.loggedUser!=null||t.users.loggedUserStatus==_t.SUCCEEDED||t.users.loggedUserStatus==_t.FAILED,isFirebaseOnAuthStateChangedStatusComplete:t=>t.users.firebaseOnAuthStateChangedStatus!=_t.IDLE},IF={initialState:CF,reducers:AF,asyncThunk:Mc,extraReducers:RF,selectors:OF},xF={signInStatus:_t.IDLE},PF={},sm={signInUser:yo(`${Af}/signInUser`,async t=>await X8(t))},MF=t=>{t.addCase(sm.signInUser.pending,e=>{e.signInStatus=_t.LOADING}).addCase(sm.signInUser.fulfilled,(e,n)=>{e.signInStatus=_t.SUCCEEDED,e.loggedUser=n.payload}).addCase(sm.signInUser.rejected,e=>{e.signInStatus=_t.FAILED})},DF={},kF={initialState:xF,reducers:PF,asyncThunk:sm,extraReducers:MF,selectors:DF},yt=t=>typeof t=="string",Wh=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},oA=t=>t==null?"":""+t,NF=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},LF=/###/g,lA=t=>t&&t.indexOf("###")>-1?t.replace(LF,"."):t,cA=t=>!t||yt(t),md=(t,e,n)=>{const r=yt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(cA(t))return{};const o=lA(r[i]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++i}return cA(t)?{}:{obj:t,k:lA(r[i])}},uA=(t,e,n)=>{const{obj:r,k:i}=md(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let o=e[e.length-1],c=e.slice(0,e.length-1),d=md(t,c,Object);for(;d.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),d=md(t,c,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${o}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${o}`]=n},UF=(t,e,n,r)=>{const{obj:i,k:o}=md(t,e,Object);i[o]=i[o]||[],i[o].push(n)},Hm=(t,e)=>{const{obj:n,k:r}=md(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},VF=(t,e,n)=>{const r=Hm(t,n);return r!==void 0?r:Hm(e,n)},$2=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?yt(t[r])||t[r]instanceof String||yt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):$2(t[r],e[r],n):t[r]=e[r]);return t},qu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var jF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const FF=t=>yt(t)?t.replace(/[&<>"'\/]/g,e=>jF[e]):t;class BF{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const HF=[" ",",","?","!",";"],zF=new BF(20),qF=(t,e,n)=>{e=e||"",n=n||"";const r=HF.filter(c=>e.indexOf(c)<0&&n.indexOf(c)<0);if(r.length===0)return!0;const i=zF.getRegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!i.test(t);if(!o){const c=t.indexOf(n);c>0&&!i.test(t.substring(0,c))&&(o=!0)}return o},nb=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let c,d="";for(let p=o;p<r.length;++p)if(p!==o&&(d+=n),d+=r[p],c=i[d],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&p<r.length-1)continue;o+=p-o+1;break}i=c}return i},kd=t=>t==null?void 0:t.replace("_","-"),$F={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class zm{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||$F,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(yt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new zm(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new zm(this.logger,e)}}var va=new zm;class Ny{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i.apply(i,[e,...n])})}}class fA extends Ny{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var g,_;const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,c=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,n],r&&(Array.isArray(r)?d.push(...r):yt(r)&&o?d.push(...r.split(o)):d.push(r)));const p=Hm(this.data,d);return!p&&!n&&!r&&e.indexOf(".")>-1&&(e=d[0],n=d[1],r=d.slice(2).join(".")),p||!c||!yt(r)?p:nb((_=(g=this.data)==null?void 0:g[e])==null?void 0:_[n],r,o)}addResource(e,n,r,i,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let d=[e,n];r&&(d=d.concat(c?r.split(c):r)),e.indexOf(".")>-1&&(d=e.split("."),i=n,n=d[1]),this.addNamespaces(n),uA(this.data,d,i),o.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const o in r)(yt(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,o,c={silent:!1,skipCopy:!1}){let d=[e,n];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=n,n=d[1]),this.addNamespaces(n);let p=Hm(this.data,d)||{};c.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?$2(p,r,o):p={...p,...r},uA(this.data,d,p),c.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var G2={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(o=>{var c;e=((c=this.processors[o])==null?void 0:c.process(e,n,r,i))??e}),e}};const hA={},dA=t=>!yt(t)&&typeof t!="boolean"&&typeof t!="number";class qm extends Ny{constructor(e,n={}){super(),NF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=va.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const c=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!qF(e,r,i);if(c&&!d){const p=e.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:e,namespaces:yt(o)?[o]:o};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(o=g.shift()),e=g.join(i)}return{key:e,namespaces:yt(o)?[o]:o}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:p}=this.extractFromKey(e[e.length-1],i),g=p[p.length-1];let _=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;_===void 0&&(_=":");const E=i.lng||this.language,C=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((E==null?void 0:E.toLowerCase())==="cimode")return C?o?{res:`${g}${_}${d}`,usedKey:d,exactUsedKey:d,usedLng:E,usedNS:g,usedParams:this.getUsedParamsDetails(i)}:`${g}${_}${d}`:o?{res:d,usedKey:d,exactUsedKey:d,usedLng:E,usedNS:g,usedParams:this.getUsedParamsDetails(i)}:d;const O=this.resolve(e,i);let I=O==null?void 0:O.res;const k=(O==null?void 0:O.usedKey)||d,D=(O==null?void 0:O.exactUsedKey)||d,B=["[object Number]","[object Function]","[object RegExp]"],Y=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,Q=!this.i18nFormat||this.i18nFormat.handleAsObject,L=i.count!==void 0&&!yt(i.count),G=qm.hasDefaultValue(i),q=L?this.pluralResolver.getSuffix(E,i.count,i):"",j=i.ordinal&&L?this.pluralResolver.getSuffix(E,i.count,{ordinal:!1}):"",N=L&&!i.ordinal&&i.count===0,U=N&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${q}`]||i[`defaultValue${j}`]||i.defaultValue;let $=I;Q&&!I&&G&&($=U);const T=dA($),ee=Object.prototype.toString.apply($);if(Q&&$&&T&&B.indexOf(ee)<0&&!(yt(Y)&&Array.isArray($))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const W=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,$,{...i,ns:p}):`key '${d} (${this.language})' returned an object instead of string.`;return o?(O.res=W,O.usedParams=this.getUsedParamsDetails(i),O):W}if(c){const W=Array.isArray($),ne=W?[]:{},Me=W?D:k;for(const ie in $)if(Object.prototype.hasOwnProperty.call($,ie)){const te=`${Me}${c}${ie}`;G&&!I?ne[ie]=this.translate(te,{...i,defaultValue:dA(U)?U[ie]:void 0,joinArrays:!1,ns:p}):ne[ie]=this.translate(te,{...i,joinArrays:!1,ns:p}),ne[ie]===te&&(ne[ie]=$[ie])}I=ne}}else if(Q&&yt(Y)&&Array.isArray(I))I=I.join(Y),I&&(I=this.extendTranslation(I,e,i,r));else{let W=!1,ne=!1;!this.isValidLookup(I)&&G&&(W=!0,I=U),this.isValidLookup(I)||(ne=!0,I=d);const ie=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ne?void 0:I,te=G&&U!==I&&this.options.updateMissing;if(ne||W||te){if(this.logger.log(te?"updateKey":"missingKey",E,g,d,te?U:I),c){const pe=this.resolve(d,{...i,keySeparator:!1});pe&&pe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ce=[];const Le=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Le&&Le[0])for(let pe=0;pe<Le.length;pe++)Ce.push(Le[pe]);else this.options.saveMissingTo==="all"?Ce=this.languageUtils.toResolveHierarchy(i.lng||this.language):Ce.push(i.lng||this.language);const K=(pe,me,ve)=>{var Be;const Ne=G&&ve!==I?ve:ie;this.options.missingKeyHandler?this.options.missingKeyHandler(pe,g,me,Ne,te,i):(Be=this.backendConnector)!=null&&Be.saveMissing&&this.backendConnector.saveMissing(pe,g,me,Ne,te,i),this.emit("missingKey",pe,g,me,I)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?Ce.forEach(pe=>{const me=this.pluralResolver.getSuffixes(pe,i);N&&i[`defaultValue${this.options.pluralSeparator}zero`]&&me.indexOf(`${this.options.pluralSeparator}zero`)<0&&me.push(`${this.options.pluralSeparator}zero`),me.forEach(ve=>{K([pe],d+ve,i[`defaultValue${ve}`]||U)})}):K(Ce,d,U))}I=this.extendTranslation(I,e,i,O,r),ne&&I===d&&this.options.appendNamespaceToMissingKey&&(I=`${g}${_}${d}`),(ne||W)&&this.options.parseMissingKeyHandler&&(I=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}${_}${d}`:d,W?I:void 0,i))}return o?(O.res=I,O.usedParams=this.getUsedParamsDetails(i),O):I}extendTranslation(e,n,r,i,o){var p,g;if((p=this.i18nFormat)!=null&&p.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const _=yt(e)&&(((g=r==null?void 0:r.interpolation)==null?void 0:g.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let E;if(_){const O=e.match(this.interpolator.nestingRegexp);E=O&&O.length}let C=r.replace&&!yt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(C={...this.options.interpolation.defaultVariables,...C}),e=this.interpolator.interpolate(e,C,r.lng||this.language||i.usedLng,r),_){const O=e.match(this.interpolator.nestingRegexp),I=O&&O.length;E<I&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...O)=>(o==null?void 0:o[0])===O[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${O[0]} in key: ${n[0]}`),null):this.translate(...O,n),r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,d=yt(c)?[c]:c;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=G2.handle(d,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,o,c,d;return yt(e)&&(e=[e]),e.forEach(p=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(p,n),_=g.key;i=_;let E=g.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const C=n.count!==void 0&&!yt(n.count),O=C&&!n.ordinal&&n.count===0,I=n.context!==void 0&&(yt(n.context)||typeof n.context=="number")&&n.context!=="",k=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);E.forEach(D=>{var B,Y;this.isValidLookup(r)||(d=D,!hA[`${k[0]}-${D}`]&&((B=this.utils)!=null&&B.hasLoadedNamespace)&&!((Y=this.utils)!=null&&Y.hasLoadedNamespace(d))&&(hA[`${k[0]}-${D}`]=!0,this.logger.warn(`key "${i}" for languages "${k.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(Q=>{var q;if(this.isValidLookup(r))return;c=Q;const L=[_];if((q=this.i18nFormat)!=null&&q.addLookupKeys)this.i18nFormat.addLookupKeys(L,_,Q,D,n);else{let j;C&&(j=this.pluralResolver.getSuffix(Q,n.count,n));const N=`${this.options.pluralSeparator}zero`,U=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(C&&(L.push(_+j),n.ordinal&&j.indexOf(U)===0&&L.push(_+j.replace(U,this.options.pluralSeparator)),O&&L.push(_+N)),I){const $=`${_}${this.options.contextSeparator}${n.context}`;L.push($),C&&(L.push($+j),n.ordinal&&j.indexOf(U)===0&&L.push($+j.replace(U,this.options.pluralSeparator)),O&&L.push($+N))}}let G;for(;G=L.pop();)this.isValidLookup(r)||(o=G,r=this.getResource(Q,D,G,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:c,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!yt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class pA{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=va.create("languageUtils")}getScriptPartFromCode(e){if(e=kd(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=kd(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(yt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),yt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],o=c=>{c&&(this.isSupportedCode(c)?i.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return yt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):yt(e)&&o(this.formatLanguageCode(e)),r.forEach(c=>{i.indexOf(c)<0&&o(this.formatLanguageCode(c))}),i}}const gA={zero:0,one:1,two:2,few:3,many:4,other:5},mA={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class GF{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=va.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=kd(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),mA;if(!e.match(/-|_/))return mA;const p=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(p,n)}return this.pluralRulesCache[o]=c,c}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>gA[i]-gA[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const yA=(t,e,n,r=".",i=!0)=>{let o=VF(t,e,n);return!o&&i&&yt(n)&&(o=nb(t,n,r),o===void 0&&(o=nb(e,n,r))),o},L0=t=>t.replace(/\$/g,"$$$$");class WF{constructor(e={}){var n;this.logger=va.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:c,suffix:d,suffixEscaped:p,formatSeparator:g,unescapeSuffix:_,unescapePrefix:E,nestingPrefix:C,nestingPrefixEscaped:O,nestingSuffix:I,nestingSuffixEscaped:k,nestingOptionsSeparator:D,maxReplaces:B,alwaysFormat:Y}=e.interpolation;this.escape=n!==void 0?n:FF,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?qu(o):c||"{{",this.suffix=d?qu(d):p||"}}",this.formatSeparator=g||",",this.unescapePrefix=_?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":_||"",this.nestingPrefix=C?qu(C):O||qu("$t("),this.nestingSuffix=I?qu(I):k||qu(")"),this.nestingOptionsSeparator=D||",",this.maxReplaces=B||1e3,this.alwaysFormat=Y!==void 0?Y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var O;let o,c,d;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=I=>{if(I.indexOf(this.formatSeparator)<0){const Y=yA(n,p,I,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Y,void 0,r,{...i,...n,interpolationkey:I}):Y}const k=I.split(this.formatSeparator),D=k.shift().trim(),B=k.join(this.formatSeparator).trim();return this.format(yA(n,p,D,this.options.keySeparator,this.options.ignoreJSONStructure),B,r,{...i,...n,interpolationkey:D})};this.resetRegExp();const _=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((O=i==null?void 0:i.interpolation)==null?void 0:O.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:I=>L0(I)},{regex:this.regexp,safeValue:I=>this.escapeValue?L0(this.escape(I)):L0(I)}].forEach(I=>{for(d=0;o=I.regex.exec(e);){const k=o[1].trim();if(c=g(k),c===void 0)if(typeof _=="function"){const B=_(e,o,i);c=yt(B)?B:""}else if(i&&Object.prototype.hasOwnProperty.call(i,k))c="";else if(E){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),c="";else!yt(c)&&!this.useRawValueToEscape&&(c=oA(c));const D=I.safeValue(c);if(e=e.replace(o[0],D),E?(I.regex.lastIndex+=c.length,I.regex.lastIndex-=o[0].length):I.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,o,c;const d=(p,g)=>{const _=this.nestingOptionsSeparator;if(p.indexOf(_)<0)return p;const E=p.split(new RegExp(`${_}[ ]*{`));let C=`{${E[1]}`;p=E[0],C=this.interpolate(C,c);const O=C.match(/'/g),I=C.match(/"/g);(((O==null?void 0:O.length)??0)%2===0&&!I||I.length%2!==0)&&(C=C.replace(/'/g,'"'));try{c=JSON.parse(C),g&&(c={...g,...c})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,k),`${p}${_}${C}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,p};for(;i=this.nestingRegexp.exec(e);){let p=[];c={...r},c=c.replace&&!yt(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const _=i[1].split(this.formatSeparator).map(E=>E.trim());i[1]=_.shift(),p=_,g=!0}if(o=n(d.call(this,i[1].trim(),c),c),o&&i[0]===e&&!yt(o))return o;yt(o)||(o=oA(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),g&&(o=p.reduce((_,E)=>this.format(_,E,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const KF=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(c=>{if(c){const[d,...p]=c.split(":"),g=p.join(":").trim().replace(/^'+|'+$/g,""),_=d.trim();n[_]||(n[_]=g),g==="false"&&(n[_]=!1),g==="true"&&(n[_]=!0),isNaN(g)||(n[_]=parseInt(g,10))}})}return{formatName:e,formatOptions:n}},vA=t=>{const e={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const c=r+JSON.stringify(o);let d=e[c];return d||(d=t(kd(r),i),e[c]=d),d(n)}},YF=t=>(e,n,r)=>t(kd(n),r)(e);class QF{constructor(e={}){this.logger=va.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?vA:YF;this.formats={number:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o});return d=>c.format(d)}),currency:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o,style:"currency"});return d=>c.format(d)}),datetime:r((i,o)=>{const c=new Intl.DateTimeFormat(i,{...o});return d=>c.format(d)}),relativetime:r((i,o)=>{const c=new Intl.RelativeTimeFormat(i,{...o});return d=>c.format(d,o.range||"day")}),list:r((i,o)=>{const c=new Intl.ListFormat(i,{...o});return d=>c.format(d)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=vA(n)}format(e,n,r,i={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(d=>d.indexOf(")")>-1)){const d=o.findIndex(p=>p.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,d)].join(this.formatSeparator)}return o.reduce((d,p)=>{var E;const{formatName:g,formatOptions:_}=KF(p);if(this.formats[g]){let C=d;try{const O=((E=i==null?void 0:i.formatParams)==null?void 0:E[i.interpolationkey])||{},I=O.locale||O.lng||i.locale||i.lng||r;C=this.formats[g](d,I,{..._,...i,...O})}catch(O){this.logger.warn(O)}return C}else this.logger.warn(`there was no format function for ${g}`);return d},e)}}const XF=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class JF extends Ny{constructor(e,n,r,i={}){var o,c;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=va.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(c=(o=this.backend)==null?void 0:o.init)==null||c.call(o,r,i.backend,i)}queueLoad(e,n,r,i){const o={},c={},d={},p={};return e.forEach(g=>{let _=!0;n.forEach(E=>{const C=`${g}|${E}`;!r.reload&&this.store.hasResourceBundle(g,E)?this.state[C]=2:this.state[C]<0||(this.state[C]===1?c[C]===void 0&&(c[C]=!0):(this.state[C]=1,_=!1,c[C]===void 0&&(c[C]=!0),o[C]===void 0&&(o[C]=!0),p[E]===void 0&&(p[E]=!0)))}),_||(d[g]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(p)}}loaded(e,n,r){const i=e.split("|"),o=i[0],c=i[1];n&&this.emit("failedLoading",o,c,n),!n&&r&&this.store.addResourceBundle(o,c,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const d={};this.queue.forEach(p=>{UF(p.loaded,[o],c),XF(p,e),n&&p.errors.push(n),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(g=>{d[g]||(d[g]={});const _=p.loaded[g];_.length&&_.forEach(E=>{d[g][E]===void 0&&(d[g][E]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(p=>!p.done)}read(e,n,r,i=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:o,callback:c});return}this.readingCalls++;const d=(g,_)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(g&&_&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,o*2,c)},o);return}c(g,_)},p=this.backend[r].bind(this.backend);if(p.length===2){try{const g=p(e,n);g&&typeof g.then=="function"?g.then(_=>d(null,_)).catch(d):d(null,g)}catch(g){d(g)}return}return p(e,n,d)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();yt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),yt(n)&&(n=[n]);const o=this.queueLoad(e,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(c,d)=>{c&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,c),!c&&d&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,d),this.loaded(e,c,d)})}saveMissing(e,n,r,i,o,c={},d=()=>{}){var p,g,_,E,C;if((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace&&!((E=(_=this.services)==null?void 0:_.utils)!=null&&E.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((C=this.backend)!=null&&C.create){const O={...c,isUpdate:o},I=this.backend.create.bind(this.backend);if(I.length<6)try{let k;I.length===5?k=I(e,n,r,i,O):k=I(e,n,r,i),k&&typeof k.then=="function"?k.then(D=>d(null,D)).catch(d):d(null,k)}catch(k){d(k)}else I(e,n,r,i,d,O)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const _A=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),yt(t[1])&&(e.defaultValue=t[1]),yt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),bA=t=>{var e,n;return yt(t.ns)&&(t.ns=[t.ns]),yt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),yt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Ig=()=>{},ZF=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Nd extends Ny{constructor(e={},n){if(super(),this.options=bA(e),this.services={},this.logger=va,this.modules={external:[]},ZF(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(yt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=_A();this.options={...r,...this.options,...bA(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?va.init(i(this.modules.logger),this.options):va.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=QF;const _=new pA(this.options);this.store=new fA(this.options.resources,this.options);const E=this.services;E.logger=va,E.resourceStore=this.store,E.languageUtils=_,E.pluralResolver=new GF(_,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(E.formatter=i(g),E.formatter.init(E,this.options),this.options.interpolation.format=E.formatter.format.bind(E.formatter)),E.interpolator=new WF(this.options),E.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},E.backendConnector=new JF(i(this.modules.backend),E.resourceStore,E,this.options),E.backendConnector.on("*",(C,...O)=>{this.emit(C,...O)}),this.modules.languageDetector&&(E.languageDetector=i(this.modules.languageDetector),E.languageDetector.init&&E.languageDetector.init(E,this.options.detection,this.options)),this.modules.i18nFormat&&(E.i18nFormat=i(this.modules.i18nFormat),E.i18nFormat.init&&E.i18nFormat.init(this)),this.translator=new qm(this.services,this.options),this.translator.on("*",(C,...O)=>{this.emit(C,...O)}),this.modules.external.forEach(C=>{C.init&&C.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Ig),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=(..._)=>this.store[g](..._)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=(..._)=>(this.store[g](..._),this)});const d=Wh(),p=()=>{const g=(_,E)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(E),n(_,E)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),d}loadResources(e,n=Ig){var o,c;let r=n;const i=yt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const d=[],p=g=>{if(!g||g==="cimode")return;this.services.languageUtils.toResolveHierarchy(g).forEach(E=>{E!=="cimode"&&d.indexOf(E)<0&&d.push(E)})};i?p(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(_=>p(_)),(c=(o=this.options.preload)==null?void 0:o.forEach)==null||c.call(o,g=>p(g)),this.services.backendConnector.load(d,this.options.ns,g=>{!g&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(g)})}else r(null)}reloadResources(e,n,r){const i=Wh();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Ig),this.services.backendConnector.reload(e,n,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&G2.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Wh();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},o=(d,p)=>{p?this.isLanguageChangingTo===e&&(i(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,r.resolve((...g)=>this.t(...g)),n&&n(d,(...g)=>this.t(...g))},c=d=>{var _,E;!e&&!d&&this.services.languageDetector&&(d=[]);const p=yt(d)?d:d&&d[0],g=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(yt(d)?[d]:d);g&&(this.language||i(g),this.translator.language||this.translator.changeLanguage(g),(E=(_=this.services.languageDetector)==null?void 0:_.cacheUserLanguage)==null||E.call(_,g)),this.loadResources(g,C=>{o(C,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,n,r){const i=(o,c,...d)=>{let p;typeof c!="object"?p=this.options.overloadTranslationOptionHandler([o,c].concat(d)):p={...c},p.lng=p.lng||i.lng,p.lngs=p.lngs||i.lngs,p.ns=p.ns||i.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||r||i.keyPrefix);const g=this.options.keySeparator||".";let _;return p.keyPrefix&&Array.isArray(o)?_=o.map(E=>`${p.keyPrefix}${g}${E}`):_=p.keyPrefix?`${p.keyPrefix}${g}${o}`:o,this.t(_,p)};return yt(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(d,p)=>{const g=this.services.backendConnector.state[`${d}|${p}`];return g===-1||g===0||g===2};if(n.precheck){const d=n.precheck(this,c);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,e)&&(!i||c(o,e)))}loadNamespaces(e,n){const r=Wh();return this.options.ns?(yt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Wh();yt(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(c=>i.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=i.concat(o),this.loadResources(c=>{r.resolve(),n&&n(c)}),r):(n&&n(),Promise.resolve())}dir(e){var i,o;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((o=this.services)==null?void 0:o.languageUtils)||new pA(_A());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Nd(e,n)}cloneInstance(e={},n=Ig){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Nd(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(d=>{o[d]=this[d]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const d=Object.keys(this.store.data).reduce((p,g)=>(p[g]={...this.store.data[g]},p[g]=Object.keys(p[g]).reduce((_,E)=>(_[E]={...p[g][E]},_),p[g]),p),{});o.store=new fA(d,i),o.services.resourceStore=o.store}return o.translator=new qm(o.services,i),o.translator.on("*",(d,...p)=>{o.emit(d,...p)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const er=Nd.createInstance();er.createInstance=Nd.createInstance;er.createInstance;er.dir;er.init;er.loadResources;er.reloadResources;er.use;er.changeLanguage;er.getFixedT;er.t;er.exists;er.setDefaultNamespace;er.hasLoadedNamespace;er.loadNamespaces;er.loadLanguages;const{slice:eB,forEach:tB}=[];function nB(t){return tB.call(eB.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function rB(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const SA=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,iB=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let o=`${t}=${i}`;if(r.maxAge>0){const c=r.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(c)}`}if(r.domain){if(!SA.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!SA.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},EA={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=iB(t,e,i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var sB={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return EA.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=e;n&&typeof document<"u"&&EA.create(n,t,r,i,o)}},aB={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const c=i.substring(1).split("&");for(let d=0;d<c.length;d++){const p=c[d].indexOf("=");p>0&&c[d].substring(0,p)===e&&(n=c[d].substring(p+1))}}return n}},oB={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const c=o.substring(1);if(e){const d=c.split("&");for(let p=0;p<d.length;p++){const g=d[p].indexOf("=");g>0&&d[p].substring(0,g)===e&&(r=d[p].substring(g+1))}}if(r)return r;if(!r&&n>-1){const d=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?(i=d[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return r}};let $u=null;const wA=()=>{if($u!==null)return $u;try{if($u=typeof window<"u"&&window.localStorage!==null,!$u)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{$u=!1}return $u};var lB={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&wA())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&wA()&&window.localStorage.setItem(n,t)}};let Gu=null;const TA=()=>{if(Gu!==null)return Gu;try{if(Gu=typeof window<"u"&&window.sessionStorage!==null,!Gu)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Gu=!1}return Gu};var cB={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&TA())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&TA()&&window.sessionStorage.setItem(n,t)}},uB={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},fB={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},hB={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},dB={name:"subdomain",lookup(t){var i,o;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let W2=!1;try{document.cookie,W2=!0}catch{}const K2=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];W2||K2.splice(1,1);const pB=()=>({order:K2,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Y2{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=nB(n,this.options||{},pB()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(sB),this.addDetector(aB),this.addDetector(lB),this.addDetector(cB),this.addDetector(uB),this.addDetector(fB),this.addDetector(hB),this.addDetector(dB),this.addDetector(oB)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!rB(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Y2.type="languageDetector";function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function Q2(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":rb(XMLHttpRequest))==="object"}function gB(t){return!!t&&typeof t.then=="function"}function mB(t){return gB(t)?t:Promise.resolve(t)}const yB="modulepreload",vB=function(t){return"/melo-chart/"+t},CA={},_B=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(g){return Promise.all(g.map(_=>Promise.resolve(_).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(n.map(g=>{if(g=vB(g),g in CA)return;CA[g]=!0;const _=g.endsWith(".css"),E=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const C=document.createElement("link");if(C.rel=_?"stylesheet":yB,_||(C.as="script"),C.crossOrigin="",C.href=g,p&&C.setAttribute("nonce",p),document.head.appendChild(C),_)return new Promise((O,I)=>{C.addEventListener("load",O),C.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function AA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AA(Object(n),!0).forEach(function(r){bB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bB(t,e,n){return(e=SB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SB(t){var e=EB(t,"string");return Gc(e)=="symbol"?e:e+""}function EB(t,e){if(Gc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}var $l=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?$l=global.fetch:typeof window<"u"&&window.fetch&&($l=window.fetch);var Ld;Q2()&&(typeof global<"u"&&global.XMLHttpRequest?Ld=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Ld=window.XMLHttpRequest));var $m;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?$m=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&($m=window.ActiveXObject));typeof $l!="function"&&($l=void 0);if(!$l&&!Ld&&!$m)try{_B(()=>import("./browser-ponyfill-srh1oujE.js").then(t=>t.b),[]).then(function(t){$l=t.default}).catch(function(){})}catch{}var ib=function(e,n){if(n&&Gc(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},OA=function(e,n,r,i){var o=function(p){if(!p.ok)return r(p.statusText||"Error",{status:p.status});p.text().then(function(g){r(null,{status:p.status,data:g})}).catch(r)};if(i){var c=i(e,n);if(c instanceof Promise){c.then(o).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(o).catch(r):$l(e,n).then(o).catch(r)},IA=!1,wB=function(e,n,r,i){e.queryStringParams&&(n=ib(n,e.queryStringParams));var o=RA({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(o["Content-Type"]="application/json");var c=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,d=RA({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:o},IA?{}:c),p=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{OA(n,d,i,p)}catch(g){if(!c||Object.keys(c).length===0||!g.message||g.message.indexOf("not implemented")<0)return i(g);try{Object.keys(c).forEach(function(_){delete d[_]}),OA(n,d,i,p),IA=!0}catch(_){i(_)}}},TB=function(e,n,r,i){r&&Gc(r)==="object"&&(r=ib("",r).slice(1)),e.queryStringParams&&(n=ib(n,e.queryStringParams));try{var o=Ld?new Ld:new $m("MSXML2.XMLHTTP.3.0");o.open(r?"POST":"GET",n,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,r&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var c=e.customHeaders;if(c=typeof c=="function"?c():c,c)for(var d in c)o.setRequestHeader(d,c[d]);o.onreadystatechange=function(){o.readyState>3&&i(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(r)}catch(p){console&&console.log(p)}},CB=function(e,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},$l&&n.indexOf("file:")!==0)return wB(e,n,r,i);if(Q2()||typeof ActiveXObject=="function")return TB(e,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function xA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xA(Object(n),!0).forEach(function(r){X2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J2(r.key),r)}}function OB(t,e,n){return e&&RB(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X2(t,e,n){return(e=J2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J2(t){var e=IB(t,"string");return Rf(e)=="symbol"?e:e+""}function IB(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xB=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return X2({},r,i||"")},parseLoadPayload:function(n,r){},request:CB,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Z2=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};AB(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return OB(t,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=U0(U0(U0({},xB()),this.options||{}),i),this.allOptions=o,this.services&&this.options.reloadInterval){var c=setInterval(function(){return r.reload()},this.options.reloadInterval);Rf(c)==="object"&&typeof c.unref=="function"&&c.unref()}}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,o,c){var d=this,p=this.options.loadPath;typeof this.options.loadPath=="function"&&(p=this.options.loadPath(n,i)),p=mB(p),p.then(function(g){if(!g)return c(null,{});var _=d.services.interpolator.interpolate(g,{lng:n.join("+"),ns:i.join("+")});d.loadUrl(_,c,r,o)})}},{key:"loadUrl",value:function(n,r,i,o){var c=this,d=typeof i=="string"?[i]:i,p=typeof o=="string"?[o]:o,g=this.options.parseLoadPayload(d,p);this.options.request(this.options,n,g,function(_,E){if(E&&(E.status>=500&&E.status<600||!E.status))return r("failed loading "+n+"; status code: "+E.status,!0);if(E&&E.status>=400&&E.status<500)return r("failed loading "+n+"; status code: "+E.status,!1);if(!E&&_&&_.message){var C=_.message.toLowerCase(),O=["failed","fetch","network","load"].find(function(D){return C.indexOf(D)>-1});if(O)return r("failed loading "+n+": "+_.message,!0)}if(_)return r(_,!1);var I,k;try{typeof E.data=="string"?I=c.options.parse(E.data,i,o):I=E.data}catch{k="failed parsing "+n+" to json"}if(k)return r(k,!1);r(null,I)})}},{key:"create",value:function(n,r,i,o,c){var d=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var p=this.options.parsePayload(r,i,o),g=0,_=[],E=[];n.forEach(function(C){var O=d.options.addPath;typeof d.options.addPath=="function"&&(O=d.options.addPath(C,r));var I=d.services.interpolator.interpolate(O,{lng:C,ns:r});d.options.request(d.options,I,p,function(k,D){g+=1,_.push(k),E.push(D),g===n.length&&typeof c=="function"&&c(_,E)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,o=r.languageUtils,c=r.logger,d=i.language;if(!(d&&d.toLowerCase()==="cimode")){var p=[],g=function(E){var C=o.toResolveHierarchy(E);C.forEach(function(O){p.indexOf(O)<0&&p.push(O)})};g(d),this.allOptions.preload&&this.allOptions.preload.forEach(function(_){return g(_)}),p.forEach(function(_){n.allOptions.ns.forEach(function(E){i.read(_,E,"read",null,null,function(C,O){C&&c.warn("loading namespace ".concat(E," for language ").concat(_," failed"),C),!C&&O&&c.log("loaded namespace ".concat(E," for language ").concat(_),O),i.loaded("".concat(_,"|").concat(E),C,O)})})})}}}])}();Z2.type="backend";er.use(Z2).use(Y2).use(Z6).init({lng:"pt",fallbackLng:"pt",interpolation:{escapeValue:!1},backend:{loadPath:"/melo-chart/locales/{{lng}}/{{ns}}.json"}});const{t:PB}=er,MB={signOutStatus:_t.IDLE,signOutError:null},am={signOutUser:yo(`${Af}/signOut`,async()=>await J8())},DB=t=>{t.addCase(am.signOutUser.pending,e=>{e.signOutStatus=_t.LOADING}).addCase(am.signOutUser.fulfilled,e=>{e.signOutStatus=_t.SUCCEEDED,e.loggedUser=null}).addCase(am.signOutUser.rejected,(e,n)=>{e.signOutStatus=_t.FAILED,e.loggedUserError=PB(`error-message.sign-out-user.${n.error.code}`)})},kB={initialState:MB,asyncThunk:am,extraReducers:DB},NB={signUpStatus:_t.IDLE},LB={},om={signUpUser:yo(`${Af}/signUpUser`,async t=>await Z8(t))},UB=t=>{t.addCase(om.signUpUser.pending,e=>{e.signUpStatus=_t.LOADING}).addCase(om.signUpUser.fulfilled,e=>{e.signUpStatus=_t.SUCCEEDED}).addCase(om.signUpUser.rejected,e=>{e.signUpStatus=_t.FAILED})},VB={},jB={initialState:NB,asyncThunk:om,reducers:LB,extraReducers:UB,selectors:VB},FB=Object.freeze(Object.defineProperty({__proto__:null,LoggedUser:IF,SignInUser:kF,SignOutUser:kB,SignUpUser:jB},Symbol.toStringTag,{value:"Module"})),Nr=lS({sliceName:Af,sliceParts:FB}),BB=t=>{const{song:e}=t,{deleteSongDialogFnsRef:n}=t,{t:r}=Ln(),i=dr(Nr.selectors.selectLoggedUser);return e.owner!=(i==null?void 0:i.uid)?F.jsx(F.Fragment,{}):F.jsx(F.Fragment,{children:F.jsx(_n,{category:kn.DANGER,onClick:()=>{var o;return(o=n.current)==null?void 0:o.show()},children:r("Delete Song")})})},HB=M.memo(BB),zB="_NewNotesOption_1ax45_1",qB={NewNotesOption:zB},$B=t=>{const{notesFnsRef:e,songId:n,setChangesLog:r}=t,{t:i}=Ln(),o=ms(),{publish:c}=wo(Ao,g=>{var _;if(o.connection.id!=g.connectionId){const{name:E,data:C}=g;if(C.id!=n)return;if(E==Qe.UPDATE_CHART_CHANGES_LOG){(_=C.changesLog)==null||_.forEach(O=>{const{action:I,data:k}=O;if(I==Qe.UPDATE_CHART_ADD_MULTIPLE_NOTES){d(k.qty);return}});return}E==Qe.UPDATE_CHART_ADD_MULTIPLE_NOTES&&d(C.qty)}}),d=M.useCallback(g=>{var _;(_=e.current)==null||_.addMultipleNotes(g)},[e]),p=M.useCallback(g=>{g.preventDefault();const _=+g.target.qty.value;d(_);const E={id:n,qty:_};r(C=>[...C,{action:Qe.UPDATE_CHART_ADD_MULTIPLE_NOTES,data:E}]),c(Qe.UPDATE_CHART_ADD_MULTIPLE_NOTES,E)},[d,c,r,n]);return F.jsxs("form",{className:qB.NewNotesOption,onSubmit:p,children:[F.jsx(Ra,{label:i("New Notes"),field:F.jsx(ho,{type:"number",name:"qty"})}),F.jsx(_n,{category:kn.PRIMARY,children:i("Add")})]})},GB=M.memo($B),WB="_NewPitchesOption_1vsl8_1",KB={NewPitchesOption:WB},YB=t=>{const{notesFnsRef:e,songId:n,setChangesLog:r}=t,{t:i}=Ln(),o=ms(),{publish:c}=wo(Ao,g=>{var _;if(o.connection.id!=g.connectionId){const{name:E,data:C}=g;if(C.id!=n)return;if(E==Qe.UPDATE_CHART_CHANGES_LOG){(_=C.changesLog)==null||_.forEach(O=>{const{action:I,data:k}=O;if(I==Qe.UPDATE_CHART_ADD_MULTIPLE_PITCHES){d(k.qty);return}});return}E==Qe.UPDATE_CHART_ADD_MULTIPLE_PITCHES&&d(C.qty)}}),d=M.useCallback(g=>{var _;(_=e.current)==null||_.addMultiplePitches(g)},[e]),p=M.useCallback(g=>{g.preventDefault();const _=+g.target.qty.value;d(_);const E={id:n,qty:_};r(C=>[...C,{action:Qe.UPDATE_CHART_ADD_MULTIPLE_PITCHES,data:E}]),c(Qe.UPDATE_CHART_ADD_MULTIPLE_PITCHES,E)},[d,c,r,n]);return F.jsxs("form",{className:KB.NewPitchesOption,onSubmit:p,children:[F.jsx(Ra,{label:i("New Pitches"),field:F.jsx(ho,{type:"number",name:"qty"})}),F.jsx(_n,{category:kn.PRIMARY,children:i("Add")})]})},QB=M.memo(YB),XB="_ShareWithOption_c354n_1",JB={ShareWithOption:XB},ZB=t=>{const{songId:e,setChangesLog:n}=t,{t:r}=Ln(),i=qs(),o=dr(ur.selectors.selectSongById(e)),c=ms(),{publish:d}=wo(Ao,g=>{var _;if(c.connection.id!=g.connectionId){const{name:E,data:C}=g;if(C.id!=e)return;if(E==Qe.UPDATE_CHART_CHANGES_LOG){(_=C.changesLog)==null||_.forEach(O=>{const{action:I,data:k}=O;I==Qe.UPDATE_CHART_SHARED_WITH&&i(ur.actions.editSongEditors({id:k.id,editors:k.editors,editorsData:k.editorsData}))});return}E==Qe.UPDATE_CHART_SHARED_WITH&&i(ur.actions.editSongEditors({id:C.id,editors:C.editors,editorsData:C.editorsData}))}}),p=M.useCallback(async g=>{const _=g.map(I=>I.value),C={editors:[...new Set([o.owner,..._])],editorsData:g};i(ur.actions.saveSong({...o,...C}));const O={id:e,...C};n(I=>[...I,{action:Qe.UPDATE_CHART_SHARED_WITH,data:O}]),d(Qe.UPDATE_CHART_SHARED_WITH,O)},[i,d,n,o,e]);return F.jsx("div",{className:JB.ShareWithOption,children:F.jsx(Ra,{label:r("Shared With"),field:F.jsx(ZY,{selectedOptions:o.editorsData,onChangeSelectedUsers:p})})})},e7=M.memo(ZB),t7="_TrimOptions_ti9xd_1",n7={TrimOptions:t7},r7=t=>{const{notesFnsRef:e,songId:n,setChangesLog:r}=t,{t:i}=Ln(),o=ms(),{publish:c}=wo(Ao,E=>{var C;if(o.connection.id!=E.connectionId){const{name:O,data:I}=E;if(I.id!=n)return;if(O==Qe.UPDATE_CHART_CHANGES_LOG){(C=I.changesLog)==null||C.forEach(k=>{const{action:D}=k;if(D==Qe.UPDATE_CHART_TRIM){g();return}});return}O==Qe.UPDATE_CHART_TRIM&&g()}}),d=M.useCallback(()=>{var E;(E=e.current)==null||E.trimPitches()},[e]),p=M.useCallback(()=>{var E;(E=e.current)==null||E.removeEmptyNotesAtTheEnd()},[e]),g=M.useCallback(()=>{p(),d()},[p,d]),_=M.useCallback(()=>{g();const E={id:n};r(C=>[...C,{action:Qe.UPDATE_CHART_TRIM,data:E}]),c(Qe.UPDATE_CHART_TRIM,E)},[c,r,n,g]);return F.jsx("div",{className:n7.TrimOptions,children:F.jsx(_n,{category:kn.DANGER,onClick:_,textOnly:!0,children:i("Trim Chart")})})},i7=M.memo(r7),s7="_ChartControllers_rba5f_1",a7="_Section_rba5f_7",xg={ChartControllers:s7,Section:a7},o7=t=>{const{song:e}=t,{notesFnsRef:n,generateChartDialogFnsRef:r,deleteSongDialogFnsRef:i,setChangesLog:o}=t,{t:c}=Ln();return F.jsxs("div",{className:xg.ChartControllers,children:[F.jsxs("div",{className:xg.Section,children:[F.jsx(GB,{notesFnsRef:n,songId:e.id,setChangesLog:o}),F.jsx(QB,{notesFnsRef:n,songId:e.id,setChangesLog:o}),F.jsx(i7,{notesFnsRef:n,songId:e.id,setChangesLog:o})]}),F.jsx("div",{className:xg.Section,children:F.jsx(e7,{songId:e.id,setChangesLog:o})}),F.jsxs("div",{className:xg.Section,children:[F.jsx(_n,{category:kn.DANGER,onClick:()=>{var d;return(d=r.current)==null?void 0:d.show()},children:c("Generate mapping with lyrics")}),F.jsx(HB,{song:e,deleteSongDialogFnsRef:i})]})]})},l7=M.memo(o7),c7="_Checkbox_5pzbe_1",u7={Checkbox:c7},f7=t=>{const{label:e,initialValue:n,className:r="",onChange:i}=t,[o,c]=M.useState(n);return M.useEffect(()=>{i(o)},[o,i]),F.jsxs("label",{className:`${u7.Checkbox} ${r}`,children:[F.jsx("input",{type:"checkbox",checked:o,onChange:()=>{c(d=>!d)}}),F.jsx("span",{children:e})]})},h7=M.memo(f7),d7=t=>{const{bodyContent:e,footerContent:n}=t,{t:r}=Ln();return F.jsx(rp,{title:r("Confirmation"),bodyContent:e,footerContent:n})},eP=M.memo(d7),p7="_ContextMenu_ip4lh_1",g7="_ContextMenuItem_ip4lh_10",PA={ContextMenu:p7,ContextMenuItem:g7},m7=t=>{const{items:e,contextMenuFnsRef:n}=t,[r,i]=M.useState(null),o=M.useRef(null);return M.useImperativeHandle(n,()=>({setContextMenuData(c){i(c)}}),[]),M.useEffect(()=>{function c(d){o.current&&!o.current.contains(d.target)&&i(null)}return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[i,o]),r?F.jsx("div",{ref:o,className:PA.ContextMenu,style:{top:r==null?void 0:r.top,left:r==null?void 0:r.left},children:e.map(c=>F.jsx("span",{className:PA.ContextMenuItem,onClick:()=>{i(null),c.onClick(r)},"data-type":c.type,children:c.label},`item-${c.label}`))}):F.jsx(F.Fragment,{})},y7=M.memo(m7);var tP=fO();const v7="_DialogHidden_z00rr_1",_7="_DialogUIBlocker_z00rr_5",b7="_Dialog_z00rr_1",S7="_DialogHeader_z00rr_36",E7="_DialogBody_z00rr_41",w7="_DialogFooter_z00rr_50",Wu={DialogHidden:v7,DialogUIBlocker:_7,Dialog:b7,DialogHeader:S7,DialogBody:E7,DialogFooter:w7},T7=t=>{const{show:e=!0,bodyContent:n,footerContent:r,title:i,size:o=""}=t;return M.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),tP.createPortal(F.jsx("div",{className:`${Wu.DialogUIBlocker} ${e?"":Wu.DialogHidden}`,children:F.jsxs("div",{className:Wu.Dialog,"data-size":o,children:[F.jsx("div",{className:Wu.DialogHeader,children:F.jsx("h2",{children:i})}),F.jsx("div",{className:Wu.DialogBody,children:n}),F.jsx("div",{className:Wu.DialogFooter,children:r})]})}),document.body)},rp=M.memo(T7),C7=Object.freeze({LARGE:"LARGE"}),A7=t=>{const{addSongDialogFnsRef:e}=t,{t:n}=Ln(),r=qs(),i=kf(),o=dr(ur.selectors.selectAddSongStatus),c=dr(ur.selectors.selectLatestAddedSongId),[d,p]=M.useState(!1);return M.useImperativeHandle(e,()=>({show(){p(!0)}})),M.useEffect(()=>{c!=null&&(r(ur.actions.clearLatestAddedSongId()),i(`/chart?id=${c}`))},[o,r,c,i]),F.jsxs(F.Fragment,{children:[F.jsx(_n,{category:kn.SUCCESS,onClick:()=>p(!0),icon:F.jsx(dR,{}),children:n("Add Song")}),d?F.jsx(rp,{title:n("Add Song"),bodyContent:F.jsx(K7,{}),footerContent:F.jsxs(F.Fragment,{children:[F.jsx(_n,{onClick:()=>p(!1),children:n("Close")}),F.jsx(_n,{category:kn.SUCCESS,form:"formAddSong",type:"submit",icon:F.jsx(dR,{}),children:n("Add")})]})}):F.jsx(F.Fragment,{})]})},R7=M.memo(A7),O7=t=>{const{song:e}=t,{configSongDialogFnsRef:n,notesFnsRef:r,generateChartDialogFnsRef:i,deleteSongDialogFnsRef:o,setChangesLog:c}=t,{t:d}=Ln(),[p,g]=M.useState(!1);return M.useImperativeHandle(n,()=>({show(){g(!0)}})),F.jsx(rp,{show:p,title:d("Configure Song"),bodyContent:F.jsx(F.Fragment,{children:F.jsx(l7,{song:e,notesFnsRef:r,generateChartDialogFnsRef:i,deleteSongDialogFnsRef:o,setChangesLog:c})}),footerContent:F.jsx(F.Fragment,{children:F.jsx(_n,{onClick:()=>g(!1),children:d("Close")})})})},I7=M.memo(O7),x7=t=>{const{deleteSongDialogFnsRef:e,song:n}=t,{t:r}=Ln(),i=qs(),[o,c]=M.useState(!1);M.useImperativeHandle(e,()=>({show(){c(!0)}}));const d=M.useCallback(()=>{i(ur.actions.deleteSong(n.id))},[i,n.id]);return o?F.jsx(F.Fragment,{children:F.jsx(eP,{bodyContent:F.jsxs(F.Fragment,{children:[F.jsx("p",{children:r("Are you sure you want to delete this song?")}),F.jsx("p",{children:r("This action cannot be undone")})]}),footerContent:F.jsxs(F.Fragment,{children:[F.jsx(_n,{category:kn.DANGER,onClick:d,children:r("Delete Song")}),F.jsx(_n,{category:kn.DEFAULT,onClick:()=>c(!1),children:r("Cancel")})]})})}):F.jsx(F.Fragment,{})},P7=M.memo(x7),M7=t=>{const{generateChartDialogFnsRef:e,songId:n,setChangesLog:r}=t,{onAddWordsAsNotes:i}=t,{t:o}=Ln(),c=M.useRef(null),[d,p]=M.useState(!1);M.useImperativeHandle(e,()=>({show(){p(!0)}}));const g=ms(),{publish:_}=wo(Ao,C=>{var O;if(g.connection.id!=C.connectionId){const{name:I,data:k}=C;if(k.id!=n)return;if(I==Qe.UPDATE_CHART_CHANGES_LOG){(O=k.changesLog)==null||O.forEach(D=>{const{action:B,data:Y}=D;if(B==Qe.UPDATE_CHART_GENERATE_BY_LYRICS){i(Y.lyrics);return}});return}if(I==Qe.UPDATE_CHART_GENERATE_BY_LYRICS){i(k.lyrics);return}}}),E=M.useCallback(C=>{var k;if(!c.current)return;const O=(k=c.current)==null?void 0:k.value;i(O);const I={id:n,lyrics:O};r(D=>[...D,{action:Qe.UPDATE_CHART_GENERATE_BY_LYRICS,data:I}]),_(Qe.UPDATE_CHART_GENERATE_BY_LYRICS,I),C.target.value="",p(!1)},[i,_,r,n]);return d?F.jsx(rp,{title:o("Generate mapping with lyrics"),bodyContent:F.jsx(Ra,{label:o("Song lyrics"),field:F.jsx(QP,{ref:c})}),footerContent:F.jsxs(F.Fragment,{children:[F.jsx(_n,{category:kn.DANGER,onClick:E,children:o("Generate")}),F.jsx(_n,{category:kn.DEFAULT,onClick:()=>p(!1),children:o("Cancel")})]})}):F.jsx(F.Fragment,{})},D7=M.memo(M7),k7="_TableContainer_lkaju_1",N7="_Table_lkaju_1",Ku={TableContainer:k7,Table:N7},L7=()=>{const{t}=Ln(),[e,n]=M.useState(!1);return F.jsxs(F.Fragment,{children:[F.jsx(_n,{category:kn.PRIMARY,onClick:()=>n(!0),icon:F.jsx(Mq,{}),children:t("How to Use")}),e?F.jsx(rp,{title:t("How to Use"),size:C7.LARGE,bodyContent:F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:Ku.TableContainer,children:[F.jsx("h3",{children:t("Notes")}),F.jsxs("table",{className:Ku.Table,children:[F.jsx("thead",{children:F.jsxs("tr",{children:[F.jsx("td",{children:t("Action")}),F.jsx("td",{children:t("How To Do")})]})}),F.jsxs("tbody",{children:[F.jsxs("tr",{children:[F.jsx("td",{children:t("Edit Note")}),F.jsx("td",{children:t("Click the note")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Break Word Into Notes")}),F.jsx("td",{children:t("Add spaces between letters and hit enter (or click outside)")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Change Note Pitch")}),F.jsx("td",{children:t("Click and hold the note, then drag it to the new position")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Add Note")}),F.jsx("td",{children:t("Right-click a note in the chart")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Remove Note")}),F.jsx("td",{children:t("Right-click a note in the chart")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Add Multiple Notes")}),F.jsx("td",{children:t('Click in "Configure Song" button')})]})]})]})]}),F.jsxs("div",{className:Ku.TableContainer,children:[F.jsx("h3",{children:t("Pitches")}),F.jsxs("table",{className:Ku.Table,children:[F.jsx("thead",{children:F.jsxs("tr",{children:[F.jsx("td",{children:t("Action")}),F.jsx("td",{children:t("How To Do")})]})}),F.jsxs("tbody",{children:[F.jsxs("tr",{children:[F.jsx("td",{children:t("Add Pitch")}),F.jsx("td",{children:t("Right-click a note in the chart")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Remove Pitch")}),F.jsx("td",{children:t("Right-click a note in the chart")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Add Multiple Pitches")}),F.jsx("td",{children:t('Click in "Configure Song" button')})]})]})]})]}),F.jsxs("div",{className:Ku.TableContainer,children:[F.jsx("h3",{children:t("Keyboard Shortcuts when Editing Note")}),F.jsxs("table",{className:Ku.Table,children:[F.jsx("thead",{children:F.jsxs("tr",{children:[F.jsx("td",{children:t("Action")}),F.jsx("td",{children:t("How To Do")})]})}),F.jsxs("tbody",{children:[F.jsxs("tr",{children:[F.jsx("td",{children:t("Save")}),F.jsx("td",{children:t("Enter")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Cancel")}),F.jsx("td",{children:t("Esc")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Navigate Notes")}),F.jsx("td",{children:t("Tab or Shift + Tab")})]}),F.jsxs("tr",{children:[F.jsx("td",{children:t("Navigate Pitches")}),F.jsx("td",{children:t("Arrow Up or Arrow Down")})]})]})]})]})]}),footerContent:F.jsx(F.Fragment,{children:F.jsx(_n,{onClick:()=>n(!1),children:t("Close")})})}):F.jsx(F.Fragment,{})]})},U7=M.memo(L7),V7=t=>{const{show:e,onConfirm:n,onCancel:r}=t,{t:i}=Ln();return e?F.jsx(eP,{bodyContent:F.jsxs(F.Fragment,{children:[F.jsx("p",{children:i("Are you sure you want to leave this page?")}),F.jsx("p",{children:i("Some unsaved changes will be lost")})]}),footerContent:F.jsxs(F.Fragment,{children:[F.jsx(_n,{category:kn.DANGER,onClick:n,children:i("Leave Page")}),F.jsx(_n,{category:kn.DEFAULT,onClick:r,children:i("Cancel")})]})}):F.jsx(F.Fragment,{})},j7=M.memo(V7),F7="_FieldWithLabel_15xa5_1",B7={FieldWithLabel:F7},H7=t=>{const{label:e,field:n}=t;return F.jsxs("label",{className:B7.FieldWithLabel,children:[F.jsx("span",{children:e}),n]})},Ra=M.memo(H7),z7=()=>{const t=qs(),e=tb(t);return{success:n=>e(z2(n)),error:n=>e(H2(n)),warn:n=>e(rF(n))}},q7=t=>{const{title:e,pitches:n,lyrics:r}=t,i=isNaN(n)?1:n,o=B2(r),c=r?[kl(i),...o.map(d=>{const p=kl(i);return p.chunks[0].text=d,p})]:Array.from({length:1},()=>kl(i));return{id:np(),title:e,notes:c}},$7="_FormAddSong_5y15a_1",G7="_FieldsContainer_5y15a_10",MA={FormAddSong:$7,FieldsContainer:G7},W7=()=>{const{t}=Ln(),e=qs(),n=dr(Nr.selectors.selectLoggedUser),r=dr(ur.selectors.selectAddSongStatus),i=z7(),o=M.useCallback(async c=>{if(c.preventDefault(),q2(r))return;const d=c.target,p=d.title.value.trim(),g=d.pitches.value||1,_=d.lyrics.value||"";if(!p){i.error(t("Please, insert a song title"));return}const E=q7({title:p,pitches:g,lyrics:_});e(ur.actions.addSong({...E,editors:[n.uid],owner:n.uid}))},[r,e,i,n,t]);return F.jsx("form",{id:"formAddSong",className:MA.FormAddSong,onSubmit:o,children:F.jsxs("div",{className:MA.FieldsContainer,children:[F.jsx(Ra,{label:t("Title"),field:F.jsx(ho,{type:"text",name:"title"})}),F.jsx(Ra,{label:t("Number of Pitches"),field:F.jsx(ho,{type:"number",name:"pitches"})}),F.jsx(Ra,{label:t("Song lyrics"),field:F.jsx(QP,{name:"lyrics"})})]})})},K7=M.memo(W7),Y7="_Growl_1g2zn_1",Q7="_GrowlClose_1g2zn_31",DA={Growl:Y7,GrowlClose:Q7},X7=t=>{const{id:e,level:n,message:r}=t,i=qs(),o=M.useCallback(()=>{i(Ad.actions.removeGrowl(e))},[i,e]);return F.jsxs("div",{className:DA.Growl,"data-level":n,children:[F.jsx("button",{type:"button",className:DA.GrowlClose,onClick:o,children:"x"}),r]})},J7=M.memo(X7),Z7="_GrowlContainer_io9n0_1",eH={GrowlContainer:Z7},tH=()=>{const t=dr(Ad.selectors.selectAllGrowls);return F.jsx("div",{className:eH.GrowlContainer,children:t.map(e=>F.jsx(J7,{...e},e.id))})},nH=M.memo(tH);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const rH={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},iH={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},sH={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},aH={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},oH={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},lH={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},cH={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},uH={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function fH(t,e,n){return(e=dH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kA(Object(n),!0).forEach(function(r){fH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dH(t){var e=hH(t,"string");return typeof e=="symbol"?e:e+""}const NA=()=>{};let $S={},nP={},rP=null,iP={mark:NA,measure:NA};try{typeof window<"u"&&($S=window),typeof document<"u"&&(nP=document),typeof MutationObserver<"u"&&(rP=MutationObserver),typeof performance<"u"&&(iP=performance)}catch{}const{userAgent:LA=""}=$S.navigator||{},Gl=$S,vn=nP,UA=rP,Pg=iP;Gl.document;const Ro=!!vn.documentElement&&!!vn.head&&typeof vn.addEventListener=="function"&&typeof vn.createElement=="function",sP=~LA.indexOf("MSIE")||~LA.indexOf("Trident/");var pH=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,gH=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,aP={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},mH={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},oP=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ei="classic",Ly="duotone",yH="sharp",vH="sharp-duotone",lP=[ei,Ly,yH,vH],_H={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},bH={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},SH=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),EH={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},wH=["fak","fa-kit","fakd","fa-kit-duotone"],VA={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},TH=["kit"],CH={kit:{"fa-kit":"fak"}},AH=["fak","fakd"],RH={kit:{fak:"fa-kit"}},jA={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Mg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},OH=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],IH=["fak","fa-kit","fakd","fa-kit-duotone"],xH={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},PH={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},MH={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},sb={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},DH=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],ab=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...OH,...DH],kH=["solid","regular","light","thin","duotone","brands"],cP=[1,2,3,4,5,6,7,8,9,10],NH=cP.concat([11,12,13,14,15,16,17,18,19,20]),LH=[...Object.keys(MH),...kH,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Mg.GROUP,Mg.SWAP_OPACITY,Mg.PRIMARY,Mg.SECONDARY].concat(cP.map(t=>"".concat(t,"x"))).concat(NH.map(t=>"w-".concat(t))),UH={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const bo="___FONT_AWESOME___",ob=16,uP="fa",fP="svg-inline--fa",Wc="data-fa-i2svg",lb="data-fa-pseudo-element",VH="data-fa-pseudo-element-pending",GS="data-prefix",WS="data-icon",FA="fontawesome-i2svg",jH="async",FH=["HTML","HEAD","STYLE","SCRIPT"],hP=(()=>{try{return!0}catch{return!1}})();function ip(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[ei]}})}const dP=xe({},aP);dP[ei]=xe(xe(xe(xe({},{"fa-duotone":"duotone"}),aP[ei]),VA.kit),VA["kit-duotone"]);const BH=ip(dP),cb=xe({},EH);cb[ei]=xe(xe(xe(xe({},{duotone:"fad"}),cb[ei]),jA.kit),jA["kit-duotone"]);const BA=ip(cb),ub=xe({},sb);ub[ei]=xe(xe({},ub[ei]),RH.kit);const KS=ip(ub),fb=xe({},PH);fb[ei]=xe(xe({},fb[ei]),CH.kit);ip(fb);const HH=pH,pP="fa-layers-text",zH=gH,qH=xe({},_H);ip(qH);const $H=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],V0=mH,GH=[...TH,...LH],yd=Gl.FontAwesomeConfig||{};function WH(t){var e=vn.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function KH(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}vn&&typeof vn.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const i=KH(WH(n));i!=null&&(yd[r]=i)});const gP={styleDefault:"solid",familyDefault:ei,cssPrefix:uP,replacementClass:fP,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};yd.familyPrefix&&(yd.cssPrefix=yd.familyPrefix);const Of=xe(xe({},gP),yd);Of.autoReplaceSvg||(Of.observeMutations=!1);const Xe={};Object.keys(gP).forEach(t=>{Object.defineProperty(Xe,t,{enumerable:!0,set:function(e){Of[t]=e,vd.forEach(n=>n(Xe))},get:function(){return Of[t]}})});Object.defineProperty(Xe,"familyPrefix",{enumerable:!0,set:function(t){Of.cssPrefix=t,vd.forEach(e=>e(Xe))},get:function(){return Of.cssPrefix}});Gl.FontAwesomeConfig=Xe;const vd=[];function YH(t){return vd.push(t),()=>{vd.splice(vd.indexOf(t),1)}}const Sl=ob,_a={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function QH(t){if(!t||!Ro)return;const e=vn.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=vn.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const o=n[i],c=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(c)>-1&&(r=o)}return vn.head.insertBefore(e,r),t}const XH="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ud(){let t=12,e="";for(;t-- >0;)e+=XH[Math.random()*62|0];return e}function zf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function YS(t){return t.classList?zf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function mP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function JH(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(mP(t[n]),'" '),"").trim()}function Uy(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function QS(t){return t.size!==_a.size||t.x!==_a.x||t.y!==_a.y||t.rotate!==_a.rotate||t.flipX||t.flipY}function ZH(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),c="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),d="rotate(".concat(e.rotate," 0 0)"),p={transform:"".concat(o," ").concat(c," ").concat(d)},g={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:p,path:g}}function ez(t){let{transform:e,width:n=ob,height:r=ob,startCentered:i=!1}=t,o="";return i&&sP?o+="translate(".concat(e.x/Sl-n/2,"em, ").concat(e.y/Sl-r/2,"em) "):i?o+="translate(calc(-50% + ".concat(e.x/Sl,"em), calc(-50% + ").concat(e.y/Sl,"em)) "):o+="translate(".concat(e.x/Sl,"em, ").concat(e.y/Sl,"em) "),o+="scale(".concat(e.size/Sl*(e.flipX?-1:1),", ").concat(e.size/Sl*(e.flipY?-1:1),") "),o+="rotate(".concat(e.rotate,"deg) "),o}var tz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function yP(){const t=uP,e=fP,n=Xe.cssPrefix,r=Xe.replacementClass;let i=tz;if(n!==t||r!==e){const o=new RegExp("\\.".concat(t,"\\-"),"g"),c=new RegExp("\\--".concat(t,"\\-"),"g"),d=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(n,"-")).replace(c,"--".concat(n,"-")).replace(d,".".concat(r))}return i}let HA=!1;function j0(){Xe.autoAddCss&&!HA&&(QH(yP()),HA=!0)}var nz={mixout(){return{dom:{css:yP,insertCss:j0}}},hooks(){return{beforeDOMElementCreation(){j0()},beforeI2svg(){j0()}}}};const So=Gl||{};So[bo]||(So[bo]={});So[bo].styles||(So[bo].styles={});So[bo].hooks||(So[bo].hooks={});So[bo].shims||(So[bo].shims=[]);var ba=So[bo];const vP=[],_P=function(){vn.removeEventListener("DOMContentLoaded",_P),Gm=1,vP.map(t=>t())};let Gm=!1;Ro&&(Gm=(vn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(vn.readyState),Gm||vn.addEventListener("DOMContentLoaded",_P));function rz(t){Ro&&(Gm?setTimeout(t,0):vP.push(t))}function sp(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?mP(t):"<".concat(e," ").concat(JH(n),">").concat(r.map(sp).join(""),"</").concat(e,">")}function zA(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var F0=function(e,n,r,i){var o=Object.keys(e),c=o.length,d=n,p,g,_;for(r===void 0?(p=1,_=e[o[0]]):(p=0,_=r);p<c;p++)g=o[p],_=d(_,e[g],g,e);return _};function iz(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function hb(t){const e=iz(t);return e.length===1?e[0].toString(16):null}function sz(t,e){const n=t.length;let r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function qA(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function db(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=qA(e);typeof ba.hooks.addPack=="function"&&!r?ba.hooks.addPack(t,qA(e)):ba.styles[t]=xe(xe({},ba.styles[t]||{}),i),t==="fas"&&db("fa",e)}const{styles:Vd,shims:az}=ba,bP=Object.keys(KS),oz=bP.reduce((t,e)=>(t[e]=Object.keys(KS[e]),t),{});let XS=null,SP={},EP={},wP={},TP={},CP={};function lz(t){return~GH.indexOf(t)}function cz(t,e){const n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!lz(i)?i:null}const AP=()=>{const t=r=>F0(Vd,(i,o,c)=>(i[c]=F0(o,r,{}),i),{});SP=t((r,i,o)=>(i[3]&&(r[i[3]]=o),i[2]&&i[2].filter(d=>typeof d=="number").forEach(d=>{r[d.toString(16)]=o}),r)),EP=t((r,i,o)=>(r[o]=o,i[2]&&i[2].filter(d=>typeof d=="string").forEach(d=>{r[d]=o}),r)),CP=t((r,i,o)=>{const c=i[2];return r[o]=o,c.forEach(d=>{r[d]=o}),r});const e="far"in Vd||Xe.autoFetchSvg,n=F0(az,(r,i)=>{const o=i[0];let c=i[1];const d=i[2];return c==="far"&&!e&&(c="fas"),typeof o=="string"&&(r.names[o]={prefix:c,iconName:d}),typeof o=="number"&&(r.unicodes[o.toString(16)]={prefix:c,iconName:d}),r},{names:{},unicodes:{}});wP=n.names,TP=n.unicodes,XS=Vy(Xe.styleDefault,{family:Xe.familyDefault})};YH(t=>{XS=Vy(t.styleDefault,{family:Xe.familyDefault})});AP();function JS(t,e){return(SP[t]||{})[e]}function uz(t,e){return(EP[t]||{})[e]}function Lc(t,e){return(CP[t]||{})[e]}function RP(t){return wP[t]||{prefix:null,iconName:null}}function fz(t){const e=TP[t],n=JS("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Wl(){return XS}const OP=()=>({prefix:null,iconName:null,rest:[]});function hz(t){let e=ei;const n=bP.reduce((r,i)=>(r[i]="".concat(Xe.cssPrefix,"-").concat(i),r),{});return lP.forEach(r=>{(t.includes(n[r])||t.some(i=>oz[r].includes(i)))&&(e=r)}),e}function Vy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=ei}=e,r=BH[n][t];if(n===Ly&&!t)return"fad";const i=BA[n][t]||BA[n][r],o=t in ba.styles?t:null;return i||o||null}function dz(t){let e=[],n=null;return t.forEach(r=>{const i=cz(Xe.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function $A(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function jy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const i=ab.concat(IH),o=$A(t.filter(E=>i.includes(E))),c=$A(t.filter(E=>!ab.includes(E))),d=o.filter(E=>(r=E,!oP.includes(E))),[p=null]=d,g=hz(o),_=xe(xe({},dz(c)),{},{prefix:Vy(p,{family:g})});return xe(xe(xe({},_),yz({values:t,family:g,styles:Vd,config:Xe,canonical:_,givenPrefix:r})),pz(n,r,_))}function pz(t,e,n){let{prefix:r,iconName:i}=n;if(t||!r||!i)return{prefix:r,iconName:i};const o=e==="fa"?RP(i):{},c=Lc(r,i);return i=o.iconName||c||i,r=o.prefix||r,r==="far"&&!Vd.far&&Vd.fas&&!Xe.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const gz=lP.filter(t=>t!==ei||t!==Ly),mz=Object.keys(sb).filter(t=>t!==ei).map(t=>Object.keys(sb[t])).flat();function yz(t){const{values:e,family:n,canonical:r,givenPrefix:i="",styles:o={},config:c={}}=t,d=n===Ly,p=e.includes("fa-duotone")||e.includes("fad"),g=c.familyDefault==="duotone",_=r.prefix==="fad"||r.prefix==="fa-duotone";if(!d&&(p||g||_)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&gz.includes(n)&&(Object.keys(o).find(C=>mz.includes(C))||c.autoFetchSvg)){const C=SH.get(n).defaultShortPrefixId;r.prefix=C,r.iconName=Lc(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=Wl()||"fas"),r}class vz{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(o=>{this.definitions[o]=xe(xe({},this.definitions[o]||{}),i[o]),db(o,i[o]);const c=KS[ei][o];c&&db(c,i[o]),AP()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:o,iconName:c,icon:d}=r[i],p=d[2];e[o]||(e[o]={}),p.length>0&&p.forEach(g=>{typeof g=="string"&&(e[o][g]=d)}),e[o][c]=d}),e}}let GA=[],af={};const pf={},_z=Object.keys(pf);function bz(t,e){let{mixoutsTo:n}=e;return GA=t,af={},Object.keys(pf).forEach(r=>{_z.indexOf(r)===-1&&delete pf[r]}),GA.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(o=>{typeof i[o]=="function"&&(n[o]=i[o]),typeof i[o]=="object"&&Object.keys(i[o]).forEach(c=>{n[o]||(n[o]={}),n[o][c]=i[o][c]})}),r.hooks){const o=r.hooks();Object.keys(o).forEach(c=>{af[c]||(af[c]=[]),af[c].push(o[c])})}r.provides&&r.provides(pf)}),n}function pb(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(af[t]||[]).forEach(c=>{e=c.apply(null,[e,...r])}),e}function Kc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(af[t]||[]).forEach(o=>{o.apply(null,n)})}function Kl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return pf[t]?pf[t].apply(null,e):void 0}function gb(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||Wl();if(e)return e=Lc(n,e)||e,zA(IP.definitions,n,e)||zA(ba.styles,n,e)}const IP=new vz,Sz=()=>{Xe.autoReplaceSvg=!1,Xe.observeMutations=!1,Kc("noAuto")},Ez={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ro?(Kc("beforeI2svg",t),Kl("pseudoElements2svg",t),Kl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Xe.autoReplaceSvg===!1&&(Xe.autoReplaceSvg=!0),Xe.observeMutations=!0,rz(()=>{Tz({autoReplaceSvgRoot:e}),Kc("watch",t)})}},wz={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Lc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=Vy(t[0]);return{prefix:n,iconName:Lc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Xe.cssPrefix,"-"))>-1||t.match(HH))){const e=jy(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||Wl(),iconName:Lc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=Wl();return{prefix:e,iconName:Lc(e,t)||t}}}},Yi={noAuto:Sz,config:Xe,dom:Ez,parse:wz,library:IP,findIconDefinition:gb,toHtml:sp},Tz=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=vn}=t;(Object.keys(ba.styles).length>0||Xe.autoFetchSvg)&&Ro&&Xe.autoReplaceSvg&&Yi.dom.i2svg({node:e})};function Fy(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>sp(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Ro)return;const n=vn.createElement("div");return n.innerHTML=t.html,n.children}}),t}function Cz(t){let{children:e,main:n,mask:r,attributes:i,styles:o,transform:c}=t;if(QS(c)&&n.found&&!r.found){const{width:d,height:p}=n,g={x:d/p/2,y:.5};i.style=Uy(xe(xe({},o),{},{"transform-origin":"".concat(g.x+c.x/16,"em ").concat(g.y+c.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function Az(t){let{prefix:e,iconName:n,children:r,attributes:i,symbol:o}=t;const c=o===!0?"".concat(e,"-").concat(Xe.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:xe(xe({},i),{},{id:c}),children:r}]}]}function ZS(t){const{icons:{main:e,mask:n},prefix:r,iconName:i,transform:o,symbol:c,title:d,maskId:p,titleId:g,extra:_,watchable:E=!1}=t,{width:C,height:O}=n.found?n:e,I=AH.includes(r),k=[Xe.replacementClass,i?"".concat(Xe.cssPrefix,"-").concat(i):""].filter(G=>_.classes.indexOf(G)===-1).filter(G=>G!==""||!!G).concat(_.classes).join(" ");let D={children:[],attributes:xe(xe({},_.attributes),{},{"data-prefix":r,"data-icon":i,class:k,role:_.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(C," ").concat(O)})};const B=I&&!~_.classes.indexOf("fa-fw")?{width:"".concat(C/O*16*.0625,"em")}:{};E&&(D.attributes[Wc]=""),d&&(D.children.push({tag:"title",attributes:{id:D.attributes["aria-labelledby"]||"title-".concat(g||Ud())},children:[d]}),delete D.attributes.title);const Y=xe(xe({},D),{},{prefix:r,iconName:i,main:e,mask:n,maskId:p,transform:o,symbol:c,styles:xe(xe({},B),_.styles)}),{children:Q,attributes:L}=n.found&&e.found?Kl("generateAbstractMask",Y)||{children:[],attributes:{}}:Kl("generateAbstractIcon",Y)||{children:[],attributes:{}};return Y.children=Q,Y.attributes=L,c?Az(Y):Cz(Y)}function WA(t){const{content:e,width:n,height:r,transform:i,title:o,extra:c,watchable:d=!1}=t,p=xe(xe(xe({},c.attributes),o?{title:o}:{}),{},{class:c.classes.join(" ")});d&&(p[Wc]="");const g=xe({},c.styles);QS(i)&&(g.transform=ez({transform:i,startCentered:!0,width:n,height:r}),g["-webkit-transform"]=g.transform);const _=Uy(g);_.length>0&&(p.style=_);const E=[];return E.push({tag:"span",attributes:p,children:[e]}),o&&E.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),E}function Rz(t){const{content:e,title:n,extra:r}=t,i=xe(xe(xe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=Uy(r.styles);o.length>0&&(i.style=o);const c=[];return c.push({tag:"span",attributes:i,children:[e]}),n&&c.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),c}const{styles:B0}=ba;function mb(t){const e=t[0],n=t[1],[r]=t.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Xe.cssPrefix,"-").concat(V0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Xe.cssPrefix,"-").concat(V0.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Xe.cssPrefix,"-").concat(V0.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:i}}const Oz={found:!1,width:512,height:512};function Iz(t,e){!hP&&!Xe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function yb(t,e){let n=e;return e==="fa"&&Xe.styleDefault!==null&&(e=Wl()),new Promise((r,i)=>{if(n==="fa"){const o=RP(t)||{};t=o.iconName||t,e=o.prefix||e}if(t&&e&&B0[e]&&B0[e][t]){const o=B0[e][t];return r(mb(o))}Iz(t,e),r(xe(xe({},Oz),{},{icon:Xe.showMissingIcons&&t?Kl("missingIconAbstract")||{}:{}}))})}const KA=()=>{},vb=Xe.measurePerformance&&Pg&&Pg.mark&&Pg.measure?Pg:{mark:KA,measure:KA},ld='FA "6.7.2"',xz=t=>(vb.mark("".concat(ld," ").concat(t," begins")),()=>xP(t)),xP=t=>{vb.mark("".concat(ld," ").concat(t," ends")),vb.measure("".concat(ld," ").concat(t),"".concat(ld," ").concat(t," begins"),"".concat(ld," ").concat(t," ends"))};var eE={begin:xz,end:xP};const lm=()=>{};function YA(t){return typeof(t.getAttribute?t.getAttribute(Wc):null)=="string"}function Pz(t){const e=t.getAttribute?t.getAttribute(GS):null,n=t.getAttribute?t.getAttribute(WS):null;return e&&n}function Mz(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Xe.replacementClass)}function Dz(){return Xe.autoReplaceSvg===!0?cm.replace:cm[Xe.autoReplaceSvg]||cm.replace}function kz(t){return vn.createElementNS("http://www.w3.org/2000/svg",t)}function Nz(t){return vn.createElement(t)}function PP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?kz:Nz}=e;if(typeof t=="string")return vn.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(o){r.setAttribute(o,t.attributes[o])}),(t.children||[]).forEach(function(o){r.appendChild(PP(o,{ceFn:n}))}),r}function Lz(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const cm={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(PP(n),e)}),e.getAttribute(Wc)===null&&Xe.keepOriginalSource){let n=vn.createComment(Lz(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~YS(e).indexOf(Xe.replacementClass))return cm.replace(t);const r=new RegExp("".concat(Xe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const o=n[0].attributes.class.split(" ").reduce((c,d)=>(d===Xe.replacementClass||d.match(r)?c.toSvg.push(d):c.toNode.push(d),c),{toNode:[],toSvg:[]});n[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",o.toNode.join(" "))}const i=n.map(o=>sp(o)).join(`
`);e.setAttribute(Wc,""),e.innerHTML=i}};function QA(t){t()}function MP(t,e){const n=typeof e=="function"?e:lm;if(t.length===0)n();else{let r=QA;Xe.mutateApproach===jH&&(r=Gl.requestAnimationFrame||QA),r(()=>{const i=Dz(),o=eE.begin("mutate");t.map(i),o(),n()})}}let tE=!1;function DP(){tE=!0}function _b(){tE=!1}let Wm=null;function XA(t){if(!UA||!Xe.observeMutations)return;const{treeCallback:e=lm,nodeCallback:n=lm,pseudoElementsCallback:r=lm,observeMutationsRoot:i=vn}=t;Wm=new UA(o=>{if(tE)return;const c=Wl();zf(o).forEach(d=>{if(d.type==="childList"&&d.addedNodes.length>0&&!YA(d.addedNodes[0])&&(Xe.searchPseudoElements&&r(d.target),e(d.target)),d.type==="attributes"&&d.target.parentNode&&Xe.searchPseudoElements&&r(d.target.parentNode),d.type==="attributes"&&YA(d.target)&&~$H.indexOf(d.attributeName))if(d.attributeName==="class"&&Pz(d.target)){const{prefix:p,iconName:g}=jy(YS(d.target));d.target.setAttribute(GS,p||c),g&&d.target.setAttribute(WS,g)}else Mz(d.target)&&n(d.target)})}),Ro&&Wm.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Uz(){Wm&&Wm.disconnect()}function Vz(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,i)=>{const o=i.split(":"),c=o[0],d=o.slice(1);return c&&d.length>0&&(r[c]=d.join(":").trim()),r},{})),n}function jz(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let i=jy(YS(t));return i.prefix||(i.prefix=Wl()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=uz(i.prefix,t.innerText)||JS(i.prefix,hb(t.innerText))),!i.iconName&&Xe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function Fz(t){const e=zf(t.attributes).reduce((i,o)=>(i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Xe.autoA11y&&(n?e["aria-labelledby"]="".concat(Xe.replacementClass,"-title-").concat(r||Ud()):(e["aria-hidden"]="true",e.focusable="false")),e}function Bz(){return{iconName:null,title:null,titleId:null,prefix:null,transform:_a,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function JA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=jz(t),o=Fz(t),c=pb("parseNodeAttributes",{},t);let d=e.styleParser?Vz(t):[];return xe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:_a,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:d,attributes:o}},c)}const{styles:Hz}=ba;function kP(t){const e=Xe.autoReplaceSvg==="nest"?JA(t,{styleParser:!1}):JA(t);return~e.extra.classes.indexOf(pP)?Kl("generateLayersText",t,e):Kl("generateSvgReplacementMutation",t,e)}function zz(){return[...wH,...ab]}function ZA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ro)return Promise.resolve();const n=vn.documentElement.classList,r=_=>n.add("".concat(FA,"-").concat(_)),i=_=>n.remove("".concat(FA,"-").concat(_)),o=Xe.autoFetchSvg?zz():oP.concat(Object.keys(Hz));o.includes("fa")||o.push("fa");const c=[".".concat(pP,":not([").concat(Wc,"])")].concat(o.map(_=>".".concat(_,":not([").concat(Wc,"])"))).join(", ");if(c.length===0)return Promise.resolve();let d=[];try{d=zf(t.querySelectorAll(c))}catch{}if(d.length>0)r("pending"),i("complete");else return Promise.resolve();const p=eE.begin("onTree"),g=d.reduce((_,E)=>{try{const C=kP(E);C&&_.push(C)}catch(C){hP||C.name==="MissingIcon"&&console.error(C)}return _},[]);return new Promise((_,E)=>{Promise.all(g).then(C=>{MP(C,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),p(),_()})}).catch(C=>{p(),E(C)})})}function qz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;kP(t).then(n=>{n&&MP([n],e)})}function $z(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:gb(e||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:gb(i||{})),t(r,xe(xe({},n),{},{mask:i}))}}const Gz=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=_a,symbol:r=!1,mask:i=null,maskId:o=null,title:c=null,titleId:d=null,classes:p=[],attributes:g={},styles:_={}}=e;if(!t)return;const{prefix:E,iconName:C,icon:O}=t;return Fy(xe({type:"icon"},t),()=>(Kc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Xe.autoA11y&&(c?g["aria-labelledby"]="".concat(Xe.replacementClass,"-title-").concat(d||Ud()):(g["aria-hidden"]="true",g.focusable="false")),ZS({icons:{main:mb(O),mask:i?mb(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:C,transform:xe(xe({},_a),n),symbol:r,title:c,maskId:o,titleId:d,extra:{attributes:g,styles:_,classes:p}})))};var Wz={mixout(){return{icon:$z(Gz)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=ZA,t.nodeCallback=qz,t}}},provides(t){t.i2svg=function(e){const{node:n=vn,callback:r=()=>{}}=e;return ZA(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:i,titleId:o,prefix:c,transform:d,symbol:p,mask:g,maskId:_,extra:E}=n;return new Promise((C,O)=>{Promise.all([yb(r,c),g.iconName?yb(g.iconName,g.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(I=>{let[k,D]=I;C([e,ZS({icons:{main:k,mask:D},prefix:c,iconName:r,transform:d,symbol:p,maskId:_,title:i,titleId:o,extra:E,watchable:!0})])}).catch(O)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:i,transform:o,styles:c}=e;const d=Uy(c);d.length>0&&(r.style=d);let p;return QS(o)&&(p=Kl("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),n.push(p||i.icon),{children:n,attributes:r}}}},Kz={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return Fy({type:"layer"},()=>{Kc("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(i=>{Array.isArray(i)?i.map(o=>{r=r.concat(o.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Xe.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},Yz={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:o={}}=e;return Fy({type:"counter",content:t},()=>(Kc("beforeDOMElementCreation",{content:t,params:e}),Rz({content:t.toString(),title:n,extra:{attributes:i,styles:o,classes:["".concat(Xe.cssPrefix,"-layers-counter"),...r]}})))}}}},Qz={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=_a,title:r=null,classes:i=[],attributes:o={},styles:c={}}=e;return Fy({type:"text",content:t},()=>(Kc("beforeDOMElementCreation",{content:t,params:e}),WA({content:t,transform:xe(xe({},_a),n),title:r,extra:{attributes:o,styles:c,classes:["".concat(Xe.cssPrefix,"-layers-text"),...i]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:i,extra:o}=n;let c=null,d=null;if(sP){const p=parseInt(getComputedStyle(e).fontSize,10),g=e.getBoundingClientRect();c=g.width/p,d=g.height/p}return Xe.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([e,WA({content:e.innerHTML,width:c,height:d,transform:i,title:r,extra:o,watchable:!0})])}}};const Xz=new RegExp('"',"ug"),eR=[1105920,1112319],tR=xe(xe(xe(xe({},{FontAwesome:{normal:"fas",400:"fas"}}),bH),UH),xH),bb=Object.keys(tR).reduce((t,e)=>(t[e.toLowerCase()]=tR[e],t),{}),Jz=Object.keys(bb).reduce((t,e)=>{const n=bb[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function Zz(t){const e=t.replace(Xz,""),n=sz(e,0),r=n>=eR[0]&&n<=eR[1],i=e.length===2?e[0]===e[1]:!1;return{value:hb(i?e[0]:e),isSecondary:r||i}}function eq(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(bb[n]||{})[i]||Jz[n]}function nR(t,e){const n="".concat(VH).concat(e.replace(":","-"));return new Promise((r,i)=>{if(t.getAttribute(n)!==null)return r();const c=zf(t.children).filter(C=>C.getAttribute(lb)===e)[0],d=Gl.getComputedStyle(t,e),p=d.getPropertyValue("font-family"),g=p.match(zH),_=d.getPropertyValue("font-weight"),E=d.getPropertyValue("content");if(c&&!g)return t.removeChild(c),r();if(g&&E!=="none"&&E!==""){const C=d.getPropertyValue("content");let O=eq(p,_);const{value:I,isSecondary:k}=Zz(C),D=g[0].startsWith("FontAwesome");let B=JS(O,I),Y=B;if(D){const Q=fz(I);Q.iconName&&Q.prefix&&(B=Q.iconName,O=Q.prefix)}if(B&&!k&&(!c||c.getAttribute(GS)!==O||c.getAttribute(WS)!==Y)){t.setAttribute(n,Y),c&&t.removeChild(c);const Q=Bz(),{extra:L}=Q;L.attributes[lb]=e,yb(B,O).then(G=>{const q=ZS(xe(xe({},Q),{},{icons:{main:G,mask:OP()},prefix:O,iconName:Y,extra:L,watchable:!0})),j=vn.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(j,t.firstChild):t.appendChild(j),j.outerHTML=q.map(N=>sp(N)).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function tq(t){return Promise.all([nR(t,"::before"),nR(t,"::after")])}function nq(t){return t.parentNode!==document.head&&!~FH.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(lb)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function rR(t){if(Ro)return new Promise((e,n)=>{const r=zf(t.querySelectorAll("*")).filter(nq).map(tq),i=eE.begin("searchPseudoElements");DP(),Promise.all(r).then(()=>{i(),_b(),e()}).catch(()=>{i(),_b(),n()})})}var rq={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=rR,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=vn}=e;Xe.searchPseudoElements&&rR(n)}}};let iR=!1;var iq={mixout(){return{dom:{unwatch(){DP(),iR=!0}}}},hooks(){return{bootstrap(){XA(pb("mutationObserverCallbacks",{}))},noAuto(){Uz()},watch(t){const{observeMutationsRoot:e}=t;iR?_b():XA(pb("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const sR=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),o=i[0];let c=i.slice(1).join("-");if(o&&c==="h")return n.flipX=!0,n;if(o&&c==="v")return n.flipY=!0,n;if(c=parseFloat(c),isNaN(c))return n;switch(o){case"grow":n.size=n.size+c;break;case"shrink":n.size=n.size-c;break;case"left":n.x=n.x-c;break;case"right":n.x=n.x+c;break;case"up":n.y=n.y-c;break;case"down":n.y=n.y+c;break;case"rotate":n.rotate=n.rotate+c;break}return n},e)};var sq={mixout(){return{parse:{transform:t=>sR(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=sR(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:i,iconWidth:o}=e;const c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(r.x*32,", ").concat(r.y*32,") "),p="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),g="rotate(".concat(r.rotate," 0 0)"),_={transform:"".concat(d," ").concat(p," ").concat(g)},E={transform:"translate(".concat(o/2*-1," -256)")},C={outer:c,inner:_,path:E};return{tag:"g",attributes:xe({},C.outer),children:[{tag:"g",attributes:xe({},C.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:xe(xe({},n.icon.attributes),C.path)}]}]}}}};const H0={x:0,y:0,width:"100%",height:"100%"};function aR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function aq(t){return t.tag==="g"?t.children:[t]}var oq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?jy(n.split(" ").map(i=>i.trim())):OP();return r.prefix||(r.prefix=Wl()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:i,mask:o,maskId:c,transform:d}=e;const{width:p,icon:g}=i,{width:_,icon:E}=o,C=ZH({transform:d,containerWidth:_,iconWidth:p}),O={tag:"rect",attributes:xe(xe({},H0),{},{fill:"white"})},I=g.children?{children:g.children.map(aR)}:{},k={tag:"g",attributes:xe({},C.inner),children:[aR(xe({tag:g.tag,attributes:xe(xe({},g.attributes),C.path)},I))]},D={tag:"g",attributes:xe({},C.outer),children:[k]},B="mask-".concat(c||Ud()),Y="clip-".concat(c||Ud()),Q={tag:"mask",attributes:xe(xe({},H0),{},{id:B,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[O,D]},L={tag:"defs",children:[{tag:"clipPath",attributes:{id:Y},children:aq(E)},Q]};return n.push(L,{tag:"rect",attributes:xe({fill:"currentColor","clip-path":"url(#".concat(Y,")"),mask:"url(#".concat(B,")")},H0)}),{children:n,attributes:r}}}},lq={provides(t){let e=!1;Gl.matchMedia&&(e=Gl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:xe(xe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const o=xe(xe({},i),{},{attributeName:"opacity"}),c={tag:"circle",attributes:xe(xe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||c.children.push({tag:"animate",attributes:xe(xe({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:xe(xe({},o),{},{values:"1;0;1;1;0;1;"})}),n.push(c),n.push({tag:"path",attributes:xe(xe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:xe(xe({},o),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:xe(xe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:xe(xe({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},cq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},uq=[nz,Wz,Kz,Yz,Qz,rq,iq,sq,oq,lq,cq];bz(uq,{mixoutsTo:Yi});Yi.noAuto;Yi.config;Yi.library;Yi.dom;const Sb=Yi.parse;Yi.findIconDefinition;Yi.toHtml;const fq=Yi.icon;Yi.layer;Yi.text;Yi.counter;var z0={exports:{}},q0,oR;function hq(){if(oR)return q0;oR=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return q0=t,q0}var $0,lR;function dq(){if(lR)return $0;lR=1;var t=hq();function e(){}function n(){}return n.resetWarningCache=e,$0=function(){function r(c,d,p,g,_,E){if(E!==t){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},$0}var cR;function pq(){return cR||(cR=1,z0.exports=dq()()),z0.exports}var gq=pq();const Nt=nO(gq);function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(r){of(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Km(t){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Km(t)}function of(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function yq(t,e){if(t==null)return{};var n=mq(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eb(t){return vq(t)||_q(t)||bq(t)||Sq()}function vq(t){if(Array.isArray(t))return wb(t)}function _q(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bq(t,e){if(t){if(typeof t=="string")return wb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wb(t,e)}}function wb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eq(t){var e,n=t.beat,r=t.fade,i=t.beatFade,o=t.bounce,c=t.shake,d=t.flash,p=t.spin,g=t.spinPulse,_=t.spinReverse,E=t.pulse,C=t.fixedWidth,O=t.inverse,I=t.border,k=t.listItem,D=t.flip,B=t.size,Y=t.rotation,Q=t.pull,L=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":c,"fa-flash":d,"fa-spin":p,"fa-spin-reverse":_,"fa-spin-pulse":g,"fa-pulse":E,"fa-fw":C,"fa-inverse":O,"fa-border":I,"fa-li":k,"fa-flip":D===!0,"fa-flip-horizontal":D==="horizontal"||D==="both","fa-flip-vertical":D==="vertical"||D==="both"},of(e,"fa-".concat(B),typeof B<"u"&&B!==null),of(e,"fa-rotate-".concat(Y),typeof Y<"u"&&Y!==null&&Y!==0),of(e,"fa-pull-".concat(Q),typeof Q<"u"&&Q!==null),of(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(L).map(function(G){return L[G]?G:null}).filter(function(G){return G})}function wq(t){return t=t-0,t===t}function NP(t){return wq(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var Tq=["style"];function Cq(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Aq(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=NP(n.slice(0,r)),o=n.slice(r+1).trim();return i.startsWith("webkit")?e[Cq(i)]=o:e[i]=o,e},{})}function LP(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(p){return LP(t,p)}),i=Object.keys(e.attributes||{}).reduce(function(p,g){var _=e.attributes[g];switch(g){case"class":p.attrs.className=_,delete e.attributes.class;break;case"style":p.attrs.style=Aq(_);break;default:g.indexOf("aria-")===0||g.indexOf("data-")===0?p.attrs[g.toLowerCase()]=_:p.attrs[NP(g)]=_}return p},{attrs:{}}),o=n.style,c=o===void 0?{}:o,d=yq(n,Tq);return i.attrs.style=ga(ga({},i.attrs.style),c),t.apply(void 0,[e.tag,ga(ga({},i.attrs),d)].concat(Eb(r)))}var UP=!1;try{UP=!0}catch{}function Rq(){if(!UP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function fR(t){if(t&&Km(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(Sb.icon)return Sb.icon(t);if(t===null)return null;if(t&&Km(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function G0(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?of({},t,e):{}}var hR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Pa=Yl.forwardRef(function(t,e){var n=ga(ga({},hR),t),r=n.icon,i=n.mask,o=n.symbol,c=n.className,d=n.title,p=n.titleId,g=n.maskId,_=fR(r),E=G0("classes",[].concat(Eb(Eq(n)),Eb((c||"").split(" ")))),C=G0("transform",typeof n.transform=="string"?Sb.transform(n.transform):n.transform),O=G0("mask",fR(i)),I=fq(_,ga(ga(ga(ga({},E),C),O),{},{symbol:o,title:d,titleId:p,maskId:g}));if(!I)return Rq("Could not find icon",_),null;var k=I.abstract,D={ref:e};return Object.keys(n).forEach(function(B){hR.hasOwnProperty(B)||(D[B]=n[B])}),Oq(k[0],D)});Pa.displayName="FontAwesomeIcon";Pa.propTypes={beat:Nt.bool,border:Nt.bool,beatFade:Nt.bool,bounce:Nt.bool,className:Nt.string,fade:Nt.bool,flash:Nt.bool,mask:Nt.oneOfType([Nt.object,Nt.array,Nt.string]),maskId:Nt.string,fixedWidth:Nt.bool,inverse:Nt.bool,flip:Nt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Nt.oneOfType([Nt.object,Nt.array,Nt.string]),listItem:Nt.bool,pull:Nt.oneOf(["right","left"]),pulse:Nt.bool,rotation:Nt.oneOf([0,90,180,270]),shake:Nt.bool,size:Nt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Nt.bool,spinPulse:Nt.bool,spinReverse:Nt.bool,symbol:Nt.oneOfType([Nt.bool,Nt.string]),title:Nt.string,titleId:Nt.string,transform:Nt.oneOfType([Nt.string,Nt.object]),swapOpacity:Nt.bool};var Oq=LP.bind(null,Yl.createElement);const Iq=()=>F.jsx(Pa,{icon:rH}),xq=M.memo(Iq),Pq=()=>F.jsx(Pa,{icon:sH}),Mq=M.memo(Pq),Dq=()=>F.jsx(Pa,{icon:aH}),kq=M.memo(Dq),Nq=()=>F.jsx(Pa,{icon:cH}),Lq=M.memo(Nq),Uq="_LoadingIcon_1jisw_6",Vq={LoadingIcon:Uq},jq=t=>{const{size:e="1x"}=t;return F.jsx("span",{className:Vq.LoadingIcon,children:F.jsx(Pa,{icon:lH,size:e})})},VP=M.memo(jq),Fq="_MeloChartIcon_1muw1_1",Bq={MeloChartIcon:Fq},Hq=()=>F.jsx("span",{className:Bq.MeloChartIcon}),zq=M.memo(Hq),qq=()=>F.jsx(Pa,{icon:oH}),dR=M.memo(qq),$q=()=>F.jsx(Pa,{icon:iH}),Gq=M.memo($q),Wq=()=>F.jsx(Pa,{icon:uH}),Kq=M.memo(Wq),Yq="_Input_6v29l_1",Qq={Input:Yq},Xq=t=>F.jsx("input",{className:Qq.Input,...t}),ho=M.memo(Xq),Jq="_Link_8fn99_1",Zq={Link:Jq},e$=t=>{const{children:e,...n}=t;return F.jsx(nS,{className:Zq.Link,...n,children:e})},Tb=M.memo(e$),nE=()=>({id:np(),text:""}),kl=t=>{const e=Array.from({length:t},()=>nE());return{id:np(),chunks:e}},ru=t=>t[0].chunks.length,t$=t=>{const{qty:e,setNotes:n}=t;n(r=>[...r,...Array.from({length:e},()=>kl(ru(r)))])},n$=t=>{const{qty:e,setNotes:n}=t;n(r=>r.map(i=>{const o=[...i.chunks,...Array.from({length:e},()=>nE())];return{...i,chunks:o}}))},jP=t=>{const{noteIndex:e,setNotes:n}=t;n(r=>[...r.slice(0,e),kl(ru(r)),...r.slice(e)])},FP=t=>{const{contextMenuData:e,setNotes:n}=t,{noteIndex:r}=e;jP({noteIndex:r+1,setNotes:n})},BP=t=>{const{contextMenuData:e,setNotes:n}=t,{noteIndex:r}=e;jP({noteIndex:r,setNotes:n})},HP=t=>{const{chunkIndex:e,setNotes:n}=t;n(r=>r.map(i=>{const o=[...i.chunks.slice(0,e),nE(),...i.chunks.slice(e)];return{...i,chunks:o}}))},zP=t=>{const{contextMenuData:e,setNotes:n}=t,{chunkIndex:r}=e;HP({chunkIndex:r+1,setNotes:n})},qP=t=>{const{contextMenuData:e,setNotes:n}=t,{chunkIndex:r}=e;HP({chunkIndex:r,setNotes:n})},r$=t=>{const{setNotes:e,songText:n}=t,r=B2(n);e(i=>{const o=ru(i);return[...i.slice(0,1),...r.map(c=>{const d=kl(o);return d.chunks[0].text=c,d})]},[])},$P=t=>t.chunks.findIndex(e=>e.text),i$=t=>{const{setNotes:e}=t;e(n=>{let r=-1;for(let o=n.length-1;o>=0&&!n[o].chunks.reduce((d,p)=>d+p.text,"");o--)r=o;const i=r!=-1?n.slice(0,r):[...n];return i.length?[...i]:[...n]})},GP=t=>{const{contextMenuData:e,setNotes:n}=t,{noteIndex:r}=e;n(i=>r===0?[...i]:[...i.slice(0,r),...i.slice(r+1)])},WP=t=>{const{contextMenuData:e,setNotes:n}=t,{chunkIndex:r}=e;n(i=>i.map(o=>{if(o.chunks.length===1)return{...o};const c=[...o.chunks.slice(0,r),...o.chunks.slice(r+1)];return{...o,chunks:c}}))},KP=(t,e)=>t.reduce((n,r)=>n+r.chunks[e].text,""),s$=t=>{const{setNotes:e}=t;e(n=>{const r=o$(n),i=a$(r);return i[0].chunks.length?[...i]:[...n]})},a$=t=>{const e=ru(t);let n=-1;for(let r=e-1;r>=0&&!KP(t,r);r--)n=r;return n==-1?[...t]:t.map(r=>{const i=r.chunks.map((o,c)=>c>=n?null:o).filter(Boolean);return{...r,chunks:i}})},o$=t=>{const e=ru(t);let n=-1;for(let r=0;r<e&&!KP(t,r);r++)n=r;return n==-1?[...t]:t.map(r=>{const i=r.chunks.map((o,c)=>c>n?o:null).filter(Boolean);return{...r,chunks:i}})},l$=t=>e=>{const{text:n,noteIndex:r,chunkIndex:i}=e,o=n.trim(),c=!!o,p=o.indexOf(" ")!==-1?o.split(" "):[n];t(g=>{const _=ru(g),E=g[r],C=E.chunks.map((I,k)=>{const D=k==i,B=c?"":I.text;return{...I,text:D?p[0]:B}}),O=p.length>1?p.slice(1).map(I=>{const k=kl(_);return k.chunks[i].text=I,k}):[];return[...g.slice(0,r),{...E,chunks:C},...O,...g.slice(r+1)]})},c$=t=>e=>{const{text:n,noteIndex:r,chunkIndex:i}=e,o=n.trim(),d=o.indexOf(" ")!==-1?o.split(" "):[n];t(p=>{const g=ru(p),_=p[r],E=_.chunks.map((O,I)=>{const k=I==i;return{...O,text:k?d[0]:O.text}}),C=d.length>1?d.slice(1).map(O=>{const I=kl(g);return I.chunks[i].text=O,I}):[];return[...p.slice(0,r),{..._,chunks:E},...C,...p.slice(r+1)]})},u$=(t,e,n)=>{if(e==-1||n==-1)return!1;if(e<n)return!(t<=e||t>n);if(t==n)return!1;if(t<=e&&t>n)return!0},rE=t=>{const{noteIndex:e,chunkIndex:n}=t,r=document.querySelector(`[data-note-index="${e}"][data-chunk-index="${n}"]`);r&&r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))},f$=t=>{t.preventDefault()},h$=t=>{const{event:e,noteIndex:n,chunkIndex:r}=t;e.preventDefault(),rE({noteIndex:n,chunkIndex:r+1})},d$=t=>{const{event:e,noteIndex:n,chunkIndex:r}=t;e.preventDefault(),rE({noteIndex:n,chunkIndex:r-1})},p$=t=>{const{event:e}=t;e.target.blur()},g$=t=>{const{event:e,originalText:n,setEditInputValue:r}=t;r(n),setTimeout(()=>{e.target.blur()},0)},m$=t=>{const{event:e,noteIndex:n,chunkIndex:r}=t;e.preventDefault();const i=e.shiftKey?n-1:n+1;rE({noteIndex:i,chunkIndex:r})},y$=Object.freeze({Enter:p$,Tab:m$,ArrowUp:d$,ArrowDown:h$,Escape:g$}),v$="_NoteChunk_1p1e2_1",_$="_ChunkText_1p1e2_11",b$="_EmptyChunkText_1p1e2_168",S$="_HighlightDropZone_1p1e2_172",so={NoteChunk:v$,ChunkText:_$,EmptyChunkText:b$,HighlightDropZone:S$},Dg="drag-data-transfer-text",W0="drag-data-transfer-note-index",pR="drag-data-transfer-chunk-index",E$=t=>{const{chunk:e,note:n,text:r,chunkIndex:i,noteIndex:o,filledNoteIndex:c,hasRightBorder:d,isTheNoteDefinitionChunk:p=!1,onOpenContextMenu:g,onEditNoteChunkText:_,onEditNoteDefinitionChunkText:E,songId:C,setChangesLog:O}=t,{t:I}=Ln(),k=ms(),[D,B]=M.useState(!1),[Y,Q]=M.useState(r),{publish:L}=wo(Ao,te=>{var Ce;if(k.connection.id!=te.connectionId){const{name:Le,data:K}=te;if(K.id!=C)return;if(Le==Qe.UPDATE_CHART_CHANGES_LOG){(Ce=K.changesLog)==null||Ce.forEach(pe=>{const{action:me,data:ve}=pe;me==Qe.UPDATE_NOTE_CHUNK_TEXT&&W(ve),me==Qe.UPDATE_NOTE_CHUNK_POSITION&&_(ve)});return}if(K.noteIndex!=o||K.chunkIndex!=i)return;if(Le==Qe.UPDATE_NOTE_CHUNK_TEXT){W(K);return}if(Le==Qe.UPDATE_NOTE_CHUNK_POSITION){_(K);return}}}),G=M.useMemo(()=>i===0,[i]),q=M.useMemo(()=>i%12+1,[i]),j=M.useMemo(()=>!r||p,[p,r]),N=M.useMemo(()=>p?I("Click to define pitch"):`${I("Click to define note")}. ${I("Drag the note to move it")}`,[p,I]),U=M.useCallback(()=>{B(te=>!te)},[]),$=M.useCallback(te=>{if(te.preventDefault(),te.dataTransfer.getData("noteIndex")!=o)return;const K={text:te.dataTransfer.getData("text"),noteIndex:o,chunkIndex:i};_(K);const pe={id:C,...K};O(me=>[...me,{action:Qe.UPDATE_NOTE_CHUNK_POSITION,data:pe}]),L(Qe.UPDATE_NOTE_CHUNK_POSITION,pe)},[i,o,_,L,O,C]),T=M.useCallback(te=>{te.dataTransfer.setData("text",r),te.dataTransfer.setData("noteIndex",o)},[o,r]),ee=M.useCallback(te=>{if(p&&["Tab"].includes(te.key)){te.preventDefault();return}const Ce=y$[te.key];Ce&&Ce({event:te,chunkIndex:i,noteIndex:o,originalText:r,setEditInputValue:Q})},[i,p,o,r]),W=M.useCallback(te=>{(p?E:_)(te)},[p,_,E]);M.useEffect(()=>{Q(r)},[r]);const ne=M.useMemo(()=>`note-chunk-${n.id}-${e.id}`,[e.id,n.id]),Me=M.useMemo(()=>{const te=r===""?I("Pitch"):r,Ce=c===-1&&r===""?I("Note"):r,Le=p?te:Ce;return F.jsx("span",{className:`${so.ChunkText} ${r?"":so.EmptyChunkText}`,children:Le})},[c,p,I,r]),ie=M.useRef(null);return M.useEffect(()=>{const te=ie.current,Ce=()=>{localStorage.setItem(Dg,r),localStorage.setItem(W0,o),localStorage.setItem(pR,i)},Le=pe=>{if(!localStorage.getItem(Dg))return;pe.preventDefault();const ve=pe.touches[0],Be=document.elementFromPoint(ve.clientX,ve.clientY).closest(`.${so.NoteChunk}`);document.querySelectorAll(`.${so.HighlightDropZone}`).forEach(Ue=>Ue.classList.remove(so.HighlightDropZone)),Be&&Be.classList.add(so.HighlightDropZone)},K=pe=>{const me=localStorage.getItem(Dg),ve=localStorage.getItem(W0),Ne=localStorage.getItem(pR),Be=pe.changedTouches[0],It=document.elementFromPoint(Be.clientX,Be.clientY).closest(`.${so.NoteChunk}`),mt=It.dataset.chunkIndex;if(!me||ve!=o||Ne==mt)return;pe.preventDefault(),localStorage.removeItem(Dg),localStorage.removeItem(W0),It.classList.remove(so.HighlightDropZone);const gn={text:me,noteIndex:o,chunkIndex:mt};_(gn);const Ft={id:C,...gn};O(mn=>[...mn,{action:Qe.UPDATE_NOTE_CHUNK_POSITION,data:Ft}]),L(Qe.UPDATE_NOTE_CHUNK_POSITION,Ft)};return te==null||te.addEventListener("touchstart",Ce,{passive:!1}),te==null||te.addEventListener("touchmove",Le,{passive:!1}),te==null||te.addEventListener("touchend",K,{passive:!1}),()=>{te==null||te.removeEventListener("touchstart",Ce,{passive:!1}),te==null||te.removeEventListener("touchmove",Le,{passive:!1}),te==null||te.removeEventListener("touchend",K,{passive:!1})}},[i,o,_,L,O,C,r]),F.jsx("div",{id:ne,className:so.NoteChunk,ref:ie,onContextMenu:te=>{te.preventDefault(),g({chunkIndex:i,noteIndex:o,top:te.pageY-window.scrollY,left:te.pageX-window.scrollX})},onClick:U,draggable:!j,onDragStart:T,onDrop:$,onDragOver:f$,"data-is-drag-disabled":j,"data-pitch-index":q,"data-has-bottom-border":!!r||p,"data-has-right-border":d||p,"data-has-left-border":p,"data-has-top-border":p&&G,"data-chunk-index":i,"data-note-index":o,title:N,children:D?F.jsx(ho,{autoFocus:!0,type:"text",name:"note-chunk-edit-input",value:Y,onKeyDown:ee,onChange:te=>Q(te.target.value),onBlur:()=>{B(!1);const te={text:Y,noteIndex:o,chunkIndex:i};W(te);const Ce={id:C,...te};O(Le=>[...Le,{action:Qe.UPDATE_NOTE_CHUNK_TEXT,data:Ce}]),L(Qe.UPDATE_NOTE_CHUNK_TEXT,Ce)}}):Me})},w$=M.memo(E$),T$="_Note_8s8tv_1",C$={Note:T$},A$=t=>{const{note:e,noteIndex:n,nextNoteNoteIndex:r,hasNextNote:i,isTheNoteDefinitionChunk:o,setNotes:c,contextMenuFnsRef:d,songId:p,setChangesLog:g}=t,_=M.useCallback(O=>{var I;(I=d.current)==null||I.setContextMenuData(O)},[d]),E=M.useCallback(l$(c),[c]),C=M.useCallback(c$(c),[c]);return F.jsx("div",{className:C$.Note,children:e.chunks.map((O,I)=>{const k=$P(e),D=i?u$(I,k,r):!1;return F.jsx(w$,{note:e,chunk:O,chunkIndex:I,noteIndex:n,filledNoteIndex:k,text:O.text,hasRightBorder:D,isTheNoteDefinitionChunk:o,onOpenContextMenu:_,onEditNoteChunkText:E,onEditNoteDefinitionChunkText:C,songId:p,setChangesLog:g},O.id)})})},gR=M.memo(A$),R$="_NotesContainer_1cc1b_1",O$="_ScaleContainer_1cc1b_12",I$="_ChartContainer_1cc1b_18",K0={NotesContainer:R$,ScaleContainer:O$,ChartContainer:I$},mR=Object.freeze({[Qe.ADD_PITCH_ABOVE]:qP,[Qe.ADD_PITCH_BELOW]:zP,[Qe.ADD_NOTE_BEFORE]:BP,[Qe.ADD_NOTE_AFTER]:FP,[Qe.REMOVE_PITCH]:WP,[Qe.REMOVE_NOTE]:GP}),x$=t=>{const{notes:e,notesFnsRef:n,songId:r,setChangesLog:i}=t,{t:o}=Ln(),c=ms(),[d,p]=M.useState(e),[g,_]=M.useState(!0),[E,C]=M.useState([1]),O=M.useRef(null),I=M.useRef(null),{publish:k}=wo(Ao,L=>{var G;if(c.connection.id!=L.connectionId){const{name:q,data:j}=L;if(j.id!=r)return;if(q==Qe.UPDATE_CHART_CHANGES_LOG){(G=j.changesLog)==null||G.forEach(U=>{const{action:$,data:T}=U;(mR[$]||(()=>null))({contextMenuData:T.contextMenuData,setNotes:p})});return}(mR[q]||(()=>null))({contextMenuData:j.contextMenuData,setNotes:p})}}),D=M.useCallback((L,G)=>{const q={id:r,contextMenuData:G};i(j=>[...j,{action:L,data:q}]),k(L,q)},[k,i,r]),B=M.useMemo(()=>[{label:o("Add Pitch Above"),onClick:L=>{qP({contextMenuData:L,setNotes:p}),D(Qe.ADD_PITCH_ABOVE,L)}},{label:o("Add Pitch Below"),onClick:L=>{zP({contextMenuData:L,setNotes:p}),D(Qe.ADD_PITCH_BELOW,L)}},{label:o("Add Note Before"),onClick:L=>{BP({contextMenuData:L,setNotes:p}),D(Qe.ADD_NOTE_BEFORE,L)}},{label:o("Add Note After"),onClick:L=>{FP({contextMenuData:L,setNotes:p}),D(Qe.ADD_NOTE_AFTER,L)}},{label:o("Remove Pitch"),type:"danger",onClick:L=>{WP({contextMenuData:L,setNotes:p}),D(Qe.REMOVE_PITCH,L)}},{label:o("Remove Note"),type:"danger",onClick:L=>{GP({contextMenuData:L,setNotes:p}),D(Qe.REMOVE_NOTE,L)}}],[D,o]);M.useImperativeHandle(n,()=>({setWrapNotes(L){_(L)},getNotes(){return[...d]},setNotes(L){p(L)},addMultipleNotes(L){t$({setNotes:p,qty:L})},addMultiplePitches(L){n$({setNotes:p,qty:L})},removeEmptyNotesAtTheEnd(){i$({setNotes:p})},trimPitches(){s$({setNotes:p})},addWordsAsNotes(L){r$({setNotes:p,songText:L})}}));const Y=M.useCallback(()=>{var N,U,$,T;if(!((U=(N=I==null?void 0:I.current)==null?void 0:N.children)==null?void 0:U.length)){C([1]);return}const G=(($=I==null?void 0:I.current)==null?void 0:$.children[0].offsetHeight)+eF(2),q=(T=I==null?void 0:I.current)==null?void 0:T.offsetHeight,j=Math.ceil(q/G);if(j>1){const ee=Array(j).fill().map((W,ne)=>1+ne);C(ee);return}C([1])},[]);M.useEffect(()=>{Y()},[Y,g,d]),M.useEffect(()=>(window.addEventListener("resize",Y),()=>{window.removeEventListener("resize",Y)}),[Y]);const Q=d[0];return F.jsxs("div",{className:K0.ChartContainer,children:[F.jsx("div",{className:K0.ScaleContainer,children:E.map(L=>F.jsx(gR,{setNotes:p,note:Q,noteIndex:L,hasNextNote:!0,nextNoteNoteIndex:1,contextMenuFnsRef:O,isTheNoteDefinitionChunk:!0,songId:r,setChangesLog:i},`${Q.id}-${L}`))}),F.jsxs("div",{ref:I,className:K0.NotesContainer,"data-wrap-notes":g,children:[d.map((L,G)=>{if(G==0)return null;const q=d.length>G+1,j=q?$P(d[G+1]):null;return F.jsx(gR,{setNotes:p,note:L,noteIndex:G,hasNextNote:q,nextNoteNoteIndex:j,contextMenuFnsRef:O,songId:r,setChangesLog:i},L.id)}),F.jsx(y7,{items:B,contextMenuFnsRef:O})]})]})},P$=M.memo(x$),M$="_SaveChartOption_1tona_1",yR={SaveChartOption:M$},D$=t=>{const{songId:e,notesFnsRef:n,setChangesLog:r}=t,{t:i}=Ln(),o=qs(),c=dr(ur.selectors.selectSongById(e)),d=dr(ur.selectors.selectSaveSongStatus),p=M.useCallback(async()=>{var E;const g=(E=n.current)==null?void 0:E.getNotes(),_=c.title;o(ur.actions.saveSong({...c,title:_,notes:g})),r([])},[o,n,r,c]);return F.jsx("div",{className:yR.SaveChartOption,children:F.jsxs(_n,{className:yR.SaveSongButton,onClick:p,category:kn.SUCCESS,icon:F.jsx(kq,{}),children:[q2(d)?F.jsx(VP,{}):F.jsx(F.Fragment,{})," ",i("Save Changes")]})})},k$=M.memo(D$),N$="_SongTitle_rcztm_1",L$="_CheckboxContainer_rcztm_8",vR={SongTitle:N$,CheckboxContainer:L$},U$=t=>{const{id:e,title:n,notesFnsRef:r,setChangesLog:i}=t,{t:o}=Ln(),c=qs(),d=ms(),[p,g]=M.useState(!1),[_,E]=M.useState(n),C=M.useCallback(Y=>{E(Y.title),c(ur.actions.editSongTitle({id:Y.id,title:Y.title}))},[c]),{publish:O}=wo(Ao,Y=>{var Q;if(d.connection.id!=Y.connectionId){const{name:L,data:G}=Y;if(L==Qe.UPDATE_SONG_TITLE){C(G);return}if(L==Qe.UPDATE_CHART_CHANGES_LOG){(Q=G.changesLog)==null||Q.forEach(q=>{const{action:j,data:N}=q;if(j==Qe.UPDATE_SONG_TITLE){C(N);return}});return}}}),I=M.useCallback(()=>{g(!0)},[]),k=M.useCallback(Y=>{Y.key==="Enter"&&Y.target.blur()},[]),D=M.useCallback(()=>{g(!1);const Y={id:e,title:_};i(Q=>[...Q,{action:Qe.UPDATE_SONG_TITLE,data:Y}]),O(Qe.UPDATE_SONG_TITLE,Y),c(ur.actions.editSongTitle({id:e,title:_}))},[c,e,O,i,_]),B=M.useCallback(Y=>{var Q;(Q=r.current)==null||Q.setWrapNotes(Y)},[r]);return F.jsx(F.Fragment,{children:p?F.jsx(ho,{autoFocus:!0,type:"text",value:_,onChange:Y=>E(Y.target.value),onKeyDown:k,onBlur:D}):F.jsxs(F.Fragment,{children:[F.jsx("h2",{className:vR.SongTitle,onDoubleClick:I,children:_}),F.jsx(k$,{songId:e,notesFnsRef:r,setChangesLog:i}),F.jsx(h7,{className:vR.CheckboxContainer,label:o("Break Chart"),initialValue:!0,onChange:B})]})})},V$=M.memo(U$),j$="_Song_6jqb9_1",F$="_SongTitleContainer_6jqb9_7",_R={Song:j$,SongTitleContainer:F$},B$=t=>{const{notesFnsRef:e,generateChartDialogFnsRef:n,song:r,setChangesLog:i}=t,{t:o}=Ln(),c=M.useRef(null),d=M.useRef(null);return F.jsxs("div",{className:_R.Song,children:[F.jsx(U7,{}),F.jsx(_n,{category:kn.PRIMARY,onClick:()=>{var p;return(p=c.current)==null?void 0:p.show()},icon:F.jsx(Lq,{}),children:o("Configure Song")}),F.jsx("div",{className:_R.SongTitleContainer,children:F.jsx(V$,{id:r.id,title:r.title,notesFnsRef:e,setChangesLog:i})}),F.jsx(P$,{songId:r.id,notes:r.notes,notesFnsRef:e,setChangesLog:i}),F.jsx(I7,{song:r,configSongDialogFnsRef:c,generateChartDialogFnsRef:n,deleteSongDialogFnsRef:d,notesFnsRef:e,setChangesLog:i}),F.jsx(P7,{deleteSongDialogFnsRef:d,song:r})]})},H$=M.memo(B$),z$="_Tag_19v7a_1",q$={Tag:z$},$$=t=>{const{username:e,tag:n}=t;return F.jsxs("span",{children:[e,F.jsxs("span",{className:q$.Tag,children:["#",n]})]})},Cb=M.memo($$),Ab=Object.freeze({EMPTY_LIST_MESSAGE:"songs-list-empty-list-message",SONG:"songs-list-song-item"}),{t:bR}=er,G$=(t=[])=>{const e=t.reduce((n,r)=>({...n,[r.owner]:[...n[r.owner]||[],r]}),{});return t.length?Object.keys(e).map(n=>{const r=e[n];if(!(r!=null&&r.length))return F.jsx(F.Fragment,{});const{ownerData:i={username:bR("Unknown User"),tag:"0"}}=r[0]||{};return F.jsxs(M.Fragment,{children:[F.jsx("h3",{children:F.jsx(Cb,{...i})}),YP(r),F.jsx("br",{})]},i.uid)}):F.jsx("li",{"data-testid":Ab.EMPTY_LIST_MESSAGE,children:bR("No songs here")})},{t:W$}=er,YP=(t=[])=>t.length?t.map(e=>{if(!e.id||!e.title){const{notes:n,...r}=e;return console.warn(`renderSongs: Song not rendered because id and/or title was not defined. ${JSON.stringify(r)}`),F.jsx(F.Fragment,{})}return F.jsx("li",{"data-testid":Ab.SONG,children:F.jsx(Tb,{to:{pathname:"/chart",search:`?id=${e.id}`},children:e.title})},e.id)}):F.jsx("li",{"data-testid":Ab.EMPTY_LIST_MESSAGE,children:W$("No songs here")}),K$="_SongListContainer_v77t5_1",Y$="_SongList_v77t5_1",kg={SongListContainer:K$,SongList:Y$},Q$=()=>{const{t}=Ln(),e=dr(Nr.selectors.selectLoggedUser),n=dr(ur.selectors.selectAllSongs),r=M.useMemo(()=>n.filter(o=>o.owner==(e==null?void 0:e.uid)),[e==null?void 0:e.uid,n]),i=M.useMemo(()=>n.filter(o=>o.owner!=(e==null?void 0:e.uid)),[e==null?void 0:e.uid,n]);return F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:kg.SongListContainer,children:[F.jsx("h2",{children:t("My Songs")}),F.jsx("ul",{className:kg.SongList,children:YP(r)})]}),F.jsxs("div",{className:kg.SongListContainer,children:[F.jsx("h2",{children:t("Songs Shared With Me")}),F.jsx("ul",{className:kg.SongList,children:G$(i)})]})]})},X$=M.memo(Q$),J$="_TextArea_e12px_1",Z$={TextArea:J$},eG=t=>F.jsx("textarea",{...t,className:Z$.TextArea}),QP=M.memo(eG);function ut(){return ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(null,arguments)}function Yc(t){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function tG(t,e){if(Yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XP(t){var e=tG(t,"string");return Yc(e)=="symbol"?e:e+""}function lf(t,e,n){return(e=XP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(n),!0).forEach(function(r){lf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ER(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XP(r.key),r)}}function rG(t,e,n){return e&&ER(t.prototype,e),n&&ER(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rb(t,e){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Rb(t,e)}function iG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rb(t,e)}function Ym(t){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ym(t)}function JP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JP=function(){return!!t})()}function sG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aG(t,e){if(e&&(Yc(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sG(t)}function oG(t){var e=JP();return function(){var n,r=Ym(t);if(e){var i=Ym(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return aG(this,n)}}function Ob(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lG(t){if(Array.isArray(t))return Ob(t)}function cG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZP(t,e){if(t){if(typeof t=="string")return Ob(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ob(t,e):void 0}}function uG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iE(t){return lG(t)||cG(t)||ZP(t)||uG()}function fG(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function hG(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var dG=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(hG(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=fG(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Qr="-ms-",Qm="-moz-",Yt="-webkit-",eM="comm",sE="rule",aE="decl",pG="@import",tM="@keyframes",gG="@layer",mG=Math.abs,By=String.fromCharCode,yG=Object.assign;function vG(t,e){return Dr(t,0)^45?(((e<<2^Dr(t,0))<<2^Dr(t,1))<<2^Dr(t,2))<<2^Dr(t,3):0}function nM(t){return t.trim()}function _G(t,e){return(t=e.exec(t))?t[0]:t}function Qt(t,e,n){return t.replace(e,n)}function Ib(t,e){return t.indexOf(e)}function Dr(t,e){return t.charCodeAt(e)|0}function jd(t,e,n){return t.slice(e,n)}function ma(t){return t.length}function oE(t){return t.length}function Ng(t,e){return e.push(t),t}function bG(t,e){return t.map(e).join("")}var Hy=1,If=1,rM=0,Ai=0,Jn=0,qf="";function zy(t,e,n,r,i,o,c){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Hy,column:If,length:c,return:""}}function Kh(t,e){return yG(zy("",null,null,"",null,null,0),t,{length:-t.length},e)}function SG(){return Jn}function EG(){return Jn=Ai>0?Dr(qf,--Ai):0,If--,Jn===10&&(If=1,Hy--),Jn}function $i(){return Jn=Ai<rM?Dr(qf,Ai++):0,If++,Jn===10&&(If=1,Hy++),Jn}function Oa(){return Dr(qf,Ai)}function um(){return Ai}function ap(t,e){return jd(qf,t,e)}function Fd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function iM(t){return Hy=If=1,rM=ma(qf=t),Ai=0,[]}function sM(t){return qf="",t}function fm(t){return nM(ap(Ai-1,xb(t===91?t+2:t===40?t+1:t)))}function wG(t){for(;(Jn=Oa())&&Jn<33;)$i();return Fd(t)>2||Fd(Jn)>3?"":" "}function TG(t,e){for(;--e&&$i()&&!(Jn<48||Jn>102||Jn>57&&Jn<65||Jn>70&&Jn<97););return ap(t,um()+(e<6&&Oa()==32&&$i()==32))}function xb(t){for(;$i();)switch(Jn){case t:return Ai;case 34:case 39:t!==34&&t!==39&&xb(Jn);break;case 40:t===41&&xb(t);break;case 92:$i();break}return Ai}function CG(t,e){for(;$i()&&t+Jn!==57;)if(t+Jn===84&&Oa()===47)break;return"/*"+ap(e,Ai-1)+"*"+By(t===47?t:$i())}function AG(t){for(;!Fd(Oa());)$i();return ap(t,Ai)}function RG(t){return sM(hm("",null,null,null,[""],t=iM(t),0,[0],t))}function hm(t,e,n,r,i,o,c,d,p){for(var g=0,_=0,E=c,C=0,O=0,I=0,k=1,D=1,B=1,Y=0,Q="",L=i,G=o,q=r,j=Q;D;)switch(I=Y,Y=$i()){case 40:if(I!=108&&Dr(j,E-1)==58){Ib(j+=Qt(fm(Y),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:j+=fm(Y);break;case 9:case 10:case 13:case 32:j+=wG(I);break;case 92:j+=TG(um()-1,7);continue;case 47:switch(Oa()){case 42:case 47:Ng(OG(CG($i(),um()),e,n),p);break;default:j+="/"}break;case 123*k:d[g++]=ma(j)*B;case 125*k:case 59:case 0:switch(Y){case 0:case 125:D=0;case 59+_:B==-1&&(j=Qt(j,/\f/g,"")),O>0&&ma(j)-E&&Ng(O>32?TR(j+";",r,n,E-1):TR(Qt(j," ","")+";",r,n,E-2),p);break;case 59:j+=";";default:if(Ng(q=wR(j,e,n,g,_,i,d,Q,L=[],G=[],E),o),Y===123)if(_===0)hm(j,e,q,q,L,o,E,d,G);else switch(C===99&&Dr(j,3)===110?100:C){case 100:case 108:case 109:case 115:hm(t,q,q,r&&Ng(wR(t,q,q,0,0,i,d,Q,i,L=[],E),G),i,G,E,d,r?L:G);break;default:hm(j,q,q,q,[""],G,0,d,G)}}g=_=O=0,k=B=1,Q=j="",E=c;break;case 58:E=1+ma(j),O=I;default:if(k<1){if(Y==123)--k;else if(Y==125&&k++==0&&EG()==125)continue}switch(j+=By(Y),Y*k){case 38:B=_>0?1:(j+="\f",-1);break;case 44:d[g++]=(ma(j)-1)*B,B=1;break;case 64:Oa()===45&&(j+=fm($i())),C=Oa(),_=E=ma(Q=j+=AG(um())),Y++;break;case 45:I===45&&ma(j)==2&&(k=0)}}return o}function wR(t,e,n,r,i,o,c,d,p,g,_){for(var E=i-1,C=i===0?o:[""],O=oE(C),I=0,k=0,D=0;I<r;++I)for(var B=0,Y=jd(t,E+1,E=mG(k=c[I])),Q=t;B<O;++B)(Q=nM(k>0?C[B]+" "+Y:Qt(Y,/&\f/g,C[B])))&&(p[D++]=Q);return zy(t,e,n,i===0?sE:d,p,g,_)}function OG(t,e,n){return zy(t,e,n,eM,By(SG()),jd(t,2,-2),0)}function TR(t,e,n,r){return zy(t,e,n,aE,jd(t,0,r),jd(t,r+1,-1),r)}function gf(t,e){for(var n="",r=oE(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function IG(t,e,n,r){switch(t.type){case gG:if(t.children.length)break;case pG:case aE:return t.return=t.return||t.value;case eM:return"";case tM:return t.return=t.value+"{"+gf(t.children,r)+"}";case sE:t.value=t.props.join(",")}return ma(n=gf(t.children,r))?t.return=t.value+"{"+n+"}":""}function xG(t){var e=oE(t);return function(n,r,i,o){for(var c="",d=0;d<e;d++)c+=t[d](n,r,i,o)||"";return c}}function PG(t){return function(e){e.root||(e=e.return)&&t(e)}}function MG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var DG=function(e,n,r){for(var i=0,o=0;i=o,o=Oa(),i===38&&o===12&&(n[r]=1),!Fd(o);)$i();return ap(e,Ai)},kG=function(e,n){var r=-1,i=44;do switch(Fd(i)){case 0:i===38&&Oa()===12&&(n[r]=1),e[r]+=DG(Ai-1,n,r);break;case 2:e[r]+=fm(i);break;case 4:if(i===44){e[++r]=Oa()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=By(i)}while(i=$i());return e},NG=function(e,n){return sM(kG(iM(e),n))},CR=new WeakMap,LG=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!CR.get(r))&&!i){CR.set(e,!0);for(var o=[],c=NG(n,o),d=r.props,p=0,g=0;p<c.length;p++)for(var _=0;_<d.length;_++,g++)e.props[g]=o[p]?c[p].replace(/&\f/g,d[_]):d[_]+" "+c[p]}}},UG=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function aM(t,e){switch(vG(t,e)){case 5103:return Yt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Yt+t+Qm+t+Qr+t+t;case 6828:case 4268:return Yt+t+Qr+t+t;case 6165:return Yt+t+Qr+"flex-"+t+t;case 5187:return Yt+t+Qt(t,/(\w+).+(:[^]+)/,Yt+"box-$1$2"+Qr+"flex-$1$2")+t;case 5443:return Yt+t+Qr+"flex-item-"+Qt(t,/flex-|-self/,"")+t;case 4675:return Yt+t+Qr+"flex-line-pack"+Qt(t,/align-content|flex-|-self/,"")+t;case 5548:return Yt+t+Qr+Qt(t,"shrink","negative")+t;case 5292:return Yt+t+Qr+Qt(t,"basis","preferred-size")+t;case 6060:return Yt+"box-"+Qt(t,"-grow","")+Yt+t+Qr+Qt(t,"grow","positive")+t;case 4554:return Yt+Qt(t,/([^-])(transform)/g,"$1"+Yt+"$2")+t;case 6187:return Qt(Qt(Qt(t,/(zoom-|grab)/,Yt+"$1"),/(image-set)/,Yt+"$1"),t,"")+t;case 5495:case 3959:return Qt(t,/(image-set\([^]*)/,Yt+"$1$`$1");case 4968:return Qt(Qt(t,/(.+:)(flex-)?(.*)/,Yt+"box-pack:$3"+Qr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yt+t+t;case 4095:case 3583:case 4068:case 2532:return Qt(t,/(.+)-inline(.+)/,Yt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ma(t)-1-e>6)switch(Dr(t,e+1)){case 109:if(Dr(t,e+4)!==45)break;case 102:return Qt(t,/(.+:)(.+)-([^]+)/,"$1"+Yt+"$2-$3$1"+Qm+(Dr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ib(t,"stretch")?aM(Qt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Dr(t,e+1)!==115)break;case 6444:switch(Dr(t,ma(t)-3-(~Ib(t,"!important")&&10))){case 107:return Qt(t,":",":"+Yt)+t;case 101:return Qt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yt+(Dr(t,14)===45?"inline-":"")+"box$3$1"+Yt+"$2$3$1"+Qr+"$2box$3")+t}break;case 5936:switch(Dr(t,e+11)){case 114:return Yt+t+Qr+Qt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Yt+t+Qr+Qt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Yt+t+Qr+Qt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Yt+t+Qr+t+t}return t}var VG=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case aE:e.return=aM(e.value,e.length);break;case tM:return gf([Kh(e,{value:Qt(e.value,"@","@"+Yt)})],i);case sE:if(e.length)return bG(e.props,function(o){switch(_G(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gf([Kh(e,{props:[Qt(o,/:(read-\w+)/,":"+Qm+"$1")]})],i);case"::placeholder":return gf([Kh(e,{props:[Qt(o,/:(plac\w+)/,":"+Yt+"input-$1")]}),Kh(e,{props:[Qt(o,/:(plac\w+)/,":"+Qm+"$1")]}),Kh(e,{props:[Qt(o,/:(plac\w+)/,Qr+"input-$1")]})],i)}return""})}},jG=[VG],FG=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(k){var D=k.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var i=e.stylisPlugins||jG,o={},c,d=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(k){for(var D=k.getAttribute("data-emotion").split(" "),B=1;B<D.length;B++)o[D[B]]=!0;d.push(k)});var p,g=[LG,UG];{var _,E=[IG,PG(function(k){_.insert(k)})],C=xG(g.concat(i,E)),O=function(D){return gf(RG(D),C)};p=function(D,B,Y,Q){_=Y,O(D?D+"{"+B.styles+"}":B.styles),Q&&(I.inserted[B.name]=!0)}}var I={key:n,sheet:new dG({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:p};return I.sheet.hydrate(d),I},Y0={exports:{}},nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AR;function BG(){if(AR)return nn;AR=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,p=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,_=t?Symbol.for("react.forward_ref"):60112,E=t?Symbol.for("react.suspense"):60113,C=t?Symbol.for("react.suspense_list"):60120,O=t?Symbol.for("react.memo"):60115,I=t?Symbol.for("react.lazy"):60116,k=t?Symbol.for("react.block"):60121,D=t?Symbol.for("react.fundamental"):60117,B=t?Symbol.for("react.responder"):60118,Y=t?Symbol.for("react.scope"):60119;function Q(G){if(typeof G=="object"&&G!==null){var q=G.$$typeof;switch(q){case e:switch(G=G.type,G){case p:case g:case r:case o:case i:case E:return G;default:switch(G=G&&G.$$typeof,G){case d:case _:case I:case O:case c:return G;default:return q}}case n:return q}}}function L(G){return Q(G)===g}return nn.AsyncMode=p,nn.ConcurrentMode=g,nn.ContextConsumer=d,nn.ContextProvider=c,nn.Element=e,nn.ForwardRef=_,nn.Fragment=r,nn.Lazy=I,nn.Memo=O,nn.Portal=n,nn.Profiler=o,nn.StrictMode=i,nn.Suspense=E,nn.isAsyncMode=function(G){return L(G)||Q(G)===p},nn.isConcurrentMode=L,nn.isContextConsumer=function(G){return Q(G)===d},nn.isContextProvider=function(G){return Q(G)===c},nn.isElement=function(G){return typeof G=="object"&&G!==null&&G.$$typeof===e},nn.isForwardRef=function(G){return Q(G)===_},nn.isFragment=function(G){return Q(G)===r},nn.isLazy=function(G){return Q(G)===I},nn.isMemo=function(G){return Q(G)===O},nn.isPortal=function(G){return Q(G)===n},nn.isProfiler=function(G){return Q(G)===o},nn.isStrictMode=function(G){return Q(G)===i},nn.isSuspense=function(G){return Q(G)===E},nn.isValidElementType=function(G){return typeof G=="string"||typeof G=="function"||G===r||G===g||G===o||G===i||G===E||G===C||typeof G=="object"&&G!==null&&(G.$$typeof===I||G.$$typeof===O||G.$$typeof===c||G.$$typeof===d||G.$$typeof===_||G.$$typeof===D||G.$$typeof===B||G.$$typeof===Y||G.$$typeof===k)},nn.typeOf=Q,nn}var RR;function HG(){return RR||(RR=1,Y0.exports=BG()),Y0.exports}var Q0,OR;function zG(){if(OR)return Q0;OR=1;var t=HG(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=i;function c(I){return t.isMemo(I)?i:o[I.$$typeof]||e}var d=Object.defineProperty,p=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,C=Object.prototype;function O(I,k,D){if(typeof k!="string"){if(C){var B=E(k);B&&B!==C&&O(I,B,D)}var Y=p(k);g&&(Y=Y.concat(g(k)));for(var Q=c(I),L=c(k),G=0;G<Y.length;++G){var q=Y[G];if(!n[q]&&!(D&&D[q])&&!(L&&L[q])&&!(Q&&Q[q])){var j=_(k,q);try{d(I,q,j)}catch{}}}}return I}return Q0=O,Q0}zG();var qG=!0;function $G(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var oM=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||qG===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},GG=function(e,n,r){oM(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function WG(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var KG={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},YG=/[A-Z]|^ms/g,QG=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lM=function(e){return e.charCodeAt(1)===45},IR=function(e){return e!=null&&typeof e!="boolean"},X0=MG(function(t){return lM(t)?t:t.replace(YG,"-$&").toLowerCase()}),xR=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(QG,function(r,i,o){return ya={name:i,styles:o,next:ya},i})}return KG[e]!==1&&!lM(e)&&typeof n=="number"&&n!==0?n+"px":n};function Bd(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return ya={name:i.name,styles:i.styles,next:ya},i.name;var o=n;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)ya={name:c.name,styles:c.styles,next:ya},c=c.next;var d=o.styles+";";return d}return XG(t,e,n)}case"function":{if(t!==void 0){var p=ya,g=n(t);return ya=p,Bd(t,e,g)}break}}var _=n;return _}function XG(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Bd(t,e,n[i])+";";else for(var o in n){var c=n[o];if(typeof c!="object"){var d=c;IR(d)&&(r+=X0(o)+":"+xR(o,d)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&e==null)for(var p=0;p<c.length;p++)IR(c[p])&&(r+=X0(o)+":"+xR(o,c[p])+";");else{var g=Bd(t,e,c);switch(o){case"animation":case"animationName":{r+=X0(o)+":"+g+";";break}default:r+=o+"{"+g+"}"}}}return r}var PR=/label:\s*([^\s;{]+)\s*(;|$)/g,ya;function cM(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";ya=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Bd(n,e,o);else{var c=o;i+=c[0]}for(var d=1;d<t.length;d++)if(i+=Bd(n,e,t[d]),r){var p=o;i+=p[d]}PR.lastIndex=0;for(var g="",_;(_=PR.exec(i))!==null;)g+="-"+_[1];var E=WG(i)+g;return{name:E,styles:i,next:ya}}var JG=function(e){return e()},ZG=Uw.useInsertionEffect?Uw.useInsertionEffect:!1,eW=ZG||JG,uM=M.createContext(typeof HTMLElement<"u"?FG({key:"css"}):null);uM.Provider;var tW=function(e){return M.forwardRef(function(n,r){var i=M.useContext(uM);return e(n,i,r)})},nW=M.createContext({}),lE={}.hasOwnProperty,Pb="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rW=function(e,n){var r={};for(var i in n)lE.call(n,i)&&(r[i]=n[i]);return r[Pb]=e,r},iW=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return oM(n,r,i),eW(function(){return GG(n,r,i)}),null},sW=tW(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[Pb],o=[r],c="";typeof t.className=="string"?c=$G(e.registered,o,t.className):t.className!=null&&(c=t.className+" ");var d=cM(o,void 0,M.useContext(nW));c+=e.key+"-"+d.name;var p={};for(var g in t)lE.call(t,g)&&g!=="css"&&g!==Pb&&(p[g]=t[g]);return p.className=c,n&&(p.ref=n),M.createElement(M.Fragment,null,M.createElement(iW,{cache:e,serialized:d,isStringTag:typeof i=="string"}),M.createElement(i,p))}),aW=sW,nt=function(e,n){var r=arguments;if(n==null||!lE.call(n,"css"))return M.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=aW,o[1]=rW(e,n);for(var c=2;c<i;c++)o[c]=r[c];return M.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(nt||(nt={}));function cE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return cM(e)}function oW(){var t=cE.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function lW(t){if(Array.isArray(t))return t}function cW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,c,d=[],p=!0,g=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=o.call(n)).done)&&(d.push(r.value),d.length!==e);p=!0);}catch(_){g=!0,i=_}finally{try{if(!p&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(g)throw i}}return d}}function uW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Er(t,e){return lW(t)||cW(t,e)||ZP(t,e)||uW()}function fW(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ma(t,e){if(t==null)return{};var n,r,i=fW(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hW(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const dW=Math.min,pW=Math.max,Xm=Math.round,Lg=Math.floor,Jm=t=>({x:t,y:t});function gW(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function qy(){return typeof window<"u"}function fM(t){return dM(t)?(t.nodeName||"").toLowerCase():"#document"}function Eo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function hM(t){var e;return(e=(dM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dM(t){return qy()?t instanceof Node||t instanceof Eo(t).Node:!1}function mW(t){return qy()?t instanceof Element||t instanceof Eo(t).Element:!1}function uE(t){return qy()?t instanceof HTMLElement||t instanceof Eo(t).HTMLElement:!1}function MR(t){return!qy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Eo(t).ShadowRoot}const yW=new Set(["inline","contents"]);function pM(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=fE(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!yW.has(i)}function vW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _W=new Set(["html","body","#document"]);function bW(t){return _W.has(fM(t))}function fE(t){return Eo(t).getComputedStyle(t)}function SW(t){if(fM(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MR(t)&&t.host||hM(t);return MR(e)?e.host:e}function gM(t){const e=SW(t);return bW(e)?t.ownerDocument?t.ownerDocument.body:t.body:uE(e)&&pM(e)?e:gM(e)}function Zm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=gM(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),c=Eo(i);if(o){const d=Mb(c);return e.concat(c,c.visualViewport||[],pM(i)?i:[],d&&n?Zm(d):[])}return e.concat(i,Zm(i,[],n))}function Mb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function EW(t){const e=fE(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=uE(t),o=i?t.offsetWidth:n,c=i?t.offsetHeight:r,d=Xm(n)!==o||Xm(r)!==c;return d&&(n=o,r=c),{width:n,height:r,$:d}}function hE(t){return mW(t)?t:t.contextElement}function DR(t){const e=hE(t);if(!uE(e))return Jm(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=EW(e);let c=(o?Xm(n.width):n.width)/r,d=(o?Xm(n.height):n.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const wW=Jm(0);function TW(t){const e=Eo(t);return!vW()||!e.visualViewport?wW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CW(t,e,n){return!1}function kR(t,e,n,r){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),o=hE(t);let c=Jm(1);e&&(c=DR(t));const d=CW()?TW(o):Jm(0);let p=(i.left+d.x)/c.x,g=(i.top+d.y)/c.y,_=i.width/c.x,E=i.height/c.y;if(o){const C=Eo(o),O=r;let I=C,k=Mb(I);for(;k&&r&&O!==I;){const D=DR(k),B=k.getBoundingClientRect(),Y=fE(k),Q=B.left+(k.clientLeft+parseFloat(Y.paddingLeft))*D.x,L=B.top+(k.clientTop+parseFloat(Y.paddingTop))*D.y;p*=D.x,g*=D.y,_*=D.x,E*=D.y,p+=Q,g+=L,I=Eo(k),k=Mb(I)}}return gW({width:_,height:E,x:p,y:g})}function mM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function AW(t,e){let n=null,r;const i=hM(t);function o(){var d;clearTimeout(r),(d=n)==null||d.disconnect(),n=null}function c(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),o();const g=t.getBoundingClientRect(),{left:_,top:E,width:C,height:O}=g;if(d||e(),!C||!O)return;const I=Lg(E),k=Lg(i.clientWidth-(_+C)),D=Lg(i.clientHeight-(E+O)),B=Lg(_),Q={rootMargin:-I+"px "+-k+"px "+-D+"px "+-B+"px",threshold:pW(0,dW(1,p))||1};let L=!0;function G(q){const j=q[0].intersectionRatio;if(j!==p){if(!L)return c();j?c(!1,j):r=setTimeout(()=>{c(!1,1e-7)},1e3)}j===1&&!mM(g,t.getBoundingClientRect())&&c(),L=!1}try{n=new IntersectionObserver(G,{...Q,root:i.ownerDocument})}catch{n=new IntersectionObserver(G,Q)}n.observe(t)}return c(!0),o}function RW(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,g=hE(t),_=i||o?[...g?Zm(g):[],...Zm(e)]:[];_.forEach(B=>{i&&B.addEventListener("scroll",n,{passive:!0}),o&&B.addEventListener("resize",n)});const E=g&&d?AW(g,n):null;let C=-1,O=null;c&&(O=new ResizeObserver(B=>{let[Y]=B;Y&&Y.target===g&&O&&(O.unobserve(e),cancelAnimationFrame(C),C=requestAnimationFrame(()=>{var Q;(Q=O)==null||Q.observe(e)})),n()}),g&&!p&&O.observe(g),O.observe(e));let I,k=p?kR(t):null;p&&D();function D(){const B=kR(t);k&&!mM(k,B)&&n(),k=B,I=requestAnimationFrame(D)}return n(),()=>{var B;_.forEach(Y=>{i&&Y.removeEventListener("scroll",n),o&&Y.removeEventListener("resize",n)}),E==null||E(),(B=O)==null||B.disconnect(),O=null,p&&cancelAnimationFrame(I)}}var Db=M.useLayoutEffect,OW=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ey=function(){};function IW(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function xW(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&t)for(var c in e)e.hasOwnProperty(c)&&e[c]&&o.push("".concat(IW(t,c)));return o.filter(function(d){return d}).map(function(d){return String(d).trim()}).join(" ")}var NR=function(e){return FW(e)?e.filter(Boolean):Yc(e)==="object"&&e!==null?[e]:[]},yM=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ma(e,OW);return et({},n)},Nn=function(e,n,r){var i=e.cx,o=e.getStyles,c=e.getClassNames,d=e.className;return{css:o(n,e),className:i(r??{},c(n,e),d)}};function PW(t,e,n){if(n){var r=n(t,e);if(typeof r=="string")return r}return t}function $y(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function MW(t){return $y(t)?window.innerHeight:t.clientHeight}function vM(t){return $y(t)?window.pageYOffset:t.scrollTop}function ty(t,e){if($y(t)){window.scrollTo(0,e);return}t.scrollTop=e}function DW(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function kW(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function Ug(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ey,i=vM(t),o=e-i,c=10,d=0;function p(){d+=c;var g=kW(d,i,o,n);ty(t,g),d<n?window.requestAnimationFrame(p):r(t)}p()}function LR(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?ty(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&ty(t,Math.max(e.offsetTop-i,0))}function NW(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function UR(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function LW(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var _M=!1,UW={get passive(){return _M=!0}},Vg=typeof window<"u"?window:{};Vg.addEventListener&&Vg.removeEventListener&&(Vg.addEventListener("p",ey,UW),Vg.removeEventListener("p",ey,!1));var VW=_M;function jW(t){return t!=null}function FW(t){return Array.isArray(t)}function jg(t,e,n){return t?e:n}var BW=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(c){var d=Er(c,1),p=d[0];return!r.includes(p)});return o.reduce(function(c,d){var p=Er(d,2),g=p[0],_=p[1];return c[g]=_,c},{})},HW=["children","innerProps"],zW=["children","innerProps"];function qW(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,c=t.isFixedPosition,d=t.controlHeight,p=DW(n),g={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return g;var _=p.getBoundingClientRect(),E=_.height,C=n.getBoundingClientRect(),O=C.bottom,I=C.height,k=C.top,D=n.offsetParent.getBoundingClientRect(),B=D.top,Y=c?window.innerHeight:MW(p),Q=vM(p),L=parseInt(getComputedStyle(n).marginBottom,10),G=parseInt(getComputedStyle(n).marginTop,10),q=B-G,j=Y-k,N=q+Q,U=E-Q-k,$=O-Y+Q+L,T=Q+k-G,ee=160;switch(i){case"auto":case"bottom":if(j>=I)return{placement:"bottom",maxHeight:e};if(U>=I&&!c)return o&&Ug(p,$,ee),{placement:"bottom",maxHeight:e};if(!c&&U>=r||c&&j>=r){o&&Ug(p,$,ee);var W=c?j-L:U-L;return{placement:"bottom",maxHeight:W}}if(i==="auto"||c){var ne=e,Me=c?q:N;return Me>=r&&(ne=Math.min(Me-L-d,e)),{placement:"top",maxHeight:ne}}if(i==="bottom")return o&&ty(p,$),{placement:"bottom",maxHeight:e};break;case"top":if(q>=I)return{placement:"top",maxHeight:e};if(N>=I&&!c)return o&&Ug(p,T,ee),{placement:"top",maxHeight:e};if(!c&&N>=r||c&&q>=r){var ie=e;return(!c&&N>=r||c&&q>=r)&&(ie=c?q-G:N-G),o&&Ug(p,T,ee),{placement:"top",maxHeight:ie}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function $W(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var bM=function(e){return e==="auto"?"bottom":e},GW=function(e,n){var r,i=e.placement,o=e.theme,c=o.borderRadius,d=o.spacing,p=o.colors;return et((r={label:"menu"},lf(r,$W(i),"100%"),lf(r,"position","absolute"),lf(r,"width","100%"),lf(r,"zIndex",1),r),n?{}:{backgroundColor:p.neutral0,borderRadius:c,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:d.menuGutter,marginTop:d.menuGutter})},SM=M.createContext(null),WW=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,c=e.menuPosition,d=e.menuShouldScrollIntoView,p=e.theme,g=M.useContext(SM)||{},_=g.setPortalPlacement,E=M.useRef(null),C=M.useState(i),O=Er(C,2),I=O[0],k=O[1],D=M.useState(null),B=Er(D,2),Y=B[0],Q=B[1],L=p.spacing.controlHeight;return Db(function(){var G=E.current;if(G){var q=c==="fixed",j=d&&!q,N=qW({maxHeight:i,menuEl:G,minHeight:r,placement:o,shouldScroll:j,isFixedPosition:q,controlHeight:L});k(N.maxHeight),Q(N.placement),_==null||_(N.placement)}},[i,o,c,d,r,_,L]),n({ref:E,placerProps:et(et({},e),{},{placement:Y||bM(o),maxHeight:I})})},KW=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return nt("div",ut({},Nn(e,"menu",{menu:!0}),{ref:r},i),n)},YW=KW,QW=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return et({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},XW=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return nt("div",ut({},Nn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),n)},EM=function(e,n){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return et({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},JW=EM,ZW=EM,eK=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,o=Ma(e,HW);return nt("div",ut({},Nn(et(et({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},tK=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,o=Ma(e,zW);return nt("div",ut({},Nn(et(et({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},nK=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},rK=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,c=e.menuPlacement,d=e.menuPosition,p=M.useRef(null),g=M.useRef(null),_=M.useState(bM(c)),E=Er(_,2),C=E[0],O=E[1],I=M.useMemo(function(){return{setPortalPlacement:O}},[]),k=M.useState(null),D=Er(k,2),B=D[0],Y=D[1],Q=M.useCallback(function(){if(i){var j=NW(i),N=d==="fixed"?0:window.pageYOffset,U=j[C]+N;(U!==(B==null?void 0:B.offset)||j.left!==(B==null?void 0:B.rect.left)||j.width!==(B==null?void 0:B.rect.width))&&Y({offset:U,rect:j})}},[i,d,C,B==null?void 0:B.offset,B==null?void 0:B.rect.left,B==null?void 0:B.rect.width]);Db(function(){Q()},[Q]);var L=M.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&p.current&&(g.current=RW(i,p.current,Q,{elementResize:"ResizeObserver"in window}))},[i,Q]);Db(function(){L()},[L]);var G=M.useCallback(function(j){p.current=j,L()},[L]);if(!n&&d!=="fixed"||!B)return null;var q=nt("div",ut({ref:G},Nn(et(et({},e),{},{offset:B.offset,position:d,rect:B.rect}),"menuPortal",{"menu-portal":!0}),o),r);return nt(SM.Provider,{value:I},n?tP.createPortal(q,n):q)},iK=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},sK=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return nt("div",ut({},Nn(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),n)},aK=function(e,n){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,c=e.selectProps.controlShouldRenderValue;return et({alignItems:"center",display:i&&o&&c?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},oK=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return nt("div",ut({},Nn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),n)},lK=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},cK=function(e){var n=e.children,r=e.innerProps;return nt("div",ut({},Nn(e,"indicatorsContainer",{indicators:!0}),r),n)},VR,uK=["size"],fK=["innerProps","isRtl","size"],hK={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},wM=function(e){var n=e.size,r=Ma(e,uK);return nt("svg",ut({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:hK},r))},dE=function(e){return nt(wM,ut({size:20},e),nt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},TM=function(e){return nt(wM,ut({size:20},e),nt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},CM=function(e,n){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,c=i.colors;return et({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?c.neutral60:c.neutral20,padding:o*2,":hover":{color:r?c.neutral80:c.neutral40}})},dK=CM,pK=function(e){var n=e.children,r=e.innerProps;return nt("div",ut({},Nn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||nt(TM,null))},gK=CM,mK=function(e){var n=e.children,r=e.innerProps;return nt("div",ut({},Nn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||nt(dE,null))},yK=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,c=i.colors;return et({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?c.neutral10:c.neutral20,marginBottom:o*2,marginTop:o*2})},vK=function(e){var n=e.innerProps;return nt("span",ut({},n,Nn(e,"indicatorSeparator",{"indicator-separator":!0})))},_K=oW(VR||(VR=hW([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),bK=function(e,n){var r=e.isFocused,i=e.size,o=e.theme,c=o.colors,d=o.spacing.baseUnit;return et({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?c.neutral60:c.neutral20,padding:d*2})},J0=function(e){var n=e.delay,r=e.offset;return nt("span",{css:cE({animation:"".concat(_K," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},SK=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,o=i===void 0?4:i,c=Ma(e,fK);return nt("div",ut({},Nn(et(et({},c),{},{innerProps:n,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),nt(J0,{delay:0,offset:r}),nt(J0,{delay:160,offset:!0}),nt(J0,{delay:320,offset:!r}))},EK=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.theme,c=o.colors,d=o.borderRadius,p=o.spacing;return et({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:p.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?c.neutral5:c.neutral0,borderColor:r?c.neutral10:i?c.primary:c.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(c.primary):void 0,"&:hover":{borderColor:i?c.primary:c.neutral30}})},wK=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,c=e.innerProps,d=e.menuIsOpen;return nt("div",ut({ref:o},Nn(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":d}),c,{"aria-disabled":r||void 0}),n)},TK=wK,CK=["data"],AK=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},RK=function(e){var n=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,c=e.Heading,d=e.headingProps,p=e.innerProps,g=e.label,_=e.theme,E=e.selectProps;return nt("div",ut({},Nn(e,"group",{group:!0}),p),nt(c,ut({},d,{selectProps:E,theme:_,getStyles:i,getClassNames:o,cx:r}),g),nt("div",null,n))},OK=function(e,n){var r=e.theme,i=r.colors,o=r.spacing;return et({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},IK=function(e){var n=yM(e);n.data;var r=Ma(n,CK);return nt("div",ut({},Nn(e,"groupHeading",{"group-heading":!0}),r))},xK=RK,PK=["innerRef","isDisabled","isHidden","inputClassName"],MK=function(e,n){var r=e.isDisabled,i=e.value,o=e.theme,c=o.spacing,d=o.colors;return et(et({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},DK),n?{}:{margin:c.baseUnit/2,paddingBottom:c.baseUnit/2,paddingTop:c.baseUnit/2,color:d.neutral80})},AM={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},DK={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":et({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AM)},kK=function(e){return et({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},AM)},NK=function(e){var n=e.cx,r=e.value,i=yM(e),o=i.innerRef,c=i.isDisabled,d=i.isHidden,p=i.inputClassName,g=Ma(i,PK);return nt("div",ut({},Nn(e,"input",{"input-container":!0}),{"data-value":r||""}),nt("input",ut({className:n({input:!0},p),ref:o,style:kK(d),disabled:c},g)))},LK=NK,UK=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,c=r.colors;return et({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:c.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},VK=function(e,n){var r=e.theme,i=r.borderRadius,o=r.colors,c=e.cropWithEllipsis;return et({overflow:"hidden",textOverflow:c||c===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},jK=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,c=r.colors,d=e.isFocused;return et({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:d?c.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:c.dangerLight,color:c.danger}})},RM=function(e){var n=e.children,r=e.innerProps;return nt("div",r,n)},FK=RM,BK=RM;function HK(t){var e=t.children,n=t.innerProps;return nt("div",ut({role:"button"},n),e||nt(dE,{size:14}))}var zK=function(e){var n=e.children,r=e.components,i=e.data,o=e.innerProps,c=e.isDisabled,d=e.removeProps,p=e.selectProps,g=r.Container,_=r.Label,E=r.Remove;return nt(g,{data:i,innerProps:et(et({},Nn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":c})),o),selectProps:p},nt(_,{data:i,innerProps:et({},Nn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:p},n),nt(E,{data:i,innerProps:et(et({},Nn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},d),selectProps:p}))},qK=zK,$K=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,c=e.theme,d=c.spacing,p=c.colors;return et({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?p.primary:i?p.primary25:"transparent",color:r?p.neutral20:o?p.neutral0:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?p.primary:p.primary50}})},GK=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,c=e.innerRef,d=e.innerProps;return nt("div",ut({},Nn(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:c,"aria-disabled":r},d),n)},WK=GK,KK=function(e,n){var r=e.theme,i=r.spacing,o=r.colors;return et({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},YK=function(e){var n=e.children,r=e.innerProps;return nt("div",ut({},Nn(e,"placeholder",{placeholder:!0}),r),n)},QK=YK,XK=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing,c=i.colors;return et({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?c.neutral40:c.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},JK=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return nt("div",ut({},Nn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},ZK=JK,eY={ClearIndicator:mK,Control:TK,DropdownIndicator:pK,DownChevron:TM,CrossIcon:dE,Group:xK,GroupHeading:IK,IndicatorsContainer:cK,IndicatorSeparator:vK,Input:LK,LoadingIndicator:SK,Menu:YW,MenuList:XW,MenuPortal:rK,LoadingMessage:tK,NoOptionsMessage:eK,MultiValue:qK,MultiValueContainer:FK,MultiValueLabel:BK,MultiValueRemove:HK,Option:WK,Placeholder:QK,SelectContainer:sK,SingleValue:ZK,ValueContainer:oK},tY=function(e){return et(et({},eY),e.components)},jR=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function nY(t,e){return!!(t===e||jR(t)&&jR(e))}function rY(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!nY(t[n],e[n]))return!1;return!0}function iY(t,e){e===void 0&&(e=rY);var n=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var c=t.apply(this,i);return n={lastResult:c,lastArgs:i,lastThis:this},c}return r.clear=function(){n=null},r}var sY={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},aY=function(e){return nt("span",ut({css:sY},e))},FR=aY,oY={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,o=e.context,c=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return c?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,c=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return c?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,o=e.label,c=o===void 0?"":o,d=e.selectValue,p=e.isDisabled,g=e.isSelected,_=e.isAppleDevice,E=function(k,D){return k&&k.length?"".concat(k.indexOf(D)+1," of ").concat(k.length):""};if(n==="value"&&d)return"value ".concat(c," focused, ").concat(E(d,r),".");if(n==="menu"&&_){var C=p?" disabled":"",O="".concat(g?" selected":"").concat(C);return"".concat(c).concat(O,", ").concat(E(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},lY=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,c=e.isFocused,d=e.selectValue,p=e.selectProps,g=e.id,_=e.isAppleDevice,E=p.ariaLiveMessages,C=p.getOptionLabel,O=p.inputValue,I=p.isMulti,k=p.isOptionDisabled,D=p.isSearchable,B=p.menuIsOpen,Y=p.options,Q=p.screenReaderStatus,L=p.tabSelectsValue,G=p.isLoading,q=p["aria-label"],j=p["aria-live"],N=M.useMemo(function(){return et(et({},oY),E||{})},[E]),U=M.useMemo(function(){var Me="";if(n&&N.onChange){var ie=n.option,te=n.options,Ce=n.removedValue,Le=n.removedValues,K=n.value,pe=function(mt){return Array.isArray(mt)?null:mt},me=Ce||ie||pe(K),ve=me?C(me):"",Ne=te||Le||void 0,Be=Ne?Ne.map(C):[],Ue=et({isDisabled:me&&k(me,d),label:ve,labels:Be},n);Me=N.onChange(Ue)}return Me},[n,N,k,d,C]),$=M.useMemo(function(){var Me="",ie=r||i,te=!!(r&&d&&d.includes(r));if(ie&&N.onFocus){var Ce={focused:ie,label:C(ie),isDisabled:k(ie,d),isSelected:te,options:o,context:ie===r?"menu":"value",selectValue:d,isAppleDevice:_};Me=N.onFocus(Ce)}return Me},[r,i,C,k,N,o,d,_]),T=M.useMemo(function(){var Me="";if(B&&Y.length&&!G&&N.onFilter){var ie=Q({count:o.length});Me=N.onFilter({inputValue:O,resultsMessage:ie})}return Me},[o,O,B,N,Y,Q,G]),ee=(n==null?void 0:n.action)==="initial-input-focus",W=M.useMemo(function(){var Me="";if(N.guidance){var ie=i?"value":B?"menu":"input";Me=N.guidance({"aria-label":q,context:ie,isDisabled:r&&k(r,d),isMulti:I,isSearchable:D,tabSelectsValue:L,isInitialFocus:ee})}return Me},[q,r,i,I,k,D,B,N,d,L,ee]),ne=nt(M.Fragment,null,nt("span",{id:"aria-selection"},U),nt("span",{id:"aria-focused"},$),nt("span",{id:"aria-results"},T),nt("span",{id:"aria-guidance"},W));return nt(M.Fragment,null,nt(FR,{id:g},ee&&ne),nt(FR,{"aria-live":j,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},c&&!ee&&ne))},cY=lY,kb=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],uY=new RegExp("["+kb.map(function(t){return t.letters}).join("")+"]","g"),OM={};for(var Z0=0;Z0<kb.length;Z0++)for(var e_=kb[Z0],t_=0;t_<e_.letters.length;t_++)OM[e_.letters[t_]]=e_.base;var IM=function(e){return e.replace(uY,function(n){return OM[n]})},fY=iY(IM),BR=function(e){return e.replace(/^\s+|\s+$/g,"")},hY=function(e){return"".concat(e.label," ").concat(e.value)},dY=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=et({ignoreCase:!0,ignoreAccents:!0,stringify:hY,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,c=i.ignoreAccents,d=i.stringify,p=i.trim,g=i.matchFrom,_=p?BR(r):r,E=p?BR(d(n)):d(n);return o&&(_=_.toLowerCase(),E=E.toLowerCase()),c&&(_=fY(_),E=IM(E)),g==="start"?E.substr(0,_.length)===_:E.indexOf(_)>-1}},pY=["innerRef"];function gY(t){var e=t.innerRef,n=Ma(t,pY),r=BW(n,"onExited","in","enter","exit","appear");return nt("input",ut({ref:e},r,{css:cE({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var mY=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function yY(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,o=t.onTopLeave,c=M.useRef(!1),d=M.useRef(!1),p=M.useRef(0),g=M.useRef(null),_=M.useCallback(function(D,B){if(g.current!==null){var Y=g.current,Q=Y.scrollTop,L=Y.scrollHeight,G=Y.clientHeight,q=g.current,j=B>0,N=L-G-Q,U=!1;N>B&&c.current&&(r&&r(D),c.current=!1),j&&d.current&&(o&&o(D),d.current=!1),j&&B>N?(n&&!c.current&&n(D),q.scrollTop=L,U=!0,c.current=!0):!j&&-B>Q&&(i&&!d.current&&i(D),q.scrollTop=0,U=!0,d.current=!0),U&&mY(D)}},[n,r,i,o]),E=M.useCallback(function(D){_(D,D.deltaY)},[_]),C=M.useCallback(function(D){p.current=D.changedTouches[0].clientY},[]),O=M.useCallback(function(D){var B=p.current-D.changedTouches[0].clientY;_(D,B)},[_]),I=M.useCallback(function(D){if(D){var B=VW?{passive:!1}:!1;D.addEventListener("wheel",E,B),D.addEventListener("touchstart",C,B),D.addEventListener("touchmove",O,B)}},[O,C,E]),k=M.useCallback(function(D){D&&(D.removeEventListener("wheel",E,!1),D.removeEventListener("touchstart",C,!1),D.removeEventListener("touchmove",O,!1))},[O,C,E]);return M.useEffect(function(){if(e){var D=g.current;return I(D),function(){k(D)}}},[e,I,k]),function(D){g.current=D}}var HR=["boxSizing","height","overflow","paddingRight","position"],zR={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function qR(t){t.cancelable&&t.preventDefault()}function $R(t){t.stopPropagation()}function GR(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function WR(){return"ontouchstart"in window||navigator.maxTouchPoints}var KR=!!(typeof window<"u"&&window.document&&window.document.createElement),Yh=0,Yu={capture:!1,passive:!1};function vY(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=M.useRef({}),o=M.useRef(null),c=M.useCallback(function(p){if(KR){var g=document.body,_=g&&g.style;if(r&&HR.forEach(function(I){var k=_&&_[I];i.current[I]=k}),r&&Yh<1){var E=parseInt(i.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,O=window.innerWidth-C+E||0;Object.keys(zR).forEach(function(I){var k=zR[I];_&&(_[I]=k)}),_&&(_.paddingRight="".concat(O,"px"))}g&&WR()&&(g.addEventListener("touchmove",qR,Yu),p&&(p.addEventListener("touchstart",GR,Yu),p.addEventListener("touchmove",$R,Yu))),Yh+=1}},[r]),d=M.useCallback(function(p){if(KR){var g=document.body,_=g&&g.style;Yh=Math.max(Yh-1,0),r&&Yh<1&&HR.forEach(function(E){var C=i.current[E];_&&(_[E]=C)}),g&&WR()&&(g.removeEventListener("touchmove",qR,Yu),p&&(p.removeEventListener("touchstart",GR,Yu),p.removeEventListener("touchmove",$R,Yu)))}},[r]);return M.useEffect(function(){if(e){var p=o.current;return c(p),function(){d(p)}}},[e,c,d]),function(p){o.current=p}}var _Y=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},bY={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function SY(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,o=t.onBottomArrive,c=t.onBottomLeave,d=t.onTopArrive,p=t.onTopLeave,g=yY({isEnabled:i,onBottomArrive:o,onBottomLeave:c,onTopArrive:d,onTopLeave:p}),_=vY({isEnabled:n}),E=function(O){g(O),_(O)};return nt(M.Fragment,null,n&&nt("div",{onClick:_Y,css:bY}),e(E))}var EY={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},wY=function(e){var n=e.name,r=e.onFocus;return nt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:EY,value:"",onChange:function(){}})},TY=wY;function pE(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function CY(){return pE(/^iPhone/i)}function xM(){return pE(/^Mac/i)}function AY(){return pE(/^iPad/i)||xM()&&navigator.maxTouchPoints>1}function RY(){return CY()||AY()}function OY(){return xM()||RY()}var IY=function(e){return e.label},xY=function(e){return e.label},PY=function(e){return e.value},MY=function(e){return!!e.isDisabled},DY={clearIndicator:gK,container:iK,control:EK,dropdownIndicator:dK,group:AK,groupHeading:OK,indicatorsContainer:lK,indicatorSeparator:yK,input:MK,loadingIndicator:bK,loadingMessage:ZW,menu:GW,menuList:QW,menuPortal:nK,multiValue:UK,multiValueLabel:VK,multiValueRemove:jK,noOptionsMessage:JW,option:$K,placeholder:KK,singleValue:XK,valueContainer:aK},kY={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},NY=4,PM=4,LY=38,UY=PM*2,VY={baseUnit:PM,controlHeight:LY,menuGutter:UY},n_={borderRadius:NY,colors:kY,spacing:VY},jY={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:UR(),captureMenuScroll:!UR(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:dY(),formatGroupLabel:IY,getOptionLabel:xY,getOptionValue:PY,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:MY,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!LW(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function YR(t,e,n,r){var i=kM(t,e,n),o=NM(t,e,n),c=DM(t,e),d=ny(t,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:c,value:d,index:r}}function dm(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(c,d){return YR(t,c,e,d)}).filter(function(c){return XR(t,c)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=YR(t,n,e,r);return XR(t,o)?o:void 0}).filter(jW)}function MM(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,iE(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function QR(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,iE(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function FY(t,e){return MM(dm(t,e))}function XR(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,o=e.isSelected,c=e.label,d=e.value;return(!UM(t)||!o)&&LM(t,{label:c,value:d,data:i},r)}function BY(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var o=e.indexOf(n);if(o>-1)return n;if(i<e.length)return e[i]}return null}function HY(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var r_=function(e,n){var r,i=(r=e.find(function(o){return o.data===n}))===null||r===void 0?void 0:r.id;return i||null},DM=function(e,n){return e.getOptionLabel(n)},ny=function(e,n){return e.getOptionValue(n)};function kM(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function NM(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=ny(t,e);return n.some(function(i){return ny(t,i)===r})}function LM(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var UM=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},zY=1,VM=function(t){iG(n,t);var e=oG(n);function n(r){var i;if(nG(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(p){i.controlRef=p},i.focusedOptionRef=null,i.getFocusedOptionRef=function(p){i.focusedOptionRef=p},i.menuListRef=null,i.getMenuListRef=function(p){i.menuListRef=p},i.inputRef=null,i.getInputRef=function(p){i.inputRef=p},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(p,g){var _=i.props,E=_.onChange,C=_.name;g.name=C,i.ariaOnChange(p,g),E(p,g)},i.setValue=function(p,g,_){var E=i.props,C=E.closeMenuOnSelect,O=E.isMulti,I=E.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:I}),C&&(i.setState({inputIsHiddenAfterUpdate:!O}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(p,{action:g,option:_})},i.selectOption=function(p){var g=i.props,_=g.blurInputOnSelect,E=g.isMulti,C=g.name,O=i.state.selectValue,I=E&&i.isOptionSelected(p,O),k=i.isOptionDisabled(p,O);if(I){var D=i.getOptionValue(p);i.setValue(O.filter(function(B){return i.getOptionValue(B)!==D}),"deselect-option",p)}else if(!k)E?i.setValue([].concat(iE(O),[p]),"select-option",p):i.setValue(p,"select-option");else{i.ariaOnChange(p,{action:"select-option",option:p,name:C});return}_&&i.blurInput()},i.removeValue=function(p){var g=i.props.isMulti,_=i.state.selectValue,E=i.getOptionValue(p),C=_.filter(function(I){return i.getOptionValue(I)!==E}),O=jg(g,C,C[0]||null);i.onChange(O,{action:"remove-value",removedValue:p}),i.focusInput()},i.clearValue=function(){var p=i.state.selectValue;i.onChange(jg(i.props.isMulti,[],null),{action:"clear",removedValues:p})},i.popValue=function(){var p=i.props.isMulti,g=i.state.selectValue,_=g[g.length-1],E=g.slice(0,g.length-1),C=jg(p,E,E[0]||null);_&&i.onChange(C,{action:"pop-value",removedValue:_})},i.getFocusedOptionId=function(p){return r_(i.state.focusableOptionsWithIds,p)},i.getFocusableOptionsWithIds=function(){return QR(dm(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var p=arguments.length,g=new Array(p),_=0;_<p;_++)g[_]=arguments[_];return xW.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(p){return DM(i.props,p)},i.getOptionValue=function(p){return ny(i.props,p)},i.getStyles=function(p,g){var _=i.props.unstyled,E=DY[p](g,_);E.boxSizing="border-box";var C=i.props.styles[p];return C?C(E,g):E},i.getClassNames=function(p,g){var _,E;return(_=(E=i.props.classNames)[p])===null||_===void 0?void 0:_.call(E,g)},i.getElementId=function(p){return"".concat(i.state.instancePrefix,"-").concat(p)},i.getComponents=function(){return tY(i.props)},i.buildCategorizedOptions=function(){return dm(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return MM(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(p,g){i.setState({ariaSelection:et({value:p},g)})},i.onMenuMouseDown=function(p){p.button===0&&(p.stopPropagation(),p.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(p){i.blockOptionHover=!1},i.onControlMouseDown=function(p){if(!p.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&p.preventDefault()}},i.onDropdownIndicatorMouseDown=function(p){if(!(p&&p.type==="mousedown"&&p.button!==0)&&!i.props.isDisabled){var g=i.props,_=g.isMulti,E=g.menuIsOpen;i.focusInput(),E?(i.setState({inputIsHiddenAfterUpdate:!_}),i.onMenuClose()):i.openMenu("first"),p.preventDefault()}},i.onClearIndicatorMouseDown=function(p){p&&p.type==="mousedown"&&p.button!==0||(i.clearValue(),p.preventDefault(),i.openAfterFocus=!1,p.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(p){typeof i.props.closeMenuOnScroll=="boolean"?p.target instanceof HTMLElement&&$y(p.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(p)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(p){var g=p.touches,_=g&&g.item(0);_&&(i.initialTouchX=_.clientX,i.initialTouchY=_.clientY,i.userIsDragging=!1)},i.onTouchMove=function(p){var g=p.touches,_=g&&g.item(0);if(_){var E=Math.abs(_.clientX-i.initialTouchX),C=Math.abs(_.clientY-i.initialTouchY),O=5;i.userIsDragging=E>O||C>O}},i.onTouchEnd=function(p){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(p.target)&&i.menuListRef&&!i.menuListRef.contains(p.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(p){i.userIsDragging||i.onControlMouseDown(p)},i.onClearIndicatorTouchEnd=function(p){i.userIsDragging||i.onClearIndicatorMouseDown(p)},i.onDropdownIndicatorTouchEnd=function(p){i.userIsDragging||i.onDropdownIndicatorMouseDown(p)},i.handleInputChange=function(p){var g=i.props.inputValue,_=p.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(_,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(p){i.props.onFocus&&i.props.onFocus(p),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(p){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(p),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(p){if(!(i.blockOptionHover||i.state.focusedOption===p)){var g=i.getFocusableOptions(),_=g.indexOf(p);i.setState({focusedOption:p,focusedOptionId:_>-1?i.getFocusedOptionId(p):null})}},i.shouldHideSelectedOptions=function(){return UM(i.props)},i.onValueInputFocus=function(p){p.preventDefault(),p.stopPropagation(),i.focus()},i.onKeyDown=function(p){var g=i.props,_=g.isMulti,E=g.backspaceRemovesValue,C=g.escapeClearsValue,O=g.inputValue,I=g.isClearable,k=g.isDisabled,D=g.menuIsOpen,B=g.onKeyDown,Y=g.tabSelectsValue,Q=g.openMenuOnFocus,L=i.state,G=L.focusedOption,q=L.focusedValue,j=L.selectValue;if(!k&&!(typeof B=="function"&&(B(p),p.defaultPrevented))){switch(i.blockOptionHover=!0,p.key){case"ArrowLeft":if(!_||O)return;i.focusValue("previous");break;case"ArrowRight":if(!_||O)return;i.focusValue("next");break;case"Delete":case"Backspace":if(O)return;if(q)i.removeValue(q);else{if(!E)return;_?i.popValue():I&&i.clearValue()}break;case"Tab":if(i.isComposing||p.shiftKey||!D||!Y||!G||Q&&i.isOptionSelected(G,j))return;i.selectOption(G);break;case"Enter":if(p.keyCode===229)break;if(D){if(!G||i.isComposing)return;i.selectOption(G);break}return;case"Escape":D?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:O}),i.onMenuClose()):I&&C&&i.clearValue();break;case" ":if(O)return;if(!D){i.openMenu("first");break}if(!G)return;i.selectOption(G);break;case"ArrowUp":D?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":D?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!D)return;i.focusOption("pageup");break;case"PageDown":if(!D)return;i.focusOption("pagedown");break;case"Home":if(!D)return;i.focusOption("first");break;case"End":if(!D)return;i.focusOption("last");break;default:return}p.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++zY),i.state.selectValue=NR(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),c=i.buildFocusableOptions(),d=c.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=c[d],i.state.focusedOptionId=r_(o,c[d])}return i}return rG(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&LR(this.menuListRef,this.focusedOptionRef),OY()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,d=o.menuIsOpen,p=this.state.isFocused;(p&&!c&&i.isDisabled||p&&d&&!i.menuIsOpen)&&this.focusInput(),p&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!p&&!c&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(LR(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,d=c.selectValue,p=c.isFocused,g=this.buildFocusableOptions(),_=i==="first"?0:g.length-1;if(!this.props.isMulti){var E=g.indexOf(d[0]);E>-1&&(_=E)}this.scrollToFocusedOptionOnUpdate=!(p&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[_],focusedOptionId:this.getFocusedOptionId(g[_])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,d=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var p=c.indexOf(d);d||(p=-1);var g=c.length-1,_=-1;if(c.length){switch(i){case"previous":p===0?_=0:p===-1?_=g:_=p-1;break;case"next":p>-1&&p<g&&(_=p+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:c[_]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,d=this.getFocusableOptions();if(d.length){var p=0,g=d.indexOf(c);c||(g=-1),i==="up"?p=g>0?g-1:d.length-1:i==="down"?p=(g+1)%d.length:i==="pageup"?(p=g-o,p<0&&(p=0)):i==="pagedown"?(p=g+o,p>d.length-1&&(p=d.length-1)):i==="last"&&(p=d.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:d[p],focusedValue:null,focusedOptionId:this.getFocusedOptionId(d[p])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(n_):et(et({},n_),this.props.theme):n_}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,d=this.getClassNames,p=this.getValue,g=this.selectOption,_=this.setValue,E=this.props,C=E.isMulti,O=E.isRtl,I=E.options,k=this.hasValue();return{clearValue:i,cx:o,getStyles:c,getClassNames:d,getValue:p,hasValue:k,isMulti:C,isRtl:O,options:I,selectOption:g,selectProps:E,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return kM(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return NM(this.props,i,o)}},{key:"filterOption",value:function(i,o){return LM(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:d})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,d=i.inputId,p=i.inputValue,g=i.tabIndex,_=i.form,E=i.menuIsOpen,C=i.required,O=this.getComponents(),I=O.Input,k=this.state,D=k.inputIsHidden,B=k.ariaSelection,Y=this.commonProps,Q=d||this.getElementId("input"),L=et(et(et({"aria-autocomplete":"list","aria-expanded":E,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":C,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},E&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(B==null?void 0:B.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?M.createElement(I,ut({},Y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Q,innerRef:this.getInputRef,isDisabled:o,isHidden:D,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:_,type:"text",value:p},L)):M.createElement(gY,ut({id:Q,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ey,onFocus:this.onInputFocus,disabled:o,tabIndex:g,inputMode:"none",form:_,value:""},L))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,d=o.MultiValueContainer,p=o.MultiValueLabel,g=o.MultiValueRemove,_=o.SingleValue,E=o.Placeholder,C=this.commonProps,O=this.props,I=O.controlShouldRenderValue,k=O.isDisabled,D=O.isMulti,B=O.inputValue,Y=O.placeholder,Q=this.state,L=Q.selectValue,G=Q.focusedValue,q=Q.isFocused;if(!this.hasValue()||!I)return B?null:M.createElement(E,ut({},C,{key:"placeholder",isDisabled:k,isFocused:q,innerProps:{id:this.getElementId("placeholder")}}),Y);if(D)return L.map(function(N,U){var $=N===G,T="".concat(i.getOptionLabel(N),"-").concat(i.getOptionValue(N));return M.createElement(c,ut({},C,{components:{Container:d,Label:p,Remove:g},isFocused:$,isDisabled:k,key:T,index:U,removeProps:{onClick:function(){return i.removeValue(N)},onTouchEnd:function(){return i.removeValue(N)},onMouseDown:function(W){W.preventDefault()}},data:N}),i.formatOptionLabel(N,"value"))});if(B)return null;var j=L[0];return M.createElement(_,ut({},C,{data:j,isDisabled:k}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,c=this.commonProps,d=this.props,p=d.isDisabled,g=d.isLoading,_=this.state.isFocused;if(!this.isClearable()||!o||p||!this.hasValue()||g)return null;var E={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(o,ut({},c,{innerProps:E,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,c=this.commonProps,d=this.props,p=d.isDisabled,g=d.isLoading,_=this.state.isFocused;if(!o||!g)return null;var E={"aria-hidden":"true"};return M.createElement(o,ut({},c,{innerProps:E,isDisabled:p,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var d=this.commonProps,p=this.props.isDisabled,g=this.state.isFocused;return M.createElement(c,ut({},d,{isDisabled:p,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var c=this.commonProps,d=this.props.isDisabled,p=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(o,ut({},c,{innerProps:g,isDisabled:d,isFocused:p}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,d=o.GroupHeading,p=o.Menu,g=o.MenuList,_=o.MenuPortal,E=o.LoadingMessage,C=o.NoOptionsMessage,O=o.Option,I=this.commonProps,k=this.state.focusedOption,D=this.props,B=D.captureMenuScroll,Y=D.inputValue,Q=D.isLoading,L=D.loadingMessage,G=D.minMenuHeight,q=D.maxMenuHeight,j=D.menuIsOpen,N=D.menuPlacement,U=D.menuPosition,$=D.menuPortalTarget,T=D.menuShouldBlockScroll,ee=D.menuShouldScrollIntoView,W=D.noOptionsMessage,ne=D.onMenuScrollToTop,Me=D.onMenuScrollToBottom;if(!j)return null;var ie=function(ve,Ne){var Be=ve.type,Ue=ve.data,It=ve.isDisabled,mt=ve.isSelected,gn=ve.label,Ft=ve.value,mn=k===Ue,On=It?void 0:function(){return i.onOptionHover(Ue)},Ur=It?void 0:function(){return i.selectOption(Ue)},wn="".concat(i.getElementId("option"),"-").concat(Ne),Vr={id:wn,onClick:Ur,onMouseMove:On,onMouseOver:On,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:mt};return M.createElement(O,ut({},I,{innerProps:Vr,data:Ue,isDisabled:It,isSelected:mt,key:wn,label:gn,type:Be,value:Ft,isFocused:mn,innerRef:mn?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(ve.data,"menu"))},te;if(this.hasOptions())te=this.getCategorizedOptions().map(function(me){if(me.type==="group"){var ve=me.data,Ne=me.options,Be=me.index,Ue="".concat(i.getElementId("group"),"-").concat(Be),It="".concat(Ue,"-heading");return M.createElement(c,ut({},I,{key:Ue,data:ve,options:Ne,Heading:d,headingProps:{id:It,data:me.data},label:i.formatGroupLabel(me.data)}),me.options.map(function(mt){return ie(mt,"".concat(Be,"-").concat(mt.index))}))}else if(me.type==="option")return ie(me,"".concat(me.index))});else if(Q){var Ce=L({inputValue:Y});if(Ce===null)return null;te=M.createElement(E,I,Ce)}else{var Le=W({inputValue:Y});if(Le===null)return null;te=M.createElement(C,I,Le)}var K={minMenuHeight:G,maxMenuHeight:q,menuPlacement:N,menuPosition:U,menuShouldScrollIntoView:ee},pe=M.createElement(WW,ut({},I,K),function(me){var ve=me.ref,Ne=me.placerProps,Be=Ne.placement,Ue=Ne.maxHeight;return M.createElement(p,ut({},I,K,{innerRef:ve,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:Q,placement:Be}),M.createElement(SY,{captureEnabled:B,onTopArrive:ne,onBottomArrive:Me,lockEnabled:T},function(It){return M.createElement(g,ut({},I,{innerRef:function(gn){i.getMenuListRef(gn),It(gn)},innerProps:{role:"listbox","aria-multiselectable":I.isMulti,id:i.getElementId("listbox")},isLoading:Q,maxHeight:Ue,focusedOption:k}),te)}))});return $||U==="fixed"?M.createElement(_,ut({},I,{appendTo:$,controlElement:this.controlRef,menuPlacement:N,menuPosition:U}),pe):pe}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,d=o.isDisabled,p=o.isMulti,g=o.name,_=o.required,E=this.state.selectValue;if(_&&!this.hasValue()&&!d)return M.createElement(TY,{name:g,onFocus:this.onValueInputFocus});if(!(!g||d))if(p)if(c){var C=E.map(function(k){return i.getOptionValue(k)}).join(c);return M.createElement("input",{name:g,type:"hidden",value:C})}else{var O=E.length>0?E.map(function(k,D){return M.createElement("input",{key:"i-".concat(D),name:g,type:"hidden",value:i.getOptionValue(k)})}):M.createElement("input",{name:g,type:"hidden",value:""});return M.createElement("div",null,O)}else{var I=E[0]?this.getOptionValue(E[0]):"";return M.createElement("input",{name:g,type:"hidden",value:I})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,d=o.focusedOption,p=o.focusedValue,g=o.isFocused,_=o.selectValue,E=this.getFocusableOptions();return M.createElement(cY,ut({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:d,focusedValue:p,isFocused:g,selectValue:_,focusableOptions:E,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,d=i.SelectContainer,p=i.ValueContainer,g=this.props,_=g.className,E=g.id,C=g.isDisabled,O=g.menuIsOpen,I=this.state.isFocused,k=this.commonProps=this.getCommonProps();return M.createElement(d,ut({},k,{className:_,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:C,isFocused:I}),this.renderLiveRegion(),M.createElement(o,ut({},k,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:C,isFocused:I,menuIsOpen:O}),M.createElement(p,ut({},k,{isDisabled:C}),this.renderPlaceholderOrValue(),this.renderInput()),M.createElement(c,ut({},k,{isDisabled:C}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,d=o.clearFocusValueOnUpdate,p=o.inputIsHiddenAfterUpdate,g=o.ariaSelection,_=o.isFocused,E=o.prevWasFocused,C=o.instancePrefix,O=i.options,I=i.value,k=i.menuIsOpen,D=i.inputValue,B=i.isMulti,Y=NR(I),Q={};if(c&&(I!==c.value||O!==c.options||k!==c.menuIsOpen||D!==c.inputValue)){var L=k?FY(i,Y):[],G=k?QR(dm(i,Y),"".concat(C,"-option")):[],q=d?BY(o,Y):null,j=HY(o,L),N=r_(G,j);Q={selectValue:Y,focusedOption:j,focusedOptionId:N,focusableOptionsWithIds:G,focusedValue:q,clearFocusValueOnUpdate:!1}}var U=p!=null&&i!==c?{inputIsHidden:p,inputIsHiddenAfterUpdate:void 0}:{},$=g,T=_&&E;return _&&!T&&($={value:jg(B,Y,Y[0]||null),options:Y,action:"initial-input-focus"},T=!E),(g==null?void 0:g.action)==="initial-input-focus"&&($=null),et(et(et({},Q),U),{},{prevProps:i,ariaSelection:$,prevWasFocused:T})}}]),n}(M.Component);VM.defaultProps=jY;var qY=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function $Y(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,o=t.defaultValue,c=o===void 0?null:o,d=t.inputValue,p=t.menuIsOpen,g=t.onChange,_=t.onInputChange,E=t.onMenuClose,C=t.onMenuOpen,O=t.value,I=Ma(t,qY),k=M.useState(d!==void 0?d:n),D=Er(k,2),B=D[0],Y=D[1],Q=M.useState(p!==void 0?p:i),L=Er(Q,2),G=L[0],q=L[1],j=M.useState(O!==void 0?O:c),N=Er(j,2),U=N[0],$=N[1],T=M.useCallback(function(Ce,Le){typeof g=="function"&&g(Ce,Le),$(Ce)},[g]),ee=M.useCallback(function(Ce,Le){var K;typeof _=="function"&&(K=_(Ce,Le)),Y(K!==void 0?K:Ce)},[_]),W=M.useCallback(function(){typeof C=="function"&&C(),q(!0)},[C]),ne=M.useCallback(function(){typeof E=="function"&&E(),q(!1)},[E]),Me=d!==void 0?d:B,ie=p!==void 0?p:G,te=O!==void 0?O:U;return et(et({},I),{},{inputValue:Me,menuIsOpen:ie,onChange:T,onInputChange:ee,onMenuClose:ne,onMenuOpen:W,value:te})}var GY=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function WY(t){var e=t.defaultOptions,n=e===void 0?!1:e,r=t.cacheOptions,i=r===void 0?!1:r,o=t.loadOptions;t.options;var c=t.isLoading,d=c===void 0?!1:c,p=t.onInputChange,g=t.filterOption,_=g===void 0?null:g,E=Ma(t,GY),C=E.inputValue,O=M.useRef(void 0),I=M.useRef(!1),k=M.useState(Array.isArray(n)?n:void 0),D=Er(k,2),B=D[0],Y=D[1],Q=M.useState(typeof C<"u"?C:""),L=Er(Q,2),G=L[0],q=L[1],j=M.useState(n===!0),N=Er(j,2),U=N[0],$=N[1],T=M.useState(void 0),ee=Er(T,2),W=ee[0],ne=ee[1],Me=M.useState([]),ie=Er(Me,2),te=ie[0],Ce=ie[1],Le=M.useState(!1),K=Er(Le,2),pe=K[0],me=K[1],ve=M.useState({}),Ne=Er(ve,2),Be=Ne[0],Ue=Ne[1],It=M.useState(void 0),mt=Er(It,2),gn=mt[0],Ft=mt[1],mn=M.useState(void 0),On=Er(mn,2),Ur=On[0],wn=On[1];i!==Ur&&(Ue({}),wn(i)),n!==gn&&(Y(Array.isArray(n)?n:void 0),Ft(n)),M.useEffect(function(){return I.current=!0,function(){I.current=!1}},[]);var Vr=M.useCallback(function(wr,tr){if(!o)return tr();var fn=o(wr,tr);fn&&typeof fn.then=="function"&&fn.then(tr,function(){return tr()})},[o]);M.useEffect(function(){n===!0&&Vr(G,function(wr){I.current&&(Y(wr||[]),$(!!O.current))})},[]);var ys=M.useCallback(function(wr,tr){var fn=PW(wr,tr,p);if(!fn){O.current=void 0,q(""),ne(""),Ce([]),$(!1),me(!1);return}if(i&&Be[fn])q(fn),ne(fn),Ce(Be[fn]),$(!1),me(!1);else{var Ct=O.current={};q(fn),$(!0),me(!W),Vr(fn,function(pr){I&&Ct===O.current&&(O.current=void 0,$(!1),ne(fn),Ce(pr||[]),me(!1),Ue(pr?et(et({},Be),{},lf({},fn,pr)):Be))})}},[i,Vr,W,Be,p]),Un=pe?[]:G&&W?te:B||[];return et(et({},E),{},{options:Un,isLoading:U||d,onInputChange:ys,filterOption:_})}var KY=M.forwardRef(function(t,e){var n=WY(t),r=$Y(n);return M.createElement(VM,ut({ref:e},r))}),YY=KY;const QY="_UsersAutocomplete_1xkee_1",XY={UsersAutocomplete:QY},JY=t=>{const{onChangeSelectedUsers:e,selectedOptions:n}=t,r=dr(Nr.selectors.selectPublicUsers),i=M.useCallback(async(o,c)=>{const d=r.filter(p=>`${p.username}#${p.tag}`.toLowerCase().includes(o.toLowerCase())).map(p=>({value:p.uid,label:`${p.username}#${p.tag}`}));c(d)},[r]);return F.jsx("div",{className:XY.UsersAutocomplete,children:F.jsx(YY,{loadOptions:i,isMulti:!0,cacheOptions:!0,defaultOptions:!0,onChange:e,defaultValue:n})})},ZY=M.memo(JY),eQ="_HeaderBar_jksty_1",tQ="_Header_jksty_1",nQ="_MenuOptionsExtraSmall_jksty_20",rQ="_MenuOptionsSmallOrBigger_jksty_29",iQ="_FlexVerticalCenterWithGap_jksty_41",sQ="_MenuOptionsContainer_jksty_47",aQ="_DivisorTop_jksty_58",oQ="_ContentContainer_jksty_69",ao={HeaderBar:eQ,Header:tQ,MenuOptionsExtraSmall:nQ,MenuOptionsSmallOrBigger:rQ,FlexVerticalCenterWithGap:iQ,MenuOptionsContainer:sQ,DivisorTop:aQ,ContentContainer:oQ},lQ=()=>{const{t}=Ln(),e=qs(),n=dr(Nr.selectors.isLoggedIn),r=dr(Nr.selectors.selectLoggedUser),[i,o]=M.useState(!1),c=M.useCallback(d=>{d.preventDefault(),e(Nr.actions.signOutUser())},[e]);return F.jsxs("div",{className:ao.HeaderBar,children:[F.jsxs("div",{className:ao.Header,children:[F.jsx(zq,{}),F.jsx("h1",{children:"Melo Chart"}),n?F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:ao.MenuOptionsSmallOrBigger,children:[F.jsx("ul",{children:F.jsx("li",{children:F.jsx(Tb,{to:{pathname:""},children:t("My songs")})})}),F.jsxs("div",{className:ao.FlexVerticalCenterWithGap,children:[F.jsx(Cb,{username:r.username,tag:r.tag}),F.jsx(_n,{category:kn.DANGER,textOnly:!0,onClick:c,children:t("Sign Out")})]})]}),F.jsx("div",{className:ao.MenuOptionsExtraSmall,children:F.jsx(_n,{onClick:()=>o(d=>!d),children:F.jsx(xq,{})})})]}):F.jsx(F.Fragment,{})]}),n&&i?F.jsxs("div",{className:ao.MenuOptionsContainer,children:[F.jsxs("ul",{children:[F.jsx("li",{children:F.jsx(Tb,{to:{pathname:""},children:t("My songs")})}),F.jsx("li",{className:ao.DivisorTop,children:F.jsx(_n,{category:kn.DANGER,textOnly:!0,onClick:c,children:t("Sign Out")})})]}),F.jsx("div",{className:ao.DivisorTop,children:F.jsx(Cb,{username:r.username,tag:r.tag})})]}):F.jsx(F.Fragment,{})]})},cQ=t=>{const{children:e}=t;return F.jsx("div",{className:ao.ContentContainer,children:e})},uQ=()=>F.jsxs(F.Fragment,{children:[F.jsx(nH,{}),F.jsx(lQ,{}),F.jsx(cQ,{children:F.jsx(i6,{})})]}),fQ=M.memo(uQ),hQ="_Chart_m1uz3_1",dQ={Chart:hQ},pQ=()=>{const t=M.useRef(null),e=M.useRef(null),n=M.useRef(!1),[r]=rS(),i=r.get("id")||null,o=dr(ur.selectors.selectSongById(i)),[c,d]=M.useState([]),p=M.useCallback(O=>{var I;(I=t.current)==null||I.addWordsAsNotes(O)},[]),g=M.useCallback(()=>{var D;if(!o)return!1;const O=JSON.stringify(o.notes),I=((D=t.current)==null?void 0:D.getNotes())||[],k=JSON.stringify(I);return O!=k},[o,t]),_=QU(g),E=ms(),{publish:C}=wo(Ao,O=>{if(E.connection.id!=O.connectionId){const{name:I,data:k}=O;if(k.id!=i)return;if(I==Qe.UPDATE_CHART_REQUEST_CHANGES){C(Qe.UPDATE_CHART_CHANGES_LOG,{id:i,changesLog:c});return}if(I==Qe.UPDATE_CHART_CHANGES_LOG){d(k.changesLog);return}}});return M.useEffect(()=>{n.current||(C(Qe.UPDATE_CHART_REQUEST_CHANGES,{id:i}),n.current=!0)},[C,i]),F.jsxs("div",{className:dQ.Chart,children:[o?F.jsx(H$,{notesFnsRef:t,generateChartDialogFnsRef:e,song:o,setChangesLog:d}):F.jsx(II,{to:"/"}),F.jsx(j7,{show:_.state==="blocked",onConfirm:()=>_.proceed(),onCancel:()=>_.reset()}),F.jsx(D7,{generateChartDialogFnsRef:e,onAddWordsAsNotes:p,songId:o==null?void 0:o.id,setChangesLog:d})]})},gQ=M.memo(pQ),mQ="_Home_1ni6n_1",yQ={Home:mQ},vQ=()=>F.jsxs("div",{className:yQ.Home,children:[F.jsx(R7,{}),F.jsx(X$,{})]}),_Q=M.memo(vQ),bQ="_LoginContainer_162n2_1",SQ="_Login_162n2_1",JR={LoginContainer:bQ,Login:SQ},EQ=()=>{const{t}=Ln(),e=qs(),n=M.useRef(null),[r,i]=M.useState(!0),[o,c]=M.useState(""),[d,p]=M.useState(""),[g,_]=M.useState(""),E=M.useCallback(()=>{const I=n.current===document.activeElement;return o||I?o:d.split("@")[0]||""},[d,o]),C=M.useCallback(I=>{I.preventDefault(),e(Nr.actions.signInUser({email:d,password:g}))},[e,d,g]),O=M.useCallback(I=>{I.preventDefault(),e(Nr.actions.signUpUser({username:E(),email:d,password:g}))},[e,d,E,g]);return F.jsxs("div",{className:JR.LoginContainer,children:[F.jsxs("form",{className:JR.Login,onSubmit:r?C:O,children:[F.jsx("h2",{children:t(r?"Login":"Create an Account")}),F.jsx(Ra,{label:t("Email"),field:F.jsx(ho,{type:"text",name:"email",value:d,onChange:I=>p(I.target.value)})}),F.jsx(Ra,{label:t("Password"),field:F.jsx(ho,{type:"password",name:"password",value:g,onChange:I=>_(I.target.value)})}),r?F.jsx(F.Fragment,{}):F.jsx(Ra,{label:t("Username"),field:F.jsx(ho,{ref:n,type:"text",name:"username",value:E(),onChange:I=>c(I.target.value)})}),F.jsx(_n,{category:kn.SUCCESS,icon:r?F.jsx(Gq,{}):F.jsx(Kq,{}),children:t(r?"Sign in":"Sign up")})]}),r?F.jsx(_n,{category:kn.PRIMARY,textOnly:!0,onClick:()=>i(!1),children:t("Don't have an account? Sign up")}):F.jsx(_n,{category:kn.PRIMARY,textOnly:!0,onClick:()=>i(!0),children:t("Go back")})]})},wQ=M.memo(EQ),TQ=t=>{const{children:e}=t,n=kf(),[r]=rS(),i=dr(Nr.selectors.isLoggedIn);return M.useEffect(()=>{if(i){const o=r.get("url")||"/";n(o,{replace:!0})}},[i,n,r]),e},ZR=t=>{const{children:e}=t,n=kf(),r=xa(),[i]=rS(),o=dr(Nr.selectors.isLoggedIn),c=dr(Nr.selectors.isLoginVerificationComplete);return M.useEffect(()=>{if(!o){const d=r.pathname+r.search,p=c?"":`?url=${d}`;n(`/login${p}`,{replace:!0})}if(o){const d=i.get("url")||null;d&&n(d,{replace:!0})}},[o,c,r.pathname,r.search,n,i]),e},CQ=x6([{path:"/",element:F.jsx(fQ,{}),children:[{index:!0,element:F.jsx(ZR,{children:F.jsx(_Q,{})})},{path:"login",element:F.jsx(TQ,{children:F.jsx(wQ,{})})},{path:"chart",element:F.jsx(ZR,{children:F.jsx(gQ,{})})},{path:"*",element:F.jsx(II,{to:"/"})}]}]),AQ=()=>F.jsx(t6,{router:CQ}),RQ=()=>{const t=qs(),e=dr(Nr.selectors.selectLoggedUser);return M.useEffect(()=>{e!=null&&e.uid&&t(ur.actions.loadSongs(e.uid))},[t,e==null?void 0:e.uid]),M.useEffect(()=>{b4(Ki.auth.auth,n=>{n&&(t(Nr.actions.loadUser(n)),t(Nr.actions.loadPublicUsers())),t(Nr.actions.completeFirebaseOnAuthStateChangedStatus())})},[t]),F.jsx(F.Fragment,{children:F.jsx(AQ,{})})},OQ=M.memo(RQ),eO={"user/signUpUser/rejected":{"auth/invalid-email":"Please, add a valid email","auth/email-already-in-use":"An account with that email already exists","auth/missing-password":"Please, insert a password with at least 6 characters","auth/weak-password":"Please, insert a password with at least 6 characters"},"user/signInUser/rejected":{"auth/invalid-email":"Invalid email and/or password","auth/missing-password":"Invalid email and/or password","auth/invalid-credential":"Invalid email and/or password"},"songs/saveSong/fulfilled":"Saved","songs/saveSong/rejected":{"permission-denied":"You don't have permission to save songs","auth/network-request-failed":"Network Error: Please, check your network connection"},"songs/addSong/rejected":{"permission-denied":"You don't have permission to add songs","auth/network-request-failed":"Network Error: Please, check your network connection"},"songs/deleteSong/rejected":{"permission-denied":"You don't have permission to delete songs","auth/network-request-failed":"Network Error: Please, check your network connection"}},{t:tO}=er,IQ=t=>e=>n=>{var r;if(XI(n)){const i=(r=eO[n.type])==null?void 0:r[n.error.code],o=tO(i)||n.error.message,c=tb(t.dispatch);console.error(n),c(H2(o))}else if(JI(n)){const i=eO[n.type],o=tO(i);o&&tb(t.dispatch)(z2(o))}return e(n)},xQ=LV({reducer:{songs:ur.reducer,users:Nr.reducer,growls:Ad.reducer},middleware:t=>t().concat(IQ)}),PQ=new JD.Realtime({key:"R5lNsg.3UpEtw:VxjvDyNmQ3XZvqRur_fMM7K0OX3s86a98GW_cW3DNpg",clientId:"melo-chart-frontend"});mk.createRoot(document.getElementById("root")).render(F.jsx(M.StrictMode,{children:F.jsx(Pk,{store:xQ,children:F.jsx(ck,{client:PQ,children:F.jsx(uk,{channelName:"melo-chart-song-updates",children:F.jsx(OQ,{})})})})}));export{_l as c,nO as g};
